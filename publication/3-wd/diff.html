<!DOCTYPE html>
<html lang="en-US" xmlns="http://www.w3.org/1999/xhtml" xml:lang=
"en-US">
<head>
<meta name="generator" content=
"HTML Tidy for HTML5 for Linux version 5.7.27" />
<meta charset="utf-8" />
<meta name="generator" content="ReSpec 32.1.10" />
<meta name="viewport" content=
"width=device-width, initial-scale=1, shrink-to-fit=no" />
<style>
<![CDATA[
span.example-title{text-transform:none}
:is(aside,div).example,div.illegal-example{padding:.5em;margin:1em 0;position:relative;clear:both}
div.illegal-example{color:red}
div.illegal-example p{color:#000}
:is(aside,div).example{border-left-width:.5em;border-left-style:solid;border-color:#e0cb52;background:#fcfaee}
aside.example div.example{border-left-width:.1em;border-color:#999;background:#fff}
.example pre{background-color:rgba(0,0,0,.03)}
]]>
</style>

<style>
<![CDATA[
.issue-label{text-transform:initial}
.warning>p:first-child{margin-top:0}
.warning{padding:.5em;border-left-width:.5em;border-left-style:solid}
span.warning{padding:.1em .5em .15em}
.issue.closed span.issue-number{text-decoration:line-through}
.issue.closed span.issue-number::after{content:" (Closed)";font-size:smaller}
.warning{border-color:#f11;border-width:.2em;border-style:solid;background:#fbe9e9}
.warning-title:before{content:"⚠";font-size:1.3em;float:left;padding-right:.3em;margin-top:-.3em}
li.task-list-item{list-style:none}
input.task-list-item-checkbox{margin:0 .35em .25em -1.6em;vertical-align:middle}
.issue a.respec-gh-label{padding:5px;margin:0 2px 0 2px;font-size:10px;text-transform:none;text-decoration:none;font-weight:700;border-radius:4px;position:relative;bottom:2px;border:none;display:inline-block}
]]>
</style>

<style>
<![CDATA[
dfn{cursor:pointer}
.dfn-panel{position:absolute;z-index:35;min-width:300px;max-width:500px;padding:.5em .75em;margin-top:.6em;font-family:"Helvetica Neue",sans-serif;font-size:small;background:#fff;color:#000;box-shadow:0 1em 3em -.4em rgba(0,0,0,.3),0 0 1px 1px rgba(0,0,0,.05);border-radius:2px}
.dfn-panel:not(.docked)>.caret{position:absolute;top:-9px}
.dfn-panel:not(.docked)>.caret::after,.dfn-panel:not(.docked)>.caret::before{content:"";position:absolute;border:10px solid transparent;border-top:0;border-bottom:10px solid #fff;top:0}
.dfn-panel:not(.docked)>.caret::before{border-bottom:9px solid #a2a9b1}
.dfn-panel *{margin:0}
.dfn-panel b{display:block;color:#000;margin-top:.25em}
.dfn-panel ul a[href]{color:#333}
.dfn-panel>div{display:flex}
.dfn-panel a.self-link{font-weight:700;margin-right:auto}
.dfn-panel .marker{padding:.1em;margin-left:.5em;border-radius:.2em;text-align:center;white-space:nowrap;font-size:90%;color:#040b1c}
.dfn-panel .marker.dfn-exported{background:#d1edfd;box-shadow:0 0 0 .125em #1ca5f940}
.dfn-panel .marker.idl-block{background:#8ccbf2;box-shadow:0 0 0 .125em #0670b161}
.dfn-panel a:not(:hover){text-decoration:none!important;border-bottom:none!important}
.dfn-panel a[href]:hover{border-bottom-width:1px}
.dfn-panel ul{padding:0}
.dfn-panel li{margin-left:1em}
.dfn-panel.docked{position:fixed;left:.5em;top:unset;bottom:2em;margin:0 auto;max-width:calc(100vw - .75em * 2 - .5em - .2em * 2);max-height:30vh;overflow:auto}
]]>
</style>
<title>Web of Things (WoT) Discovery</title>

<style type="text/css">
/*<![CDATA[*/

a[href].internalDFN {
        color: inherit;
        border-bottom: 1px solid #99c;
        text-decoration: none;
}
img.wot-diagram {
    max-width: 90%;
    height: auto;
}
.rfc2119-assertion {
  background-color: rgb(230,230,230)
}

/*]]>*/
</style>

<style id="respec-mainstyle">
<![CDATA[
@keyframes pop{
0%{transform:scale(1,1)}
25%{transform:scale(1.25,1.25);opacity:.75}
100%{transform:scale(1,1)}
}
:is(h1,h2,h3,h4,h5,h6,a) abbr{border:none}
dfn{font-weight:700}
a.internalDFN{color:inherit;border-bottom:1px solid #99c;text-decoration:none}
a.externalDFN{color:inherit;border-bottom:1px dotted #ccc;text-decoration:none}
a.bibref{text-decoration:none}
.respec-offending-element:target{animation:pop .25s ease-in-out 0s 1}
.respec-offending-element,a[href].respec-offending-element{text-decoration:red wavy underline}
@supports not (text-decoration:red wavy underline){
.respec-offending-element:not(pre){display:inline-block}
.respec-offending-element{background:url(data:image/gif;base64,R0lGODdhBAADAPEAANv///8AAP///wAAACwAAAAABAADAEACBZQjmIAFADs=) bottom repeat-x}
}
#references :target{background:#eaf3ff;animation:pop .4s ease-in-out 0s 1}
cite .bibref{font-style:normal}
code{color:#c63501}
th code{color:inherit}
a[href].orcid{padding-left:4px;padding-right:4px}
a[href].orcid>svg{margin-bottom:-2px}
.toc a,.tof a{text-decoration:none}
a .figno,a .secno{color:#000}
ol.tof,ul.tof{list-style:none outside none}
.caption{margin-top:.5em;font-style:italic}
table.simple{border-spacing:0;border-collapse:collapse;border-bottom:3px solid #005a9c}
.simple th{background:#005a9c;color:#fff;padding:3px 5px;text-align:left}
.simple th a{color:#fff;padding:3px 5px;text-align:left}
.simple th[scope=row]{background:inherit;color:inherit;border-top:1px solid #ddd}
.simple td{padding:3px 10px;border-top:1px solid #ddd}
.simple tr:nth-child(even){background:#f0f6ff}
.section dd>p:first-child{margin-top:0}
.section dd>p:last-child{margin-bottom:0}
.section dd{margin-bottom:1em}
.section dl.attrs dd,.section dl.eldef dd{margin-bottom:0}
#issue-summary>ul{column-count:2}
#issue-summary li{list-style:none;display:inline-block}
details.respec-tests-details{margin-left:1em;display:inline-block;vertical-align:top}
details.respec-tests-details>*{padding-right:2em}
details.respec-tests-details[open]{z-index:999999;position:absolute;border:thin solid #cad3e2;border-radius:.3em;background-color:#fff;padding-bottom:.5em}
details.respec-tests-details[open]>summary{border-bottom:thin solid #cad3e2;padding-left:1em;margin-bottom:1em;line-height:2em}
details.respec-tests-details>ul{width:100%;margin-top:-.3em}
details.respec-tests-details>li{padding-left:1em}
.self-link:hover{opacity:1;text-decoration:none;background-color:transparent}
aside.example .marker>a.self-link{color:inherit}
.header-wrapper{display:flex;align-items:baseline}
:is(h2,h3,h4,h5,h6):not(#toc>h2,#abstract>h2,#sotd>h2,.head>h2){position:relative;left:-.5em}
:is(h2,h3,h4,h5,h6):not(#toch2)+a.self-link{color:inherit;order:-1;position:relative;left:-1.1em;font-size:1rem;opacity:.5}
:is(h2,h3,h4,h5,h6)+a.self-link::before{content:"§";text-decoration:none;color:var(--heading-text)}
:is(h2,h3)+a.self-link{top:-.2em}
:is(h4,h5,h6)+a.self-link::before{color:#000}
@media (max-width:767px){
dd{margin-left:0}
}
@media print{
.removeOnSave{display:none}
}
]]>
</style>
<meta name="description" content=
"The W3C Web of Things (WoT) is intended to enable interoperability across IoT platforms and application domains. One key mechanism for accomplishing this goal is the definition and use of metadata describing the interactions an IoT device or service makes available over the network at a suitable level of abstraction. The WoT Thing Description specification satisfies this objective." />
<link rel="canonical" href=
"https://www.w3.org/TR/wot-discovery/" />
<script type="application/ld+json">
<![CDATA[
{
  "@context": [
    "http://schema.org",
    {
      "@vocab": "http://schema.org/",
      "@language": "en-US",
      "w3p": "http://www.w3.org/2001/02pd/rec54#",
      "foaf": "http://xmlns.com/foaf/0.1/",
      "datePublished": {
        "@type": "http://www.w3.org/2001/XMLSchema#date"
      },
      "inLanguage": {
        "@language": null
      },
      "isBasedOn": {
        "@type": "@id"
      },
      "license": {
        "@type": "@id"
      }
    }
  ],
  "id": "https://www.w3.org/TR/wot-discovery/",
  "type": [
    "TechArticle",
    "w3p:WD"
  ],
  "name": "Web of Things (WoT) Discovery",
  "inLanguage": "en-US",
  "license": "https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document",
  "datePublished": "2022-07-18",
  "copyrightHolder": {
    "name": "World Wide Web Consortium",
    "url": "https://www.w3.org/"
  },
  "discussionUrl": "https://github.com/w3c/wot-discovery/issues/",
  "alternativeHeadline": "",
  "isBasedOn": "https://www.w3.org/TR/2021/WD-wot-discovery-20210602/",
  "description": "The W3C Web of Things (WoT) is intended to enable\n           interoperability across IoT platforms and application\n           domains.  One key mechanism for accomplishing this goal\n           is the definition and use of metadata describing the\n           interactions an IoT device or service makes available\n           over the network at a suitable level of abstraction.  \n           The WoT Thing Description specification satisfies this objective.",
  "editor": [
    {
      "type": "Person",
      "name": "Andrea Cimmino",
      "worksFor": {
        "name": "Universidad Politécnica de Madrid",
        "url": "https://www.upm.es/"
      }
    },
    {
      "type": "Person",
      "name": "Michael McCool",
      "worksFor": {
        "name": "Intel Corp.",
        "url": "https://www.intel.com/"
      }
    },
    {
      "type": "Person",
      "name": "Farshid Tavakolizadeh",
      "worksFor": {
        "name": "Invited Expert"
      }
    },
    {
      "type": "Person",
      "name": "Kunihiko Toumura",
      "worksFor": {
        "name": "Hitachi, Ltd.",
        "url": "https://www.hitachi.com/"
      }
    }
  ],
  "contributor": [],
  "citation": [
    {
      "id": "https://www.w3.org/TR/wot-architecture11/",
      "type": "TechArticle",
      "name": "Web of Things (WoT) Architecture 1.1",
      "url": "https://www.w3.org/TR/wot-architecture11/",
      "creator": [
        {
          "name": "Michael Lagally"
        },
        {
          "name": "Ryuichi Matsukura"
        },
        {
          "name": "Toru Kawaguchi"
        },
        {
          "name": "Kunihiko Toumura"
        },
        {
          "name": "Kazuo Kajimoto"
        }
      ],
      "publisher": {
        "name": "W3C"
      }
    },
    {
      "id": "https://www.w3.org/TR/wot-thing-description11/",
      "type": "TechArticle",
      "name": "Web of Things (WoT) Thing Description 1.1",
      "url": "https://www.w3.org/TR/wot-thing-description11/",
      "creator": [
        {
          "name": "Sebastian Käbisch"
        },
        {
          "name": "Takuki Kamiya"
        },
        {
          "name": "Michael McCool"
        },
        {
          "name": "Victor Charpenay"
        }
      ],
      "publisher": {
        "name": "W3C"
      }
    },
    {
      "id": "https://www.w3.org/TR/sparql11-overview/",
      "type": "TechArticle",
      "name": "SPARQL 1.1 Overview",
      "url": "https://www.w3.org/TR/sparql11-overview/",
      "creator": [
        {
          "name": "The W3C SPARQL Working Group"
        }
      ],
      "publisher": {
        "name": "W3C"
      }
    },
    {
      "id": "https://w3c.github.io/wot-usecases/",
      "type": "TechArticle",
      "name": "Web of Things (WoT): Use Cases",
      "url": "https://w3c.github.io/wot-usecases/",
      "creator": [
        {
          "name": "Michael Lagally"
        },
        {
          "name": "Michael McCool"
        },
        {
          "name": "Ryuichi Matsukura"
        },
        {
          "name": "Tomoaki Mizushima"
        }
      ],
      "publisher": {
        "name": "W3C"
      }
    },
    {
      "id": "https://www.rfc-editor.org/rfc/rfc8615",
      "type": "TechArticle",
      "name": "Well-Known Uniform Resource Identifiers (URIs)",
      "url": "https://www.rfc-editor.org/rfc/rfc8615",
      "creator": [
        {
          "name": "M. Nottingham"
        }
      ],
      "publisher": {
        "name": "IETF"
      }
    },
    {
      "id": "https://www.rfc-editor.org/rfc/rfc6763",
      "type": "TechArticle",
      "name": "DNS-Based Service Discovery",
      "url": "https://www.rfc-editor.org/rfc/rfc6763",
      "creator": [
        {
          "name": "S. Cheshire"
        },
        {
          "name": "M. Krochmal"
        }
      ],
      "publisher": {
        "name": "IETF"
      }
    },
    {
      "id": "https://www.rfc-editor.org/rfc/rfc6762",
      "type": "TechArticle",
      "name": "Multicast DNS",
      "url": "https://www.rfc-editor.org/rfc/rfc6762",
      "creator": [
        {
          "name": "S. Cheshire"
        },
        {
          "name": "M. Krochmal"
        }
      ],
      "publisher": {
        "name": "IETF"
      }
    },
    {
      "id": "https://www.rfc-editor.org/rfc/rfc2782",
      "type": "TechArticle",
      "name": "A DNS RR for specifying the location of services (DNS SRV)",
      "url": "https://www.rfc-editor.org/rfc/rfc2782",
      "creator": [
        {
          "name": "A. Gulbrandsen"
        },
        {
          "name": "P. Vixie"
        },
        {
          "name": "L. Esibov"
        }
      ],
      "publisher": {
        "name": "IETF"
      }
    },
    {
      "id": "https://www.rfc-editor.org/rfc/rfc6690",
      "type": "TechArticle",
      "name": "Constrained RESTful Environments (CoRE) Link Format",
      "url": "https://www.rfc-editor.org/rfc/rfc6690",
      "creator": [
        {
          "name": "Z. Shelby"
        }
      ],
      "publisher": {
        "name": "IETF"
      }
    },
    {
      "id": "https://tools.ietf.org/html/draft-ietf-core-resource-directory-26",
      "type": "TechArticle",
      "name": "CoRE Resource Directory",
      "url": "https://tools.ietf.org/html/draft-ietf-core-resource-directory-26",
      "creator": [
        {
          "name": "Christian Amsüss"
        },
        {
          "name": "Zach Shelby"
        },
        {
          "name": "Michael Koster"
        },
        {
          "name": "Carsten Bormann"
        },
        {
          "name": "Peter van der Stok"
        }
      ],
      "publisher": {
        "name": "IETF"
      }
    },
    {
      "id": "https://www.w3.org/TR/did-core/",
      "type": "TechArticle",
      "name": "Decentralized Identifiers (DIDs) v1.0",
      "url": "https://www.w3.org/TR/did-core/",
      "creator": [
        {
          "name": "Manu Sporny"
        },
        {
          "name": "Amy Guy"
        },
        {
          "name": "Markus Sabadello"
        },
        {
          "name": "Drummond Reed"
        }
      ],
      "publisher": {
        "name": "W3C"
      }
    },
    {
      "id": "https://www.w3.org/TR/json-ld11/",
      "type": "TechArticle",
      "name": "JSON-LD 1.1",
      "url": "https://www.w3.org/TR/json-ld11/",
      "creator": [
        {
          "name": "Gregg Kellogg"
        },
        {
          "name": "Pierre-Antoine Champin"
        },
        {
          "name": "Dave Longley"
        }
      ],
      "publisher": {
        "name": "W3C"
      }
    },
    {
      "id": "https://www.rfc-editor.org/rfc/rfc7959",
      "type": "TechArticle",
      "name": "Block-Wise Transfers in the Constrained Application Protocol (CoAP)",
      "url": "https://www.rfc-editor.org/rfc/rfc7959",
      "creator": [
        {
          "name": "C. Bormann"
        },
        {
          "name": "Z. Shelby, Ed."
        }
      ],
      "publisher": {
        "name": "IETF"
      }
    },
    {
      "id": "https://www.rfc-editor.org/rfc/rfc4122",
      "type": "TechArticle",
      "name": "A Universally Unique IDentifier (UUID) URN Namespace",
      "url": "https://www.rfc-editor.org/rfc/rfc4122",
      "creator": [
        {
          "name": "P. Leach"
        },
        {
          "name": "M. Mealling"
        },
        {
          "name": "R. Salz"
        }
      ],
      "publisher": {
        "name": "IETF"
      }
    },
    {
      "id": "https://www.rfc-editor.org/rfc/rfc7807",
      "type": "TechArticle",
      "name": "Problem Details for HTTP APIs",
      "url": "https://www.rfc-editor.org/rfc/rfc7807",
      "creator": [
        {
          "name": "M. Nottingham"
        },
        {
          "name": "E. Wilde"
        }
      ],
      "publisher": {
        "name": "IETF"
      }
    },
    {
      "id": "https://httpwg.org/specs/rfc7231.html",
      "type": "TechArticle",
      "name": "Hypertext Transfer Protocol (HTTP/1.1): Semantics and Content",
      "url": "https://httpwg.org/specs/rfc7231.html",
      "creator": [
        {
          "name": "R. Fielding, Ed."
        },
        {
          "name": "J. Reschke, Ed."
        }
      ],
      "publisher": {
        "name": "IETF"
      }
    },
    {
      "id": "https://www.rfc-editor.org/rfc/rfc7396",
      "type": "TechArticle",
      "name": "JSON Merge Patch",
      "url": "https://www.rfc-editor.org/rfc/rfc7396",
      "creator": [
        {
          "name": "P. Hoffman"
        },
        {
          "name": "J. Snell"
        }
      ],
      "publisher": {
        "name": "IETF"
      }
    },
    {
      "id": "https://httpwg.org/specs/rfc8288.html",
      "type": "TechArticle",
      "name": "Web Linking",
      "url": "https://httpwg.org/specs/rfc8288.html",
      "creator": [
        {
          "name": "M. Nottingham"
        }
      ],
      "publisher": {
        "name": "IETF"
      }
    },
    {
      "id": "https://www.w3.org/TR/eventsource/",
      "type": "TechArticle",
      "name": "Server-Sent Events",
      "url": "https://www.w3.org/TR/eventsource/",
      "creator": [
        {
          "name": "Ian Hickson"
        }
      ],
      "publisher": {
        "name": "W3C"
      }
    },
    {
      "id": "https://www.w3.org/TR/xpath-31/",
      "type": "TechArticle",
      "name": "XML Path Language (XPath) 3.1",
      "url": "https://www.w3.org/TR/xpath-31/",
      "creator": [
        {
          "name": "Jonathan Robie"
        },
        {
          "name": "Michael Dyck"
        },
        {
          "name": "Josh Spiegel"
        }
      ],
      "publisher": {
        "name": "W3C"
      }
    },
    {
      "id": "https://owasp.org/www-project-top-ten/",
      "type": "TechArticle",
      "name": "OWASP Top Ten",
      "url": "https://owasp.org/www-project-top-ten/",
      "publisher": {
        "name": "OWASP"
      }
    },
    {
      "id": "https://www.rfc-editor.org/rfc/rfc9175",
      "type": "TechArticle",
      "name": "Constrained Application Protocol (CoAP): Echo, Request-Tag, and Token Processing",
      "url": "https://www.rfc-editor.org/rfc/rfc9175",
      "creator": [
        {
          "name": "C. Amsüss"
        },
        {
          "name": "J. Preuß Mattsson"
        },
        {
          "name": "G. Selander"
        }
      ],
      "publisher": {
        "name": "IETF"
      }
    },
    {
      "id": "https://www.rfc-editor.org/rfc/rfc9000",
      "type": "TechArticle",
      "name": "QUIC: A UDP-Based Multiplexed and Secure Transport",
      "url": "https://www.rfc-editor.org/rfc/rfc9000",
      "creator": [
        {
          "name": "J. Iyengar, Ed."
        },
        {
          "name": "M. Thomson, Ed."
        }
      ],
      "publisher": {
        "name": "IETF"
      }
    },
    {
      "id": "https://www.rfc-editor.org/rfc/rfc4279",
      "type": "TechArticle",
      "name": "Pre-Shared Key Ciphersuites for Transport Layer Security (TLS)",
      "url": "https://www.rfc-editor.org/rfc/rfc4279",
      "creator": [
        {
          "name": "P. Eronen, Ed."
        },
        {
          "name": "H. Tschofenig, Ed."
        }
      ],
      "publisher": {
        "name": "IETF"
      }
    },
    {
      "id": "https://gdpr-info.eu/art-4-gdpr/",
      "type": "TechArticle",
      "name": "General Data Protection Regulation (GDPR) Article 4 - Definitions",
      "url": "https://gdpr-info.eu/art-4-gdpr/",
      "publisher": {
        "name": "European Union (EU) and the European Economic Area (EEA)"
      }
    },
    {
      "id": "https://www.rfc-editor.org/rfc/rfc8981",
      "type": "TechArticle",
      "name": "Temporary Address Extensions for Stateless Address Autoconfiguration in IPv6",
      "url": "https://www.rfc-editor.org/rfc/rfc8981",
      "creator": [
        {
          "name": "F. Gont"
        },
        {
          "name": "S. Krishnan"
        },
        {
          "name": "T. Narten"
        },
        {
          "name": "R. Draves"
        }
      ],
      "publisher": {
        "name": "IETF"
      }
    },
    {
      "id": "https://www.rfc-editor.org/rfc/rfc6335",
      "type": "TechArticle",
      "name": "Internet Assigned Numbers Authority (IANA) Procedures for the Management of the Service Name and Transport Protocol Port Number Registry",
      "url": "https://www.rfc-editor.org/rfc/rfc6335",
      "creator": [
        {
          "name": "M. Cotton"
        },
        {
          "name": "L. Eggert"
        },
        {
          "name": "J. Touch"
        },
        {
          "name": "M. Westerlund"
        },
        {
          "name": "S. Cheshire"
        }
      ],
      "publisher": {
        "name": "IETF"
      }
    },
    {
      "id": "https://www.rfc-editor.org/rfc/rfc2119",
      "type": "TechArticle",
      "name": "Key words for use in RFCs to Indicate Requirement Levels",
      "url": "https://www.rfc-editor.org/rfc/rfc2119",
      "creator": [
        {
          "name": "S. Bradner"
        }
      ],
      "publisher": {
        "name": "IETF"
      }
    },
    {
      "id": "https://www.rfc-editor.org/rfc/rfc8174",
      "type": "TechArticle",
      "name": "Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words",
      "url": "https://www.rfc-editor.org/rfc/rfc8174",
      "creator": [
        {
          "name": "B. Leiba"
        }
      ],
      "publisher": {
        "name": "IETF"
      }
    },
    {
      "id": "https://www.rfc-editor.org/rfc/rfc8552",
      "type": "TechArticle",
      "name": "Scoped Interpretation of DNS Resource Records through \"Underscored\" Naming of Attribute Leaves",
      "url": "https://www.rfc-editor.org/rfc/rfc8552",
      "creator": [
        {
          "name": "D. Crocker"
        }
      ],
      "publisher": {
        "name": "IETF"
      }
    },
    {
      "id": "https://tools.ietf.org/html/draft-irtf-t2trg-rest-iot-06",
      "type": "TechArticle",
      "name": "RESTful Design for Internet of Things Systems",
      "url": "https://tools.ietf.org/html/draft-irtf-t2trg-rest-iot-06",
      "creator": [
        {
          "name": "Ari Keranen"
        },
        {
          "name": "Matthias Kovatsch"
        },
        {
          "name": "Klaus Hartke"
        }
      ],
      "publisher": {
        "name": "IETF"
      }
    },
    {
      "id": "https://www.w3.org/TR/ldp-paging/",
      "type": "TechArticle",
      "name": "Linked Data Platform Paging 1.0",
      "url": "https://www.w3.org/TR/ldp-paging/",
      "creator": [
        {
          "name": "Steve Speicher"
        },
        {
          "name": "John Arwe"
        },
        {
          "name": "Ashok Malhotra"
        }
      ],
      "publisher": {
        "name": "W3C"
      }
    },
    {
      "id": "https://datatracker.ietf.org/doc/html/draft-ietf-jsonpath-base",
      "type": "TechArticle",
      "name": "JSONPath: Query expressions for JSON",
      "url": "https://datatracker.ietf.org/doc/html/draft-ietf-jsonpath-base",
      "creator": [
        {
          "name": "Stefan Gössner"
        },
        {
          "name": "Glyn Normington"
        },
        {
          "name": "Carsten Bormann"
        }
      ],
      "publisher": {
        "name": "IETF"
      }
    },
    {
      "id": "https://www.w3.org/TR/wot-security/",
      "type": "TechArticle",
      "name": "Web of Things (WoT) Security and Privacy Guidelines",
      "url": "https://www.w3.org/TR/wot-security/",
      "creator": [
        {
          "name": "Elena Reshetova"
        },
        {
          "name": "Michael McCool"
        }
      ],
      "publisher": {
        "name": "W3C"
      }
    },
    {
      "id": "https://httpwg.org/specs/rfc7230.html",
      "type": "TechArticle",
      "name": "Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing",
      "url": "https://httpwg.org/specs/rfc7230.html",
      "creator": [
        {
          "name": "R. Fielding, Ed."
        },
        {
          "name": "J. Reschke, Ed."
        }
      ],
      "publisher": {
        "name": "IETF"
      }
    },
    {
      "id": "https://httpwg.org/specs/rfc7540.html",
      "type": "TechArticle",
      "name": "Hypertext Transfer Protocol Version 2 (HTTP/2)",
      "url": "https://httpwg.org/specs/rfc7540.html",
      "creator": [
        {
          "name": "M. Belshe"
        },
        {
          "name": "R. Peon"
        },
        {
          "name": "M. Thomson, Ed."
        }
      ],
      "publisher": {
        "name": "IETF"
      }
    },
    {
      "id": "https://www.rfc-editor.org/rfc/rfc8323",
      "type": "TechArticle",
      "name": "CoAP (Constrained Application Protocol) over TCP, TLS, and WebSockets",
      "url": "https://www.rfc-editor.org/rfc/rfc8323",
      "creator": [
        {
          "name": "C. Bormann"
        },
        {
          "name": "S. Lemay"
        },
        {
          "name": "H. Tschofenig"
        },
        {
          "name": "K. Hartke"
        },
        {
          "name": "B. Silverajan"
        },
        {
          "name": "B. Raymor, Ed."
        }
      ],
      "publisher": {
        "name": "IETF"
      }
    }
  ]
}
]]>
</script>
<style>
<![CDATA[
.hljs{display:block;overflow-x:auto;padding:.5em;color:#383a42;background:#fafafa}
.hljs-comment,.hljs-quote{color:#717277;font-style:italic}
.hljs-doctag,.hljs-formula,.hljs-keyword{color:#a626a4}
.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#ca4706;font-weight:700}
.hljs-literal{color:#0b76c5}
.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#42803c}
.hljs-built_in,.hljs-class .hljs-title{color:#9a6a01}
.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#986801}
.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#336ae3}
.hljs-emphasis{font-style:italic}
.hljs-strong{font-weight:700}
.hljs-link{text-decoration:underline}
]]>
</style>

<style>
<![CDATA[
var{position:relative;cursor:pointer}
var[data-type]::after,var[data-type]::before{position:absolute;left:50%;top:-6px;opacity:0;transition:opacity .4s;pointer-events:none}
var[data-type]::before{content:"";transform:translateX(-50%);border-width:4px 6px 0 6px;border-style:solid;border-color:transparent;border-top-color:#000}
var[data-type]::after{content:attr(data-type);transform:translateX(-50%) translateY(-100%);background:#000;text-align:center;font-family:"Dank Mono","Fira Code",monospace;font-style:normal;padding:6px;border-radius:3px;color:#daca88;text-indent:0;font-weight:400}
var[data-type]:hover::after,var[data-type]:hover::before{opacity:1}
]]>
</style>

<script id="initialUserConfig" type="application/json">
<![CDATA[
{
  "lint": {
    "check-punctuation": true,
    "local-refs-exist": true,
    "no-http-props": true,
    "no-headingless-sections": true,
    "no-unused-dfns": false
  },
  "doJsonLd": true,
  "specStatus": "WD",
  "implementationReportURI": "https://w3c.github.io/wot-discovery/testing/report.html",
  "shortName": "wot-discovery",
  "copyrightStart": 2017,
  "group": "wg/wot",
  "wgPublicList": "public-wot-wg",
  "github": {
    "repoURL": "https://github.com/w3c/wot-discovery",
    "branch": "main"
  },
  "previousPublishDate": "2021-06-02",
  "previousMaturity": "FPWD",
  "editors": [
    {
      "name": "Andrea Cimmino",
      "w3cid": "115672",
      "company": "Universidad Politécnica de Madrid",
      "companyURL": "https://www.upm.es/"
    },
    {
      "name": "Michael McCool",
      "w3cid": "93137",
      "company": "Intel Corp.",
      "companyURL": "https://www.intel.com/"
    },
    {
      "name": "Farshid Tavakolizadeh",
      "w3cid": "122520",
      "company": "Invited Expert"
    },
    {
      "name": "Kunihiko Toumura",
      "w3cid": "83488",
      "company": "Hitachi, Ltd.",
      "companyURL": "https://www.hitachi.com/"
    }
  ],
  "formerEditors": [
    {
      "name": "Farshid Tavakolizadeh",
      "w3cid": "122520",
      "company": "Fraunhofer-Gesellschaft",
      "companyURL": "https://www.fraunhofer.de/",
      "retiredDate": "2021-09-30"
    }
  ],
  "otherLinks": [
    {
      "key": "Contributors",
      "data": [
        {
          "value": "In the GitHub repository",
          "href": "https://github.com/w3c/wot-discovery/graphs/contributors"
        }
      ]
    }
  ],
  "localBiblio": {
    "GDPR-Defs": {
      "title": "General Data Protection Regulation (GDPR) Article 4 - Definitions",
      "href": "https://gdpr-info.eu/art-4-gdpr/",
      "publisher": "European Union (EU) and the European Economic Area (EEA)",
      "id": "gdpr-defs"
    },
    "OWASP-Top-10": {
      "title": "OWASP Top Ten",
      "href": "https://owasp.org/www-project-top-ten/",
      "publisher": "OWASP",
      "id": "owasp-top-10"
    },
    "REST-IOT": {
      "title": "RESTful Design for Internet of Things Systems",
      "href": "https://tools.ietf.org/html/draft-irtf-t2trg-rest-iot-06",
      "authors": [
        "Ari Keranen",
        "Matthias Kovatsch",
        "Klaus Hartke"
      ],
      "publisher": "IETF",
      "date": "11 May 2020",
      "id": "rest-iot"
    },
    "CoRE-RD": {
      "title": "CoRE Resource Directory",
      "href": "https://tools.ietf.org/html/draft-ietf-core-resource-directory-26",
      "authors": [
        "Christian Amsüss",
        "Zach Shelby",
        "Michael Koster",
        "Carsten Bormann",
        "Peter van der Stok"
      ],
      "publisher": "IETF",
      "date": "2 November 2020",
      "id": "core-rd"
    },
    "JSONPATH": {
      "title": "JSONPath: Query expressions for JSON",
      "href": "https://datatracker.ietf.org/doc/html/draft-ietf-jsonpath-base",
      "authors": [
        "Stefan Gössner",
        "Glyn Normington",
        "Carsten Bormann"
      ],
      "publisher": "IETF",
      "status": "DRAFT",
      "id": "jsonpath"
    },
    "wot-usecases": {
      "title": "Web of Things (WoT): Use Cases",
      "href": "https://w3c.github.io/wot-usecases/",
      "authors": [
        "Michael Lagally",
        "Michael McCool",
        "Ryuichi Matsukura",
        "Tomoaki Mizushima"
      ],
      "publisher": "W3C",
      "date": "15 October 2020",
      "status": "Editor's Draft",
      "id": "wot-usecases"
    }
  },
  "publishISODate": "2022-07-18T00:00:00.000Z",
  "generatedSubtitle": "W3C Working Draft 18 July 2022"
}
]]>
</script>
<link rel="stylesheet" href=
"https://www.w3.org/StyleSheets/TR/2021/W3C-WD" />
<style type='text/css'>
.diff-old-a {
  font-size: smaller;
  color: red;
}

.diff-new { background-color: yellow; }
.diff-chg { background-color: lime; }
.diff-new:before,
.diff-new:after
    { content: "\2191" }
.diff-chg:before, .diff-chg:after
    { content: "\2195" }
.diff-old { text-decoration: line-through; background-color: #FBB; }
.diff-old:before,
.diff-old:after
    { content: "\2193" }
:focus { border: thin red solid}
</style>
</head>
<body class="h-entry toc-inline">
<div class="head">
<p class="logos">
<a class="logo" href= "https://www.w3.org/">
<img crossorigin="" alt="W3C" height="48" src="https://www.w3.org/StyleSheets/TR/2021/logos/W3C" width= "72" />
</a>
</p>
<h1 id="title" class="title">
Web
of
Things
(WoT)
<del class="diff-old">Thing
Description
1.1
</del>
<ins class="diff-chg">Discovery
</ins>
</h1>
<p id="w3c-state">
<a href= "https://www.w3.org/standards/types#WD">
W3C
Working
Draft
</a>
<del class="diff-old">11
March
</del>
<time class="dt-published" datetime="2022-07-18">
<ins class="diff-chg">18
July
</ins>
2022
</time>
</p>
<details open="">
<summary>
More
details
about
this
document
</summary>
<dl>
<dt>
This
version:
</dt>
<dd>
<del class="diff-old">https://www.w3.org/TR/2022/WD-wot-thing-description11-20220311/
</del>
<a class="u-url" href= "https://www.w3.org/TR/2022/WD-wot-discovery-20220718/">
<ins class="diff-chg">https://www.w3.org/TR/2022/WD-wot-discovery-20220718/
</ins>
</a>
</dd>
<dt>
Latest
published
version:
</dt>
<dd>
<del class="diff-old">https://www.w3.org/TR/wot-thing-description11/
</del>
<a href= "https://www.w3.org/TR/wot-discovery/">
<ins class="diff-chg">https://www.w3.org/TR/wot-discovery/
</ins>
</a>
</dd>
<dt>
Latest
editor's
draft:
</dt>
<dd>
<del class="diff-old">https://w3c.github.io/wot-thing-description/
</del>
<a href= "https://w3c.github.io/wot-discovery/">
<ins class="diff-chg">https://w3c.github.io/wot-discovery/
</ins>
</a>
</dd>
<dt>
History:
</dt>
<dd>
<del class="diff-old">https://www.w3.org/standards/history/wot-thing-description11
</del>
<a href= "https://www.w3.org/standards/history/wot-discovery">
<ins class="diff-chg">https://www.w3.org/standards/history/wot-discovery
</ins>
</a>
</dd>
<dd>
<a href= "https://github.com/w3c/wot-discovery/commits/main">
Commit
history
</a>
</dd>
<dt>
Implementation
report:
</dt>
<dd>
<del class="diff-old">https://w3c.github.io/wot-thing-description/testing/report11.html
</del>
<a href= "https://w3c.github.io/wot-discovery/testing/report.html">
<ins class="diff-chg">https://w3c.github.io/wot-discovery/testing/report.html
</ins>
</a>
</dd>
<dt>
Editors:
</dt>
<dd class="editor p-author h-card vcard" data-editor-id="115672">
<span class="p-name fn">
<del class="diff-old">Sebastian
Kaebisch
</del>
<ins class="diff-chg">Andrea
Cimmino
</ins>
</span>
(
<del class="diff-old">Siemens
AG
</del>
<a class= "p-org org h-org" href="https://www.upm.es/">
<ins class="diff-chg">Universidad
Politécnica
de
Madrid
</ins>
</a>
)
</dd>
<dd class="editor p-author h-card vcard" data-editor-id="93137">
<span class="p-name fn">
<del class="diff-old">Takuki
Kamiya
</del>
<ins class="diff-chg">Michael
McCool
</ins>
</span>
(
<del class="diff-old">Fujitsu
Research
of
America
</del>
<a class= "p-org org h-org" href="https://www.intel.com/">
<ins class="diff-chg">Intel
Corp.
</ins>
</a>
)
</dd>
<dd class="editor p-author h-card vcard" data-editor-id="122520">
<span class="p-name fn">
<del class="diff-old">Michael
McCool
</del>
<ins class="diff-chg">Farshid
Tavakolizadeh
</ins>
</span>
(
<del class="diff-old">Intel
</del>
<span class= "p-org org h-org">
<ins class="diff-chg">Invited
Expert
</ins></span><ins class="diff-chg">
)
</ins></dd><dd class="editor p-author h-card vcard" data-editor-id="83488"><span class="p-name fn"><ins class="diff-chg">
Kunihiko
Toumura
</ins></span><ins class="diff-chg">
(
</ins><a class= "p-org org h-org" href="https://www.hitachi.com/"><ins class="diff-chg">
Hitachi,
Ltd.
</ins>
</a>
)
</dd>
<dt>
<ins class="diff-chg">Former
editor:
</ins></dt><dd class="editor p-author h-card vcard" data-editor-id="122520">
<span class="p-name fn">
<del class="diff-old">Victor
Charpenay
</del>
<ins class="diff-chg">Farshid
Tavakolizadeh
</ins>
</span>
(
<del class="diff-old">Siemens
AG
</del>
<a class= "p-org org h-org" href= "https://www.fraunhofer.de/">
<ins class="diff-chg">Fraunhofer-Gesellschaft
</ins>
</a>
)
<ins class="diff-new">-
Until
</ins><time datetime="2021-09-30"><ins class="diff-new">
30
September
2021
</ins></time>
</dd>
<dt>
Feedback:
</dt>
<dd>
<a href="https://github.com/w3c/wot-discovery/">
GitHub
<del class="diff-old">w3c/wot-thing-description
</del>
<ins class="diff-chg">w3c/wot-discovery
</ins>
</a>
(
<a href= "https://github.com/w3c/wot-discovery/pulls/">
pull
requests
</a>,
<a href= "https://github.com/w3c/wot-discovery/issues/new/choose">
new
issue
</a>,
<a href= "https://github.com/w3c/wot-discovery/issues/">
open
issues
</a>
)
</dd>
<dd>
<a href= "mailto:public-wot-wg@w3.org?subject=%5Bwot-discovery%5D%20YOUR%20TOPIC%20HERE">
public-wot-wg@w3.org
</a>
with
subject
line
<kbd>
<del class="diff-old">[wot-thing-description11]
</del>
<ins class="diff-chg">[wot-discovery]
</ins>
<em>
…
message
topic
…
</em>
</kbd>
(
<a rel="discussion" href= "https://lists.w3.org/Archives/Public/public-wot-wg">
archives
</a>
)
</dd>
<dt>
Contributors
</dt>
<dd>
<a href= "https://github.com/w3c/wot-discovery/graphs/contributors">
In
the
GitHub
repository
</a>
</dd>
<del class="diff-old">Repository
We
are
on
GitHub
File
a
bug
</del>
</dl>
</details>
<p class="copyright">
<a href= "https://www.w3.org/Consortium/Legal/ipr-notice#Copyright">
Copyright
</a>
©
2017-2022
<a href="https://www.w3.org/">
<abbr title= "World Wide Web Consortium">
W3C
</abbr>
</a>
<sup>
®
</sup>
(
<a href= "https://www.csail.mit.edu/">
<abbr title= "Massachusetts Institute of Technology">
MIT
</abbr>
</a>,
<a href= "https://www.ercim.eu/">
<abbr title= "European Research Consortium for Informatics and Mathematics">
ERCIM
</abbr>
</a>,
<a href="https://www.keio.ac.jp/">
Keio
</a>,
<a href= "https://ev.buaa.edu.cn/">
Beihang
</a>
).
W3C
<a href= "https://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">
liability
</a>,
<a href= "https://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">
trademark
</a>
and
<a rel="license" href= "https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document" title="W3C Software and Document Notice and License">
permissive
document
license
</a>
rules
apply.
</p>
<hr title="Separator for header" />
</div>
<section id="abstract" class="introductory">
<h2>
Abstract
</h2>
<p>
<del class="diff-old">This
document
describes
a
formal
information
model
and
a
common
representation
for
a
</del>
<ins class="diff-chg">The
</ins><abbr title="World Wide Web Consortium"><ins class="diff-chg">
W3C
</ins></abbr>
Web
of
Things
(WoT)
<del class="diff-old">Thing
Description
1.1.
A
Thing
Description
describes
</del>
<ins class="diff-chg">is
intended
to
enable
interoperability
across
IoT
platforms
and
application
domains.
One
key
mechanism
for
accomplishing
this
goal
is
</ins>
the
<del class="diff-old">metadata
</del>
<ins class="diff-chg">definition
</ins>
and
<del class="diff-old">interfaces
</del>
<ins class="diff-chg">use
</ins>
of
<del class="diff-old">Things
,
where
a
Thing
is
</del>
<ins class="diff-chg">metadata
describing
the
interactions
</ins>
an
<del class="diff-old">abstraction
</del>
<ins class="diff-chg">IoT
device
or
service
makes
available
over
the
network
at
a
suitable
level
</ins>
of
<ins class="diff-new">abstraction.
The
WoT
Thing
Description
specification
satisfies
this
objective.
</ins></p><p><ins class="diff-new">
However,
in
order
to
use
</ins>
a
<del class="diff-old">physical
or
virtual
entity
that
provides
interactions
</del>
<ins class="diff-chg">Thing
its
Thing
Description
first
has
</ins>
to
<del class="diff-old">and
participates
</del>
<ins class="diff-chg">be
obtained.
The
</ins><em><ins class="diff-chg">
WoT
Discovery
</ins></em><ins class="diff-chg">
process
described
</ins>
in
<ins class="diff-new">this
document
addresses
this
problem.
WoT
Discovery
needs
to
support
</ins>
the
<del class="diff-old">Web
</del>
<ins class="diff-chg">distribution
</ins>
of
<del class="diff-old">Things.
</del>
<ins class="diff-chg">WoT
</ins>
Thing
Descriptions
<del class="diff-old">provide
</del>
<ins class="diff-chg">in
</ins>
a
<del class="diff-old">set
</del>
<ins class="diff-chg">variety
</ins>
of
<del class="diff-old">interactions
based
</del>
<ins class="diff-chg">use
cases.
This
includes
ad-hoc
and
engineered
systems;
during
development
and
at
runtime;
and
</ins>
on
<del class="diff-old">a
small
vocabulary
that
makes
it
possible
</del>
both
<del class="diff-old">to
integrate
diverse
devices
</del>
<ins class="diff-chg">local
</ins>
and
<ins class="diff-new">global
networks.
The
process
also
needs
</ins>
to
<del class="diff-old">allow
diverse
applications
</del>
<ins class="diff-chg">work
with
existing
discovery
mechanisms,
be
secure,
protect
private
information,
and
be
able
</ins>
to
<del class="diff-old">interoperate.
Thing
Descriptions,
by
default,
are
encoded
in
a
JSON
format
that
also
allows
JSON-LD
processing.
The
latter
provides
a
powerful
foundation
</del>
<ins class="diff-chg">efficiently
handle
updates
</ins>
to
<del class="diff-old">represent
knowledge
about
Things
in
a
machine-understandable
way.
A
</del>
<ins class="diff-chg">WoT
</ins>
Thing
<del class="diff-old">Description
instance
can
be
hosted
by
</del>
<ins class="diff-chg">Descriptions
and
</ins>
the
<del class="diff-old">Thing
itself
or
hosted
externally
when
a
Thing
has
resource
restrictions
(e.g.,
limited
memory
space)
or
when
a
Web
</del>
<ins class="diff-chg">dynamic
and
diverse
nature
</ins>
of
<del class="diff-old">Things-compatible
legacy
device
is
retrofitted
with
a
Thing
Description.
Furthermore,
this
document
introduces
</del>
the
<del class="diff-old">Thing
Model,
which
allows
authors
</del>
<ins class="diff-chg">IoT
ecosystem.
</ins></p><p><ins class="diff-chg">
The
WoT
Discovery
process
is
divided
into
two
phases,
Introduction,
and
Exploration.
The
Introduction
phase
leverages
existing
discovery
mechanisms
but
does
not
directly
expose
metadata;
they
are
simply
used
</ins>
to
<del class="diff-old">describe
</del>
<ins class="diff-chg">discover
Exploration
services,
which
provide
metadata
but
</ins>
only
<del class="diff-old">the
model
or
class
of
an
Internet
of
Thing
(IoT)
entity.
Thing
Models
can
be
seen
as
a
template
</del>
<ins class="diff-chg">after
secure
authentication
and
authorization.
This
document
normatively
defines
two
Exploration
services:
</ins>
for
<ins class="diff-new">distributing
a
single
WoT
</ins>
Thing
Description
<del class="diff-old">instances,
but
with
reduced
constraints
such
</del>
<ins class="diff-chg">from
a
regular
web
service,
including
</ins>
as
<del class="diff-old">no
or
few
requirements
for
specific
communication
metadata.
This
specification
describes
</del>
a
<del class="diff-old">superset
of
the
features
defined
in
</del>
<ins class="diff-chg">special
case
self-description;
and
a
searchable
WoT
</ins>
Thing
Description
<del class="diff-old">1.0
[
WOT-THING-DESCRIPTION
].
Unless
otherwise
specified,
documents
created
with
version
1.0
</del>
<ins class="diff-chg">Directory
service
for
collections
</ins>
of
<del class="diff-old">this
specification
remain
compatible
with
</del>
Thing
<del class="diff-old">Description
1.1.
</del>
<ins class="diff-chg">Descriptions.
A
variety
of
Introduction
services
are
also
described
and
where
necessary
normative
definitions
are
given
to
support
them.
</ins>
</p>
</section>
<section id="sotd" class="introductory">
<h2>
Status
of
This
Document
</h2>
<p>
<em>
This
section
describes
the
status
of
this
document
at
the
time
of
its
publication.
A
list
of
current
<abbr title= "World Wide Web Consortium">
W3C
</abbr>
publications
and
the
latest
revision
of
this
technical
report
can
be
found
in
the
<a href= "https://www.w3.org/TR/">
<abbr title= "World Wide Web Consortium">
W3C
</abbr>
technical
reports
index
</a>
at
https://www.w3.org/TR/.
</em>
</p>
<p>
This
<ins class="diff-new">is
the
second
Working
Draft
published
for
this
document,
and
is
expected
to
be
the
final
draft
before
CR
transition.
</ins></p><p><ins class="diff-new">
This
</ins>
document
was
published
by
the
<a href= "https://www.w3.org/groups/wg/wot">
Web
of
Things
Working
Group
</a>
as
a
Working
Draft
using
the
<a href= "https://www.w3.org/2021/Process-20211102/#recs-and-notes">
Recommendation
track
</a>.
</p>
<p>
Publication
as
a
Working
Draft
does
not
imply
endorsement
by
<abbr title="World Wide Web Consortium">
W3C
</abbr>
and
its
Members.
</p>
<p>
This
is
a
draft
document
and
may
be
updated,
replaced
or
obsoleted
by
other
documents
at
any
time.
It
is
inappropriate
to
cite
this
document
as
other
than
work
in
progress.
</p>
<p>
This
document
was
produced
by
a
group
operating
under
the
<a href="https://www.w3.org/Consortium/Patent-Policy-20170801/">
1
August
2017
<abbr title="World Wide Web Consortium">
W3C
</abbr>
Patent
Policy
</a>.
<abbr title= "World Wide Web Consortium">
W3C
</abbr>
maintains
a
<a rel= "disclosure" href="https://www.w3.org/groups/wg/wot/ipr">
public
list
of
any
patent
disclosures
</a>
made
in
connection
with
the
deliverables
of
the
group;
that
page
also
includes
instructions
for
disclosing
a
patent.
An
individual
who
has
actual
knowledge
of
a
patent
which
the
individual
believes
contains
<a href= "https://www.w3.org/Consortium/Patent-Policy-20170801/#def-essential">
Essential
Claim(s)
</a>
must
disclose
the
information
in
accordance
with
<a href= "https://www.w3.org/Consortium/Patent-Policy-20170801/#sec-Disclosure">
section
6
of
the
<abbr title="World Wide Web Consortium">
W3C
</abbr>
Patent
Policy
</a>.
</p>
<p>
This
document
is
governed
by
the
<a id="w3c_process_revision" href="https://www.w3.org/2021/Process-20211102/">
2
November
2021
<abbr title="World Wide Web Consortium">
W3C
</abbr>
Process
Document
</a>.
</p>
</section>
<nav id="toc">
<h2 class="introductory" id="table-of-contents">
Table
of
Contents
</h2>
<ol class="toc">
<li class="tocline">
<a class="tocxref" href= "#abstract">
Abstract
</a>
</li>
<li class="tocline">
<a class="tocxref" href="#sotd">
Status
of
This
Document
</a>
</li>
<li class="tocline">
<a class="tocxref" href= "#introduction">
<bdi class="secno">
1.
</bdi>
Introduction
</a>
<del class="diff-old">1.1
Thing
Description
</del>
</li>
<li class="tocline">
<del class="diff-old">1.2
Thing
Model
</del>
<a class="tocxref" href= "#conformance">
<bdi class="secno">
2.
</bdi>
Conformance
</a>
</li>
<li class="tocline">
<a class="tocxref" href= "#terminology">
<bdi class="secno">
3.
</bdi>
Terminology
</a>
</li>
<li class="tocline">
<a class="tocxref" href= "#architecture">
<bdi class="secno">
4.
</bdi>
<del class="diff-old">Namespaces
</del>
<ins class="diff-chg">Architecture
</ins>
</a>
</li>
<li class="tocline">
<a class="tocxref" href= "#discoverer-process">
<bdi class="secno">
5.
</bdi>
<del class="diff-old">TD
Information
Model
5.1
Overview
5.2
Preliminaries
</del>
<ins class="diff-chg">Discoverer
Process
</ins>
</a>
</li>
<li class="tocline">
<del class="diff-old">5.3
Class
Definitions
</del>
<a class="tocxref" href= "#introduction-mech">
<bdi class="secno">
<del class="diff-old">5.3.1
</del>
<ins class="diff-chg">6.
</ins>
</bdi>
<del class="diff-old">Core
Vocabulary
Definitions
</del>
<ins class="diff-chg">Introduction
Mechanisms
</ins>
</a>
<ol class="toc">
<li class="tocline">
<del class="diff-old">5.3.1.1
Thing
5.3.1.2
InteractionAffordance
</del>
<a class="tocxref" href= "#introduction-direct">
<bdi class="secno">
<del class="diff-old">5.3.1.3
</del>
<ins class="diff-chg">6.1
</ins>
</bdi>
<del class="diff-old">PropertyAffordance
</del>
<ins class="diff-chg">Direct
</ins>
</a>
</li>
<li class="tocline">
<a class="tocxref" href= "#introduction-well-known">
<bdi class="secno">
<del class="diff-old">5.3.1.4
</del>
<ins class="diff-chg">6.2
</ins>
</bdi>
<del class="diff-old">ActionAffordance
</del>
<ins class="diff-chg">Well-Known
URIs
</ins>
</a>
</li>
<li class="tocline">
<a class="tocxref" href= "#introduction-dns-sd-sec">
<bdi class="secno">
<del class="diff-old">5.3.1.5
</del>
<ins class="diff-chg">6.3
</ins>
</bdi>
<del class="diff-old">EventAffordance
</del>
<ins class="diff-chg">DNS-Based
Service
Discovery
</ins>
</a>
</li>
<li class="tocline">
<a class="tocxref" href= "#introduction-core-rd-sec">
<bdi class="secno">
<del class="diff-old">5.3.1.6
</del>
<ins class="diff-chg">6.4
</ins>
</bdi>
<del class="diff-old">VersionInfo
</del>
<ins class="diff-chg">CoRE
Link
Format
and
CoRE
Resource
Directory
</ins>
</a>
</li>
<li class="tocline">
<a class="tocxref" href= "#introduction-did-sec">
<bdi class="secno">
<del class="diff-old">5.3.1.7
</del>
<ins class="diff-chg">6.5
</ins>
</bdi>
<del class="diff-old">MultiLanguage
</del>
<ins class="diff-chg">DID
Documents
</ins>
</a>
</li>
</ol>
</li>
<li class="tocline">
<del class="diff-old">5.3.2
Data
Schema
Vocabulary
Definitions
5.3.2.1
DataSchema
5.3.2.2
ArraySchema
5.3.2.3
BooleanSchema
5.3.2.4
NumberSchema
5.3.2.5
IntegerSchema
5.3.2.6
ObjectSchema
5.3.2.7
StringSchema
</del>
<a class="tocxref" href= "#exploration-mech">
<bdi class="secno">
<del class="diff-old">5.3.2.8
NullSchema
5.3.3
</del>
<ins class="diff-chg">7.
</ins>
</bdi>
<del class="diff-old">Security
Vocabulary
Definitions
</del>
<ins class="diff-chg">Exploration
Mechanisms
</ins>
</a>
<ol class="toc">
<li class="tocline">
<del class="diff-old">5.3.3.1
SecurityScheme
5.3.3.2
NoSecurityScheme
5.3.3.3
ComboSecurityScheme
5.3.3.4
BasicSecurityScheme
5.3.3.5
DigestSecurityScheme
5.3.3.6
APIKeySecurityScheme
5.3.3.7
BearerSecurityScheme
</del>
<a class="tocxref" href= "#exploration-overview">
<bdi class="secno">
<del class="diff-old">5.3.3.8
</del>
<ins class="diff-chg">7.1
</ins>
</bdi>
<del class="diff-old">PSKSecurityScheme
</del>
<ins class="diff-chg">Overview
</ins>
</a>
<ol class="toc">
<li class="tocline">
<a class="tocxref" href= "#exploration-ontology">
<bdi class="secno">
<del class="diff-old">5.3.3.9
OAuth2SecurityScheme
5.3.4
</del>
<ins class="diff-chg">7.1.1
</ins>
</bdi>
<del class="diff-old">Hypermedia
Controls
Vocabulary
Definitions
</del>
<ins class="diff-chg">Ontology
</ins>
</a>
<ol class="toc">
<li class="tocline">
<del class="diff-old">5.3.4.1
Link
</del>
<a class="tocxref" href= "#exploration-td-type-thingdirectory">
<bdi class= "secno">
<del class="diff-old">5.3.4.2
Form
5.3.4.3
</del>
<ins class="diff-chg">7.1.1.1
</ins>
</bdi>
<code>
<del class="diff-old">ExpectedResponse
</del>
<ins class="diff-chg">ThingDirectory
</ins>
</code>
</a>
</li>
<li class="tocline">
<a class="tocxref" href= "#exploration-td-type-thinglink">
<bdi class="secno">
<del class="diff-old">5.3.4.4
</del>
<ins class="diff-chg">7.1.1.2
</ins>
</bdi>
<code>
<del class="diff-old">AdditionalExpectedResponse
</del>
<ins class="diff-chg">ThingLink
</ins>
</code>
</a>
</li>
</ol>
</li>
<li class="tocline">
<a class="tocxref" href= "#exploration-secboot">
<bdi class="secno">
<del class="diff-old">5.4
</del>
<ins class="diff-chg">7.1.2
</ins>
</bdi>
<del class="diff-old">Default
Value
Definitions
</del>
<ins class="diff-chg">Security
Bootstrapping
</ins>
</a>
</li>
</ol>
</li>
<li class="tocline">
<del class="diff-old">6.
TD
Representation
Format
</del>
<a class="tocxref" href= "#exploration-server">
<bdi class="secno">
<del class="diff-old">6.1
</del>
<ins class="diff-chg">7.2
</ins>
</bdi>
<del class="diff-old">Mapping
to
JSON
Types
</del>
<ins class="diff-chg">Thing
Description
Server
</ins>
</a>
</li>
<li class="tocline">
<a class="tocxref" href= "#exploration-directory">
<bdi class="secno">
<del class="diff-old">6.2
</del>
<ins class="diff-chg">7.3
</ins>
</bdi>
<del class="diff-old">Omitting
Default
Values
</del>
<ins class="diff-chg">Thing
Description
Directory
</ins>
</a>
<ol class="toc">
<li class="tocline">
<a class="tocxref" href= "#exploration-directory-info">
<bdi class="secno">
<del class="diff-old">6.3
</del>
<ins class="diff-chg">7.3.1
</ins>
</bdi>
Information
Model
<del class="diff-old">Serialization
</del>
</a>
<ol class="toc">
<li class="tocline">
<del class="diff-old">6.3.1
Thing
Root
Object
</del>
<a class="tocxref" href= "#exploration-directory-registration-info">
<bdi class= "secno">
<del class="diff-old">6.3.2
Human-Readable
Metadata
6.3.3
version
6.3.4
securityDefinitions
and
security
6.3.4.1
Multiple
Security
Definitions
6.3.4.2
security
in
Forms
6.3.4.3
</del>
<ins class="diff-chg">7.3.1.1
</ins>
</bdi>
<del class="diff-old">ComboSecurityScheme
</del>
<ins class="diff-chg">Registration
Information
</ins>
</a>
</li>
<li class="tocline">
<a class="tocxref" href= "#exploration-directory-registration-expiry">
<del class="diff-old">6.3.4.4
</del>
<bdi class= "secno">
<ins class="diff-chg">7.3.1.2
</ins>
</bdi>
<del class="diff-old">OAuth
2.0
usage
</del>
<ins class="diff-chg">Registration
Expiry
</ins>
</a>
</li>
<li class="tocline">
<a class="tocxref" href= "#exploration-directory-anonymous-td">
<del class="diff-old">6.3.4.5
</del>
<bdi class= "secno">
<ins class="diff-chg">7.3.1.3
</ins>
</bdi>
<del class="diff-old">API
key
usage
</del>
<ins class="diff-chg">Anonymous
TD
Identifiers
</ins>
</a>
</li>
</ol>
</li>
<li class="tocline">
<del class="diff-old">6.3.5
properties
6.3.6
actions
6.3.7
events
6.3.8
links
</del>
<a class="tocxref" href= "#exploration-directory-api">
<bdi class="secno">
<del class="diff-old">6.3.9
</del>
<ins class="diff-chg">7.3.2
</ins>
</bdi>
<del class="diff-old">forms
</del>
<ins class="diff-chg">Directory
Service
API
</ins>
</a>
<ol class="toc">
<li class="tocline">
<del class="diff-old">6.3.9.1
uriVariables
6.3.9.2
contentType
</del>
<a class="tocxref" href= "#exploration-directory-api-things">
<del class="diff-old">6.3.9.3
</del>
<bdi class= "secno">
<ins class="diff-chg">7.3.2.1
</ins>
</bdi>
<del class="diff-old">response
</del>
<ins class="diff-chg">Things
API
</ins>
</a>
<ol class="toc">
<li class="tocline">
<a class="tocxref" href= "#exploration-directory-api-things-creation">
<bdi class= "secno">
<del class="diff-old">6.3.9.4
</del>
<ins class="diff-chg">7.3.2.1.1
</ins>
</bdi>
<del class="diff-old">contentMediaType
and
contentEncoding
</del>
<ins class="diff-chg">Creation
</ins>
</a>
</li>
<li class="tocline">
<a class="tocxref" href= "#exploration-directory-api-things-retrieval">
<del class="diff-old">6.3.9.5
</del>
<bdi class= "secno">
<ins class="diff-chg">7.3.2.1.2
</ins>
</bdi>
<del class="diff-old">Top
level
forms
</del>
<ins class="diff-chg">Retrieval
</ins>
</a>
</li>
<li class="tocline">
<a class="tocxref" href= "#exploration-directory-api-things-update">
<del class="diff-old">6.3.10
</del>
<bdi class= "secno">
<ins class="diff-chg">7.3.2.1.3
</ins>
</bdi>
<del class="diff-old">Data
Schemas
</del>
<ins class="diff-chg">Update
</ins>
</a>
</li>
<li class="tocline">
<a class="tocxref" href= "#exploration-directory-api-things-deletion">
<del class="diff-old">6.4
</del>
<bdi class= "secno">
<ins class="diff-chg">7.3.2.1.4
</ins>
</bdi>
<del class="diff-old">Identification
</del>
<ins class="diff-chg">Deletion
</ins>
</a>
</li>
<li class="tocline">
<del class="diff-old">6.5
Validation
</del>
<a class="tocxref" href= "#exploration-directory-api-things-listing">
<bdi class= "secno">
<del class="diff-old">6.5.1
</del>
<ins class="diff-chg">7.3.2.1.5
</ins>
</bdi>
<del class="diff-old">Minimal
Validation
</del>
<ins class="diff-chg">Listing
</ins>
</a>
</li>
<li class="tocline">
<a class="tocxref" href= "#exploration-directory-api-things-validation">
<bdi class= "secno">
<del class="diff-old">6.5.2
</del>
<ins class="diff-chg">7.3.2.1.6
</ins>
</bdi>
<del class="diff-old">Basic
</del>
Validation
</a>
</li>
</ol>
</li>
<li class="tocline">
<a class="tocxref" href= "#exploration-directory-api-notification">
<bdi class= "secno">
<del class="diff-old">6.5.3
</del>
<ins class="diff-chg">7.3.2.2
</ins>
</bdi>
<del class="diff-old">Full
Validation
</del>
<ins class="diff-chg">Events
API
</ins>
</a>
</li>
<li class="tocline">
<a class="tocxref" href= "#exploration-directory-api-search">
<del class="diff-old">7.
</del>
<bdi class= "secno">
<ins class="diff-chg">7.3.2.3
</ins>
</bdi>
<del class="diff-old">TD
Context
Extensions
</del>
<ins class="diff-chg">Search
API
</ins>
</a>
<ol class="toc">
<li class="tocline">
<a class="tocxref" href= "#jsonpath-semantic">
<bdi class="secno">
<del class="diff-old">7.1
Semantic
Annotations
7.1.1
</del>
<ins class="diff-chg">7.3.2.3.1
</ins>
</bdi>
<del class="diff-old">Example
I:
Additional
Basic
Metadata
</del>
<ins class="diff-chg">Syntactic
search:
JSONPath
</ins>
</a>
</li>
<li class="tocline">
<a class="tocxref" href= "#xpath-semantic">
<del class="diff-old">7.1.2
</del>
<bdi class="secno">
<ins class="diff-chg">7.3.2.3.2
</ins>
</bdi>
<del class="diff-old">Example
II:
State
Annotations
</del>
<ins class="diff-chg">Syntactic
search:
XPath
</ins>
</a>
</li>
<li class="tocline">
<a class="tocxref" href= "#search-semantic">
<del class="diff-old">7.1.3
</del>
<bdi class="secno">
<ins class="diff-chg">7.3.2.3.3
</ins>
</bdi>
<del class="diff-old">Example
III:
Geolocation
Annotations
</del>
<ins class="diff-chg">Semantic
search:
SPARQL
</ins>
</a>
</li>
</ol>
</li>
<li class="tocline">
<a class="tocxref" href= "#directory-api-spec">
<bdi class="secno">
<del class="diff-old">7.2
</del>
<ins class="diff-chg">7.3.2.4
</ins>
</bdi>
<del class="diff-old">Adding
Protocol
Bindings
</del>
<ins class="diff-chg">API
Specification
(Thing
Model)
</ins>
</a>
</li>
<del class="diff-old">7.3
Adding
Security
Schemes
</del>
</ol>
</li>
</ol>
</li>
</ol>
</li>
<li class="tocline">
<a class="tocxref" href= "#security-considerations">
<bdi class="secno">
8.
</bdi>
<del class="diff-old">Behavioral
Assertions
</del>
<ins class="diff-chg">Security
Considerations
</ins>
</a>
<ol class="toc">
<li class="tocline">
<a class="tocxref" href= "#security-consideration-dos">
<bdi class="secno">
8.1
</bdi>
<del class="diff-old">Security
Configurations
</del>
<ins class="diff-chg">Denial
of
Service
</ins>
</a>
</li>
<li class="tocline">
<a class="tocxref" href= "#security-consideration-amp-ddos">
<bdi class="secno">
8.2
</bdi>
<del class="diff-old">Data
Schemas
</del>
<ins class="diff-chg">Amplification
and
Distributed
Denial
of
Service
</ins>
</a>
</li>
<li class="tocline">
<a class="tocxref" href= "#security-consideration-lan-self-discovery">
<bdi class= "secno">
8.3
</bdi>
<del class="diff-old">Protocol
Bindings
8.3.1
Protocol
Binding
based
</del>
<ins class="diff-chg">Self-Discovery
</ins>
on
<del class="diff-old">HTTP
8.3.2
Other
Protocol
Bindings
</del>
<ins class="diff-chg">LANs
</ins>
</a>
</li>
</ol>
</li>
<li class="tocline">
<a class="tocxref" href= "#privacy-considerations">
<bdi class="secno">
9.
</bdi>
<del class="diff-old">Security
</del>
<ins class="diff-chg">Privacy
</ins>
Considerations
</a>
<ol class="toc">
<li class="tocline">
<a class="tocxref" href= "#privacy-consideration-location-tracking">
<bdi class= "secno">
9.1
</bdi>
<del class="diff-old">TD
Interception
</del>
<ins class="diff-chg">Location
Tracking
</ins>
and
<del class="diff-old">Tampering
Risk
</del>
<ins class="diff-chg">Profiling
</ins>
</a>
</li>
<li class="tocline">
<a class="tocxref" href= "#privacy-consideration-query-tracking">
<bdi class= "secno">
9.2
</bdi>
<del class="diff-old">Context
Interception
and
Tampering
Risk
</del>
<ins class="diff-chg">Query
Tracking
</ins>
</a>
</li>
</ol>
</li>
<li class="tocline">
<a class="tocxref" href= "#performance-considerations">
<bdi class="secno">
10.
</bdi>
<del class="diff-old">Privacy
</del>
<ins class="diff-chg">Performance
</ins>
Considerations
</a>
<ol class="toc">
<li class="tocline">
<a class="tocxref" href= "#perf-incremental-transfer">
<bdi class="secno">
10.1
</bdi>
<del class="diff-old">Context
Fetching
10.2
Immutable
Identifiers
10.3
Fingerprinting
10.4
Globally
Unique
Identifiers
10.5
Inferencing
of
Personally
Identifiable
Information
</del>
<ins class="diff-chg">Incremental
Transfer
</ins>
</a>
</li>
</ol>
</li>
<li class="tocline">
<a class="tocxref" href= "#iana-considerations">
<bdi class="secno">
11.
</bdi>
<del class="diff-old">Thing
Model
</del>
<ins class="diff-chg">IANA
Considerations
</ins>
</a>
<ol class="toc">
<li class="tocline">
<a class="tocxref" href= "#well-known-uri-suffix">
<bdi class="secno">
11.1
</bdi>
<del class="diff-old">Basic
Concept
</del>
<ins class="diff-chg">Well-Known
URI
Registration
</ins>
</a>
</li>
<li class="tocline">
<a class="tocxref" href= "#service-name">
<bdi class="secno">
11.2
</bdi>
<del class="diff-old">Thing
Model
Declaration
11.3
Modeling
Tools
11.3.1
Versioning
11.3.2
Extension
and
Import
11.3.3
Composition
11.3.4
Required
11.3.5
Placeholder
11.4
Derivation
of
Thing
Description
Instances
11.5
Examples
12.
IANA
Considerations
12.1
application/td+json
Media
Type
</del>
<ins class="diff-chg">Service
Name
</ins>
Registration
</a>
</li>
<li class="tocline">
<a class="tocxref" href= "#core-resource-type">
<bdi class="secno">
<del class="diff-old">12.2
</del>
<ins class="diff-chg">11.3
</ins>
</bdi>
<del class="diff-old">CoAP
Content-Format
</del>
<ins class="diff-chg">CoRE
Resource
Types
</ins>
Registration
</a>
</li>
</ol>
</li>
<li class="tocline">
<a class="tocxref" href= "#tdd-extensions-jsonschema">
<bdi class="secno">
A.
</bdi>
<del class="diff-old">Example
Thing
Description
Instances
A.1
MyLampThing
Example
with
CoAP
Protocol
Binding
A.2
MyIlluminanceSensor
Example
with
MQTT
Protocol
Binding
A.3
Webhook
Event
Example
B.
</del>
JSON
Schema
for
<del class="diff-old">TD
Instance
Validation
C.
JSON-LD
Context
Usage
</del>
<ins class="diff-chg">WoT
Discovery
TD-extensions
</ins>
</a>
</li>
<li class="tocline">
<a class="tocxref" href="#changes">
<bdi class= "secno">
<del class="diff-old">D.
</del>
<ins class="diff-chg">B.
</ins>
</bdi>
Recent
Specification
Changes
</a>
<ol class="toc">
<li class="tocline">
<a class="tocxref" href= "#changes-from-second-draft">
<bdi class="secno">
<del class="diff-old">D.1
</del>
<ins class="diff-chg">B.1
</ins>
</bdi>
Changes
from
<del class="diff-old">Second
Public
Working
Draft
7
</del>
<ins class="diff-chg">2
</ins>
June
2021
<ins class="diff-new">Working
Draft
</ins>
</a>
</li>
<li class="tocline">
<a class="tocxref" href= "#changes-from-first-draft">
<bdi class="secno">
<del class="diff-old">D.2
</del>
<ins class="diff-chg">B.2
</ins>
</bdi>
Changes
from
<ins class="diff-new">24
November
2020
</ins>
First
Public
Working
Draft
<del class="diff-old">24
November
2020
</del>
</a>
</li>
</ol>
</li>
<li class="tocline">
<a class="tocxref" href= "#acknowledgements">
<bdi class="secno">
<del class="diff-old">E.
</del>
<ins class="diff-chg">C.
</ins>
</bdi>
<del class="diff-old">Acknowledgements
</del>
<ins class="diff-chg">Acknowledgments
</ins>
</a>
</li>
<li class="tocline">
<a class="tocxref" href= "#references">
<bdi class="secno">
<del class="diff-old">F.
</del>
<ins class="diff-chg">D.
</ins>
</bdi>
References
</a>
<ol class="toc">
<li class="tocline">
<a class="tocxref" href= "#normative-references">
<bdi class="secno">
<del class="diff-old">F.1
</del>
<ins class="diff-chg">D.1
</ins>
</bdi>
Normative
references
</a>
</li>
<li class="tocline">
<a class="tocxref" href= "#informative-references">
<bdi class="secno">
<del class="diff-old">F.2
</del>
<ins class="diff-chg">D.2
</ins>
</bdi>
Informative
references
</a>
</li>
</ol>
</li>
</ol>
</nav>
<section id="introduction">
<div class="header-wrapper">
<h2 id="x1-introduction">
<bdi class="secno">
1.
</bdi>
Introduction
</h2>
<a class="self-link" href="#introduction" aria-label= "Permalink for Section 1.">
</a>
</div>
<p>
<del class="diff-old">This
section
is
non-normative.
1.1
Thing
Description
</del>
The
<del class="diff-old">WoT
Thing
Description
(TD)
is
a
central
building
block
in
the
W3C
</del>
Web
of
Things
(WoT)
<del class="diff-old">and
can
be
considered
as
the
entry
point
of
a
Thing
(much
like
the
index.html
of
a
Web
site).
A
TD
instance
has
five
main
components:
textual
metadata
about
the
Thing
itself,
a
set
of
Interaction
Affordances
</del>
<ins class="diff-chg">defines
an
architecture
</ins>
that
<del class="diff-old">indicate
how
the
Thing
can
be
used,
schemas
for
</del>
<ins class="diff-chg">supports
</ins>
the
<del class="diff-old">data
exchanged
</del>
<ins class="diff-chg">integration
and
use
of
web
technologies
</ins>
with
<del class="diff-old">the
Thing
for
machine-understandability,
Security
Definitions
to
provide
metadata
about
the
security
mechanisms
that
must
be
used
for
interactions,
and,
finally,
Web
links
to
express
any
formal
or
informal
relation
to
other
Things
or
documents
on
the
Web.
</del>
<ins class="diff-chg">IoT
devices.
</ins>
The
<del class="diff-old">Interaction
Model
of
W3C
</del>
WoT
<del class="diff-old">defines
three
types
of
Interaction
Affordances
:
Properties
(
PropertyAffordance
class)
can
be
used
for
sensing
and
controlling
parameters,
such
as
getting
the
current
value
or
setting
an
operation
state.
Actions
(
ActionAffordance
class)
model
invocation
of
physical
(and
hence
time-consuming)
processes,
but
can
also
be
used
to
abstract
RPC-like
calls
of
existing
platforms.
Events
(
EventAffordance
class)
are
used
for
the
push
model
of
communication
where
notifications,
discrete
events,
or
streams
of
values
are
sent
asynchronously
to
the
receiver.
See
</del>
<ins class="diff-chg">Architecture
</ins>
[
<cite>
<del class="diff-old">WOT-ARCHITECTURE
</del>
<a class="bibref" data-link-type="biblio" href="#bib-wot-architecture11" title= "Web of Things (WoT) Architecture 1.1">
<ins class="diff-chg">wot-architecture11
</ins>
</a>
</cite>
]
<del class="diff-old">for
details.
In
general,
</del>
<ins class="diff-chg">document
defines
</ins>
the
<del class="diff-old">TD
provides
metadata
for
different
Protocol
Bindings
identified
by
URI
schemes
[
RFC3986
]
(e.g.,
http
,
coap
,
etc.
[
IANA-URI-SCHEMES
]),
content
types
based
on
media
types
[
RFC2046
]
(e.g.,
application/json
,
application/xml
,
application/cbor
,
application/exi
,
etc.
[
IANA-MEDIA-TYPES
]),
</del>
<ins class="diff-chg">basic
concepts
</ins>
and
<del class="diff-old">security
mechanisms
(for
authentication,
authorization,
confidentiality,
etc.).
Serialization
</del>
<ins class="diff-chg">patterns
</ins>
of
<del class="diff-old">TD
instances
is
based
on
JSON
</del>
<ins class="diff-chg">usage
supported.
However,
the
WoT
Thing
Description
</ins>
[
<cite>
<del class="diff-old">RFC8259
</del>
<a class= "bibref" data-link-type="biblio" href= "#bib-wot-thing-description11" title= "Web of Things (WoT) Thing Description 1.1">
<ins class="diff-chg">wot-thing-description11
</ins>
</a>
</cite>
<del class="diff-old">],
where
JSON
names
refer
to
terms
of
the
TD
vocabulary,
as
defined
in
this
</del>
<ins class="diff-chg">]
is
a
key
</ins>
specification
<del class="diff-old">document.
In
addition
the
JSON
serialization
of
TDs
follows
</del>
<ins class="diff-chg">for
WoT
Discovery
since
it
is
</ins>
the
<del class="diff-old">syntax
</del>
<ins class="diff-chg">purpose
</ins>
of
<del class="diff-old">JSON-LD
1.1
[
JSON-LD11
]
</del>
<ins class="diff-chg">WoT
Discovery
</ins>
to
<del class="diff-old">enable
extensions
</del>
<ins class="diff-chg">make
WoT
Thing
Descriptions
available.
Specifically,
WoT
Discovery
has
to
allow
authenticated
</ins>
and
<del class="diff-old">rich
semantic
processing.
Example
1
shows
</del>
<ins class="diff-chg">authorized
entities
(and
only
those
entities)
to
find
WoT
Thing
Descriptions
satisfying
</ins>
a
<del class="diff-old">TD
instance
and
illustrates
the
Interaction
Model
with
Properties,
Actions,
and
Events
by
describing
</del>
<ins class="diff-chg">set
of
criteria,
such
as
being
near
</ins>
a
<del class="diff-old">lamp
Thing
with
the
title
MyLampThing
.
Example
1
:
Thing
Description
sample
{
    : &lt;span class=
"hljs-string"&gt;"https://www.w3.org/2022/wot/td/v1.1",
    : &lt;span class=
"hljs-string"&gt;"urn:dev:ops:32473-WoTLamp-1234",
    : &lt;span class=
"hljs-string"&gt;"MyLampThing",
    : {
        : {&lt;span class=
"hljs-attr"&gt;"scheme": &lt;span class=
"hljs-string"&gt;"basic", &lt;span class=
"hljs-attr"&gt;"in"}
    },
    : &lt;span class=
"hljs-string"&gt;"basic_sc",
    : {
        : {
            : &lt;span class=
"hljs-string"&gt;"string",
            : [{&lt;span class=
"hljs-attr"&gt;"href": &lt;span class=
"hljs-string"&gt;"https://mylamp.example.com/status"}]
        }
    },
    : {
        : {
            : [{&lt;span class=
"hljs-attr"&gt;"href": &lt;span class=
"hljs-string"&gt;"https://mylamp.example.com/toggle"}]
        }
    },
    :{
        :{
            : {&lt;span class=
"hljs-attr"&gt;"type": &lt;span class=
"hljs-string"&gt;"string"},
            : [{
                : &lt;span class=
"hljs-string"&gt;"https://mylamp.example.com/oh",
                &lt;span class=
"hljs-attr"&gt;"subprotocol": &lt;span class=
"hljs-string"&gt;"longpoll"
            }]
        }
    }
}
From
this
TD
example,
we
know
there
exists
one
Property
affordance
with
</del>
<ins class="diff-chg">certain
location,
or
having
certain
semantics,
or
containing
certain
interactions.
Conversely,
in
order
to
support
security
and
privacy
objectives,
</ins>
the
<del class="diff-old">title
status
.
In
addition,
</del>
<ins class="diff-chg">WoT
Discovery
process
must
not
leak
</ins>
information
<del class="diff-old">is
provided
</del>
to
<del class="diff-old">indicate
</del>
<ins class="diff-chg">unauthorized
entities.
This
includes
leaking
information
</ins>
that
<del class="diff-old">this
Property
is
accessible
via
(the
secure
form
of)
the
HTTP
protocol
with
a
GET
method
at
the
URI
https://mylamp.example.com/status
(announced
within
the
forms
structure
by
the
href
member),
and
will
return
</del>
a
<del class="diff-old">string-based
status
value.
The
use
of
the
GET
method
</del>
<ins class="diff-chg">given
entity
</ins>
is
<ins class="diff-new">requesting
certain
information,
</ins>
not
<del class="diff-old">stated
explicitly,
but
is
one
of
the
default
assumptions
defined
by
this
document.
In
a
similar
manner,
an
Action
affordance
is
specified
to
toggle
the
switch
status
using
</del>
<ins class="diff-chg">just
</ins>
the
<del class="diff-old">POST
method
on
</del>
<ins class="diff-chg">information
distributed
in
</ins>
the
<del class="diff-old">https://mylamp.example.com/toggle
resource,
where
POST
is
again
a
default
assumption
for
invoking
Actions.
</del>
<ins class="diff-chg">Thing
Descriptions
themselves.
</ins>
</p>
<p>
<del class="diff-old">The
Event
affordance
enables
</del>
<ins class="diff-chg">There
are
already
</ins>
a
<del class="diff-old">mechanism
for
asynchronous
messages
</del>
<ins class="diff-chg">number
of
discovery
mechanisms
defined,
so
we
have
</ins>
to
<del class="diff-old">be
sent
by
a
Thing
.
Here,
</del>
<ins class="diff-chg">establish
why
we
are
proposing
</ins>
a
<del class="diff-old">subscription
</del>
<ins class="diff-chg">new
one.
First,
many
existing
discovery
mechanisms
have
relatively
weak
security
and
privacy
protections.
One
of
our
objectives
is
</ins>
to
<del class="diff-old">be
notified
upon
</del>
<ins class="diff-chg">establish
</ins>
a
<del class="diff-old">possible
overheating
event
of
the
lamp
</del>
<ins class="diff-chg">mechanism
that
not
only
uses
best
practices
to
protect
metadata,
but
that
</ins>
can
be
<del class="diff-old">obtained
by
</del>
<ins class="diff-chg">upgraded
to
support
future
best
practices
as
needed.
Second,
we
are
</ins>
using
<del class="diff-old">HTTP
with
its
long
polling
subprotocol
on
https://mylamp.example.com/oh
.
This
example
also
specifies
the
basic
security
scheme,
requiring
a
username
and
password
for
access.
Note
that
a
security
scheme
is
first
given
a
name
</del>
<ins class="diff-chg">discovery
</ins>
in
<del class="diff-old">securityDefinitions
</del>
<ins class="diff-chg">a
broad
sense
to
include
both
local
</ins>
and
<del class="diff-old">then
activated
by
specifying
that
name
in
</del>
<ins class="diff-chg">non-local
mechanisms.
While
</ins>
a
<del class="diff-old">security
section.
In
combination
with
the
use
of
the
HTTP
protocol
this
example
demonstrates
the
</del>
<ins class="diff-chg">local
mechanism
might
</ins>
use
<del class="diff-old">of
HTTP
Basic
Authentication.
Specification
of
at
least
one
security
scheme
at
</del>
<ins class="diff-chg">a
broadcast
protocol,
non-local
mechanisms
might
go
beyond
</ins>
the
<del class="diff-old">top
level
</del>
<ins class="diff-chg">current
network
segment
where
broadcast
</ins>
is
<del class="diff-old">mandatory,
</del>
<ins class="diff-chg">not
scalable,
</ins>
and
<del class="diff-old">gives
the
default
access
requirements
for
every
resource.
However,
security
schemes
can
also
be
specified
per-form,
with
configurations
given
at
the
form
level
overriding
configurations
given
at
the
Thing
level,
allowing
for
the
specification
of
fine-grained
access
control.
It
</del>
<ins class="diff-chg">so
a
different
approach,
such
as
a
search
service,
is
needed.
Our
approach
</ins>
is
<del class="diff-old">also
possible
</del>
to
use
<del class="diff-old">a
special
nosec
security
scheme
to
indicate
that
no
access
control
</del>
<ins class="diff-chg">existing
</ins>
mechanisms
<del class="diff-old">are
used.
Additional
examples
will
be
provided
later.
The
Thing
Description
offers
the
possibility
to
add
contextual
definitions
in
some
namespace.
This
mechanism
can
be
used
to
integrate
additional
semantics
</del>
<ins class="diff-chg">as
needed
</ins>
to
<ins class="diff-new">bootstrap
into
a
more
general
and
secure
metadata
distribution
system.
Third,
</ins>
the
<del class="diff-old">content
of
</del>
<ins class="diff-chg">metadata
we
are
distributing,
</ins>
the
<ins class="diff-new">WoT
</ins>
Thing
<del class="diff-old">Description
instance,
provided
that
formal
knowledge,
e.g.,
logic
rules
for
</del>
<ins class="diff-chg">Description,
is
highly
structured
and
includes
rich
data
such
as
data
schemas
and
semantic
annotations.
Existing
discovery
mechanisms
based
on
</ins>
a
<del class="diff-old">specific
domain
</del>
<ins class="diff-chg">list
</ins>
of
<del class="diff-old">application,
can
be
found
under
</del>
<ins class="diff-chg">simple
key-value
pairs
are
not
appropriate.
At
</ins>
the
<del class="diff-old">given
namespace.
Contextual
information
can
also
help
specify
some
configurations
and
behavior
</del>
<ins class="diff-chg">same
time,
use
</ins>
of
<del class="diff-old">the
underlying
communication
protocols
declared
in
the
forms
field.
Example
2
extends
the
TD
sample
from
Example
1
by
introducing
a
second
definition
in
the
@context
to
declare
the
prefix
saref
</del>
<ins class="diff-chg">existing
standards
for
semantic
data
query,
such
</ins>
as
<del class="diff-old">referring
to
SAREF
,
the
Smart&nbsp;Appliance
Reference
Ontology
</del>
<ins class="diff-chg">SPARQL
</ins>
[
<cite>
<del class="diff-old">SMARTM2M
</del>
<a class="bibref" data-link-type="biblio" href= "#bib-sparql11-overview" title= "SPARQL 1.1 Overview">
<ins class="diff-chg">SPARQL11-OVERVIEW
</ins>
</a>
</cite>
<del class="diff-old">].
This
</del>
<ins class="diff-chg">],
while
potentially
suitable
for
some
advanced
use
cases,
might
require
too
much
effort
for
many
anticipated
</ins>
IoT
<del class="diff-old">ontology
includes
terms
interpreted
as
semantic
labels
that
can
be
set
as
values
of
the
@type
field,
giving
</del>
<ins class="diff-chg">applications.
Therefore
in
order
to
address
more
basic
applications,
we
also
define
some
simpler
query
mechanisms.
</ins></p><p><ins class="diff-chg">
After
defining
some
basic
terminology,
we
will
summarize
</ins>
the
<del class="diff-old">semantics
of
Things
</del>
<ins class="diff-chg">basic
use
cases
</ins>
and
<del class="diff-old">their
Interaction
Affordances
.
In
the
example
below,
the
Thing
is
labelled
with
saref:LightSwitch
,
</del>
<ins class="diff-chg">requirements
for
WoT
Discovery.
These
are
a
subset
of
</ins>
the
<del class="diff-old">status
Property
is
labelled
with
saref:OnOffState
</del>
<ins class="diff-chg">more
detailed
and
exhaustive
use
cases
</ins>
and
<ins class="diff-new">requirements
presented
in
</ins>
the
<del class="diff-old">toggle
Action
with
saref:ToggleCommand
.
Example
2
:
Thing
Description
with
TD
Context
Extension
for
semantic
annotations
{
    : [
        &lt;span class=
"hljs-string"&gt;"https://www.w3.org/2022/wot/td/v1.1",
        { : &lt;span class=
"hljs-string"&gt;"https://w3id.org/saref#" }
    ],
    : &lt;span class=
"hljs-string"&gt;"urn:dev:ops:32473-WoTLamp-1234",
    : &lt;span class=
"hljs-string"&gt;"MyLampThing",
    : &lt;span class=
"hljs-string"&gt;"saref:LightSwitch",
    : {
        : {&lt;span class=
"hljs-attr"&gt;"scheme": &lt;span class=
"hljs-string"&gt;"basic", &lt;span class=
"hljs-attr"&gt;"in"}
    },
    : &lt;span class=
"hljs-string"&gt;"basic_sc",
    : {
        : {
            : &lt;span class=
"hljs-string"&gt;"saref:OnOffState",
            : &lt;span class=
"hljs-string"&gt;"string",
            : [{
                : &lt;span class=
"hljs-string"&gt;"https://mylamp.example.com/status"
            }]
        }
    },
    : {
        : {
            : &lt;span class=
"hljs-string"&gt;"saref:ToggleCommand",
            : [{
                : &lt;span class=
"hljs-string"&gt;"https://mylamp.example.com/toggle"
            }]
        }
    },
    : {
        : {
            : {&lt;span class=
"hljs-attr"&gt;"type": &lt;span class=
"hljs-string"&gt;"string"},
            : [{
                : &lt;span class=
"hljs-string"&gt;"https://mylamp.example.com/oh"
            }]
        }
    }
}
The
declaration
mechanism
inside
some
@context
is
specified
by
JSON-LD.
A
TD
instance
complies
to
version
1.1
of
that
specification
</del>
<ins class="diff-chg">WoT
Use
Cases
</ins>
[
<cite>
<del class="diff-old">json-ld11
</del>
<a class= "bibref" data-link-type="biblio" href="#bib-wot-usecases" title= "Web of Things (WoT): Use Cases">
<ins class="diff-chg">wot-usecases
</ins>
</a>
</cite>
<del class="diff-old">].
Hence,
a
TD
instance
can
be
also
processed
as
an
RDF
document
(for
details
about
semantic
processing,
please
refer
to
Appendix
C.
JSON-LD
Context
Usage
</del>
<ins class="diff-chg">]
</ins>
and
<del class="diff-old">the
documentation
under
the
namespace
IRIs,
e.g.,
https://www.w3.org/2019/wot/td
).
1.2
Thing
Model
</del>
<ins class="diff-chg">WoT
Architecture
[
</ins><cite>
<a class="bibref" data-link-type="biblio" href= "#bib-wot-architecture11" title= "Web of Things (WoT) Architecture 1.1">
<ins class="diff-new">wot-architecture11
</ins>
</a>
<del class="diff-old">One
of
</del>
</cite>
<ins class="diff-chg">]
documents.
Then
we
will
describe
</ins>
the
<del class="diff-old">main
intentions
</del>
<ins class="diff-chg">basic
architecture
</ins>
of
<ins class="diff-new">the
WoT
Discovery
process,
which
uses
</ins>
a
<del class="diff-old">Thing
Description
</del>
<ins class="diff-chg">two-phase
Introduction/Exploration
approach.
The
basic
goal
of
this
architecture
</ins>
is
to
<del class="diff-old">provide
a
Consumer
with
all
the
details
necessary
</del>
<ins class="diff-chg">be
able
</ins>
to
<del class="diff-old">successfully
interact
with
a
Thing
.
In
some
IoT
application
scenarios,
a
fully
</del>
<ins class="diff-chg">use
existing
discovery
standards
to
bootstrap
access
to
protected
discovery
services,
but
to
distribute
</ins>
detailed
<del class="diff-old">Thing
Description
,
e.g.,
with
communication
</del>
metadata
<del class="diff-old">is
not
necessary
(e.g.,
IoT
ecosystems
may
implicitly
handle
communication
separately),
or
may
not
be
available
because
a
new
entity
has
not
yet
been
deployed
(e.g.,
IP
address
is
not
yet
known).
Sometimes,
also
a
kind
of
class
definition
is
required
that
forces
capability
definitions
that
should
be
available
for
all
created
instances
(e.g.,
large-scale
production
of
new
devices).
In
order
</del>
<ins class="diff-chg">only
</ins>
to
<del class="diff-old">address
the
above-mentioned
scenarios
or
others,
the
Thing
Model
can
be
used
that
mainly
provides
the
data
model
definitions
within
Things
'
Properties
,
Actions
,
and/or
Events
</del>
<ins class="diff-chg">authorized
users,
</ins>
and
<del class="diff-old">can
be
potentially
used
</del>
<ins class="diff-chg">to
also
protect
those
making
queries
from
eavesdroppers
</ins>
as
<del class="diff-old">template
</del>
<ins class="diff-chg">much
as
possible.
We
then
describe
details
of
specific
Introduction
and
Exploration
mechanisms.
In
particular,
we
define
in
detail
a
normative
API
</ins>
for
<del class="diff-old">creating
</del>
<ins class="diff-chg">a
WoT
</ins>
Thing
Description
<del class="diff-old">instances.
In
the
following
</del>
<ins class="diff-chg">Directory
(WoT
TDD)
service
that
provides
</ins>
a
<del class="diff-old">sample
</del>
<ins class="diff-chg">search
mechanism
for
collections
of
WoT
</ins>
Thing
<del class="diff-old">Model
is
presented
</del>
<ins class="diff-chg">Descriptions
</ins>
that
can
be
<del class="diff-old">seen
as
a
model
for
the
Thing
Description
instance
in
Example
1
.
Example
3
:
Thing
Model
sample
{
    : [&lt;span class=
"hljs-string"&gt;"https://www.w3.org/2022/wot/td/v1.1"], 
     : &lt;span class=
"hljs-string"&gt;"tm:ThingModel",
    : &lt;span class=
"hljs-string"&gt;"Lamp Thing Model",
    : {
        : {
            &lt;span class=
"hljs-attr"&gt;"description": &lt;span class=
"hljs-string"&gt;"current status of the lamp (on|off)",
            : &lt;span class=
"hljs-string"&gt;"string",
            : &lt;span class=
"hljs-literal"&gt;true
        }
    },
    : {
        : {
            &lt;span class=
"hljs-attr"&gt;"description": &lt;span class=
"hljs-string"&gt;"Turn the lamp on or off"
        }
    },
    : {
        : {
            &lt;span class=
"hljs-attr"&gt;"description": &lt;span class=
"hljs-string"&gt;"Lamp reaches a critical temperature (overheating)",
            : {&lt;span class=
"hljs-attr"&gt;"type": &lt;span class=
"hljs-string"&gt;"string"}
        }
    }
}
Thing
Model
definitions
are
identified
</del>
<ins class="diff-chg">dynamically
registered
</ins>
by
<del class="diff-old">the
"@type":
"tm:ThingModel"
.
As
the
example
shows,
it
does
not
provide
details
about
a
</del>
<ins class="diff-chg">Things
or
entities
acting
on
their
behalf.
The
WoT
Discovery
mechanism
however
also
supports
distribution
of
</ins>
single
<del class="diff-old">Thing
instance
due
to
the
lack
</del>
<ins class="diff-chg">TDs
from
regular
web
services,
with
a
special
case
</ins>
of
<del class="diff-old">communication
and
</del>
<ins class="diff-chg">this
being
self-description.
Finally,
we
discuss
some
</ins>
security
<del class="diff-old">metadata.
This
specification
presents
a
mechanism
for
deriving
valid
Thing
Description
instances
from
such
Thing
Model
definitions.
In
addition,
other
design
concepts
are
specified,
</del>
<ins class="diff-chg">and
privacy
considerations,
</ins>
including
<del class="diff-old">how
to
override,
extend,
</del>
<ins class="diff-chg">a
set
of
potential
risks
</ins>
and
<del class="diff-old">reuse
existing
Thing
Model
definitions.
</del>
<ins class="diff-chg">mitigations.
</ins>
</p>
</section>
<section id="conformance">
<div class="header-wrapper">
<h2 id="x2-conformance">
<bdi class="secno">
2.
</bdi>
Conformance
</h2>
<a class="self-link" href="#conformance" aria-label= "Permalink for Section 2.">
</a>
</div>
<p>
As
well
as
sections
marked
as
non-normative,
all
authoring
guidelines,
diagrams,
examples,
and
notes
in
this
specification
are
non-normative.
Everything
else
in
this
specification
is
normative.
</p>
<p>
The
key
words
<em class="rfc2119">
MAY
</em>,
<em class= "rfc2119">
MUST
</em>,
<em class="rfc2119">
<del class="diff-old">MUST
NOT
</del>
<ins class="diff-chg">OPTIONAL
</ins>
</em>,
<em class= "rfc2119">
RECOMMENDED
</em>,
<em class="rfc2119">
SHOULD
</em>,
and
<em class="rfc2119">
SHOULD
NOT
</em>
in
this
document
are
to
be
interpreted
as
described
in
<a href= "https://datatracker.ietf.org/doc/html/bcp14">
BCP
14
</a>
[
<cite>
<a class="bibref" data-link-type="biblio" href= "#bib-rfc2119" title= "Key words for use in RFCs to Indicate Requirement Levels">
RFC2119
</a>
</cite>
]
[
<cite>
<a class="bibref" data-link-type="biblio" href= "#bib-rfc8174" title= "Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words">
RFC8174
</a>
</cite>
]
when,
and
only
when,
they
appear
in
all
capitals,
as
shown
here.
</p>
<del class="diff-old">A
Thing
Description
instance
complies
with
this
specification
if
it
follows
the
normative
statements
in
5.
TD
Information
Model
and
6.
TD
Representation
Format
regarding
Thing
Description
serialization.
A
JSON
Schema
[
JSON-SCHEMA
]
to
validate
Thing
Description
instances
is
provided
in
Appendix
B.
JSON
Schema
for
TD
Instance
Validation
.
</del>
</section>
<section id="terminology" class="informative">
<div class="header-wrapper">
<h2 id="x3-terminology">
<bdi class="secno">
3.
</bdi>
Terminology
</h2>
<a class="self-link" href="#terminology" aria-label= "Permalink for Section 3.">
</a>
</div>
<p>
<em>
This
section
is
non-normative.
</em>
</p>
<p>
The
fundamental
WoT
terminology
such
as
<dfn class="lint-ignore" id="dfn-thing" tabindex="0" aria-haspopup="dialog" data-dfn-type= "dfn">
Thing
</dfn>,
<del class="diff-old">Consumer
,
</del>
<dfn class="lint-ignore" data-plurals= "thing descriptions" id="dfn-thing-description" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">
Thing
Description
</dfn>
(
<dfn data-plurals="tds" id="dfn-td" tabindex="0" aria-haspopup= "dialog" data-dfn-type="dfn">
TD
</dfn>
),
<del class="diff-old">Partial
TD
,
</del>
<dfn class="lint-ignore" id="dfn-thing-model" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">
Thing
Model
</dfn>
(
<dfn id="dfn-tm" tabindex= "0" aria-haspopup="dialog" data-dfn-type="dfn">
TM
</dfn>
),
<del class="diff-old">Interaction
Model
,
Interaction
Affordance
,
</del>
<dfn class="lint-ignore" id="dfn-property" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">
Property
</dfn>,
<dfn class="lint-ignore" id="dfn-action" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">
Action
</dfn>,
<dfn class="lint-ignore" id="dfn-event" tabindex="0" aria-haspopup= "dialog" data-dfn-type="dfn">
Event
</dfn>,
<del class="diff-old">Protocol
Binding
</del>
<dfn class="lint-ignore" data-lt="WoT Anonymous Thing Description|Anonymous TD" data-plurals="anonymous tds" id= "dfn-wot-anonymous-thing-description" tabindex="0" aria-haspopup= "dialog" data-dfn-type="dfn">
<ins class="diff-chg">Anonymous
TD
</ins>
</dfn>,
<del class="diff-old">Servient
</del>
<dfn class= "lint-ignore" data-lt="WoT Discoverer|Discoverer" id= "dfn-wot-discoverer" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">
<ins class="diff-chg">Discoverer
</ins>
</dfn>,
<del class="diff-old">Vocabulary
</del>
<dfn class="lint-ignore" data-lt="WoT Discovery|Discovery" id="dfn-wot-discovery" tabindex= "0" aria-haspopup="dialog" data-dfn-type="dfn">
<ins class="diff-chg">Discovery
</ins>
</dfn>,
<del class="diff-old">Term
</del>
<dfn class="lint-ignore" data-lt="WoT Exploration|Exploration" id= "dfn-wot-exploration" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">
<ins class="diff-chg">Exploration
</ins>
</dfn>,
<del class="diff-old">Vocabulary
Term
</del>
<dfn class="lint-ignore" data-lt="WoT Introduction|Introduction" id="dfn-wot-introduction" tabindex="0" aria-haspopup="dialog" data-dfn-type= "dfn">
<ins class="diff-chg">Introduction
</ins>
</dfn>,
<del class="diff-old">WoT
Interface
</del>
<dfn class="lint-ignore" data-lt= "WoT Thing Description Server|Thing Description Server" id= "dfn-wot-thing-description-server" tabindex="0" aria-haspopup= "dialog" data-dfn-type="dfn">
<ins class="diff-chg">Thing
Description
Server
</ins></dfn><ins class="diff-chg">
(
</ins><dfn class="lint-ignore" data-lt="WoT TD Server|TD Server" data-plurals="td servers" id="dfn-wot-td-server" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn"><ins class="diff-chg">
TD
Server
</ins></dfn><ins class="diff-chg">
),
</ins><dfn class="lint-ignore" data-lt= "WoT Thing Description Directory|Thing Description Directory" data-plurals="thing description directories" id= "dfn-wot-thing-description-directory" tabindex="0" aria-haspopup= "dialog" data-dfn-type="dfn"><ins class="diff-chg">
Thing
Description
Directory
</ins></dfn><ins class="diff-chg">
(
</ins><dfn class="lint-ignore" data-lt="WoT TDD|TDD" id="dfn-wot-tdd" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn"><ins class="diff-chg">
TDD
</ins></dfn><ins class="diff-chg">
),
</ins><dfn class="lint-ignore" data-lt= "WoT Partial Thing Description|Partial TD" id= "dfn-wot-partial-thing-description" tabindex="0" aria-haspopup= "dialog" data-dfn-type="dfn"><ins class="diff-chg">
Partial
TD
</ins>
</dfn>,
<del class="diff-old">and
WoT
Runtime
</del>
<dfn class= "lint-ignore" data-lt="WoT Enriched Thing Description|Enriched TD" data-plurals="enriched tds" id="dfn-wot-enriched-thing-description" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">
<ins class="diff-chg">Enriched
TD
</ins>
</dfn>
are
defined
in
<a href= "https://www.w3.org/TR/wot-architecture11/#terminology">
Section
3
</a>
of
the
WoT
Architecture
<ins class="diff-new">1.1
</ins>
specification
[
<cite>
<del class="diff-old">WOT-ARCHITECTURE
</del>
<a class= "bibref" data-link-type="biblio" href="#bib-wot-architecture11" title= "Web of Things (WoT) Architecture 1.1">
<ins class="diff-chg">wot-architecture11
</ins>
</a>
</cite>
].
</p>
<del class="diff-old">In
addition,
this
specification
introduces
the
following
definitions:
TD
Context
Extension
A
mechanism
to
extend
Thing
Descriptions
with
additional
Vocabulary
Terms
.
It
is
the
basis
for
semantic
annotations
and
extensions
to
core
mechanisms
such
as
Protocol
Bindings,
Security
Schemes,
and
Data
Schemas.
TD
Information
Model
Set
of
Class
definitions
constructed
from
pre-defined
Vocabularies
on
which
constraints
apply,
thus
defining
the
semantics
of
these
Vocabularies
.
Class
definitions
are
typically
expressed
in
terms
of
a
Signature
(a
set
of
Vocabulary
Terms
)
and
functions
over
that
Signature
.&nbsp;The
TD
Information
Model
also
includes
Default
Values
,
defined
as
a
global
function
over
Classes
.
TD
Processor
A
system
that
can
serialize
some
internal
representation
of
a
Thing&nbsp;Description
in
a
given
format
and/or
deserialize
it
from
that
format.
A
TD
Processor
must
detect
semantically
inconsistent
Thing
Descriptions
,
that
is,
Thing
Descriptions
that
cannot
satisfy
constraints
on
the
Instance
Relation
of
the
Thing
class.
For
that
purpose,
a
TD&nbsp;Processor
may
compute
forms
of
Thing
Descriptions
in
which
all
possible
Default
Values
are
assigned.
A
TD
Processor
is
typically
a
sub-system
of
a
WoT
Runtime
.
Implementations
of
a
TD
Processor
may
be
a
TD
producer
only
(able
to
serialize
to
TD
Documents)
or
a
TD
consumer
only
(able
to
deserialize
from
TD
Documents).
TD&nbsp;Serialization
or
TD&nbsp;Document
Textual
or
binary
representation
of
Thing
Descriptions
that
can
be
stored
and
exchanged
between
Servients
.
A
TD
Serialization
follows
a
given
representation
format,
identified
by
a
media
type
when
exchanged
over
the
network.
The
default
representation
format
for
Thing
Descriptions
is
JSON-based
as
defined
by
this
specification.
These
definitions
are
further
developed
in
5.2
Preliminaries
.
</del>
</section>
<section id="architecture" class="informative">
<div class="header-wrapper">
<h2 id="x4-architecture">
<bdi class="secno">
4.
</bdi>
<del class="diff-old">Namespaces
</del>
<ins class="diff-chg">Architecture
</ins>
</h2>
<a class="self-link" href="#architecture" aria-label= "Permalink for Section 4.">
</a>
</div>
<p>
<del class="diff-old">The
version
of
the
TD
Information
Model
defined
in
</del>
<del class="diff-old">5.
TD
Information
Model
of
this
specification
</del>
<em>
<ins class="diff-chg">This
section
</ins>
is
<del class="diff-old">identified
by
the
following
IRI:
https://www.w3.org/2022/wot/td/v1.1
</del>
<ins class="diff-chg">non-normative.
</ins></em>
</p>
<p>
<del class="diff-old">This
IRI
[
</del>
<del class="diff-old">RFC3987
],
which
is
also
a
URI
[
</del>
<a href="#discovery-overview" class="fig-ref" title= "Discovery architecture overview. A set of open Introduction mechanisms provides a set of URLs, which point at Exploration services that only provide metadata (TDs) after suitable authentication. Thing Links and Thing Description Directories provide additional flexibility but retrieving further results from these is at the discretion of the application.">
<ins class="diff-chg">Figure
</ins><bdi class="figno"><ins class="diff-chg">
1
</ins></bdi>
<del class="diff-old">RFC3986
</del>
</a>
<del class="diff-old">],
can
be
dereferenced
to
obtain
</del>
<ins class="diff-chg">shows
an
overview
of
the
WoT
Discovery
process.
Discovery
uses
</ins>
a
<del class="diff-old">JSON-LD
context
file
[
json-ld11
],
allowing
</del>
<ins class="diff-chg">two-phase
architecture
to
resolve
</ins>
the
<del class="diff-old">compact
strings
in
TD
Documents
</del>
<ins class="diff-chg">competing
requirements
</ins>
to
be
<del class="diff-old">expanded
</del>
<ins class="diff-chg">both
open
and
</ins>
to
<del class="diff-old">full
IRI-based
Vocabulary
Terms
.
However,
this
processing
is
only
required
when
transforming
JSON-based
TD
Documents
</del>
<ins class="diff-chg">restrict
access
</ins>
to
<del class="diff-old">RDF,
an
optional
feature
of
TD&nbsp;Processor
implementations.
</del>
<ins class="diff-chg">metadata
to
authorized
entities.
</ins>
In
the
<del class="diff-old">present
specification,
Vocabulary
Terms
are
always
presented
in
their
compact
form.
Their
expanded
form
can
</del>
<ins class="diff-chg">first
phase,
one
or
more
of
a
set
of
relatively
open
"Introduction"
mechanisms
may
</ins>
be
<del class="diff-old">accessed
under
the
namespace
IRI
</del>
<ins class="diff-chg">used
to
generate
a
set
</ins>
of
<del class="diff-old">the
Vocabulary
they
belong
to.
</del>
<ins class="diff-chg">candidate
URLs.
</ins>
These
<del class="diff-old">namespaces
follow
the
structure
of
5.3
Class
Definitions
.
Each
Vocabulary
</del>
<ins class="diff-chg">URLs
do
not
themselves
contain
metadata,
but
are
</ins>
used
in
the
<del class="diff-old">TD&nbsp;Information
Model
has
its
own
namespace
IRI,
as
follows:
Vocabulary
Namespace
IRI
Core
https://www.w3.org/2019/wot/td#
Data
Schema
https://www.w3.org/2019/wot/json-schema#
Security
https://www.w3.org/2019/wot/security#
Hypermedia
Controls
https://www.w3.org/2019/wot/hypermedia#
All
vocabularies
</del>
<ins class="diff-chg">second
stage
to
reference
"Exploration"
services
</ins>
that
<del class="diff-old">are
additionally
used
for
Thing
Model
definitions
have
</del>
<ins class="diff-chg">can
actually
provide
metadata,
after
authentication,
in
</ins>
the
<del class="diff-old">following
namespace
IRI:
Vocabulary
Namespace
IRI
</del>
<ins class="diff-chg">form
of
</ins><a href= "#dfn-thing-description" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-thing-description-1">
Thing
<del class="diff-old">Model
https://www.w3.org/2022/wot/tm#
</del>
<ins class="diff-chg">Descriptions
</ins></a>.</p><figure id="discovery-overview">
<del class="diff-old">The
Vocabularies
are
independent
from
each
other.
They
may
be
reused
and
extended
in
other
W3C
specifications.
Every
breaking
change
in
the
design
</del>
<img src="images/overview.png" srcset="images/overview.svg" class="wot-diagram" alt= "Discovery process overview" />
<figcaption>
<ins class="diff-chg">Figure
</ins><bdi class="figno"><ins class="diff-chg">
1
</ins></bdi><span class= "fig-title"><ins class="diff-chg">
Discovery
architecture
overview.
A
set
</ins>
of
<ins class="diff-new">open
Introduction
mechanisms
provides
</ins>
a
<del class="diff-old">Vocabulary
will
require
the
assignment
</del>
<ins class="diff-chg">set
</ins>
of
<del class="diff-old">a
new
year-based
namespace
URI.
Note
</del>
<ins class="diff-chg">URLs,
which
point
at
Exploration
services
</ins>
that
<del class="diff-old">to
maintain
</del>
<ins class="diff-chg">only
provide
metadata
(TDs)
after
suitable
authentication.
Thing
Links
and
Thing
Description
Directories
provide
additional
flexibility
but
retrieving
further
results
from
these
is
at
</ins>
the
<del class="diff-old">general
coherence
</del>
<ins class="diff-chg">discretion
</ins>
of
the
<del class="diff-old">TD
Information
Model
,
the
associated
JSON-LD
context
file
</del>
<ins class="diff-chg">application.
</ins></span></figcaption></figure><p><ins class="diff-chg">
The
intention
</ins>
is
<del class="diff-old">versioned
such
</del>
that
<del class="diff-old">every
version
has
its
own
URI
(
v1
,
v1.1
,
v2
,
...)
</del>
<ins class="diff-chg">Introduction
mechanisms
are
relatively
open
"first
contact"
mechanisms
</ins>
to
<del class="diff-old">also
identify
non-breaking
changes,
in
particular
</del>
<ins class="diff-chg">provide
a
starting
point
for
</ins>
the
<del class="diff-old">addition
</del>
<ins class="diff-chg">rest
</ins>
of
<del class="diff-old">new
Terms
.
</del>
<ins class="diff-chg">the
Discovery
process.
In
this
document
we
specify
details
on
several
Introduction
mechanisms,
suitable
for
different
use
cases,
including
both
local
and
non-local
scenarios,
but
Introductions
can
in
fact
be
provided
by
any
mechanism
that
can
return
a
URL.
Introductions,
however,
do
not
include
any
security
or
privacy
controls
and
so
should
not
provide
metadata
directly.
Instead,
the
URLs
provided
by
Introduction
mechanisms
reference
"Exploration"
services.
Exploration
services
actually
do
provide
metadata,
but
only
after
suitable
authentication
and
access
controls
have
been
applied.
</ins>
</p>
<p>
<del class="diff-old">Because
a
Vocabulary
under
some
namespace
IRI
</del>
<ins class="diff-chg">The
Discovery
process
</ins>
can
<del class="diff-old">only
undergo
non-breaking
changes,
</del>
<ins class="diff-chg">produce
a
</ins><em><ins class="diff-chg">
set
</ins></em><ins class="diff-chg">
of
URLs
as
output
from
</ins>
its
<del class="diff-old">content
</del>
<ins class="diff-chg">Introduction
phase,
even
if
only
one
Introduction
mechanism
is
used
(some
Introduction
mechanisms
can
themselves
return
multiple
URLs).
The
final
output
after
the
Exploration
phase
</ins>
can
<ins class="diff-new">also
</ins>
be
<del class="diff-old">safely
cached
or
embedded
in
applications.
One
advantage
of
exposing
relatively
static
content
under
</del>
a
<del class="diff-old">namespace
IRI
is
to
optimize
payload
sizes
</del>
<em>
<ins class="diff-chg">set
</ins></em>
of
<del class="diff-old">messages
exchanged
between
constrained
devices.
It
also
avoids
any
privacy
leakage
resulting
from
devices
accessing
publicly
available
vocabularies
from
private
networks
(see
also
10.
Privacy
Considerations
).
</del>
<ins class="diff-chg">Thing
Descriptions.
</ins>
</p>
<del class="diff-old">5.
TD
Information
Model
</del>
<p>
<del class="diff-old">This
section
introduces
</del>
<ins class="diff-chg">Each
URL
provided
by
</ins>
the
<del class="diff-old">TD
Information
Model
.
The
TD
Information
Model
serves
as
</del>
<ins class="diff-chg">Introduction
phase
always
points
at
an
Exploration
service
endpoint
that
will
return
a
single
Thing
Description.
In
</ins>
the
<del class="diff-old">conceptual
basis
for
</del>
<ins class="diff-chg">simplest
case
this
URL
references
an
ordinary
resource
provided
by
a
web
server
which
provides
</ins>
the
<del class="diff-old">processing
</del>
<ins class="diff-chg">Thing
Description
</ins>
of
<ins class="diff-new">a
Thing
describing
an
IoT
endpoint
device.
As
a
special
case
of
this,
for
self-describing
Things
an
Introduction
URL
might
point
directly
at
an
endpoint
provided
by
a
Thing
serving
its
own
Thing
Description.
</ins></p><p><ins class="diff-new">
In
general
</ins>
Thing
Descriptions
<ins class="diff-new">might
be
provided
in
various
ways
</ins>
and
<del class="diff-old">their
serialization,
which
is
described
separately
</del>
in
<del class="diff-old">6.
TD
Representation
Format
.
5.1
Overview
The
TD
Information
Model
is
built
upon
the
following,
independent
Vocabularies
:
</del>
<ins class="diff-chg">particular
may
not
be
self-describing.
For
example,
</ins>
</p>
<ul>
<li>
<del class="diff-old">the
core
TD
Vocabulary
,
which
reflects
the
Interaction
Model
</del>
<ins class="diff-chg">brownfield
devices
not
designed
</ins>
with
the
<del class="diff-old">Properties
,
Actions
,
and
Events
Interaction
Affordances
[
WOT-ARCHITECTURE
]
the
Data
Schema
Vocabulary
,
including
(a
subset
of)
the
terms
defined
by
JSON
Schema
[
JSON-SCHEMA
]
</del>
<ins class="diff-chg">WoT
specification
in
mind
will
not
be
capable
of
serving
their
own
Thing
Descriptions;
</ins>
</li>
<li>
<ins class="diff-new">battery-powered
devices
may
not
be
online
most
of
</ins>
the
<del class="diff-old">WoT
Security
Vocabulary
,
identifying
security
mechanisms
</del>
<ins class="diff-chg">time;
</ins>
and
<del class="diff-old">requirements
for
their
configuration
</del>
</li>
<li>
<del class="diff-old">the
Hypermedia
Controls
Vocabulary
,
encoding
the
main
principles
of
RESTful
communication
using
Web
links
</del>
<ins class="diff-chg">some
devices
may
not
be
powerful
enough
to
manage
</ins>
and
<del class="diff-old">forms
</del>
<ins class="diff-chg">serve
TDs
directly.
</ins>
</li>
</ul>
<p>
<del class="diff-old">Each
of
these
Vocabularies
</del>
<ins class="diff-chg">The
Thing
Description
for
such
Things
should
be
provided
by
separate
services.
</ins></p><p><ins class="diff-chg">
This
document
specifies
two
special
cases
that
allow
for
more
flexibility:
</ins></p><ul><li><ins class="diff-chg">
A
Thing
Description
referenced
by
an
Introduction
URL
may
describe
a
</ins><a href="#exploration-td-type-thingdirectory"><ins class="diff-chg">
Thing
Description
Directory
</ins>
</a>
<ins class="diff-new">service.
A
Thing
Description
Directory
service
(which
</ins>
is
<del class="diff-old">essentially
</del>
<ins class="diff-chg">still
</ins>
a
<del class="diff-old">set
</del>
<ins class="diff-chg">Thing)
maintains
a
(possibly
dynamic)
database
</ins>
of
<del class="diff-old">Terms
</del>
<ins class="diff-chg">Thing
Descriptions.
Thing
Description
Directories
that
maintain
large
numbers
of
Thing
Descriptions
may
also
support
queries
</ins>
that
can
be
used
to
<del class="diff-old">build
data
structures,
interpreted
as
objects
in
the
traditional
object-oriented
sense.
Objects
are
instances
of
classes
and
have
properties.
In
the
context
of
W3C
WoT,
they
denote
Things
and
their
Interaction
Affordances
</del>
<ins class="diff-chg">selectively
retrieve
Thing
Descriptions.
</ins></li><li><ins class="diff-chg">
The
second
special
case
is
a
</ins><a href= "#exploration-td-type-thinglink"><ins class="diff-chg">
Thing
Link
</ins>
</a>.
A
<del class="diff-old">formal
definition
of
objects
</del>
<ins class="diff-chg">Thing
Link
</ins>
is
<del class="diff-old">given
in
5.2
Preliminaries
.
The
main
elements
of
the
TD
Information
Model
are
then
presented
in
5.3
Class
Definitions
.
Certain
object
properties
may
be
omitted
in
</del>
<ins class="diff-chg">also
</ins>
a
<del class="diff-old">TD
when
Default
Values
exist.
</del>
<ins class="diff-chg">Thing
Description,
but
rather
than
describing
a
Thing
directly,
it
holds
a
link
to
a
Thing
Description
hosted
elsewhere.
</ins>
A
<del class="diff-old">list
of
defaults
is
given
in
5.4
Default
Value
Definitions
.
</del>
<ins class="diff-chg">Thing
Description
Directory
can
also
store
Thing
Links
which
can
redirect
to
other
Thing
Description
Directories,
allowing
for
a
linked
directory
structure.
</ins></li></ul>
<p>
<del class="diff-old">The
UML
diagram
shown
next
gives
an
overview
of
the
TD
Information
Model
.
</del>
It
<del class="diff-old">represents
all
classes
as
tables
and
</del>
<ins class="diff-chg">is
</ins><em><ins class="diff-chg">
not
</ins></em><ins class="diff-chg">
mandatory
for
</ins>
the
<del class="diff-old">associations
that
exist
between
classes,
starting
from
</del>
<ins class="diff-chg">Discovery
process
to
retrieve
</ins>
the
<del class="diff-old">class
</del>
<ins class="diff-chg">contents
of
</ins>
Thing
<del class="diff-old">,
</del>
<ins class="diff-chg">Description
Directories
and
return
them
</ins>
as
<del class="diff-old">directed
arrows.
For
the
sake
</del>
<ins class="diff-chg">part
</ins>
of
<del class="diff-old">readability,
</del>
the
<del class="diff-old">diagram
was
split
</del>
<ins class="diff-chg">results,
because
</ins>
in
<del class="diff-old">four
parts,
one
for
each
</del>
<ins class="diff-chg">general
this
might
result
in
a
huge
set
</ins>
of
<ins class="diff-new">results.
Instead
</ins>
the
<del class="diff-old">four
base
Vocabularies
.
Note
The
following
figures
are
automatically
generated
based
on
</del>
<ins class="diff-chg">application
should
scan
</ins>
the
<del class="diff-old">underlying
ontology
definitions.
</del>
<ins class="diff-chg">results
for
Thing
Description
Directory
TDs
and
decide
whether
to
retrieve
TDs
from
them,
possibly
selectively.
Likewise,
it
is
not
required
to
follow
Thing
Links
automatically;
instead
the
application
may
choose
to
follow
them
selectively.
</ins>
</p>
<del class="diff-old">Figure
1
TD
core
vocabulary
(
SVG
file
)
Figure
2
Data
schema
vocabulary
(
SVG
file
)
Figure
3
WoT
security
vocabulary
(
SVG
file
)
Figure
4
Hypermedia
controls
vocabulary
(
SVG
file
)
</del>
</section>
<section id="discoverer-process" class="normative">
<div class="header-wrapper">
<h2 id="x5-discoverer-process">
<bdi class="secno">
<del class="diff-old">5.2
</del>
<ins class="diff-chg">5.
</ins>
</bdi>
<del class="diff-old">Preliminaries
</del>
<ins class="diff-chg">Discoverer
Process
</ins></h2><a class="self-link" href="#discoverer-process" aria-label= "Permalink for Section 5.">
</a>
</div>
<p>
<del class="diff-old">To
provide
a
model
that
can
be
easily
processed
by
both,
simple
rules
on
a
tree-based
document
(i.e.,
raw
JSON
processing)
and
rich
Semantic
Web
tooling
(i.e.,
JSON-LD
processing),
</del>
<ins class="diff-chg">In
</ins>
this
<del class="diff-old">document
defines
</del>
<ins class="diff-chg">section
we
will
describe
</ins>
the
<del class="diff-old">following
formal
preliminaries
to
construct
</del>
<ins class="diff-chg">WoT
Discovery
process
from
</ins>
the
<del class="diff-old">TD
Information
Model
accordingly.
All
definitions
in
this
section
refer
to
sets
,
which
intuitively
are
collections
</del>
<ins class="diff-chg">point
</ins>
of
<del class="diff-old">elements
that
can
themselves
be
sets.
All
arbitrarily
complex
data
structures
can
be
defined
in
terms
</del>
<ins class="diff-chg">view
</ins>
of
<del class="diff-old">sets.
In
particular,
an
Object
is
</del>
a
<del class="diff-old">data
structure
recursively
defined
as
follows:
a
Term
,
which
may
or
may
not
belong
</del>
<ins class="diff-chg">client,
and
what
it
means
</ins>
to
<ins class="diff-new">say
that
</ins>
a
<del class="diff-old">Vocabulary
,
is
</del>
<ins class="diff-chg">client
supports
WoT
Discovery.
We
will
use
the
term
</ins><a href= "#dfn-wot-discoverer" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-wot-discoverer-1"><ins class="diff-chg">
Discoverer
</ins></a><ins class="diff-chg">
for
</ins>
an
<del class="diff-old">Object
.
</del>
<ins class="diff-chg">entity
that
is
</ins>
a
<del class="diff-old">set
</del>
<ins class="diff-chg">client
</ins>
of
<del class="diff-old">name-value
pairs
where
</del>
the
<del class="diff-old">name
is
</del>
<ins class="diff-chg">WoT
Discovery
process.
A
Discoverer
may
or
may
not
be
</ins>
a
<del class="diff-old">Term
and
the
value
is
another
Object
,
is
also
an
Object
.
Though
this
definition
</del>
<ins class="diff-chg">full
Consumer.
A
Discoverer
</ins>
does
<del class="diff-old">not
prevent
Objects
</del>
<ins class="diff-chg">however
need
</ins>
to
<del class="diff-old">include
multiple
name-value
pairs
with
the
same
name,
they
are
generally
not
considered
</del>
<ins class="diff-chg">read
and
extract
information
from
special
TDs
for
Directories
and
Thing
Links
and
use
specific
affordances
and
links
provided
</ins>
in
<del class="diff-old">this
specification.
An
Object
whose
elements
only
have
numbers
as
names
is
called
an
Array
.
Similarly,
an
Object
whose
elements
only
have
Term
s
(that
do
</del>
<ins class="diff-chg">them.
Conversely,
a
Consumer
may
</ins>
not
<del class="diff-old">belong
to
any
Vocabulary
</del>
<ins class="diff-chg">support
Discovery,
although
it
is
recommended
[
</ins><cite><a class="bibref" data-link-type="biblio" href= "#bib-wot-architecture11" title= "Web of Things (WoT) Architecture 1.1"><ins class="diff-chg">
wot-architecture11
</ins>
</a>
<del class="diff-old">)
as
names
</del>
</cite>
<ins class="diff-chg">].
</ins></p><p><ins class="diff-chg">
The
WoT
Discovery
process
</ins>
is
<del class="diff-old">called
</del>
<ins class="diff-chg">designed
so
that
nearly
any
client
that
can
fetch
</ins>
a
<del class="diff-old">Map
.
All
names
appearing
in
some
name-value
pair
in
</del>
<ins class="diff-chg">single
TD
given
</ins>
a
<del class="diff-old">Map
are
assumed
to
</del>
<ins class="diff-chg">single
URI
can
</ins>
be
<del class="diff-old">unique
within
the
scope
</del>
<ins class="diff-chg">said
to
support
WoT
Discovery.
Of
course,
Discoverers
may
support
more
powerful
Discovery
mechanisms,
but
some
</ins>
of
<del class="diff-old">the
Map
.
Moreover,
Object
s
</del>
<ins class="diff-chg">these
have
additional
requirements.
Some
Introduction
mechanisms
</ins>
can
<del class="diff-old">be
instances
</del>
<ins class="diff-chg">return
multiple
URLs,
each
</ins>
of
<del class="diff-old">some
Class
.
A
Class
,
</del>
which
<del class="diff-old">is
denoted
by
a
Vocabulary
Term
,
is
first
defined
by
a
set
of
Vocabulary
Terms
called
</del>
<ins class="diff-chg">can
in
turn
be
used
to
fetch
at
least
one
TD.
So
even
without
</ins>
a
<del class="diff-old">Signature
.
A
Class
whose
Signature
is
empty
</del>
<ins class="diff-chg">TDD,
it
</ins>
is
<del class="diff-old">called
a
Simple
Type
.
</del>
<ins class="diff-chg">possible
to
discover
multiple
TDs.
</ins>
</p>
<p>
The
<del class="diff-old">Signature
</del>
<ins class="diff-chg">following
assertions
describe
the
specific
responsibilities
</ins>
of
a
<del class="diff-old">Class
allows
to
construct
two
functions
that
further
define
Classes
:
an
Assignment
Function
and
a
Type
Function
.
</del>
<ins class="diff-chg">Discoverer:
</ins></p><ul><li><span class="rfc2119-assertion" id= "discoverer-must-support-intros"><ins class="diff-chg">
A
Discoverer
</ins><em class= "rfc2119"><ins class="diff-chg">
MUST
</ins></em><ins class="diff-chg">
support
at
least
one
Introduction
mechanism.
</ins></span>
The
<del class="diff-old">Assignment
Function
of
a
Class
takes
</del>
<ins class="diff-chg">simplest
Introduction
mechanism,
Direct,
simply
provides
</ins>
a
<del class="diff-old">Vocabulary
Term
</del>
<ins class="diff-chg">single
URL
</ins>
of
<del class="diff-old">the
Class
's
Signature
as
input
and
returns
either
true
or
false
as
output.
Intuitively,
the
Assignment
Function
indicates
whether
an
element
</del>
<ins class="diff-chg">a
target
TD.
This
assertion
results
in
different
minimal
requirements
depending
on
which
Introduction
mechanism
is
selected
out
</ins>
of
the
<del class="diff-old">Signature
is
mandatory
or
optional
</del>
<ins class="diff-chg">several
available.
For
example,
</ins>
when
<del class="diff-old">instantiating
</del>
<ins class="diff-chg">Direct
is
used
as
</ins>
the
<del class="diff-old">Class
.
The
Type
Function
of
</del>
<ins class="diff-chg">sole
Introduction
mechanism,
at
</ins>
a
<del class="diff-old">Class
also
takes
</del>
<ins class="diff-chg">minimum
</ins>
a
<del class="diff-old">Vocabulary
Term
of
the
Class
's
Signature
as
input
and
returns
another
Class
as
output.
These
functions
are
partial
:
their
domain
is
limited
to
the
Signature
of
the
Class
being
defined.
On
the
basis
of
these
two
functions,
an
Instance
Relation
can
</del>
<ins class="diff-chg">Discoverer
must
</ins>
be
<del class="diff-old">defined
for
</del>
<ins class="diff-chg">able
to
accept
</ins>
a
<del class="diff-old">pair
composed
of
an
Object
and
</del>
<ins class="diff-chg">single
URL
pointing
at
</ins>
a
<del class="diff-old">Class
.
This
relation
is
defined
as
constraints
to
</del>
<ins class="diff-chg">TD.
Note,
however,
that
this
TD
could
still
</ins>
be
<del class="diff-old">satisfied.
That
is,
an
Object
is
an
instance
of
</del>
<ins class="diff-chg">describing
</ins>
a
<del class="diff-old">Class
if
the
two
following
constraints
are
both
satisfied:
if
for
every
Term
</del>
<ins class="diff-chg">Directory.
Another
option
would
be
</ins>
for
<del class="diff-old">which
the
Assignment
Function
of
the
Class
returns
true
,
the
Object
includes
</del>
a
<del class="diff-old">name-value
pair
with
the
Vocabulary
Term
</del>
<ins class="diff-chg">Discoverer
to
implement,
</ins>
as
<del class="diff-old">name.
if
for
every
Vocabulary
Term
in
the
Signature
of
the
Class
used
</del>
<ins class="diff-chg">its
sole
Introduction
mechanism,
an
"automatic"
Introduction
mechanism
such
</ins>
as
<del class="diff-old">name
</del>
<ins class="diff-chg">DNS-SD,
possibly
</ins>
in
<del class="diff-old">some
name-value
pair
of
the
Object
,
the
value
of
that
pair
is
an
instance
of
the
Class
returned
by
the
Type
Function
of
</del>
<ins class="diff-chg">combination
with
mDNS.
In
this
case
</ins>
the
<del class="diff-old">Class
for
</del>
<ins class="diff-chg">application
code
running
in
</ins>
the
<del class="diff-old">given
Vocabulary
Term
.
According
</del>
<ins class="diff-chg">Discoverer
would
not
have
</ins>
to
<ins class="diff-new">supply
any
additional
information
to
invoke
Discovery.
</ins></li><li><span class="rfc2119-assertion" id= "discoverer-must-support-fetching"><ins class="diff-new">
A
Discoverer
</ins><em class= "rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
support
fetching
a
TD
from
at
least
one
URL
provided
as
part
of
</ins>
the
<del class="diff-old">definition
above,
an
Object
would
</del>
<ins class="diff-chg">Introduction
process.
</ins></span><ins class="diff-chg">
In
other
words,
not
only
must
a
Discoverer
accept
URLs
pointing
at
TDs,
it
must
</ins>
be
<del class="diff-old">an
instance
of
every
Simple
Type
,
regardless
of
its
structure.
Instead,
another
definition
</del>
<ins class="diff-chg">able
to
fetch
that
TD,
</ins>
for
<del class="diff-old">the
Instance
Relation
is
introduced
</del>
<ins class="diff-chg">example
by
using
a
GET
</ins>
for
<del class="diff-old">Simple
Types
:
</del>
an
<del class="diff-old">Object
</del>
<ins class="diff-chg">HTTP
URL.
It
</ins>
is
<del class="diff-old">an
instance
</del>
<ins class="diff-chg">permissible
to
split
the
implementation
</ins>
of
a
<del class="diff-old">Simple
Type
if
it
is
</del>
<ins class="diff-chg">Discoverer
into
two
components,
one
that
fetches/reads
</ins>
a
<del class="diff-old">Term
with
</del>
<ins class="diff-chg">TD
and
sets
up
</ins>
a
<del class="diff-old">given
lexical
form
(e.g.,
true
,
false
for
the
boolean
type,
1
,
2
,
3
,
...
for
the
unsignedInt
type,
etc.).
Moreover,
additional
Classes
,
called
Parameterized
Classes
,
can
</del>
<ins class="diff-chg">configuration
during
installation
to
</ins>
be
<del class="diff-old">derived
from
the
generic
Map
and
Array
structures.
An
Object
is
</del>
<ins class="diff-chg">used
by
</ins>
a
<del class="diff-old">Map
of
some
Class
,
</del>
<ins class="diff-chg">run-time
component
</ins>
that
<del class="diff-old">is,
an
instance
of
</del>
<ins class="diff-chg">cannot
itself
read
TDs.
In
this
case,
however,
</ins>
the
<del class="diff-old">Map
type
parameterized
with
some
Class
,
if
it
</del>
<ins class="diff-chg">latter
component
</ins>
is
<ins class="diff-new">not
by
itself
</ins>
a
<del class="diff-old">Map
such
that
the
value
in
all
the
name-value
pairs
it
contains
is
an
instance
</del>
<ins class="diff-chg">Discoverer.
</ins></li><li><span class="rfc2119-assertion" id= "discoverer-may-multiple-intro"><ins class="diff-chg">
A
Discoverer
</ins><em class= "rfc2119"><ins class="diff-chg">
MAY
</ins></em><ins class="diff-chg">
support
multiple
invocations
</ins>
of
<del class="diff-old">this
Class
.
The
</del>
<ins class="diff-chg">the
</ins>
same
<del class="diff-old">applies
to
Arrays
.
Finally,
</del>
<ins class="diff-chg">Introduction
mechanism.
</ins></span><ins class="diff-chg">
If
multiple
invocations
of
</ins>
a
<del class="diff-old">Class
</del>
<ins class="diff-chg">single
Introduction
mechanism
</ins>
is
<del class="diff-old">a
Subclass
of
some
other
Class
</del>
<ins class="diff-chg">supported,
or
</ins>
if
<del class="diff-old">every
instance
of
the
former
is
also
an
instance
of
the
latter.
Given
all
definitions
above,
</del>
<ins class="diff-chg">multiple
Introduction
mechanisms
are
used,
then
</ins>
the
<del class="diff-old">TD
Information
Model
is
</del>
<ins class="diff-chg">Discoverer
needs
</ins>
to
<del class="diff-old">be
understood
as
</del>
<ins class="diff-chg">manage
</ins>
a
set
of
<del class="diff-old">Class
definitions,
which
include
a
Class
name
(a
Vocabulary
Term
),
</del>
<ins class="diff-chg">Introduction
results.
Some
Introduction
mechanisms
themselves
return
</ins>
a
<del class="diff-old">Signature
(a
</del>
set
of
<del class="diff-old">Vocabulary
Terms
),
an
Assignment
Function
,
and
a
Type
Function
.
These
Class
definitions
are
provided
</del>
<ins class="diff-chg">results,
e.g.
CoRE-RD,
DID,
or
DNS-SD.
Some
mechanisms,
such
</ins>
as
<del class="diff-old">tables
in
5.3
Class
Definitions
.
For
each
table,
the
values
"mandatory"
(respectively,
"optional")
in
the
assignment
column
indicates
that
the
Assignment
Function
returns
true
(respectively,
false
)
for
the
corresponding
Vocabulary
Term
.
By
convention,
Simple
Types
are
denoted
by
names
starting
with
lowercase.
The
TD&nbsp;Information
Model
references
the
following
Simple&nbsp;Types
defined
</del>
<ins class="diff-chg">scanning
Bluetooth
beacons,
may
intrinsically
result
</ins>
in
<del class="diff-old">XML
Schema
[
XMLSCHEMA11-2-20120405
]:
string
,
anyURI
,
dateTime
,
integer
,
unsignedInt
,
double
,
and
boolean
.
Their
definition
(i.e.,
the
specification
of
their
lexical
form)
is
outside
of
the
scope
of
the
TD
Information
Model
.
In
addition,
the
TD
Information
Model
defines
a
global
function
on
pairs
of
Vocabulary
Terms
.
The
function
takes
a
Class
name
and
another
Vocabulary
Term
as
input
and
returns
an
Object
.
If
the
returned
Object
</del>
<ins class="diff-chg">separate
multiple
"invocations".
However,
this
Discoverer
requirement
</ins>
is
<del class="diff-old">different
from
null
,
it
represents
the
Default
Value
for
some
assignment
on
the
input
Vocabulary
Term
in
an
instance
of
the
input
Class
.
This
function
allows
</del>
<ins class="diff-chg">optional
</ins>
to
<del class="diff-old">relax
the
constraint
defined
above
on
the
Assignment
Function
:
an
Object
is
</del>
<ins class="diff-chg">support
</ins>
an
<del class="diff-old">instance
of
a
Class
if
</del>
<ins class="diff-chg">important
special
case:
</ins>
it
<del class="diff-old">includes
all
mandatory
assignments
or
if
Default
Value
exist
for
the
missing
assignments.
All
Default
Values
are
given
in
the
table
of
5.4
Default
Value
Definitions
.
In
each
table
of
5.3
Class
Definitions
,
the
assignment
column
contains
the
value
"with
default"
if
a
Default
Value
</del>
is
<del class="diff-old">available
for
the
corresponding
combination
of
Class
and
Vocabulary
Term
in
the
TD
Information
Model
.
The
formalization
introduced
here
does
not
consider
the
possible
relation
between
Objects
as
abstract
data
structures
and
physical
world
objects
such
as
Things
.
However,
care
was
given
</del>
<ins class="diff-chg">permissible
</ins>
to
<del class="diff-old">the
possibility
</del>
<ins class="diff-chg">have
a
simple
Discoverer
that
only
supports
a
single
invocation
</ins>
of
<del class="diff-old">re-interpreting
all
Vocabulary
Terms
involved
in
the
</del>
<ins class="diff-chg">a
Direct
Introduction,
directly
specifying
a
single
</ins>
TD
<del class="diff-old">Information
Model
as
RDF
resources,
so
as
to
integrate
them
in
</del>
<ins class="diff-chg">via
</ins>
a
<del class="diff-old">larger
model
of
the
physical
world
(an
ontology).
For
details
about
semantic
processing,
please
refer
to
C.
JSON-LD
Context
Usage
and
the
documentation
under
the
namespace
IRIs,
e.g.,
https://www.w3.org/2019/wot/td
.
5.3
Class
Definitions
</del>
<ins class="diff-chg">URL.
</ins></li><li>
<span class="rfc2119-assertion" id="discoverer-merge-intros">
A
<del class="diff-old">TD
Processor
</del>
<ins class="diff-chg">Discoverer
</ins><em class="rfc2119">
MUST
</em>
<del class="diff-old">satisfy
the
Class
instantiation
constraints
on
all
Classes
defined
in
5.3.1
Core
Vocabulary
Definitions
,
5.3.2
Data
Schema
Vocabulary
Definitions
,
5.3.3
Security
Vocabulary
Definitions
,
and
5.3.4
Hypermedia
Controls
Vocabulary
Definitions
.
5.3.1
Core
Vocabulary
Definitions
5.3.1.1
Thing
An
abstraction
of
a
physical
or
</del>
<ins class="diff-chg">be
able
to
merge
URLs
resulting
from
multiple
Introduction
mechanisms,
multiple
results
from
</ins>
a
<del class="diff-old">virtual
entity
whose
metadata
</del>
<ins class="diff-chg">single
Introduction
mechanism,
</ins>
and
<del class="diff-old">interfaces
are
described
by
a
WoT
Thing
Description,
whereas
</del>
<ins class="diff-chg">multiple
Introduction
invocations
into
</ins>
a
<del class="diff-old">virtual
entity
is
the
composition
of
</del>
<ins class="diff-chg">single
set.
</ins></span><ins class="diff-chg">
Note
that
even
if
only
</ins>
one
<del class="diff-old">or
more
Things.
Vocabulary
term
Description
Assignment
Type
@context
JSON-LD
keyword
to
define
short-hand
names
called
terms
</del>
<ins class="diff-chg">Introduction
mechanism
is
supported
multiple
results
might
be
produced.
This
assertion
states
</ins>
that
<del class="diff-old">are
used
throughout
a
TD
document.
mandatory
anyURI
or
Array
@type
JSON-LD
keyword
to
label
</del>
the
<del class="diff-old">object
with
semantic
tags
(or
types).
optional
string
or
Array
of
string
id
Identifier
</del>
<ins class="diff-chg">overall
output
</ins>
of
the
<del class="diff-old">Thing
in
form
of
a
URI
[
RFC3986
]
(e.g.,
stable
URI,
temporary
and
mutable
URI,
URI
with
local
IP
address,
URN,
etc.).
optional
anyURI
title
Provides
a
human-readable
title
(e.g.,
display
a
text
for
UI
representation)
based
on
a
default
language.
mandatory
string
titles
Provides
multi-language
human-readable
titles
(e.g.,
display
</del>
<ins class="diff-chg">Introduction
phase
is
</ins>
a
<del class="diff-old">text
for
UI
representation
in
different
languages).
Also
see
MultiLanguage
.
optional
Map
</del>
<ins class="diff-chg">single
set
</ins>
of
<del class="diff-old">MultiLanguage
description
Provides
additional
(human-readable)
information
based
on
a
default
language.
optional
string
descriptions
Can
be
</del>
<ins class="diff-chg">URLs.
The
word
"set"
is
</ins>
used
<del class="diff-old">to
support
(human-readable)
information
</del>
<ins class="diff-chg">here
</ins>
in
<del class="diff-old">different
languages.
Also
see
MultiLanguage
.
optional
Map
of
MultiLanguage
version
Provides
version
information.
optional
VersionInfo
created
Provides
information
when
the
TD
instance
was
created.
optional
dateTime
modified
Provides
information
when
</del>
the
<del class="diff-old">TD
instance
was
last
modified.
optional
dateTime
support
Provides
information
about
the
TD
maintainer
as
URI
scheme
(e.g.,
mailto
[
RFC6068
],
tel
[
RFC3966
],
https
).
optional
anyURI
base
Define
</del>
<ins class="diff-chg">mathematical
sense:
</ins>
the
<del class="diff-old">base
URI
that
is
used
for
all
relative
URI
references
throughout
a
TD
document.
In
TD
instances,
all
relative
URIs
</del>
<ins class="diff-chg">results
</ins>
are
<del class="diff-old">resolved
relative
to
the
base
URI
using
</del>
<ins class="diff-chg">unordered
and
unique.
Uniqueness
means
that
if
multiple
Introductions
have
</ins>
the
<del class="diff-old">algorithm
defined
in
[
RFC3986
].
base
does
not
affect
</del>
<ins class="diff-chg">same
result,
they
are
merged
into
a
single
result.
If
</ins>
the
<del class="diff-old">URIs
used
in
@context
</del>
<ins class="diff-chg">Discoverer
only
supports
one
Introduction
mechanism
</ins>
and
<del class="diff-old">the
IRIs
used
within
Linked
Data
[
LINKED-DATA
]
graphs
</del>
that
<del class="diff-old">are
relevant
when
semantic
processing
</del>
<ins class="diff-chg">mechanism
can
only
produce
one
URL,
then
the
"merge"
</ins>
is
<del class="diff-old">applied
</del>
<ins class="diff-chg">trivial.
</ins></li><li><span class="rfc2119-assertion" id="discoverer-td-identify"><ins class="diff-chg">
A
Discoverer
</ins><em class="rfc2119"><ins class="diff-chg">
MUST
</ins></em><ins class="diff-chg">
be
able
</ins>
to
<ins class="diff-new">identify
whether
a
</ins>
TD
<del class="diff-old">instances.
optional
anyURI
properties
All
Property-based
Interaction
Affordances
of
the
Thing.
optional
Map
of
PropertyAffordance
actions
All
Action-based
Interaction
Affordances
of
the
Thing.
optional
Map
of
ActionAffordance
</del>
<ins class="diff-chg">fetched
from
an
Introduction
URL
has
</ins><a href= "#exploration-td-type-thingdirectory"><ins class="diff-chg">
Thing
Directory
</ins>
</a>
<del class="diff-old">events
All
Event-based
Interaction
Affordances
</del>
<ins class="diff-chg">or
</ins><a href="#exploration-td-type-thingdirectory"><ins class="diff-chg">
Thing
Link
</ins>
</a>
<del class="diff-old">of
</del>
<ins class="diff-chg">type.
</ins></span><ins class="diff-chg">
This
implies
that
</ins>
the
<del class="diff-old">Thing.
optional
Map
of
EventAffordance
links
Provides
Web
links
</del>
<ins class="diff-chg">Discoverer
needs
</ins>
to
<del class="diff-old">arbitrary
resources
that
relate
</del>
<ins class="diff-chg">be
able
</ins>
to
<ins class="diff-new">check
</ins>
the
<del class="diff-old">specified
Thing
Description.
optional
Array
of
Link
</del>
<code>
<del class="diff-old">forms
</del>
<ins class="diff-chg">@type
</ins>
</code>
<del class="diff-old">Set
of
form
hypermedia
controls
that
describe
how
an
operation
</del>
<ins class="diff-chg">field
and
make
this
distinction.
A
Discoverer
</ins>
can
<del class="diff-old">be
performed.
Forms
are
serializations
of
Protocol
Bindings.
Thing-level
forms
are
used
</del>
<ins class="diff-chg">decide
whether
or
not
</ins>
to
<del class="diff-old">describe
endpoints
</del>
<ins class="diff-chg">follow
links
or
fetch
TDD
contents.
There
are
some
use
cases
where
a
Consumer
may
not
expand
certain
URLs,
</ins>
for
<ins class="diff-new">example
links
pointing
at
external
resources,
or
when
</ins>
a
<del class="diff-old">group
of
interaction
affordances.
optional
Array
of
Form
security
</del>
<ins class="diff-chg">TDD
contains
many
TDs
and
fetching
them
all
would
exceed
the
Consumer's
memory
processing
capabilities.
</ins></li><li>
<del class="diff-old">Set
of
security
definition
names,
chosen
</del>
<span class="rfc2119-assertion" id="discoverer-fetch-tdd">
<ins class="diff-chg">A
Discoverer
</ins><em class="rfc2119"><ins class="diff-chg">
MAY
</ins></em><ins class="diff-chg">
fetch
additional
TDs
</ins>
from
<del class="diff-old">those
defined
</del>
<ins class="diff-chg">any
Exploration
mechanism
described
</ins>
in
<del class="diff-old">securityDefinitions
.
These
must
all
be
satisfied
for
access
to
resources.
mandatory
string
or
Array
of
string
securityDefinitions
Set
</del>
<ins class="diff-chg">its
initial
set
</ins>
of
<del class="diff-old">named
security
configurations
(definitions
only).
Not
actually
applied
unless
names
are
used
</del>
<ins class="diff-chg">TDs
(including,
</ins>
in
<del class="diff-old">a
security
name-value
pair.
mandatory
Map
of
SecurityScheme
profile
Indicates
the
WoT
Profile
mechanisms
followed
by
this
</del>
<ins class="diff-chg">particular,
</ins>
Thing
Description
<ins class="diff-new">Directories)
</ins>
and
<ins class="diff-new">add
them
into
</ins>
the
<del class="diff-old">corresponding
Thing
implementation.
optional
anyURI
or
Array
</del>
<ins class="diff-chg">set
</ins>
of
<del class="diff-old">anyURI
schemaDefinitions
Set
</del>
<ins class="diff-chg">TD
results.
</ins></span><ins class="diff-chg">
This
only
adds
the
results
</ins>
of
<del class="diff-old">named
data
schemas.
To
be
used
in
a
schema
name-value
pair
inside
</del>
<ins class="diff-chg">fetching
TDs
from
</ins>
an
<del class="diff-old">AdditionalExpectedResponse
object.
optional
Map
of
DataSchema
uriVariables
Define
URI
template
variables
according
</del>
<ins class="diff-chg">Exploration
mechanism
</ins>
to
<del class="diff-old">[
RFC6570
]
as
collection
based
on
DataSchema
declarations.
The
Thing
level
uriVariables
can
be
used
in
Thing-level
forms
or
in
Interaction
Affordances.
The
individual
variables
DataSchema
cannot
be
an
ObjectSchema
or
an
ArraySchema.
If
the
same
variable
is
both
declared
in
Thing-level
uriVariables
and
in
Interaction
Affordance
level,
</del>
the
<del class="diff-old">Interaction
Affordance
level
variable
takes
precedence.
optional
Map
</del>
<ins class="diff-chg">set
</ins>
of
<del class="diff-old">DataSchema
The
@context
name-value
pair
MUST
contain
the
anyURI
https://www.w3.org/2022/wot/td/v1.1
in
order
to
identify
</del>
<ins class="diff-chg">results.
These
new
results
do
not
delete
</ins>
the
<del class="diff-old">document
as
a
</del>
<ins class="diff-chg">original
</ins>
TD
<del class="diff-old">1.1
which
would
allow
Consumers
to
use
</del>
<ins class="diff-chg">describing
</ins>
the
<del class="diff-old">newly
introduced
terms.
When
there
are
possibly
TD
1.0
consumers
</del>
<ins class="diff-chg">Exploration
mechanism.
A
Discoverer
implementation
can
decide
whether
or
not
to
fetch
TDD
contents.
Implementers
should
consider
</ins>
the
<del class="diff-old">anyURI
https://www.w3.org/2019/wot/td/v1
MUST
</del>
<ins class="diff-chg">fact
that
TDDs
may
</ins>
be
<del class="diff-old">the
first
entry
</del>
<ins class="diff-chg">large
</ins>
and
<ins class="diff-new">fetching
</ins>
the
<del class="diff-old">https://www.w3.org/2022/wot/td/v1.1
MUST
be
the
second
entry.
When
@context
is
an
Array
,
the
anyURI
https://www.w3.org/2022/wot/td/v1.1
MAY
be
followed
by
elements
</del>
<ins class="diff-chg">contents
</ins>
of
<del class="diff-old">type
anyURI
or
type
Map
in
any
order,
while
it
is
RECOMMENDED
to
include
only
one
Map
with
all
the
name-value
pairs
in
the
@context
Array
.
Maps
contained
in
</del>
an
<del class="diff-old">@context
Array
</del>
<ins class="diff-chg">entire
TDD
might
be
prohibitively
expensive.
</ins></li><li>
<span class="rfc2119-assertion" id="discoverer-fetch-links">
<ins class="diff-new">A
Discoverer
</ins>
<em class="rfc2119">
MAY
</em>
<del class="diff-old">contain
name-value
pairs,
where
</del>
<ins class="diff-chg">fetch
source
TDs
from
</ins>
the
<del class="diff-old">value
is
a
namespace
identifier
</del>
<ins class="diff-chg">targets
</ins>
of
<del class="diff-old">type
anyURI
and
</del>
the
<del class="diff-old">name
a
Term
or
prefix
denoting
that
namespace.
One
Map
contained
</del>
<ins class="diff-chg">links
</ins>
in
<del class="diff-old">an
@context
Array
SHOULD
contain
</del>
a
<del class="diff-old">name-value
pair
that
defines
the
default
language
for
the
</del>
<a href= "#exploration-td-type-thingdirectory">
Thing
<del class="diff-old">Description,
where
the
name
is
the
Term
</del>
<ins class="diff-chg">Link
</ins>
</a>
<del class="diff-old">@language
</del>
<ins class="diff-chg">described
in
its
initial
set
of
TDs
</ins>
and
<ins class="diff-new">add
them
into
</ins>
the
<del class="diff-old">value
is
a
well-formed
language
tag
as
defined
by
[
BCP47
]
(e.g.,
en
,
de-AT
,
gsw-CH
,
zh-Hans
,
zh-Hant-HK
,
sl-nedis
).
The
computation
</del>
<ins class="diff-chg">set
</ins>
of
<ins class="diff-new">TD
results.
</ins></span><ins class="diff-new">
This
only
adds
</ins>
the
<del class="diff-old">base
direction
</del>
<ins class="diff-chg">results
</ins>
of
<del class="diff-old">all
human-readable
text
strings
is
defined
by
</del>
<ins class="diff-chg">fetching
TDs
from
a
Thing
Link
to
</ins>
the
<del class="diff-old">following
</del>
set
of
<del class="diff-old">rules:
If
no
language
tag
is
given,
</del>
<ins class="diff-chg">results.
These
new
results
do
not
delete
</ins>
the
<del class="diff-old">base
direction
SHOULD
be
inferred
through
first-strong
heuristics
</del>
<ins class="diff-chg">original
TD
describing
the
Thing
Link.
A
Discoverer
implementation
can
decide
whether
</ins>
or
<del class="diff-old">detection
algorithms
such
as
</del>
<ins class="diff-chg">not
to
fetch
</ins>
the
<del class="diff-old">CLDR
Likely
Subtags
[
LDML
].
</del>
<ins class="diff-chg">targets
of
Thing
Links.
</ins>
</li>
<li>
<del class="diff-old">Outside
of
MultiLanguage
Maps
,
the
base
direction
</del>
<span class="rfc2119-assertion" id= "discoverer-fetch-iteration">
<ins class="diff-chg">A
Discoverer
</ins>
<em class= "rfc2119">
MAY
</em>
<del class="diff-old">be
inferred
</del>
<ins class="diff-chg">fetch
additional
TDs
iteratively
</ins>
from
<del class="diff-old">the
language
tag
</del>
<ins class="diff-chg">any
</ins><a href="#exploration-td-type-thingdirectory"><ins class="diff-chg">
Thing
Link
</ins></a><ins class="diff-chg">
or
Exploration
mechanism
described
in
its
set
</ins>
of
<ins class="diff-new">TDs
and
add
them
into
</ins>
the
<del class="diff-old">default
language.
Inside
</del>
<ins class="diff-chg">set
</ins>
of
<del class="diff-old">MultiLanguage
Maps
,
</del>
<ins class="diff-chg">TD
results.
</ins></span><ins class="diff-chg">
This
only
adds
</ins>
the
<del class="diff-old">base
direction
</del>
<ins class="diff-chg">results
</ins>
of
<del class="diff-old">each
value
</del>
<ins class="diff-chg">fetching
TDs
from
an
Exploration
mechanism
to
the
set
</ins>
of
<ins class="diff-new">results.
These
new
results
do
not
delete
</ins>
the
<del class="diff-old">name-value
pairs
</del>
<ins class="diff-chg">original
TD
describing
the
Exploration
mechanism.
</ins></li><li>
<span class="rfc2119-assertion" id="discoverer-termination">
<ins class="diff-new">A
Discoverer
</ins>
<em class="rfc2119">
MAY
</em>
<del class="diff-old">be
inferred
from
the
language
tag
given
in
the
corresponding
name.
</del>
<ins class="diff-chg">terminate
fetching
additional
TDs
at
any
point
or
for
any
reason.
</ins>
</span>
</li>
<li>
<del class="diff-old">In
cases
where
a
language
can
be
written
</del>
<span class="rfc2119-assertion" id="discoverer-any-order">
<ins class="diff-chg">A
Discoverer
</ins><em class="rfc2119"><ins class="diff-chg">
MAY
</ins></em><ins class="diff-chg">
fetch
additional
TDs
by
following
links
or
fetching
additional
TDs
from
Exploration
mechanisms
(e.g.
TDDs)
</ins>
in
<del class="diff-old">more
than
one
script
with
different
base
directions,
the
corresponding
language
tag
given
</del>
<ins class="diff-chg">any
order.
</ins></span><ins class="diff-chg">
The
Discoverer
can
fetch
additional
TDs
</ins>
in
<del class="diff-old">@language
or
MultiLanguage
Maps
</del>
<ins class="diff-chg">any
order
from
any
Exploration
mechanism
and
is
not
required
to
use
all
of
them.
</ins></li><li>
<span class="rfc2119-assertion" id="discoverer-track">
<ins class="diff-new">A
Discoverer
</ins>
<em class="rfc2119">
MUST
</em>
<del class="diff-old">include
a
script
subtag,
so
that
an
appropriate
base
direction
can
be
inferred.
An
example
is
Azeri,
</del>
<ins class="diff-chg">track
</ins>
which
<del class="diff-old">is
written
LTR
when
Latin
script
is
used
(specified
using
az-Latn
)
</del>
<ins class="diff-chg">TDs
describing
links
or
Exploration
mechanisms
have
already
been
fetched
</ins>
and
<del class="diff-old">RTL
when
Arabic
script
</del>
<ins class="diff-chg">avoid
fetching
duplicate
results.
</ins></span><ins class="diff-chg">
This
</ins>
is
<del class="diff-old">used
(specified
using
az-Arab
).
TD
Processors
should
be
aware
of
certain
special
cases
when
processing
bidirectional
text.
They
should
take
care
</del>
to
<del class="diff-old">use
bidi
isolation
when
presenting
strings
</del>
<ins class="diff-chg">avoid
infinite
loops.
Note
that
Thing
Description
Directories
can
easily
refer
</ins>
to
<del class="diff-old">users,
particularly
when
embedding
in
surrounding
text
(e.g.,
</del>
<ins class="diff-chg">each
other,
</ins>
for
<del class="diff-old">Web
user
interface).
Mixed
direction
text
can
occur
in
any
language,
even
when
</del>
<ins class="diff-chg">example,
so
fetching
</ins>
the
<del class="diff-old">language
is
properly
identified.
TD
producers
should
attempt
to
provide
mixed
direction
strings
in
</del>
<ins class="diff-chg">TDs
from
</ins>
a
<del class="diff-old">way
</del>
<ins class="diff-chg">TDD,
then
fetching
all
those
TDs
will
give
another
copy
of
the
original
TDD's
TD.
This
second
copy
should
NOT
trigger
further
fetches.
Note
</ins>
that
<del class="diff-old">can
be
displayed
successfully
by
a
naive
user
agent.
For
example,
if
an
RTL
string
begins
with
an
LTR
run
(such
as
a
number
or
a
brand
or
trade
name
in
Latin
script),
including
an
RLM
character
at
</del>
<ins class="diff-chg">tracking
cannot
depend
only
on
</ins>
the
<del class="diff-old">start
</del>
<ins class="diff-chg">value
</ins>
of
<del class="diff-old">the
string
or
wrapping
opposite
direction
runs
in
bidi
controls
can
assist
</del>
<ins class="diff-chg">"id"
fields
</ins>
in
<del class="diff-old">proper
display.
</del>
<ins class="diff-chg">TDs
since
this
field
is
optional.
</ins></li></ul>
<p>
<del class="diff-old">Strings
on
the
Web:
Language
and
Direction
Metadata
[
string-meta
]
provides
some
guidance
and
illustrates
</del>
<ins class="diff-chg">The
above
process
supports
</ins>
a
<del class="diff-old">number
of
pitfalls
when
using
bidirectional
text.
In
addition
</del>
<ins class="diff-chg">way
</ins>
to
<del class="diff-old">the
explicitly
provided
Interaction
Affordances
in
the
properties
,
actions
,
and
events
Maps
,
</del>
<ins class="diff-chg">let
Directories
reference
other
Directories
without
duplicating
their
TDs:
</ins>
a
<del class="diff-old">Thing
can
also
provide
meta-interactions,
which
are
indicated
by
Form
instances
in
its
optional
forms
Array
.
When
the
forms
Array
of
</del>
<ins class="diff-chg">Directory
wanting
to
reference
other
Directories
should
include
</ins>
a
<a href= "#exploration-td-type-thingdirectory">
Thing
<ins class="diff-new">Link
</ins>
</a>
<del class="diff-old">instance
contains
Form
instances,
the
string
values
assigned
</del>
<ins class="diff-chg">with
a
"describedby"
relation
</ins>
to
the
<del class="diff-old">name
op
,
either
directly
or
within
an
Array
,
MUST
be
one
</del>
<ins class="diff-chg">TD
</ins>
of
the
<del class="diff-old">following
operation
types
:
readallproperties
,
writeallproperties
,
readmultipleproperties
,
writemultipleproperties
,
observeallproperties
,
unobserveallproperties
,
queryallactions
,
subscribeallevents
,
or
unsubscribeallevents
.
(See
an
example
for
an
usage
of
form
in
a
Thing
instance.)
The
data
schema
for
each
of
</del>
<ins class="diff-chg">other
Directory
service.
Then
</ins>
the
<del class="diff-old">property
meta-interactions
is
constructed
by
combining
</del>
<ins class="diff-chg">above
process
would
expand
</ins>
the
<del class="diff-old">data
schemas
of
each
PropertyAffordance
instance
in
a
single
ObjectSchema
instance,
where
</del>
<ins class="diff-chg">Thing
Link
to
obtain
</ins>
the
<del class="diff-old">properties
Map
</del>
<ins class="diff-chg">actual
TD
</ins>
of
the
<del class="diff-old">ObjectSchema
instance
contains
each
data
schema
of
</del>
<ins class="diff-chg">Directory,
and
then
(optionally)
use
</ins>
the
<del class="diff-old">PropertyAffordances
identified
by
</del>
<ins class="diff-chg">appropriate
Directory
affordance
to
access
</ins>
the
<del class="diff-old">name
</del>
<ins class="diff-chg">contents
</ins>
of
the
<del class="diff-old">corresponding
PropertyAffordances
instance.
If
not
specified
otherwise
(e.g.,
through
</del>
<ins class="diff-chg">linked
Directory.
Note
that
such
</ins>
a
<del class="diff-old">TD
Context
Extension
),
</del>
<ins class="diff-chg">Thing
Link
points
at
</ins>
the
<del class="diff-old">request
data
</del>
<ins class="diff-chg">TD
</ins>
of
the
<del class="diff-old">readmultipleproperties
operation
is
an
Array
that
contains
the
intended
PropertyAffordances
instance
names,
which
is
serialized
to
</del>
<ins class="diff-chg">Directory,
not
at
</ins>
the
<del class="diff-old">content
type
specified
by
</del>
<ins class="diff-chg">Directory
itself.
These
may
or
may
not
be
hosted
in
</ins>
the
<del class="diff-old">Form
instance.
</del>
<ins class="diff-chg">same
location.
</ins>
</p>
<del class="diff-old">5.3.1.2
InteractionAffordance
</del>
<p>
<del class="diff-old">Metadata
of
a
Thing
that
shows
the
possible
choices
to
Consumers
,
thereby
suggesting
how
Consumers
may
interact
with
</del>
<ins class="diff-chg">Recursively
fetching
</ins>
the
<del class="diff-old">Thing.
There
are
many
types
</del>
<ins class="diff-chg">contents
</ins>
of
<del class="diff-old">potential
affordances,
but
W3C
WoT
defines
three
types
</del>
<ins class="diff-chg">such
linked
directories,
especially
without
a
specific
query
or
filter,
could
easily
result
in
downloading
a
large
amount
</ins>
of
<del class="diff-old">Interaction
Affordances:
Properties,
Actions,
and
Events.
Vocabulary
term
Description
Assignment
Type
@type
JSON-LD
keyword
</del>
<ins class="diff-chg">data.
Such
recursive
expansion
should
be
limited
</ins>
to
<del class="diff-old">label
the
object
with
semantic
tags
(or
types).
optional
string
</del>
<ins class="diff-chg">use
cases
that
require
it,
such
as
inventory,
auditing,
</ins>
or
<del class="diff-old">Array
of
string
title
Provides
a
human-readable
title
(e.g.,
display
a
text
for
UI
representation)
based
on
a
default
language.
optional
string
titles
Provides
multi-language
human-readable
titles
(e.g.,
display
a
text
</del>
<ins class="diff-chg">indexing.
</ins></p><p><ins class="diff-chg">
URLs
</ins>
for
<del class="diff-old">UI
representation
in
different
languages).
Also
see
MultiLanguage
.
optional
Map
of
MultiLanguage
description
Provides
additional
(human-readable)
information
based
on
a
default
language.
optional
string
descriptions
Can
</del>
<ins class="diff-chg">Directory
services
can
also
</ins>
be
used
<ins class="diff-new">with
the
federation
capabilities
of
SPARQL
queries,
noted
below,
which
in
most
cases
will
be
a
more
efficient
way
</ins>
to
<del class="diff-old">support
(human-readable)
</del>
<ins class="diff-chg">collect
specific
</ins>
information
<del class="diff-old">in
different
languages.
Also
see
MultiLanguage
.
optional
Map
</del>
<ins class="diff-chg">from
a
set
</ins>
of
<del class="diff-old">MultiLanguage
forms
Set
</del>
<ins class="diff-chg">distributed
directory
services.
However,
SPARQL
requires
the
URL
</ins>
of
<del class="diff-old">form
hypermedia
controls
that
describe
how
an
operation
</del>
<ins class="diff-chg">a
SPARQL
endpoint
for
such
federation,
which
</ins>
can
be
<del class="diff-old">performed.
Forms
are
serializations
of
Protocol
Bindings.
mandatory
Array
</del>
<ins class="diff-chg">found
in
the
TDs
</ins>
of
<del class="diff-old">Form
uriVariables
Define
URI
template
variables
according
to
[
RFC6570
]
as
collection
based
on
DataSchema
declarations.
The
individual
variables
DataSchema
cannot
be
an
ObjectSchema
or
an
ArraySchema.
If
</del>
<ins class="diff-chg">Directories
supporting
SPARQL
queries.
This
is
not
</ins>
the
same
<del class="diff-old">variable
is
both
declared
in
Thing-level
uriVariables
and
in
Interaction
Affordance
level,
</del>
<ins class="diff-chg">as
</ins>
the
<del class="diff-old">Interaction
Affordance
level
variable
takes
precedence.
optional
Map
of
DataSchema
The
class
InteractionAffordance
has
</del>
<ins class="diff-chg">URL
pointing
at
</ins>
the
<del class="diff-old">following
subclasses:
</del>
<ins class="diff-chg">TD
of
a
Directory.
</ins>
</p>
<del class="diff-old">PropertyAffordance
ActionAffordance
EventAffordance
</del>
</section>
<section id="introduction-mech" class="normative">
<div class="header-wrapper">
<h2 id="x6-introduction-mechanisms">
<del class="diff-old">5.3.1.3
</del>
<bdi class="secno">
<ins class="diff-chg">6.
</ins>
</bdi>
<del class="diff-old">PropertyAffordance
</del>
<ins class="diff-chg">Introduction
Mechanisms
</ins></h2><a class="self-link" href="#introduction-mech" aria-label= "Permalink for Section 6.">
</a>
</div>
<p>
<del class="diff-old">An
Interaction
Affordance
that
exposes
state
of
the
Thing.
</del>
This
<del class="diff-old">state
can
then
be
retrieved
(read)
and/or
updated
(write).
Things
can
also
choose
to
make
Properties
observable
by
pushing
the
new
state
after
a
change.
Vocabulary
term
Description
Assignment
Type
observable
A
hint
that
indicates
whether
Servients
hosting
the
Thing
and
Intermediaries
should
provide
a
Protocol
Binding
that
supports
the
observeproperty
and
unobserveproperty
operations
</del>
<ins class="diff-chg">chapter
describes
mechanisms
</ins>
for
<del class="diff-old">this
Property.
</del>
<ins class="diff-chg">initial
contact
</ins>
with
<del class="diff-old">default
boolean
Note
Property
instances
are
also
instances
of
the
class
DataSchema
</del>
<ins class="diff-chg">Things
or
</ins><a href="#dfn-wot-thing-description-directory" class= "internalDFN" data-link-type="dfn" id= "ref-for-dfn-wot-thing-description-directory-1"><ins class="diff-chg">
Thing
Description
Directories
</ins>
</a>.
<del class="diff-old">Therefore,
it
can
contain
the
type
,
unit
,
readOnly
and
writeOnly
members,
among
others.
PropertyAffordance
is
a
Subclass
</del>
<ins class="diff-chg">Any
</ins>
of
the
<del class="diff-old">InteractionAffordance
Class
and
</del>
<ins class="diff-chg">following
mechanisms
may
be
provided
by
</ins>
the
<del class="diff-old">DataSchema
Class
.
When
a
Form
instance
is
within
a
PropertyAffordance
instance,
</del>
<ins class="diff-chg">Thing
or
</ins>
the
<del class="diff-old">value
assigned
</del>
<a href="#dfn-wot-thing-description-directory" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-wot-thing-description-directory-2">
<ins class="diff-chg">Thing
Description
Directory
</ins></a>
to
<del class="diff-old">op
MUST
be
one
</del>
<ins class="diff-chg">Consumers.
The
result
</ins>
of
<del class="diff-old">readproperty
,
writeproperty
,
observeproperty
,
unobserveproperty
or
</del>
an
<del class="diff-old">Array
containing
</del>
<ins class="diff-chg">introduction
mechanism
is
always
</ins>
a
<del class="diff-old">combination
</del>
<ins class="diff-chg">URL
(address)
</ins>
of
<del class="diff-old">these
terms.
Note
</del>
<ins class="diff-chg">an
exploration
service
which
can
be
used
to
obtain
detailed
metadata
(TDs)
after
suitable
authentication.
</ins>
It
is
<del class="diff-old">considered
</del>
<ins class="diff-chg">also
possible
for
multiple
introduction
mechanisms
</ins>
to
be
<del class="diff-old">good
practice
that
each
observeproperty
has
a
corresponding
unobserveproperty
unless
</del>
<ins class="diff-chg">used
and
</ins>
the
<del class="diff-old">protocol
supports
implicit
unsubscription
mechanisms
(e.g.,
heartbeat
to
detect
connection
loss).
Note
The
observation
</del>
<ins class="diff-chg">results
merged.
No
particular
introduction
</ins>
mechanism
<del class="diff-old">depends
on
the
underlying
protocol
or
sub-protocol.
Having
said
that,
it
</del>
is
<del class="diff-old">not
guaranteed
that
the
current
Property
value
will
be
provided
once
</del>
<ins class="diff-chg">mandatory,
as
long
as
</ins>
the
<del class="diff-old">subscription
</del>
<ins class="diff-chg">URL
of
at
least
one
exploration
service
</ins>
is
<del class="diff-old">initiated.
Hence,
it
may
be
necessary
to
read
the
current
Property
value
before/after
the
subscription
to
get
a
first
value.
</del>
<ins class="diff-chg">somehow
obtained.
</ins>
</p>
<section id="introduction-direct" class="normative">
<div class="header-wrapper">
<h3 id="x6-1-direct">
<bdi class="secno">
<del class="diff-old">5.3.1.4
</del>
<ins class="diff-chg">6.1
</ins>
</bdi>
<del class="diff-old">ActionAffordance
</del>
<ins class="diff-chg">Direct
</ins></h3><a class="self-link" href="#introduction-direct" aria-label= "Permalink for Section 6.1">
</a>
</div>
<p>
<del class="diff-old">An
Interaction
Affordance
that
allows
to
invoke
a
function
of
the
Thing,
which
manipulates
state
(e.g.,
toggling
a
lamp
on
or
off)
or
triggers
a
process
on
the
Thing
(e.g.,
dim
a
lamp
over
time).
Vocabulary
term
Description
Assignment
Type
</del>
<del class="diff-old">input
Used
to
define
the
input
data
schema
of
the
Action.
optional
DataSchema
output
Used
to
define
the
output
data
schema
</del>
<span class="rfc2119-assertion" id="introduction-direct-url">
<ins class="diff-chg">To
obtain
an
URL
</ins>
of
<del class="diff-old">the
Action.
optional
DataSchema
safe
Signals
if
the
Action
is
safe
(=true)
or
not.
Used
to
signal
if
there
is
no
internal
state
(cf.
resource
state)
is
changed
when
invoking
</del>
an
<del class="diff-old">Action.
In
</del>
<ins class="diff-chg">exploration
service,
any
mechanism
</ins>
that
<del class="diff-old">case
responses
can
</del>
<ins class="diff-chg">results
in
a
single
URL
</ins><em class="rfc2119"><ins class="diff-chg">
MAY
</ins></em>
be
<del class="diff-old">cached
</del>
<ins class="diff-chg">used.
</ins></span><ins class="diff-chg">
This
includes
Bluetooth
beacons,
QR
codes,
and
written
URLs
to
be
typed
by
a
user.
</ins><span class="rfc2119-assertion" id= "introduction-direct-thing-description"><ins class="diff-chg">
A
request
on
all
such
URLs
</ins><em class="rfc2119"><ins class="diff-chg">
MUST
</ins></em><ins class="diff-chg">
result
in
a
TD
</ins>
as
<del class="diff-old">example.
with
default
boolean
idempotent
</del>
<ins class="diff-chg">prescribed
in
</ins><a href="#exploration-mech" data-matched-text= "[[[#exploration-mech]]]" class="sec-ref">
<del class="diff-old">Indicates
whether
the
Action
is
idempotent
(=true)
or
not.
Informs
whether
the
Action
</del>
<bdi class= "secno">
<ins class="diff-chg">7.
</ins></bdi><ins class="diff-chg">
Exploration
Mechanisms
</ins></a>.</span><ins class="diff-chg">
For
self-describing
Things,
this
</ins>
can
be
<del class="diff-old">called
repeatedly
with
the
same
result,
if
present,
based
on
</del>
the
<del class="diff-old">same
input.
with
default
boolean
ActionAffordance
is
a
Subclass
</del>
<ins class="diff-chg">TD
</ins>
of
the
<del class="diff-old">InteractionAffordance
Class
.
When
a
Form
instance
is
within
an
ActionAffordance
instance,
</del>
<ins class="diff-chg">Thing
itself.
</ins><span class="rfc2119-assertion" id= "introduction-direct-directory-description"><ins class="diff-chg">
If
</ins>
the
<del class="diff-old">value
assigned
to
op
</del>
<ins class="diff-chg">URL
references
a
</ins><a href="#dfn-wot-thing-description-directory" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-wot-thing-description-directory-3"><ins class="diff-chg">
Thing
Description
Directory
</ins></a>,<ins class="diff-chg">
this
</ins>
<em class="rfc2119">
MUST
</em>
<del class="diff-old">either
</del>
be
<del class="diff-old">invokeaction
,
queryaction
,
cancelaction
or
an
Array
containing
a
combination
</del>
<ins class="diff-chg">the
Directory
Description
</ins>
of
<del class="diff-old">these
terms.
</del>
<ins class="diff-chg">the
</ins><a href="#dfn-wot-thing-description-directory" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-wot-thing-description-directory-4"><ins class="diff-chg">
Thing
Description
Directory
</ins></a>.
</span>
</p>
</section>
<section id="introduction-well-known" class="normative">
<div class="header-wrapper">
<h3 id="x6-2-well-known-uris">
<bdi class="secno">
<del class="diff-old">5.3.1.5
</del>
<ins class="diff-chg">6.2
</ins>
</bdi>
<del class="diff-old">EventAffordance
</del>
<ins class="diff-chg">Well-Known
URIs
</ins></h3><a class="self-link" href="#introduction-well-known" aria-label= "Permalink for Section 6.2">
</a>
</div>
<p>
<del class="diff-old">An
Interaction
Affordance
that
describes
an
event
source,
which
asynchronously
pushes
event
data
to
Consumers
(e.g.,
overheating
alerts).
Vocabulary
term
Description
Assignment
Type
subscription
</del>
<del class="diff-old">Defines
data
that
needs
to
be
passed
upon
subscription,
e.g.,
filters
</del>
<span class="rfc2119-assertion" id= "introduction-well-known-uri">
<ins class="diff-chg">A
Thing
</ins>
or
<del class="diff-old">message
format
for
setting
up
Webhooks.
optional
DataSchema
</del>
<a href= "#dfn-wot-thing-description-directory" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-wot-thing-description-directory-5">
<ins class="diff-chg">Thing
Description
Directory
</ins>
</a>
<del class="diff-old">data
Defines
the
data
schema
of
the
Event
instance
messages
pushed
by
</del>
<em class="rfc2119">
<ins class="diff-chg">MAY
</ins></em><ins class="diff-chg">
use
</ins>
the
<del class="diff-old">Thing.
optional
DataSchema
</del>
<ins class="diff-chg">Well-Known
Uniform
Resource
Identifier
[
</ins><cite>
<a class="bibref" data-link-type="biblio" href="#bib-rfc8615" title= "Well-Known Uniform Resource Identifiers (URIs)">
<ins class="diff-new">RFC8615
</ins>
</a>
<del class="diff-old">dataResponse
Defines
the
data
schema
of
the
Event
response
messages
sent
be
the
consumer
in
a
response
</del>
</cite>
<ins class="diff-chg">]
</ins>
to
<ins class="diff-new">advertise
its
presence.
</ins></span><span class="rfc2119-assertion" id="introduction-well-known-path"><ins class="diff-new">
If
</ins>
a
<del class="diff-old">data
message.
optional
DataSchema
</del>
<ins class="diff-chg">Thing
or
</ins><a href= "#dfn-wot-thing-description-directory" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-wot-thing-description-directory-6"><ins class="diff-chg">
Thing
Description
Directory
</ins>
</a>
<ins class="diff-new">use
the
Well-Known
Uniform
Resource
Identifier
[
</ins><cite>
<del class="diff-old">cancellation
</del>
<a class="bibref" data-link-type="biblio" href= "#bib-rfc8615" title= "Well-Known Uniform Resource Identifiers (URIs)">
<ins class="diff-chg">RFC8615
</ins></a>
<del class="diff-old">Defines
any
data
that
needs
to
be
passed
to
cancel
a
subscription,
e.g.,
a
specific
message
</del>
</cite>
<ins class="diff-chg">]
</ins>
to
<del class="diff-old">remove
a
Webhook.
optional
</del>
<ins class="diff-chg">advertise
its
presence,
it
</ins><em class="rfc2119"><ins class="diff-chg">
MUST
</ins></em><ins class="diff-chg">
register
its
own
Thing
Description
into
the
following
path:
</ins>
<code>
<del class="diff-old">DataSchema
</del>
<ins class="diff-chg">/.well-known/wot
</ins></code>.</span>
</p>
<p>
<del class="diff-old">EventAffordance
is
a
Subclass
of
the
InteractionAffordance
Class
.
</del>
<span class="rfc2119-assertion" id= "introduction-well-known-thing-description">
When
a
<del class="diff-old">Form
instance
</del>
<ins class="diff-chg">request
</ins>
is
<del class="diff-old">within
an
EventAffordance
instance,
</del>
<ins class="diff-chg">made
at
</ins>
the
<del class="diff-old">value
assigned
to
op
</del>
<ins class="diff-chg">above
Well-Known
URI,
the
server
</ins>
<em class= "rfc2119">
MUST
</em>
<ins class="diff-new">return
a
Thing
Description
as
prescribed
in
</ins><a href="#exploration-mech" data-matched-text= "[[[#exploration-mech]]]" class="sec-ref">
<del class="diff-old">be
either
subscribeevent
,
unsubscribeevent
,
or
both
terms
within
an
Array
</del>
<bdi class= "secno">
<ins class="diff-chg">7.
</ins></bdi><ins class="diff-chg">
Exploration
Mechanisms
</ins>
</a>.
</span>
</p>
<div class="note" id="issue-container-generatedID">
<div role="heading" class="ednote-title marker" id="h-ednote" aria-level="4">
<span>
<del class="diff-old">Note
</del>
<ins class="diff-chg">Editor's
note
</ins>
</span>
<del class="diff-old">It
is
considered
to
be
good
practice
that
each
subscribeevent
has
a
corresponding
unsubscribeevent
unless
the
protocol
supports
implicit
unsubscription
mechanisms
(e.g.,
heartbeat
to
detect
connection
loss).
5.3.1.6
VersionInfo
Metadata
of
a
Thing
that
provides
version
information
about
the
TD
document.
If
required,
additional
version
information
such
as
firmware
and
hardware
version
(term
definitions
outside
of
the
TD
namespace)
can
be
extended
via
the
TD
Context
Extension
mechanism.
Vocabulary
term
Description
Assignment
Type
instance
Provides
a
version
indicator
of
this
TD.
instance.
mandatory
string
model
Provides
a
version
indicator
</del>
<span class= "issue-label">:
<ins class="diff-chg">Registration
</ins>
of
<del class="diff-old">the
underlying
TM.
instance.
optional
</del>
<ins class="diff-chg">Well-known
URI
</ins></span>
</div>
<p class="">
<ins class="diff-new">The
service
name
in
Well-Known
URI
(
</ins>
<code>
<del class="diff-old">string
</del>
<ins class="diff-chg">wot
</ins>
</code>
<del class="diff-old">It
</del>
<ins class="diff-chg">)
</ins>
is
<del class="diff-old">recommended
that
the
values
within
instances
</del>
<ins class="diff-chg">tentative.
"Well-Known
URIs"
registry
</ins>
and
<del class="diff-old">model
</del>
<ins class="diff-chg">contents
</ins>
of
<del class="diff-old">the
VersionInfo
Class
follow
the
semantic
versioning
pattern,
where
a
sequence
</del>
<ins class="diff-chg">registration
request
is
described
in
Section
3.1
</ins>
of
<del class="diff-old">three
numbers
separated
by
a
dot
indicates
the
major
version,
minor
version,
and
patch
version,
respectively.
See
</del>
[
<cite>
<del class="diff-old">SEMVER
</del>
<a class="bibref" data-link-type="biblio" href= "#bib-rfc8615" title= "Well-Known Uniform Resource Identifiers (URIs)">
<ins class="diff-chg">RFC8615
</ins>
</a>
</cite>
<del class="diff-old">]
for
details.
</del>
<ins class="diff-chg">].
</ins>
</p>
</div>
</section>
<section id="introduction-dns-sd-sec" class="normative">
<div class="header-wrapper">
<h3 id="x6-3-dns-based-service-discovery">
<del class="diff-old">5.3.1.7
</del>
<bdi class= "secno">
<ins class="diff-chg">6.3
</ins>
</bdi>
<del class="diff-old">MultiLanguage
</del>
<ins class="diff-chg">DNS-Based
Service
Discovery
</ins></h3><a class="self-link" href="#introduction-dns-sd-sec" aria-label= "Permalink for Section 6.3">
</a>
</div>
<p>
<del class="diff-old">A
Map
providing
a
set
of
human-readable
texts
in
different
languages
identified
by
language
tags
described
in
[
BCP47
</del>
<del class="diff-old">].
See
6.3.2
Human-Readable
Metadata
for
example
usages
of
this
container
in
a
</del>
<span class="rfc2119-assertion" id="introduction-dns-sd">
<ins class="diff-chg">A
Thing
or
</ins><a href="#dfn-wot-thing-description-directory" class= "internalDFN" data-link-type="dfn" id= "ref-for-dfn-wot-thing-description-directory-7">
Thing
Description
<del class="diff-old">instance.
Each
name
of
the
MultiLanguage
Map
</del>
<ins class="diff-chg">Directory
</ins>
</a>
<del class="diff-old">MUST
</del>
<em class="rfc2119">
<ins class="diff-chg">MAY
</ins>
</em>
<del class="diff-old">be
a
language
tag
as
defined
in
[
</del>
<ins class="diff-chg">use
DNS-Based
Service
Discovery
(DNS-SD)[
</ins>
<cite>
<del class="diff-old">BCP47
</del>
<a class="bibref" data-link-type="biblio" href="#bib-rfc6763" title= "DNS-Based Service Discovery">
<ins class="diff-chg">RFC6763
</ins>
</a>
</cite>
].
</span>
<del class="diff-old">Each
value
of
the
MultiLanguage
Map
MUST
</del>
<ins class="diff-chg">This
can
</ins>
be
<del class="diff-old">of
type
string
.
5.3.2
Data
Schema
Vocabulary
Definitions
A
data
schema
is
an
abstract
notation
for
data
contained
in
data
formats.
The
data
schema
vocabulary
definition
reflects
a
very
common
subset
of
</del>
<ins class="diff-chg">also
be
used
on
</ins>
the
<del class="diff-old">terms
defined
by
JSON
Schema
[
</del>
<ins class="diff-chg">same
local
network
in
combination
with
Multicast
DNS
(mDNS)[
</ins>
<cite>
<del class="diff-old">JSON-SCHEMA
</del>
<a class="bibref" data-link-type= "biblio" href="#bib-rfc6762" title= "Multicast DNS">
<ins class="diff-chg">RFC6762
</ins>
</a>
</cite>
].
<del class="diff-old">It
is
noted
that
data
schema
definitions
within
Thing
Description
instances
are
not
limited
to
this
defined
subset
and
may
use
additional
terms
found
in
JSON
Schema
using
a
TD
Context
Extension
for
the
additional
terms
as
described
in
7.
TD
Context
Extensions
,
otherwise
these
terms
are
semantically
ignored
by
TD
Processors
(for
details
about
semantic
processing,
please
refer
to
C.
JSON-LD
Context
Usage
and
the
documentation
under
the
namespace
IRIs,
e.g.,
https://www.w3.org/2019/wot/td
).
</del>
</p>
<p>
In
<del class="diff-old">a
TD,
concrete
data
formats
are
specified
in
Forms
(see
5.3.4.2
Form
)
using
content
types.
When
</del>
<ins class="diff-chg">DNS-SD,
</ins>
the
<del class="diff-old">value
of
a
content
type
in
an
instance
</del>
<ins class="diff-chg">format
</ins>
of
the
<del class="diff-old">Form
</del>
<ins class="diff-chg">Service
Instance
Name
</ins>
is
<code>
<del class="diff-old">application/json
,
</del>
<ins class="diff-chg">Instance.Service.Domain
</ins></code>.<ins class="diff-chg">
The
Service
part
is
a
pair
of
labels
following
</ins>
the
<del class="diff-old">data
schema
can
be
processed
directly
by
JSON
Schema
processors.
Otherwise,
Web
</del>
<ins class="diff-chg">conventions
</ins>
of
<del class="diff-old">Things
(WoT)
Binding
Templates
</del>
[
<cite>
<del class="diff-old">WOT-BINDING-TEMPLATES
]
defines
data
schema's
available
mappings
to
other
content
types
such
as
XML
[
xml
</del>
<a class="bibref" data-link-type="biblio" href="#bib-rfc2782" title= "A DNS RR for specifying the location of services (DNS SRV)">
<ins class="diff-chg">RFC2782
</ins>
</a>
</cite>
].
<del class="diff-old">If
the
content
type
in
</del>
<ins class="diff-chg">The
first
label
has
</ins>
an
<del class="diff-old">instance
of
</del>
<ins class="diff-chg">underscore
followed
by
</ins>
the
<del class="diff-old">Form
is
not
application/json
</del>
<ins class="diff-chg">Service
Name,
</ins>
and
<del class="diff-old">if
no
mapping
is
defined
for
</del>
the
<del class="diff-old">content
type,
specifying
a
data
schema
does
not
make
sense
for
</del>
<ins class="diff-chg">second
label
describes
</ins>
the
<del class="diff-old">content
type.
</del>
<ins class="diff-chg">protocol.
</ins>
</p>
<p>
<span class="rfc2119-assertion" id= "introduction-dns-sd-service-name">
The
<del class="diff-old">following
table
is
at
risk
but
contains
content
types
which
</del>
<ins class="diff-chg">Service
Name
to
indicate
the
Thing
or
</ins><a href="#dfn-wot-thing-description-directory" class= "internalDFN" data-link-type="dfn" id= "ref-for-dfn-wot-thing-description-directory-8"><ins class="diff-chg">
Thing
Description
Directory
</ins></a>
<em class="rfc2119">
<del class="diff-old">MAY
</del>
<ins class="diff-chg">MUST
</ins>
</em>
<del class="diff-old">use
data
schema.
</del>
<ins class="diff-chg">be
</ins><code><ins class="diff-chg">
_wot
</ins></code>.</span><span class="rfc2119-assertion" id= "introduction-dns-sd-service-name-directory"><ins class="diff-chg">
The
Service
Name
to
indicate
the
</ins><a href="#dfn-wot-thing-description-directory" class= "internalDFN" data-link-type="dfn" id= "ref-for-dfn-wot-thing-description-directory-9"><ins class="diff-chg">
Thing
Description
Directory
</ins></a><em class="rfc2119"><ins class="diff-chg">
MUST
</ins></em><ins class="diff-chg">
be
</ins><code><ins class="diff-chg">
_directory._sub._wot
</ins></code>.
</span>
</p>
<del class="diff-old">Format
Content
Type
JSON
</del>
<div class="note" id="issue-container-generatedID-0">
<div role="heading" class="ednote-title marker" id="h-ednote-0" aria-level="4">
<del class="diff-old">application/json
</del>
<span>
<ins class="diff-chg">Editor's
note
</ins></span>
<del class="diff-old">application/ld+json
</del>
<span class= "issue-label">:
<ins class="diff-chg">Service
Names
in
existing
implementations
</ins></span>
</div>
<p class="">
<ins class="diff-chg">The
Service
Names
</ins>
<code>
<del class="diff-old">application/senml+json
</del>
<ins class="diff-chg">_wot
</ins>
</code>
<ins class="diff-chg">and
</ins>
<code>
<del class="diff-old">application/cbor
</del>
<ins class="diff-chg">_directory._sub._wot
</ins>
</code>
<ins class="diff-chg">are
tentative.
The
following
Service
Names
are
used
in
the
existing
implementations:
</ins>
<code>
<del class="diff-old">application/senml+cbor
XML
</del>
<ins class="diff-chg">_wot
</ins></code>,
<code>
<del class="diff-old">application/xml
</del>
<ins class="diff-chg">_device._sub._wot
</ins></code>,
<code>
<del class="diff-old">application/senml+xml
</del>
<ins class="diff-chg">_directory._sub._wot
</ins></code>,
<code>
<del class="diff-old">application/exi
5.3.2.1
</del>
<ins class="diff-chg">_webthing
</ins></code>,
<code>
<del class="diff-old">DataSchema
</del>
<ins class="diff-chg">_wot-servient
</ins></code>.<ins class="diff-chg">
To
use
a
Service
Name,
registration
to
"Underscored
and
Globally
Scoped
DNS
Node
Names"
Registry
[
</ins><cite>
<a class="bibref" data-link-type="biblio" href= "#bib-rfc8552" title= "Scoped Interpretation of DNS Resource Records through &quot;Underscored&quot; Naming of Attribute Leaves">
<ins class="diff-new">RFC8552
</ins>
</a>
</cite>
<ins class="diff-new">]
is
required.
</ins></p>
</div>
<div class="rfc2119-assertion" id="introduction-dns-sd-txt-record">
<p>
<del class="diff-old">Metadata
that
describes
</del>
<ins class="diff-chg">In
addition,
</ins>
the
<del class="diff-old">data
format
used.
It
can
</del>
<ins class="diff-chg">following
information
</ins><em class= "rfc2119"><ins class="diff-chg">
MUST
</ins></em>
be
<del class="diff-old">used
for
validation.
Vocabulary
term
Description
Assignment
Type
</del>
<ins class="diff-chg">included
in
the
</ins>
<code>
<del class="diff-old">@type
</del>
<ins class="diff-chg">TXT
</ins>
</code>
<del class="diff-old">JSON-LD
keyword
</del>
<ins class="diff-chg">record
that
is
pointed
</ins>
to
<del class="diff-old">label
</del>
<ins class="diff-chg">by
</ins>
the
<del class="diff-old">object
with
semantic
tags
(or
types)
optional
</del>
<ins class="diff-chg">Service
Instance
Name:
</ins></p><dl><dt>
<code>
<del class="diff-old">string
</del>
<ins class="diff-chg">td
</ins>
</code>
</dt>
<dd>
<ins class="diff-chg">Absolute
pathname
of
the
Thing
Description
of
the
Thing
</ins>
or
<del class="diff-old">Array
</del>
<ins class="diff-chg">Directory
Description
</ins>
of
<del class="diff-old">string
title
Provides
a
human-readable
title
(e.g.,
display
a
text
for
UI
representation)
based
on
a
default
language.
optional
string
</del>
<ins class="diff-chg">the
</ins><a href= "#dfn-wot-thing-description-directory" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-wot-thing-description-directory-10"><ins class="diff-chg">
Thing
Description
Directory
</ins></a>.</dd><dt>
<code>
<del class="diff-old">titles
</del>
<ins class="diff-chg">type
</ins>
</code>
<del class="diff-old">Provides
multi-language
human-readable
titles
(e.g.,
display
a
text
for
UI
representation
in
different
languages).
Also
see
MultiLanguage
.
optional
Map
</del>
</dt>
<dd>
<ins class="diff-chg">Type
</ins>
of
<del class="diff-old">MultiLanguage
description
Provides
additional
(human-readable)
information
based
on
a
default
language.
optional
</del>
<ins class="diff-chg">the
Thing
Description,
i.e.
</ins>
<code>
<del class="diff-old">string
</del>
<ins class="diff-chg">Thing
</ins>
</code>
<ins class="diff-chg">or
</ins>
<code>
<del class="diff-old">descriptions
Can
be
used
</del>
<ins class="diff-chg">Directory
</ins></code>.<ins class="diff-chg">
If
omitted,
the
type
is
assumed
</ins>
to
<del class="diff-old">support
(human-readable)
information
in
different
languages.
Also
see
MultiLanguage
.
optional
Map
of
MultiLanguage
</del>
<ins class="diff-chg">be
</ins>
<code>
<del class="diff-old">const
Provides
a
constant
value.
optional
any
type
</del>
<ins class="diff-chg">Thing
</ins></code>.</dd></dl></div><div class="note" id="issue-container-generatedID-1"><div role="heading" class="ednote-title marker" id="h-ednote-1" aria-level="4">
<del class="diff-old">default
</del>
<span>
<ins class="diff-chg">Editor's
note
</ins></span>
<del class="diff-old">Supply
</del>
<span class= "issue-label">:
<ins class="diff-chg">Usage
of
</ins>
a
<del class="diff-old">default
value.
The
value
should
validate
against
the
data
schema
</del>
<ins class="diff-chg">TXT
record
</ins>
in
<del class="diff-old">which
it
resides.
optional
any
type
unit
</del>
<ins class="diff-chg">existing
implementations
</ins></span>
<del class="diff-old">Provides
unit
information
that
is
used,
e.g.,
</del>
</div>
<p class="">
<ins class="diff-chg">The
following
key/value
pairs
are
used
</ins>
in
<del class="diff-old">international
science,
engineering,
and
business.
To
preserve
uniqueness,
it
is
recommended
that
</del>
the
<del class="diff-old">value
</del>
<ins class="diff-chg">existing
implementations:
</ins><br /><code><ins class="diff-chg">
retrieve
</ins></code>:<ins class="diff-chg">
Absolute
path
name
</ins>
of
the
<del class="diff-old">unit
points
to
a
semantic
definition
(also
see
Section
Semantic
Annotations
).
optional
string
oneOf
Used
</del>
<ins class="diff-chg">API
</ins>
to
<del class="diff-old">ensure
that
the
data
is
valid
against
one
</del>
<ins class="diff-chg">get
an
array
</ins>
of
<ins class="diff-new">Thing
Description
IDs
from
</ins>
the
<del class="diff-old">specified
schemas
in
the
array.
optional
Array
of
DataSchema
</del>
<ins class="diff-chg">directory
service.
</ins><br />
<code>
<del class="diff-old">enum
Restricted
set
of
values
provided
as
an
array.
optional
Array
</del>
<ins class="diff-chg">register
</ins></code>:<ins class="diff-chg">
Absolute
path
name
</ins>
of
<del class="diff-old">any
type
readOnly
Boolean
value
that
is
a
hint
to
indicate
whether
a
property
interaction
/
value
is
read
only
(=true)
or
not
(=false).
with
default
boolean
writeOnly
Boolean
value
that
is
a
hint
</del>
<ins class="diff-chg">the
API
</ins>
to
<del class="diff-old">indicate
whether
</del>
<ins class="diff-chg">register
</ins>
a
<del class="diff-old">property
interaction
/
value
is
write
only
(=true)
or
not
(=false).
</del>
<ins class="diff-chg">Directory
Description
</ins>
with
<del class="diff-old">default
boolean
</del>
<ins class="diff-chg">the
</ins><a href= "#dfn-wot-thing-description-directory" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-wot-thing-description-directory-11"><ins class="diff-chg">
Thing
Description
Directory
</ins></a>.<br />
<code>
<del class="diff-old">format
Allows
validation
based
</del>
<ins class="diff-chg">path
</ins></code>:<ins class="diff-chg">
The
URI
of
the
thing
description
</ins>
on
<del class="diff-old">a
format
pattern
such
as
"date-time",
"email",
"uri",
etc.
(Also
see
below.)
optional
string
</del>
<ins class="diff-chg">the
Web
Thing's
web
server
</ins><br />
<code>
<del class="diff-old">type
Assignment
of
JSON-based
data
types
compatible
with
JSON
Schema
(one
of
boolean,
integer,
number,
string,
object,
array,
or
null).
optional
any
type
(one
</del>
<ins class="diff-chg">td
</ins></code>:<ins class="diff-chg">
Prefix
</ins>
of
<ins class="diff-new">directory
service
API
</ins><br />
<code>
<del class="diff-old">object
,
array
,
string
,
number
,
integer
,
boolean
,
or
null
)
The
class
DataSchema
has
</del>
<ins class="diff-chg">tls
</ins></code>:<ins class="diff-chg">
Value
of
1
if
</ins>
the
<del class="diff-old">following
subclasses:
</del>
<ins class="diff-chg">Web
Thing
supports
connections
via
HTTPS.
</ins><br />
</p>
</div>
<p>
<del class="diff-old">ArraySchema
</del>
<a href="#sequence-dnssd-thing" class="fig-ref" title= "An example sequence of discovery of Thing using DNS-SD and mDNS">
<ins class="diff-chg">Figure
</ins><bdi class="figno"><ins class="diff-chg">
2
</ins></bdi>
</a>
<del class="diff-old">BooleanSchema
</del>
<ins class="diff-chg">and
</ins><a href= "#sequence-dnssd-directory" class="fig-ref" title= "An example sequence of discovery of Thing Description Directory using DNS-SD and mDNS"><ins class="diff-chg">
Figure
</ins><bdi class="figno"><ins class="diff-chg">
3
</ins></bdi>
</a>
<del class="diff-old">NumberSchema
</del>
<ins class="diff-chg">shows
example
sequences
of
discovery
of
Thing
and
</ins><a href= "#dfn-wot-thing-description-directory" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-wot-thing-description-directory-12"><ins class="diff-chg">
Thing
Description
Directory
</ins>
</a>
<ins class="diff-new">using
DNS-SD
and
mDNS.
</ins></p><figure id="sequence-dnssd-thing">
<img src= "images/sequence-dnssd-thing.png" srcset= "images/sequence-dnssd-thing.svg" class="wot-diagram" alt= "An example sequence of discovery of Thing using DNS-SD and mDNS" />
<figcaption>
<ins class="diff-chg">Figure
</ins><bdi class="figno"><ins class="diff-chg">
2
</ins></bdi><span class= "fig-title"><ins class="diff-chg">
An
example
sequence
of
discovery
of
Thing
using
DNS-SD
and
mDNS
</ins></span>
<del class="diff-old">IntegerSchema
</del>
</figcaption>
</figure>
<figure id="sequence-dnssd-directory">
<img src= "images/sequence-dnssd-directory.png" srcset= "images/sequence-dnssd-directory.svg" class="wot-diagram" alt= "An example sequence of discovery of directory service using DNS-SD and mDNS" />
<figcaption>
<ins class="diff-new">Figure
</ins><bdi class="figno"><ins class="diff-new">
3
</ins></bdi><span class= "fig-title"><ins class="diff-new">
An
example
sequence
of
discovery
of
</ins><a href= "#dfn-wot-thing-description-directory" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-wot-thing-description-directory-13"><ins class="diff-new">
Thing
Description
Directory
</ins>
</a>
<ins class="diff-new">using
DNS-SD
and
mDNS
</ins></span>
<del class="diff-old">ObjectSchema
</del>
</figcaption>
</figure>
</section>
<section id="introduction-core-rd-sec" class="normative">
<div class="header-wrapper">
<h3 id="x6-4-core-link-format-and-core-resource-directory">
<bdi class="secno">
<ins class="diff-chg">6.4
</ins></bdi><ins class="diff-chg">
CoRE
Link
Format
and
CoRE
Resource
Directory
</ins></h3><a class="self-link" href="#introduction-core-rd-sec" aria-label= "Permalink for Section 6.4">
</a>
<del class="diff-old">StringSchema
</del>
</div>
<p>
<span class="rfc2119-assertion" id="introduction-core-rd">
<ins class="diff-new">A
Thing
or
</ins><a href="#dfn-wot-thing-description-directory" class= "internalDFN" data-link-type="dfn" id= "ref-for-dfn-wot-thing-description-directory-14"><ins class="diff-new">
Thing
Description
Directory
</ins>
</a>
<em class="rfc2119">
<ins class="diff-new">MAY
</ins></em><ins class="diff-new">
advertise
its
presence
using
the
Constrained
RESTful
Environment
(CoRE)
Link
Format
[
</ins><cite>
<del class="diff-old">NullSchema
</del>
<a class="bibref" data-link-type="biblio" href= "#bib-rfc6690" title= "Constrained RESTful Environments (CoRE) Link Format">
<ins class="diff-chg">RFC6690
</ins>
</a>
<del class="diff-old">The
format
string
values
are
known
from
a
fixed
set
of
values
and
their
corresponding
format
rules
defined
in
</del>
</cite>
<ins class="diff-chg">].
</ins></span><span class="rfc2119-assertion" id= "introduction-core-rd-directory"><ins class="diff-chg">
A
Thing
or
</ins><a href= "#dfn-wot-thing-description-directory" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-wot-thing-description-directory-15"><ins class="diff-chg">
Thing
Description
Directory
</ins></a><em class="rfc2119"><ins class="diff-chg">
MAY
</ins></em><ins class="diff-chg">
use
the
CoRE
Resource
Directory
</ins>
[
<cite>
<del class="diff-old">JSON-SCHEMA
</del>
<a class="bibref" data-link-type="biblio" href= "#bib-core-rd" title="CoRE Resource Directory">
<ins class="diff-chg">CoRE-RD
</ins>
</a>
</cite>
]
<del class="diff-old">(Section
7.3
Defined
Formats
in
particular).
Servients
</del>
<ins class="diff-chg">to
register
a
link
to
the
Thing
or
Directory
Description.
</ins></span>
<del class="diff-old">MAY
</del>
</p>
<p>
<del class="diff-old">use
the
</del>
<span class="rfc2119-assertion" id= "introduction-core-rd-resource-type-thing">
<ins class="diff-chg">The
resource
type
(
</ins>
<code>
<del class="diff-old">format
</del>
<ins class="diff-chg">rt
</ins>
</code>
<del class="diff-old">value
to
perform
additional
validation
accordingly.
When
a
value
</del>
<ins class="diff-chg">)
of
the
Link
</ins>
that
<del class="diff-old">is
not
found
in
</del>
<ins class="diff-chg">targets
</ins>
the
<del class="diff-old">known
set
</del>
<ins class="diff-chg">Thing
Description
</ins>
of
<del class="diff-old">values
is
assigned
to
format
,
such
a
validation
SHOULD
</del>
<ins class="diff-chg">the
Thing
</ins><em class="rfc2119"><ins class="diff-chg">
MUST
</ins>
</em>
<ins class="diff-chg">be
</ins><code><ins class="diff-chg">
wot.thing
</ins></code>.</span><span class="rfc2119-assertion" id= "introduction-core-rd-resource-type-directory"><ins class="diff-chg">
The
resource
type
of
the
Link
that
targets
the
Directory
Description
of
the
</ins><a href= "#dfn-wot-thing-description-directory" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-wot-thing-description-directory-16"><ins class="diff-chg">
Thing
Description
Directory
</ins></a><em class="rfc2119"><ins class="diff-chg">
MUST
</ins>
</em>
<del class="diff-old">succeed.
</del>
<ins class="diff-chg">be
</ins><code><ins class="diff-chg">
wot.directory
</ins></code>.
</span>
</p>
<div class="note" id="issue-container-generatedID-2">
<div role="heading" class="ednote-title marker" id="h-ednote-2" aria-level="4">
<span>
<del class="diff-old">Note
</del>
<ins class="diff-chg">Editor's
note
</ins>
</span>
</div>
<p class="">
The
<ins class="diff-new">resource
types
</ins>
<code>
<del class="diff-old">format
</del>
<ins class="diff-chg">wot.thing
</ins>
</code>
<del class="diff-old">term
is
not
widely
implemented
by
JSON
Schema
tools.
In
addition,
the
term
</del>
<ins class="diff-chg">and
</ins>
<code>
<del class="diff-old">format
</del>
<ins class="diff-chg">wot.directory
</ins>
</code>
<del class="diff-old">is
being
discussed
by
the
JSON
Schema
standardisation
community
and
may
be
replaced
by
another
mechanism
or
removed
in
a
future
JSON
Schema
version.
</del>
<ins class="diff-chg">are
tentative.
See
also
</ins><a href= "#iana-considerations" class="sec-ref"><bdi class="secno"><ins class="diff-chg">
11.
</ins></bdi><ins class="diff-chg">
IANA
Considerations
</ins></a>.
</p>
</div>
</section>
<section id="introduction-did-sec" class="normative">
<div class="header-wrapper">
<h3 id="x6-5-did-documents">
<bdi class="secno">
<del class="diff-old">5.3.2.2
</del>
<ins class="diff-chg">6.5
</ins>
</bdi>
<del class="diff-old">ArraySchema
</del>
<ins class="diff-chg">DID
Documents
</ins></h3><a class="self-link" href="#introduction-did-sec" aria-label= "Permalink for Section 6.5">
</a>
</div>
<p>
<del class="diff-old">Metadata
describing
data
of
type
Array
.
This
Subclass
</del>
<span class="rfc2119-assertion" id="introduction-did">
<ins class="diff-chg">A
Thing
or
</ins><a href="#dfn-wot-thing-description-directory" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-wot-thing-description-directory-17"><ins class="diff-chg">
Thing
Description
Directory
</ins>
</a>
<del class="diff-old">is
indicated
by
</del>
<em class="rfc2119">
<ins class="diff-chg">MAY
</ins></em><ins class="diff-chg">
advertise
its
presence
using
</ins>
the
<del class="diff-old">value
array
assigned
to
type
in
DataSchema
instances.
</del>
<ins class="diff-chg">Decentralized
Identifier
(DID)
[
</ins><cite>
<del class="diff-old">Vocabulary
term
</del>
<a class="bibref" data-link-type="biblio" href="#bib-did-core" title= "Decentralized Identifiers (DIDs) v1.0">
<ins class="diff-chg">DID-CORE
</ins>
</a>
<del class="diff-old">Description
Assignment
Type
</del>
</cite>
<ins class="diff-chg">].
</ins></span>
<del class="diff-old">items
</del>
</p>
<p>
<del class="diff-old">Used
to
define
</del>
<span class="rfc2119-assertion" id= "introduction-did-service-endpoint">
<ins class="diff-chg">The
DID
Document
obtained
by
resolving
</ins>
the
<del class="diff-old">characteristics
</del>
<ins class="diff-chg">DID
</ins>
of
<del class="diff-old">an
array.
optional
DataSchema
</del>
<ins class="diff-chg">a
Thing
</ins>
or
<del class="diff-old">Array
</del>
<a href= "#dfn-wot-thing-description-directory" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-wot-thing-description-directory-18">
<ins class="diff-chg">Thing
Description
Directory
</ins>
</a>
<del class="diff-old">of
</del>
<em class="rfc2119">
<ins class="diff-chg">MUST
</ins></em><ins class="diff-chg">
contain
a
Service
Endpoint
which
points
to
a
Thing
Description
describing
that
Thing
or
</ins><a href="#dfn-wot-thing-description-directory" class= "internalDFN" data-link-type="dfn" id= "ref-for-dfn-wot-thing-description-directory-19"><ins class="diff-chg">
Thing
Description
Directory
</ins></a>.</span>
<del class="diff-old">DataSchema
</del>
</p>
<aside class="example" id= "example-a-example-service-endpoint-in-a-did-document">
<div class="marker">
<a class="self-link" href= "#example-a-example-service-endpoint-in-a-did-document">
<ins class="diff-chg">Example
</ins><bdi><ins class="diff-chg">
1
</ins></bdi>
</a>
<span class="example-title">:
<ins class="diff-chg">A
Example
Service
Endpoint
in
a
DID
Document
</ins></span>
<del class="diff-old">minItems
</del>
</div>
<pre aria-busy="false"><code class="hljs json">{
    <span class="hljs-attr">"service"</span>: [{
        <span class="hljs-attr">"id"</span>: <span class=
<ins class="diff-chg">"hljs-string">"did:example:wotdiscoveryexample#td"</span>,
</ins>        <span class="hljs-attr">"type"</span>: <span class=<ins class="diff-chg">
"hljs-string">"WotThingDescription"</span>,
</ins>        <span class="hljs-attr">"serviceEndpoint"</span>:            <span class=<ins class="diff-chg">
"hljs-string">"https://wot.example.com/.well-known/wot"</span>
    }]
}
</ins>
</code>
<del class="diff-old">Defines
the
minimum
number
of
items
that
have
to
be
in
the
array.
optional
</del>
</pre>
<del class="diff-old">unsignedInt
</del>
</aside>
<div class="issue" id="issue-container-number-65">
<div role="heading" class="issue-title marker" id="h-issue" aria-level="4">
<a href= "https://github.com/w3c/wot-discovery/issues/65">
<span class= "issue-number">
<ins class="diff-chg">Issue
65
</ins></span>
</a>
<span class="issue-label">:
<ins class="diff-chg">Create
typed
links
in
DID
Documents
for
WoT
Directories
</ins><a class= "respec-gh-label" href= "https://github.com/w3c/wot-discovery/issues/?q=is%3Aissue+is%3Aopen+label%3A%22DID%22" style="background-color: rgb(252, 201, 146); color: rgb(0, 0, 0);" aria-label="GitHub label: DID"><ins class="diff-chg">
DID
</ins></a>
<del class="diff-old">maxItems
</del>
</span>
<del class="diff-old">Defines
the
maximum
number
of
items
</del>
</div>
<p dir="auto">
<ins class="diff-chg">These
should
be
consistent
with
a
general
model
</ins>
that
<del class="diff-old">have
</del>
<ins class="diff-chg">we
should
also
use
for
similar
things,
i.e.
CoRE-RD
and
DNS-SD.
We
should
discuss
with
DID
the
process
for
how
</ins>
to
<del class="diff-old">be
</del>
<ins class="diff-chg">document
a
link
type
for
use
</ins>
in
<del class="diff-old">the
array.
optional
unsignedInt
</del>
<ins class="diff-chg">DID
Documents.
</ins></p></div>
</section>
</section>
<section id="exploration-mech" class="normative">
<div class="header-wrapper">
<h2 id="x7-exploration-mechanisms">
<bdi class="secno">
<del class="diff-old">5.3.2.3
</del>
<ins class="diff-chg">7.
</ins>
</bdi>
<del class="diff-old">BooleanSchema
</del>
<ins class="diff-chg">Exploration
Mechanisms
</ins></h2><a class="self-link" href="#exploration-mech" aria-label= "Permalink for Section 7.">
</a>
</div>
<del class="diff-old">Metadata
describing
data
of
type
boolean
.
</del>
This
<del class="diff-old">Subclass
is
indicated
by
</del>
<ins class="diff-chg">section
defines
</ins>
the
<del class="diff-old">value
boolean
assigned
to
type
in
DataSchema
instances.
</del>
<ins class="diff-chg">supported
exploration
mechanisms
after
providing
some
common
background
material.
</ins><section id="exploration-overview" class="normative">
<div class="header-wrapper">
<h3 id="x7-1-overview">
<bdi class="secno">
<del class="diff-old">5.3.2.4
</del>
<ins class="diff-chg">7.1
</ins>
</bdi>
<del class="diff-old">NumberSchema
</del>
<ins class="diff-chg">Overview
</ins></h3><a class="self-link" href="#exploration-overview" aria-label= "Permalink for Section 7.1">
</a>
</div>
<del class="diff-old">Metadata
describing
data
</del>
<figure id="exploration-class-diagram">
<img src= "images/exploration-class-diagram.svg" class="wot-diagram" alt= "Exploration mechanisms high-level class diagram" height="273" width="766" />
<figcaption>
<ins class="diff-chg">Figure
</ins><bdi class="figno"><ins class="diff-chg">
4
</ins></bdi><span class= "fig-title"><ins class="diff-chg">
The
high-level
class
diagram
</ins>
of
<del class="diff-old">type
number
.
This
Subclass
is
indicated
by
</del>
the
<del class="diff-old">value
number
assigned
to
type
in
DataSchema
instances.
Vocabulary
term
</del>
<ins class="diff-chg">exploration
mechanisms,
depicting
how
Thing
</ins>
Description
<del class="diff-old">Assignment
Type
minimum
Specifies
</del>
<ins class="diff-chg">Servers
and
Thing
Description
Directories
provide
</ins><a href="#dfn-td" class= "internalDFN" data-link-type="dfn" id="ref-for-dfn-td-1"><ins class="diff-chg">
TDs
</ins></a>.<ins class="diff-chg">
A
Self-describing
Thing
is
</ins>
a
<del class="diff-old">minimum
numeric
value,
representing
an
inclusive
lower
limit.
Only
applicable
for
associated
number
or
integer
types.
optional
double
exclusiveMinimum
Specifies
</del>
<ins class="diff-chg">special
case
of
</ins>
a
<del class="diff-old">minimum
numeric
value,
representing
an
exclusive
lower
limit.
Only
applicable
</del>
<ins class="diff-chg">Thing
Description
Server
that
is
also
a
Thing.
A
Thing
Description
Directory
acts
as
a
Thing
Description
Server
</ins>
for
<del class="diff-old">associated
number
or
integer
types.
optional
</del>
<ins class="diff-chg">each
Thing
Description
it
contains.
</ins></span>
</figcaption>
</figure>
<p>
<del class="diff-old">double
</del>
<a href="#exploration-class-diagram" data-matched-text= "[[[#exploration-class-diagram]]]" class="fig-ref" title= "The high-level class diagram of the exploration mechanisms, depicting how Thing Description Servers and Thing Description Directories provide TDs. A Self-describing Thing is a special case of a Thing Description Server that is also a Thing. A Thing Description Directory acts as a Thing Description Server for each Thing Description it contains.">
<ins class="diff-chg">Figure
</ins><bdi class="figno"><ins class="diff-chg">
4
</ins></bdi>
</a>
<del class="diff-old">maximum
Specifies
a
maximum
numeric
value,
representing
an
inclusive
upper
limit.
Only
applicable
</del>
<ins class="diff-chg">depicts
the
high-level
information
model
</ins>
for
<del class="diff-old">associated
number
or
integer
types.
optional
double
</del>
<a href="#dfn-wot-td-server" class= "internalDFN" data-link-type="dfn" id= "ref-for-dfn-wot-td-server-1">
<ins class="diff-chg">TD
Servers
</ins>
</a>
<del class="diff-old">exclusiveMaximum
Specifies
a
maximum
numeric
value,
representing
an
exclusive
upper
limit.
Only
applicable
</del>
<ins class="diff-chg">(serving
single
TDs,
including
those
</ins>
for
<del class="diff-old">associated
number
or
integer
types.
optional
double
</del>
<ins class="diff-chg">self-description)
and
</ins><a href= "#dfn-wot-thing-description-directory" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-wot-thing-description-directory-20"><ins class="diff-chg">
Thing
Description
Directory
</ins>
</a>
<del class="diff-old">multipleOf
Specifies
</del>
<ins class="diff-chg">services.
A
</ins><a href= "#dfn-wot-thing-description-directory" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-wot-thing-description-directory-21"><ins class="diff-chg">
Thing
Description
Directory
</ins></a><ins class="diff-chg">
may
contain
</ins><a href="#dfn-td" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-td-2"><ins class="diff-chg">
TDs
</ins></a><ins class="diff-chg">
and
at
</ins>
the
<del class="diff-old">multipleOf
value
number.
The
value
must
strictly
greater
than
0.
Only
applicable
</del>
<ins class="diff-chg">same
time
is
also
a
Thing,
which
means
it
has
its
own
TD.
A
directory
also
hosts
web
service
endpoints
</ins>
for
<del class="diff-old">associated
number
or
integer
types.
optional
double
</del>
<ins class="diff-chg">retrieving
individual
TDs
for
other
Things
and
each
of
these
can
be
used
as
a
TD
Server.
A
Thing
may
in
general
host
its
own
TD
in
which
case
it
is
a
Self-Describing
Thing.
Self-description
is
not
mandatory
for
directories,
but
Self-Describing
Thing
Description
Directories
are
possible
that
are
both
Thing
Description
Directories
and
Self-Describing
Things.
</ins></p><p><ins class="diff-chg">
The
two
basic
exploration
mechanisms
are
described
in
</ins><a href= "#exploration-server" data-matched-text="[[[#exploration-server]]]" class="sec-ref">
<bdi class="secno">
<ins class="diff-new">7.2
</ins></bdi><ins class="diff-new">
Thing
Description
Server
</ins>
</a>
<ins class="diff-new">and
</ins><a href="#exploration-directory" data-matched-text= "[[[#exploration-directory]]]" class="sec-ref">
<bdi class= "secno">
<ins class="diff-chg">7.3
</ins></bdi><ins class="diff-chg">
Thing
Description
Directory
</ins></a>.</p><section id="exploration-ontology" class="normative">
<div class="header-wrapper">
<h4 id="x7-1-1-ontology">
<bdi class="secno">
<del class="diff-old">5.3.2.5
</del>
<ins class="diff-chg">7.1.1
</ins>
</bdi>
<del class="diff-old">IntegerSchema
</del>
<ins class="diff-chg">Ontology
</ins></h4><a class="self-link" href="#exploration-ontology" aria-label= "Permalink for Section 7.1.1">
</a>
</div>
<del class="diff-old">Metadata
describing
data
</del>
<figure id="discovery-class-diagram-ontology">
<img src= "images/discovery-class-diagram-ontology.svg" class="wot-diagram" alt="Ontology of TD in discovery context" height="288" width= "787" />
<figcaption>
<ins class="diff-chg">Figure
</ins><bdi class="figno"><ins class="diff-chg">
5
</ins></bdi><span class= "fig-title"><ins class="diff-chg">
The
ontology
</ins>
of
<del class="diff-old">type
integer
.
This
Subclass
is
indicated
by
the
value
integer
assigned
to
type
</del>
<ins class="diff-chg">Thing
Descriptions
</ins>
in
<del class="diff-old">DataSchema
instances.
Vocabulary
term
Description
Assignment
Type
minimum
Specifies
a
minimum
numeric
value,
representing
an
inclusive
lower
limit.
Only
applicable
for
associated
number
or
integer
types.
optional
</del>
<ins class="diff-chg">the
Discovery
context.
</ins></span>
</figcaption>
</figure>
<p>
<del class="diff-old">integer
</del>
<a href="#discovery-class-diagram-ontology" data-matched-text= "[[[#discovery-class-diagram-ontology]]]" class="fig-ref" title= "The ontology of Thing Descriptions in the Discovery context.">
<ins class="diff-chg">Figure
</ins><bdi class="figno"><ins class="diff-chg">
5
</ins></bdi>
</a>
<del class="diff-old">exclusiveMinimum
Specifies
a
minimum
numeric
value,
representing
</del>
<ins class="diff-chg">illustrates
the
Discovery
ontology
as
</ins>
an
<del class="diff-old">exclusive
lower
limit.
Only
applicable
</del>
<ins class="diff-chg">extension
of
the
Thing
ontology.
</ins></p><p><ins class="diff-chg">
The
ontology
includes
a
class
</ins>
for
<ins class="diff-new">metadata
that
are
</ins>
associated
<del class="diff-old">number
or
integer
types.
optional
</del>
<ins class="diff-chg">with
TDs
stored
in
a
directory.
This
class
is
called
</ins>
<code>
<del class="diff-old">integer
</del>
<ins class="diff-chg">RegistrationInformation
</ins>
</code>
<ins class="diff-new">and
described
as
part
of
the
directory
specification
in
</ins><a href= "#exploration-directory-registration-info" data-matched-text= "[[[#exploration-directory-registration-info]]]" class= "sec-ref">
<bdi class="secno">
<ins class="diff-new">7.3.1.1
</ins></bdi><ins class="diff-new">
Registration
Information
</ins></a>.</p><p><ins class="diff-new">
The
Discovery
ontology
also
defines
two
new
Thing
Description
classes,
described
in
the
following
sections,
that
may
be
used
to
model
special
exploratory
metadata:
</ins><a href= "#exploration-td-type-thingdirectory"><ins class="diff-new">
ThingDirectory
</ins>
</a>
<ins class="diff-new">and
</ins><a href="#exploration-td-type-thinglink"><ins class="diff-new">
ThingLink
</ins></a>.</p><section id="exploration-td-type-thingdirectory" class="normative"><div class="header-wrapper"><h5 id="x7-1-1-1-thingdirectory">
<bdi class="secno">
<ins class="diff-chg">7.1.1.1
</ins></bdi>
<code>
<del class="diff-old">maximum
</del>
<ins class="diff-chg">ThingDirectory
</ins>
</code>
<del class="diff-old">Specifies
a
maximum
numeric
value,
representing
an
inclusive
upper
limit.
Only
applicable
for
associated
number
or
integer
types.
optional
integer
</del>
</h5>
<a class="self-link" href="#exploration-td-type-thingdirectory" aria-label="Permalink for Section 7.1.1.1">
</a>
<del class="diff-old">exclusiveMaximum
Specifies
a
maximum
numeric
value,
representing
an
exclusive
upper
limit.
Only
applicable
for
associated
number
or
integer
types.
optional
</del>
</div>
<div class="issue" id="issue-container-number-148">
<div role="heading" class="issue-title marker" id="h-issue-0" aria-level="6">
<a href= "https://github.com/w3c/wot-discovery/issues/148">
<del class="diff-old">integer
</del>
<span class= "issue-number">
<ins class="diff-chg">Issue
148
</ins></span>
</a>
<span class="issue-label">:
<ins class="diff-chg">Discovery
context
and
namespace
under
w3.org/ns
</ins></span>
</div>
<div class="">
<ins class="diff-new">The
type
URIs
used
below
are
tentative
and
subject
to
change.
</ins></div></div><span class="rfc2119-assertion" id= "exploration-directory-description-type"><ins class="diff-new">
A
TD
which
describes
a
Thing
Description
Directory
instance
</ins><em class="rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
use
type
</ins>
<code>
<del class="diff-old">multipleOf
</del>
<ins class="diff-chg">ThingDirectory
</ins>
</code>
<del class="diff-old">Specifies
</del>
<ins class="diff-chg">from
</ins>
the
<del class="diff-old">multipleOf
value
number.
The
value
must
strictly
greater
than
0.
Only
applicable
for
associated
number
</del>
<ins class="diff-chg">discovery
context
</ins>
or
<del class="diff-old">integer
types.
optional
</del>
<ins class="diff-chg">URI
</ins>
<code>
<del class="diff-old">integer
</del>
<ins class="diff-chg">https://www.w3.org/2021/wot/discovery#ThingDirectory
</ins></code>.</span><p><ins class="diff-chg">
A
TD
of
this
class
can
be
derived
from
Directory's
Thing
Model;
see
</ins><a href="#directory-api-spec" data-matched-text= "[[[#directory-api-spec]]]" class="sec-ref">
<bdi class= "secno">
<ins class="diff-chg">7.3.2.4
</ins></bdi><ins class="diff-chg">
API
Specification
(Thing
Model)
</ins></a>.</p>
</section>
<section id="exploration-td-type-thinglink" class="normative">
<div class="header-wrapper">
<h5 id="x7-1-1-2-thinglink">
<bdi class="secno">
<del class="diff-old">5.3.2.6
</del>
<ins class="diff-chg">7.1.1.2
</ins>
</bdi>
<code>
<del class="diff-old">ObjectSchema
</del>
<ins class="diff-chg">ThingLink
</ins>
</code>
</h5>
<a class="self-link" href="#exploration-td-type-thinglink" aria-label="Permalink for Section 7.1.1.2">
</a>
</div>
<del class="diff-old">Metadata
describing
data
of
type
Object
.
This
Subclass
is
indicated
by
the
value
object
assigned
to
type
in
DataSchema
instances.
Vocabulary
term
Description
Assignment
Type
properties
Data
schema
nested
definitions.
optional
</del>
<div class="issue" id="issue-container-number-148-0">
<div role="heading" class="issue-title marker" id="h-issue-1" aria-level="6">
<del class="diff-old">Map
of
</del>
<a href= "https://github.com/w3c/wot-discovery/issues/148">
<del class="diff-old">DataSchema
</del>
<span class= "issue-number">
<ins class="diff-chg">Issue
148
</ins></span>
</a>
<del class="diff-old">required
</del>
<span class="issue-label">:
<ins class="diff-chg">Discovery
context
and
namespace
under
w3.org/ns
</ins></span>
<del class="diff-old">Defines
which
members
of
the
object
</del>
</div>
<div class="">
<ins class="diff-chg">The
</ins>
type
<ins class="diff-new">URIs
used
below
</ins>
are
<del class="diff-old">mandatory.
optional
Array
of
string
5.3.2.7
StringSchema
</del>
<ins class="diff-chg">tentative
and
subject
to
change.
</ins>
</div>
<del class="diff-old">Metadata
describing
data
of
type
string
.
This
Subclass
is
indicated
by
the
value
string
assigned
</del>
</div>
<span class="rfc2119-assertion" id= "exploration-link-description-type">
<ins class="diff-chg">A
TD
which
describes
a
reference
</ins>
to
<ins class="diff-chg">another
TD
</ins><em class="rfc2119"><ins class="diff-chg">
MUST
</ins></em><ins class="diff-chg">
use
</ins>
type
<del class="diff-old">in
</del>
<code>
<del class="diff-old">DataSchema
</del>
<ins class="diff-chg">ThingLink
</ins>
</code>
<del class="diff-old">instances.
Vocabulary
term
Description
Assignment
Type
</del>
<ins class="diff-chg">from
the
discovery
context
or
URI
</ins>
<code>
<del class="diff-old">minLength
Specifies
</del>
<ins class="diff-chg">https://www.w3.org/2021/wot/discovery#ThingLink
</ins></code>.</span><span class="rfc2119-assertion" id= "exploration-link-description-link"><ins class="diff-chg">
A
Thing
Link
</ins><em class= "rfc2119"><ins class="diff-chg">
MUST
</ins></em><ins class="diff-chg">
define
</ins>
the
<del class="diff-old">minimum
length
of
</del>
<ins class="diff-chg">referenced
TD
as
</ins>
a
<del class="diff-old">string.
Only
applicable
for
associated
string
types.
optional
unsignedInt
</del>
<ins class="diff-chg">Link
with
</ins>
<code>
<del class="diff-old">maxLength
</del>
<ins class="diff-chg">describedby
</ins>
</code>
<del class="diff-old">Specifies
the
maximum
length
of
a
string.
Only
applicable
for
associated
string
types.
optional
</del>
<ins class="diff-chg">link
relation
type,
</ins>
<code>
<del class="diff-old">unsignedInt
</del>
<ins class="diff-chg">application/td+json
</ins>
</code>
<ins class="diff-chg">media
type
and
</ins>
<code>
<del class="diff-old">pattern
</del>
<ins class="diff-chg">href
</ins>
</code>
<del class="diff-old">Provides
a
regular
expression
</del>
<ins class="diff-chg">set
</ins>
to
<del class="diff-old">express
constraints
of
the
string
value.
The
regular
expression
must
follow
</del>
the
<del class="diff-old">[
ECMA-262
]
dialect.
optional
</del>
<ins class="diff-chg">target
URL.
</ins></span><p>
<del class="diff-old">string
</del>
<a href="#example-td-link-type" data-matched-text= "[[[#example-td-link-type]]]" class="box-ref">
<ins class="diff-chg">Example
</ins><bdi><ins class="diff-chg">
2
</ins></bdi>
</a>
<ins class="diff-new">is
an
example
Thing
Link.
</ins></p><aside class="example" id="example-td-link-type"><div class="marker">
<del class="diff-old">contentEncoding
Specifies
the
encoding
used
to
store
the
contents,
as
specified
in
RFC
2054.
optional
string
</del>
<a class="self-link" href= "#example-td-link-type">
<ins class="diff-chg">Example
</ins><bdi><ins class="diff-chg">
2
</ins></bdi>
</a>
<del class="diff-old">(e.g.,
7bit
,
8bit
,
binary
,
quoted-printable
,
or
base64
)
contentMediaType
</del>
<del class="diff-old">Specifies
the
MIME
type
of
the
contents
</del>
<span class= "example-title">:
<ins class="diff-chg">Example
</ins>
of
a
<del class="diff-old">string
value,
as
described
in
RFC
2046.
optional
</del>
<ins class="diff-chg">Thing
Link,
referencing
a
remote
TD
</ins></span>
<del class="diff-old">string
</del>
</div>
<pre aria-busy="false"><code class="hljs json">{
    <span class="hljs-attr">"@context"</span>: [
        <span class="hljs-string">"http://www.w3.org/ns/td"</span>,
        <span class=
<ins class="diff-chg">"hljs-string">"https://w3c.github.io/wot-discovery/context/discovery-context.jsonld"</span>
    ],
</ins>    <span class="hljs-attr">"@type"</span>: <span class=<ins class="diff-chg">
"hljs-string">"ThingLink"</span>,
</ins>    <span class="hljs-attr">"id"</span>: <span class=<ins class="diff-chg">
"hljs-string">"urn:example:link"</span>,
</ins>    <span class="hljs-attr">"links"</span>: [{        <span class="hljs-attr">"rel"</span>: <span class=<ins class="diff-chg">
"hljs-string">"describedby"</span>,
</ins>        <span class="hljs-attr">"href"</span>: <span class=<ins class="diff-chg">
"hljs-string">"https://example.com/td.jsonld"</span>,
</ins>        <span class="hljs-attr">"type"</span>: <span class=<ins class="diff-chg">
"hljs-string">"application/td+json"</span>
    }],
</ins>    <span class="hljs-attr">"security"</span>: <span class=<ins class="diff-chg">
"hljs-string">"nosec_sc"</span>,
</ins>    <span class="hljs-attr">"securityDefinitions"</span>: {        <span class="hljs-attr">"nosec_sc"</span>: {            <span class="hljs-attr">"scheme"</span>: <span class=<ins class="diff-chg">
"hljs-string">"nosec"</span>
        }
    },
</ins>    <span class="hljs-attr">"title"</span>: <span class=<ins class="diff-chg">
"hljs-string">"Example TD referencing another"</span>
}
</ins>
</code>
<del class="diff-old">(e.g.,
image/png
,
or
audio/mpeg
)
</del>
</pre>
<div class="issue" id="issue-container-number-148-1">
<div role="heading" class="issue-title marker" id="h-issue-2" aria-level="6">
<del class="diff-old">5.3.2.8
NullSchema
</del>
<a href= "https://github.com/w3c/wot-discovery/issues/148">
<span class= "issue-number">
<ins class="diff-chg">Issue
148
</ins></span>
</a>
<span class="issue-label">:
<ins class="diff-new">Discovery
context
and
namespace
under
w3.org/ns
</ins></span>
</div>
<del class="diff-old">Metadata
describing
data
of
type
null
.
This
Subclass
is
indicated
by
the
value
null
assigned
</del>
<div class="">
<ins class="diff-chg">The
context
URIs
are
tentative
and
subject
</ins>
to
<del class="diff-old">type
in
DataSchema
instances.
This
Subclass
describes
only
one
acceptable
value,
namely
null
.
It
</del>
<ins class="diff-chg">change.
</ins></div></div></aside><p><ins class="diff-chg">
A
Thing
Link
</ins>
can
be
used
<del class="diff-old">as
part
of
a
oneOf
declaration,
where
it
is
used
</del>
<ins class="diff-chg">in
various
scenarios.
For
example:
</ins></p><ul><li><ins class="diff-chg">
A
self-describing
Thing
with
limited
computational
resources
intends
</ins>
to
<del class="diff-old">indicate,
that
</del>
<ins class="diff-chg">describe
itself:
host
a
minimal
</ins><a href="#dfn-td" class= "internalDFN" data-link-type="dfn" id="ref-for-dfn-td-3"><ins class="diff-chg">
TD
</ins></a><ins class="diff-chg">
(Thing
Link)
locally
and
references
a
larger
one
with
</ins>
the
<del class="diff-old">data
can
also
be
null
.
</del>
<ins class="diff-chg">full
details
hosted
at
a
different
URL,
perhaps
in
a
directory.
</ins></li><li><ins class="diff-chg">
A
self-describing
Thing
or
proxy
has
a
very
large
or
dynamic
description:
registers
a
small
or
static
</ins><a href="#dfn-td" class= "internalDFN" data-link-type="dfn" id="ref-for-dfn-td-4"><ins class="diff-chg">
TD
</ins></a><ins class="diff-chg">
(Thing
Link)
in
a
directory
which
references
the
actual
</ins><a href= "#dfn-td" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-td-5"><ins class="diff-chg">
TD
</ins></a><ins class="diff-chg">
hosted
at
the
edge.
</ins></li></ul>
</section>
</section>
<section id="exploration-secboot" class="normative">
<div class="header-wrapper">
<h4 id="x7-1-2-security-bootstrapping">
<bdi class= "secno">
<del class="diff-old">5.3.3
</del>
<ins class="diff-chg">7.1.2
</ins>
</bdi>
Security
<del class="diff-old">Vocabulary
Definitions
</del>
<ins class="diff-chg">Bootstrapping
</ins>
</h4>
<a class="self-link" href="#exploration-secboot" aria-label= "Permalink for Section 7.1.2">
</a>
</div>
<p>
<del class="diff-old">This
specification
provides
a
selection
</del>
<ins class="diff-chg">The
purpose
</ins>
of
<del class="diff-old">well-established
</del>
<ins class="diff-chg">an
exploration
service
is
to
serve
TDs,
but
only
after
suitable
authentication,
and
only
to
authorized
parties.
However,
in
some
cases
a
Discoverer
may
not
know
what
</ins>
security
<del class="diff-old">mechanisms
that
</del>
<ins class="diff-chg">credentials
</ins>
are
<del class="diff-old">directly
built
into
protocols
eligible
as
Protocol
Bindings
for
W3C
WoT
or
</del>
<ins class="diff-chg">needed
to
access
a
TD
via
an
exploration
service,
particularly
in
ad-hoc
scenarios.
Since
upon
first
access
to
an
exploration
service
a
Discoverer
will
not
yet
have
access
to
the
TD
if
suitable
authentication
credentials
</ins>
are
<del class="diff-old">widely
</del>
<ins class="diff-chg">not
provided,
the
Discoverer
can't
depend
on
the
security
metadata
held
</ins>
in
<del class="diff-old">use
with
those
protocols.
The
current
set
</del>
<ins class="diff-chg">TDs
to
know
what
kind
</ins>
of
<del class="diff-old">HTTP
security
schemes
</del>
<ins class="diff-chg">authentication
and
authorization
information
</ins>
is
<del class="diff-old">partly
based
on
OpenAPI
3.0.1
(see
also
[
OPENAPI
]).
However
while
</del>
<ins class="diff-chg">needed.
If
</ins>
the
<del class="diff-old">HTTP
</del>
<ins class="diff-chg">Discoverer
has
no
prior
knowledge,
it
will
have
to
depend
on
existing
</ins>
security
<del class="diff-old">schemes,
Vocabulary
,
and
syntax
given
in
this
specification
share
many
similarities
with
OpenAPI,
they
are
not
compatible.
</del>
<ins class="diff-chg">negotation
support
to
bootstrap
access,
at
least
to
the
TD
itself.
</ins>
</p>
<del class="diff-old">5.3.3.1
SecurityScheme
</del>
<p>
<del class="diff-old">Metadata
describing
</del>
<ins class="diff-chg">We
define
</ins>
the
<del class="diff-old">configuration
of
a
</del>
<ins class="diff-chg">following
for
the
HTTP
protocol,
for
which
</ins>
security
<del class="diff-old">mechanism.
The
value
assigned
to
</del>
<ins class="diff-chg">negotiation
processes
already
exist.
However,
most
of
</ins>
the
<del class="diff-old">name
scheme
MUST
be
defined
within
</del>
<ins class="diff-chg">HTTP
negotiation
processes
assume
there
is
</ins>
a
<del class="diff-old">Vocabulary
included
in
the
Thing
Description
,
either
</del>
<ins class="diff-chg">human
user
</ins>
in
the
<del class="diff-old">standard
Vocabulary
defined
in
§&nbsp;
5.
TD
Information
Model
or
in
</del>
<ins class="diff-chg">loop,
but
this
is
also
appropriate
for
WoT
Discovery,
since
this
problem
will
typically
occur
when
</ins>
a
<del class="diff-old">TD
Context
Extension
.
For
all
security
schemes,
any
private
keys,
passwords,
or
other
sensitive
information
directly
providing
</del>
<ins class="diff-chg">user
is
trying
to
</ins>
access
<del class="diff-old">should
be
shared
and
stored
out-of-band
and
MUST
NOT
be
stored
in
</del>
<ins class="diff-chg">a
public
WoT
service
or
perform
integration
of
a
new
device.
In
this
case
</ins>
the
<del class="diff-old">TD.
The
</del>
purpose
of
<del class="diff-old">a
TD
</del>
<ins class="diff-chg">negotiation
</ins>
is
to
<del class="diff-old">describe
how
</del>
<ins class="diff-chg">provide
guidance
on
what
credentials
are
needed
</ins>
to
access
<del class="diff-old">a
Thing
if
and
only
if
a
Consumer
already
has
authorization,
</del>
<ins class="diff-chg">the
system.
</ins></p><p><ins class="diff-chg">
In
cases
when
exploration
services
are
being
used
to
automate
system
management
it
would
be
best
to
pre-establish
what
credentials
(and
authentication
mechanisms)
are
needed
to
access
the
relevant
exploration
services
</ins>
and
<ins class="diff-new">security
bootstrapping
would
not
be
required.
For
this
reason
security
bootstrapping
</ins>
is
not
<del class="diff-old">meant
</del>
<ins class="diff-chg">a
mandatory
feature,
and
can
</ins>
be
<del class="diff-old">used
to
grant
</del>
<ins class="diff-chg">omitted
or
disabled
on
devices
</ins>
that
<del class="diff-old">authorization.
</del>
<ins class="diff-chg">are
to
be
used
with
pre-established
security
mechanisms.
</ins>
</p>
<p>
Security
<del class="diff-old">schemes
generally
</del>
<ins class="diff-chg">bootstrapping
</ins>
may
<del class="diff-old">require
additional
</del>
<ins class="diff-chg">also
only
be
necessary
on
the
</ins><em><ins class="diff-chg">
first
</ins></em><ins class="diff-chg">
access
to
a
TD.
Once
a
Discoverer
has
determined
what
credentials
and
</ins>
authentication
<del class="diff-old">parameters,
such
as
</del>
<ins class="diff-chg">mechanism
are
required
to
access
</ins>
a
<del class="diff-old">password
or
key.
The
location
of
</del>
<ins class="diff-chg">particular
exploration
service,
they
can
retain
</ins>
this
information
<del class="diff-old">is
indicated
by
the
value
associated
with
the
name
in
,
often
in
combination
with
the
value
associated
with
name
.
The
value
associated
with
in
can
take
one
of
</del>
<ins class="diff-chg">and
attempt
to
use
them
for
future
accesses.
Note
however
that
depending
on
</ins>
the
<del class="diff-old">following
values:
</del>
<ins class="diff-chg">security
scheme
used,
credentials
themselves
may
expire
and
may
need
to
be
re-established
periodically.
</ins>
</p>
<p>
<del class="diff-old">header
:
The
parameter
will
</del>
<span class="rfc2119-assertion" id= "security-bootstrapping-endpoints">
<ins class="diff-chg">Security
bootstrapping
</ins><em class="rfc2119"><ins class="diff-chg">
MAY
</ins></em>
be
<del class="diff-old">given
in
a
header
</del>
provided
<del class="diff-old">by
the
protocol,
with
the
name
of
the
header
provided
by
the
value
of
name
.
query
:
The
parameter
will
be
appended
</del>
<ins class="diff-chg">on
any
HTTP
endpoint
that
serves
a
TD.
</ins></span><ins class="diff-chg">
As
mentioned
above,
disabling
or
omitting
security
bootstrapping
is
permissible
if
security
mechanisms
have
been
previously
established.
For
example,
if
an
installation
wants
</ins>
to
<ins class="diff-new">use
</ins>
the
<del class="diff-old">URI
as
a
query
parameter,
</del>
<ins class="diff-chg">OAuth2
</ins><code><ins class="diff-chg">
client
</ins></code><ins class="diff-chg">
flow
and
provide
potential
clients
</ins>
with
<del class="diff-old">the
name
</del>
<ins class="diff-chg">an
address
</ins>
of
<del class="diff-old">the
query
parameter
provided
by
name
.
body
:
The
parameter
will
be
provided
</del>
<ins class="diff-chg">an
authentication
server
to
use
</ins>
in
<ins class="diff-new">advance,
then
security
bootstrapping
can
be
disabled,
since
</ins>
the
<del class="diff-old">body
</del>
<ins class="diff-chg">alternative
would
be
to
include
other
(and
potentially
weaker)
forms
</ins>
of
<ins class="diff-new">authentication.
</ins></p><p><ins class="diff-new">
In
</ins>
the
<del class="diff-old">request
payload,
with
</del>
<ins class="diff-chg">HTTP
protocol,
</ins>
the
<del class="diff-old">data
schema
element
</del>
<ins class="diff-chg">authentication
and
authorization
mechanisms
to
be
</ins>
used
<del class="diff-old">provided
</del>
<ins class="diff-chg">can
generally
be
negotiated
</ins>
by
<del class="diff-old">name
.
When
used
in
</del>
the
<del class="diff-old">context
of
</del>
<ins class="diff-chg">HTTP
server
returning
a
"401
(Unauthorized)"
response
code
in
conjunction
with
</ins>
a
<code>
<del class="diff-old">body
</del>
<ins class="diff-chg">WWW-Authenticate
</ins>
</code>
<del class="diff-old">security
information
location,
</del>
<ins class="diff-chg">header
that
specifies
</ins>
the
<del class="diff-old">value
of
name
MUST
be
in
</del>
<ins class="diff-chg">information
required.
To
gain
access,
</ins>
the
<del class="diff-old">form
of
a
JSON
pointer
[
RFC6901
]
relative
</del>
<ins class="diff-chg">client
then
needs
</ins>
to
<ins class="diff-new">make
another
request
with
</ins>
the
<del class="diff-old">root
of
the
input
DataSchema
for
each
interaction
it
is
used
with.
Since
this
value
is
</del>
<ins class="diff-chg">necessary
information.
</ins><a href= "https://www.iana.org/assignments/http-authschemes/http-authschemes.xhtml"><ins class="diff-chg">
There
are
several
authentication
schemes
registered
with
IANA.
</ins></a><ins class="diff-chg">
However,
</ins>
not
<del class="diff-old">a
fragment
identifier,
</del>
<ins class="diff-chg">all
of
these
are
in
wide
use,
some
are
experimental,
</ins>
and
<ins class="diff-new">there
</ins>
is
<del class="diff-old">not
relative
to
the
root
of
</del>
<ins class="diff-chg">only
partial
overlap
with
</ins>
the
<del class="diff-old">TD
but
to
whichever
data
schemas
</del>
<ins class="diff-chg">schemes
supported
by
TDs.
Also,
note
that
</ins>
the
<del class="diff-old">security
scheme
is
bound
to,
this
value
should
not
start
with
</del>
<code>
<del class="diff-old">#
</del>
<ins class="diff-chg">oauth
</ins>
</code>
<del class="diff-old">;
it
is
a
"pure"
JSON
pointer.
Since
this
value
is
not
a
fragment
identifier,
it
also
does
not
need
to
URL-encode
special
characters.
The
targeted
element
may
or
may
not
already
exist
at
the
specified
location
</del>
<ins class="diff-chg">scheme
</ins>
in
the
<del class="diff-old">referenced
data
schema.
If
it
does
not,
</del>
<ins class="diff-chg">IANA
registration
refers
to
OAuth1,
which
is
deprecated,
so
</ins>
it
<del class="diff-old">will
</del>
<ins class="diff-chg">should
not
</ins>
be
<del class="diff-old">inserted.
This
avoids
having
to
duplicate
definitions
in
</del>
<ins class="diff-chg">used.
The
relevant
OAuth2
flow,
</ins>
the
<del class="diff-old">data
schemas
of
every
interaction.
When
an
element
</del>
<code>
<ins class="diff-chg">code
</ins></code><ins class="diff-chg">
flow,
instead
</ins>
of
a
<del class="diff-old">data
schema
indicated
by
</del>
<ins class="diff-chg">401
response
begins
with
</ins>
a
<del class="diff-old">JSON
pointer
indicated
</del>
<ins class="diff-chg">redirection
to
an
authentication
server,
eventually
resulting
</ins>
in
<del class="diff-old">a
body
locator
does
not
already
exist
</del>
<ins class="diff-chg">credentials
(bearer
tokens
</ins>
in
the
<del class="diff-old">indicated
schema,
it
MUST
</del>
<ins class="diff-chg">case
of
WoT)
that
can
</ins>
be
<del class="diff-old">possible
</del>
<ins class="diff-chg">used
for
access.
</ins></p><p><ins class="diff-chg">
Given
these
considerations,
</ins>
to
<del class="diff-old">insert
</del>
<ins class="diff-chg">enable
security
bootstrapping
on
a
wide
variety
of
devices
as
well
as
on
browsers,
</ins>
the
<del class="diff-old">indicated
element
at
</del>
<ins class="diff-chg">following
constraints
should
be
observed:
</ins></p><ul><li><span class="rfc2119-assertion" id="exploration-secboot-401"><ins class="diff-chg">
If
security
bootstrapping
is
enabled
on
an
exploration
service,
after
initial
contact
using
</ins>
the
<del class="diff-old">location
indicated
</del>
<ins class="diff-chg">URL
provided
</ins>
by
<ins class="diff-new">an
introduction
mechanism,
</ins>
the
<del class="diff-old">pointer.
The
JSON
pointer
used
in
the
body
locator
</del>
<ins class="diff-chg">exploration
service
</ins>
<em class="rfc2119">
<del class="diff-old">MAY
</del>
<ins class="diff-chg">MUST
</ins>
</em>
<del class="diff-old">use
the
"
-
"
character
to
indicate
a
non-existent
array
element
when
it
is
necessary
to
insert
</del>
<ins class="diff-chg">reply
with
either
</ins>
an
<del class="diff-old">element
after
</del>
<ins class="diff-chg">HTTP
"401
(Unauthorized)"
response
code
or
(in
</ins>
the
<del class="diff-old">last
element
</del>
<ins class="diff-chg">case
</ins>
of
<del class="diff-old">an
existing
array.
The
element
referenced
(or
created)
by
</del>
<ins class="diff-chg">OAuth2)
with
either
</ins>
a
<del class="diff-old">body
security
</del>
<ins class="diff-chg">HTTP
"302
(Found)"
or
"303
(See
Other)"
response
code
if
appropriate
authentication
</ins>
information
<del class="diff-old">location
MUST
</del>
<ins class="diff-chg">has
not
been
provided
but
access
can
</ins>
be
<del class="diff-old">required
and
of
type
"
string
".
</del>
<ins class="diff-chg">granted
when
it
is.
</ins>
</span>
<del class="diff-old">If
name
is
</del>
<ins class="diff-chg">Note
that
if
the
exploration
service
does
</ins>
not
<del class="diff-old">given,
</del>
<ins class="diff-chg">want
to
provide
access
for
some
reason,
or
if
security
bootstrapping
is
disabled,
</ins>
it
<ins class="diff-new">can
ignore
the
request
or
reply
with
another
code
such
as
404
or
403.
Also,
if
no
authentication
</ins>
is
<del class="diff-old">assumed
</del>
<ins class="diff-chg">required,
then
</ins>
the
<del class="diff-old">entire
body
</del>
<ins class="diff-chg">system
can
reply
immediately
with
the
requested
TD
as
if
authentication
information
were
provided.
Bypassing
authentication
however
</ins>
is
<del class="diff-old">to
</del>
<ins class="diff-chg">only
appropriate
if
the
TD
served
as
a
response
does
not
contain
and
cannot
</ins>
be
used
<del class="diff-old">as
the
security
parameter.
</del>
<ins class="diff-chg">to
infer
Personally
Identifiable
Information;
see
</ins><a href= "#privacy-considerations" class="sec-ref">
<del class="diff-old">cookie
:
The
parameter
is
stored
in
a
cookie
identified
by
the
value
of
name
.
</del>
<bdi class= "secno">
<ins class="diff-chg">9.
</ins></bdi><ins class="diff-chg">
Privacy
Considerations
</ins></a>.</li><li>
<del class="diff-old">uri
:
The
parameter
is
embedded
in
the
URI
itself,
which
</del>
<span class="rfc2119-assertion" id= "exploration-secboot-auth">
<ins class="diff-chg">If
security
bootstrapping
</ins>
is
<del class="diff-old">encoded
in
the
relevant
interaction
</del>
<ins class="diff-chg">enabled
on
an
exploration
service
</ins>
using
<del class="diff-old">a
URI
template
variable
defined
by
the
value
</del>
<ins class="diff-chg">one
</ins>
of
<del class="diff-old">name
.
This
is
more
general
than
</del>
the
<del class="diff-old">query
mechanism
but
more
complex.
The
value
uri
</del>
<ins class="diff-chg">following
IANA-registered
HTTP
Authentication
Schemes:
Basic,
Bearer,
or
Digest,
then
a
401
HTTP
response
at
an
API
endpoint
intended
to
serve
a
TD
</ins>
<em class= "rfc2119">
<del class="diff-old">SHOULD
</del>
<ins class="diff-chg">MUST
</ins>
</em>
<del class="diff-old">be
specified
for
the
name
in
in
</del>
<ins class="diff-chg">include
</ins>
a
<del class="diff-old">security
scheme
only
if
</del>
<code>
<del class="diff-old">query
</del>
<ins class="diff-chg">WWW-Authenticate
</ins>
</code>
<del class="diff-old">is
not
applicable.
</del>
<ins class="diff-chg">header
and
any
other
headers
describing
the
required
authorizations.
</ins>
</span>
<del class="diff-old">The
URIs
provided
in
interactions
where
a
security
scheme
using
uri
as
</del>
<ins class="diff-chg">For
details
of
</ins>
the
<del class="diff-old">value
</del>
<ins class="diff-chg">requirements,
the
IANA
registry
should
be
consulted
</ins>
for
<ins class="diff-new">each
of
the
above
authentication
schemes.
</ins><span class="rfc2119-assertion" id= "exploration-secboot-oauth2-flows"><ins class="diff-new">
If
the
OAuth2
</ins>
<code>
<del class="diff-old">in
</del>
<ins class="diff-chg">code
</ins>
</code>
<ins class="diff-chg">flow
is
used
during
security
bootstrapping,
the
"302
(Found)"
or
"303
(See
Other)"
response
code
</ins><em class="rfc2119">
MUST
</em>
be
<del class="diff-old">a
URI
template
including
</del>
<ins class="diff-chg">used
for
redirection
to
</ins>
the
<del class="diff-old">defined
variable.
</del>
<ins class="diff-chg">authentication
server,
with
access
credentials
eventually
being
represented
with
bearer
tokens.
</ins>
</span>
<del class="diff-old">If
multiple
parameters
are
needed
for
a
security
scheme,
repeat
</del>
<ins class="diff-chg">Note
that
</ins>
the
<del class="diff-old">security
scheme
definition
for
each
parameter
and
combine
them
using
a
</del>
<ins class="diff-chg">other
OAuth2
flows
supported
in
WoT
Thing
Description
1.1,
</ins>
<code>
<del class="diff-old">combo
</del>
<ins class="diff-chg">client
</ins>
</code>
<del class="diff-old">security
scheme
</del>
and
<code>
<del class="diff-old">allOf
.
In
some
cases
parameters
may
not
actually
</del>
<ins class="diff-chg">device
</ins></code>,<ins class="diff-chg">
both
expect
the
initial
access
to
</ins>
be
<del class="diff-old">secret
but
a
user
may
wish
</del>
to
<del class="diff-old">leave
them
out
of
</del>
the
<del class="diff-old">TD
</del>
<ins class="diff-chg">authentication
server,
not
the
final
endpoint,
and
so
cannot
be
used
via
security
bootstrapping.
These
requirements
also
apply
only
</ins>
to
<del class="diff-old">help
protect
privacy.
As
an
example
</del>
<ins class="diff-chg">endpoints
</ins>
of
<del class="diff-old">this,
some
</del>
<ins class="diff-chg">exploration
services
that
might
need
to
support
</ins>
security
<del class="diff-old">mechanisms
require
both
a
client
identifier
and
a
secret
key.
In
theory,
the
client
identifier
</del>
<ins class="diff-chg">bootstrapping,
that
</ins>
is
<del class="diff-old">public
however
it
may
be
hard
</del>
<ins class="diff-chg">those
that
serve
TDs,
not
</ins>
to
<del class="diff-old">update
and
pose
a
tracking
risk.
In
such
a
case
it
can
</del>
<ins class="diff-chg">other
endpoints
that
might
</ins>
be
provided
<del class="diff-old">as
an
additional
security
parameter
so
it
does
not
appear
in
the
TD.
The
names
of
URI
variables
declared
in
a
SecurityScheme
MUST
be
distinct
from
all
other
URI
variables
declared
in
</del>
<ins class="diff-chg">by
</ins>
the
<del class="diff-old">TD.
Vocabulary
term
Description
Assignment
Type
@type
JSON-LD
keyword
</del>
<ins class="diff-chg">same
exploration
service.
In
particular,
these
requirements
apply
only
</ins>
to
<del class="diff-old">label
the
object
with
semantic
tags
(or
types).
optional
string
or
Array
of
string
description
Provides
additional
(human-readable)
information
based
on
a
default
language.
optional
string
descriptions
Can
</del>
<ins class="diff-chg">URLs
that
can
</ins>
be
<del class="diff-old">used
</del>
<ins class="diff-chg">referenced
by
introduction
mechanisms,
not
</ins>
to
<del class="diff-old">support
(human-readable)
information
</del>
<ins class="diff-chg">(for
example)
event
subscription
endpoints.
</ins></li></ul><p><ins class="diff-chg">
There
are
relevant
Security
and
Privacy
Considerations
</ins>
in
<del class="diff-old">different
languages.
Also
see
</del>
<ins class="diff-chg">[
</ins>
<cite>
<del class="diff-old">MultiLanguage
.
optional
Map
</del>
<a class="bibref" data-link-type="biblio" href= "#bib-wot-architecture11" title= "Web of Things (WoT) Architecture 1.1">
<ins class="diff-chg">wot-architecture11
</ins>
</a>
<del class="diff-old">of
</del>
<del class="diff-old">MultiLanguage
</del>
</cite>
<ins class="diff-chg">]
and
[
</ins><cite>
<a class="bibref" data-link-type="biblio" href= "#bib-wot-thing-description11" title= "Web of Things (WoT) Thing Description 1.1">
<ins class="diff-new">wot-thing-description11
</ins>
</a>
<del class="diff-old">proxy
URI
of
the
proxy
server
this
security
configuration
provides
access
to.
If
not
given,
the
corresponding
security
configuration
</del>
</cite>
<ins class="diff-chg">]
regarding
when
authentication
</ins>
is
<ins class="diff-new">required
</ins>
for
<ins class="diff-new">access
to
TDs
and
</ins>
the
<del class="diff-old">endpoint.
optional
anyURI
scheme
Identification
of
the
security
mechanism
being
configured.
optional
any
type
(one
</del>
<ins class="diff-chg">use
</ins>
of
<del class="diff-old">nosec
,
combo
,
basic
,
digest
,
bearer
,
psk
,
oauth2
,
or
apikey
)
The
class
SecurityScheme
has
the
following
subclasses:
NoSecurityScheme
ComboSecurityScheme
BasicSecurityScheme
DigestSecurityScheme
APIKeySecurityScheme
BearerSecurityScheme
PSKSecurityScheme
OAuth2SecurityScheme
</del>
<ins class="diff-chg">secure
transport.
See
also
</ins><a href="#privacy-considerations" data-matched-text="[[[#privacy-considerations]]]" class= "sec-ref">
<bdi class="secno">
<del class="diff-old">5.3.3.2
</del>
<ins class="diff-chg">9.
</ins>
</bdi>
<del class="diff-old">NoSecurityScheme
A
security
configuration
corresponding
to
identified
by
the
Vocabulary
Term
nosec
(i.e.,
"scheme":
"nosec"
),
indicating
</del>
<ins class="diff-chg">Privacy
Considerations
</ins></a>.<ins class="diff-chg">
In
summary,
secure
transport
(e.g.
TLS)
is
required
for
public
services
and
strongly
recommended
even
on
private
networks
(even
if
</ins>
there
is
no
authentication
<del class="diff-old">or
other
mechanism
required
</del>
<ins class="diff-chg">requirement,
</ins>
to
<del class="diff-old">access
</del>
<ins class="diff-chg">protect
</ins>
the
<del class="diff-old">resource.
</del>
<ins class="diff-chg">confidentiality
of
queries),
and
serving
requests
without
authentication
and
authorization
should
only
be
considered
in
limited
circumstances
when
no
Personally
Identifiable
Information
is
present
or
can
be
inferred.
</ins>
</p>
</section>
</section>
<section id="exploration-server" class="normative">
<div class="header-wrapper">
<h3 id="x7-2-thing-description-server">
<del class="diff-old">5.3.3.3
</del>
<bdi class="secno">
<ins class="diff-chg">7.2
</ins>
</bdi>
<del class="diff-old">ComboSecurityScheme
</del>
<ins class="diff-chg">Thing
Description
Server
</ins></h3><a class="self-link" href="#exploration-server" aria-label= "Permalink for Section 7.2">
</a>
</div>
<p>
<del class="diff-old">This
section
is
at
risk.
A
combination
of
other
security
schemes
identified
</del>
<ins class="diff-chg">Any
web
service
that
can
be
referenced
</ins>
by
<del class="diff-old">the
Vocabulary
Term
combo
(i.e.,
"scheme":
"combo"
).
Elements
of
this
scheme
define
various
ways
in
which
other
named
schemes
defined
in
securityDefinitions
,
including
other
ComboSecurityScheme
definitions,
are
to
</del>
<ins class="diff-chg">a
URL
and
return
a
TD
with
appropriate
authentication
and
access
controls
can
</ins>
be
<del class="diff-old">combined
</del>
<ins class="diff-chg">used
as
an
exploration
mechanism.
We
will
refer
</ins>
to
<del class="diff-old">create
</del>
<ins class="diff-chg">this
as
</ins>
a
<del class="diff-old">new
scheme
definition.
Exactly
one
of
either
oneOf
</del>
<ins class="diff-chg">Thing
Description
Server
</ins>
or
<del class="diff-old">allOf
MUST
</del>
<ins class="diff-chg">TD
Server.
A
TD
Server
does
not
need
to
</ins>
be
<del class="diff-old">included.
Only
security
scheme
definitions
which
</del>
<ins class="diff-chg">a
Thing.
In
particular,
a
TD
</ins>
can
be
<del class="diff-old">used
together
</del>
<ins class="diff-chg">hosted
on
an
ordinary
web
server
and
referenced
by
its
URL.
</ins></p><p><ins class="diff-chg">
A
TD
Server
</ins>
can
be
<del class="diff-old">combined
with
allOf
.
For
example,
it
is
not
possible
in
general
to
combine
different
OAuth
2.0
flows
together
using
allOf
unless
one
applies
</del>
<ins class="diff-chg">used
</ins>
to
<ins class="diff-new">support
self-description.
For
self-description,
</ins>
a
<del class="diff-old">proxy
</del>
<a href="#dfn-thing" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-thing-1">
<ins class="diff-chg">Thing
</ins></a><ins class="diff-chg">
hosts
its
own
</ins><a href="#dfn-td" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-td-6"><ins class="diff-chg">
TD
</ins></a>
and
<del class="diff-old">one
to
the
endpoint.
Note
that
when
multiple
named
security
scheme
definitions
are
listed
in
</del>
<ins class="diff-chg">makes
it
available
via
</ins>
a
<del class="diff-old">security
field
the
same
semantics
apply
as
in
an
allOf
combination
(and
the
same
limitations
on
allowable
combinations).
The
oneOf
combination
is
equivalent
to
using
different
security
schemes
on
forms
that
are
otherwise
identical.
In
this
sense
</del>
<ins class="diff-chg">web
resource
identified
with
</ins>
a
<del class="diff-old">oneOf
scheme
</del>
<ins class="diff-chg">URL.
Such
a
web
resource
however
</ins>
is
not
<ins class="diff-new">included
as
</ins>
an
<del class="diff-old">essential
feature
but
it
does
avoid
redundancy
</del>
<ins class="diff-chg">affordance
</ins>
in
<del class="diff-old">such
cases.
Vocabulary
term
Description
Assignment
Type
oneOf
Array
of
two
</del>
<ins class="diff-chg">the
TD
itself.
This
web
resource
may
</ins>
or
<del class="diff-old">more
strings
identifying
other
named
security
scheme
definitions,
any
one
of
which,
when
satisfied,
will
allow
access.
Only
one
</del>
may
<ins class="diff-new">not
</ins>
be
<del class="diff-old">chosen
for
use.
mandatory
string
or
Array
of
string
allOf
</del>
<ins class="diff-chg">the
same
as
the
well-known
URL
used
as
an
Introduction
mechanism
defined
in
</ins><a href="#introduction-well-known" class= "sec-ref">
<del class="diff-old">Array
of
two
or
more
strings
identifying
other
named
security
scheme
definitions,
all
</del>
<bdi class="secno">
<ins class="diff-chg">6.2
</ins></bdi><ins class="diff-chg">
Well-Known
URIs
</ins></a>.</p><p><ins class="diff-chg">
Use
</ins>
of
<del class="diff-old">which
must
be
satisfied
for
access.
mandatory
string
or
Array
</del>
<ins class="diff-chg">secure
transport
is
subject
to
assertions
given
in
the
Security
Considerations
and
Privacy
Considerations
sections
</ins>
of
<del class="diff-old">string
5.3.3.4
BasicSecurityScheme
</del>
<ins class="diff-chg">the
[
</ins><cite>
<a class="bibref" data-link-type="biblio" href= "#bib-wot-architecture11" title= "Web of Things (WoT) Architecture 1.1">
<ins class="diff-new">wot-architecture11
</ins>
</a>
<del class="diff-old">Basic
Authentication
</del>
</cite>
<ins class="diff-chg">]
and
</ins>
[
<cite>
<del class="diff-old">RFC7617
</del>
<a class="bibref" data-link-type="biblio" href= "#bib-wot-thing-description11" title= "Web of Things (WoT) Thing Description 1.1">
<ins class="diff-chg">wot-thing-description11
</ins>
</a>
</cite>
]
<del class="diff-old">security
configuration
identified
by
</del>
<ins class="diff-chg">specifications,
which
define
scenarios
where
secure
transport
is
recommended
or
mandatory
and
mutual
authentication
is
recommended.
</ins></p><p><ins class="diff-chg">
A
TD
Server
distributing
a
TD
using
</ins>
the
<del class="diff-old">Vocabulary
Term
</del>
<ins class="diff-chg">following
protocols
is
subject
to
the
following
constraints:
</ins></p><dl><dt><ins class="diff-chg">
HTTP
</ins></dt><dd><p><span class="rfc2119-assertion" id= "exploration-server-http-method"><ins class="diff-chg">
An
HTTP-based
TD
Server
providing
a
</ins><a href="#dfn-td" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-td-7"><ins class="diff-chg">
TD
</ins>
</a>
<em class="rfc2119">
<ins class="diff-new">MUST
</ins></em><ins class="diff-new">
serve
that
resource
with
a
</ins>
<code>
<del class="diff-old">basic
(i.e.,
"scheme":
"basic"
</del>
<ins class="diff-chg">GET
</ins>
</code>
<del class="diff-old">),
using
</del>
<ins class="diff-chg">method.
</ins></span><span class= "rfc2119-assertion" id="exploration-server-http-resp"><ins class="diff-chg">
A
successful
response
from
</ins>
an
<del class="diff-old">unencrypted
username
and
password.
This
scheme
should
be
used
with
some
other
security
mechanism
</del>
<ins class="diff-chg">HTTP-based
TD
Server
</ins>
providing
<del class="diff-old">confidentiality,
for
example,
TLS.
Vocabulary
term
</del>
<ins class="diff-chg">a
</ins><a href="#dfn-td" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-td-8"><ins class="diff-chg">
TD
</ins>
</a>
<del class="diff-old">Description
Assignment
Type
name
Name
for
query,
header,
cookie,
or
uri
parameters.
optional
string
</del>
<em class="rfc2119">
<ins class="diff-chg">MUST
</ins></em><ins class="diff-chg">
have
200
(OK)
status
and
the
</ins><a href="#dfn-td" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-td-9"><ins class="diff-chg">
TD
</ins>
</a>
in
<del class="diff-old">Specifies
</del>
the
<del class="diff-old">location
of
security
authentication
information.
</del>
<ins class="diff-chg">body.
</ins></span><span class="rfc2119-assertion" id= "exploration-server-http-resp-content-type"><ins class="diff-chg">
A
successful
response
</ins>
with
<del class="diff-old">default
</del>
<ins class="diff-chg">JSON
serialization
</ins><em class="rfc2119"><ins class="diff-chg">
MUST
</ins></em><ins class="diff-chg">
contain
</ins>
<code>
<del class="diff-old">string
</del>
<ins class="diff-chg">application/json
</ins>
</code>
<del class="diff-old">(one
of
header
,
query
,
body
,
cookie
,
</del>
or
<ins class="diff-new">more
specifically,
</ins>
<code>
<del class="diff-old">uri
)
5.3.3.5
DigestSecurityScheme
</del>
<ins class="diff-chg">application/td+json
</ins>
</code>
<del class="diff-old">Digest
Access
Authentication
</del>
<ins class="diff-chg">in
the
Content-Type
header.
</ins></span><span class="rfc2119-assertion" id= "exploration-server-http-resp-json"><ins class="diff-chg">
The
default
serialization
format
for
successful
response
bodies
</ins><em class="rfc2119"><ins class="diff-chg">
MUST
</ins></em><ins class="diff-chg">
be
JSON,
with
JSON-LD
1.1
</ins>
[
<cite>
<del class="diff-old">RFC7616
</del>
<a class="bibref" data-link-type= "biblio" href="#bib-json-ld11" title= "JSON-LD 1.1">
<ins class="diff-chg">JSON-LD11
</ins>
</a>
</cite>
]
<del class="diff-old">security
configuration
identified
by
the
Vocabulary
Term
</del>
<ins class="diff-chg">syntax.
</ins></span><ins class="diff-chg">
The
JSON-LD
syntax
allows
semantic
extensions
and
processing.
</ins><span class= "rfc2119-assertion" id= "exploration-server-http-alternate-content"><ins class="diff-chg">
An
HTTP-based
TD
Server
providing
a
</ins><a href="#dfn-td" class="internalDFN" data-link-type= "dfn" id="ref-for-dfn-td-10"><ins class="diff-chg">
TD
</ins>
</a>
<del class="diff-old">digest
(i.e.,
"scheme":
"digest"
).
This
scheme
</del>
<em class="rfc2119">
<ins class="diff-chg">MAY
</ins></em><ins class="diff-chg">
provide
alternative
representations
through
server-driven
content
negotiation,
that
</ins>
is
<del class="diff-old">similar
to
basic
authentication
but
with
added
features
to
avoid
man-in-the-middle
attacks.
Vocabulary
term
Description
Assignment
Type
name
Name
for
query,
header,
cookie,
or
uri
parameters.
optional
string
in
Specifies
</del>
<ins class="diff-chg">by
honoring
</ins>
the
<del class="diff-old">location
of
security
authentication
information.
</del>
<ins class="diff-chg">request's
Accept
and
Accept-Encoding
headers
and
responding
</ins>
with
<del class="diff-old">default
string
</del>
<ins class="diff-chg">the
supported
TD
serialization
and
equivalent
Content-Type
and
Content-Encoding
headers.
</ins></span><span class="rfc2119-assertion" id= "exploration-server-http-alternate-language"><ins class="diff-chg">
An
HTTP-based
TD
Server
providing
a
</ins><a href="#dfn-td" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-td-11"><ins class="diff-chg">
TD
</ins>
</a>
<del class="diff-old">(one
of
header
,
query
,
body
,
cookie
,
</del>
<em class= "rfc2119">
<ins class="diff-chg">MAY
</ins></em><ins class="diff-chg">
provide
modified
TDs
</ins>
or
<del class="diff-old">uri
)
qop
Quality
of
protection.
with
</del>
<ins class="diff-chg">error
responses
using
a
different
</ins>
default
<ins class="diff-chg">language
after
server-driven
content
negotiation,
that
is
by
honouring
the
request's
Accept-Language
header.
</ins></span>
<del class="diff-old">string
</del>
</p>
<p>
<span class="rfc2119-assertion" id= "exploration-server-http-head">
<ins class="diff-new">An
HTTP-based
TD
Server
providing
a
</ins><a href="#dfn-td" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-td-12"><ins class="diff-new">
TD
</ins>
</a>
<del class="diff-old">(one
of
auth
,
or
auth-int
)
5.3.3.6
</del>
<em class="rfc2119">
<ins class="diff-chg">MUST
</ins></em><ins class="diff-chg">
respond
to
</ins>
<code>
<del class="diff-old">APIKeySecurityScheme
</del>
<ins class="diff-chg">HEAD
</ins>
</code>
<del class="diff-old">API
key
authentication
security
configuration
identified
</del>
<ins class="diff-chg">requests
</ins>
by
<ins class="diff-new">returning
only
</ins>
the
<del class="diff-old">Vocabulary
Term
apikey
(i.e.,
"scheme":
"apikey"
).
This
scheme
is
</del>
<ins class="diff-chg">headers
equivalent
</ins>
to
<del class="diff-old">be
used
when
the
access
token
is
opaque,
for
example
when
a
key
in
an
unknown
or
proprietary
format
is
provided
</del>
<ins class="diff-chg">those
returned
</ins>
by
a
<del class="diff-old">cloud
service
provider.
In
this
case
</del>
<code>
<ins class="diff-chg">GET
</ins></code><ins class="diff-chg">
request
to
</ins>
the
<del class="diff-old">key
may
not
be
using
a
standard
token
format.
</del>
<ins class="diff-chg">same
endpoint.
</ins></span>
This
<del class="diff-old">scheme
indicates
that
the
key
provided
by
the
service
provider
needs
</del>
<ins class="diff-chg">enables
clients
</ins>
to
<del class="diff-old">be
supplied
</del>
<ins class="diff-chg">retrieve
HTTP
headers
such
</ins>
as
<del class="diff-old">part
of
service
requests
using
the
mechanism
indicated
by
</del>
the
<del class="diff-old">"in"
field.
Vocabulary
term
Description
Assignment
Type
name
Name
for
query,
header,
cookie,
or
uri
parameters.
optional
string
</del>
<ins class="diff-chg">Content-Length
</ins>
in
<del class="diff-old">Specifies
</del>
<ins class="diff-chg">advance
to
know
</ins>
the
<del class="diff-old">location
</del>
<ins class="diff-chg">size
</ins>
of
<del class="diff-old">security
authentication
information.
with
default
string
</del>
<ins class="diff-chg">the
</ins><a href= "#dfn-td" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-td-13"><ins class="diff-chg">
TD
</ins>
</a>
<del class="diff-old">(one
of
header
,
</del>
<ins class="diff-chg">(in
bytes)
and
decide
on
an
efficient
</ins>
query
<del class="diff-old">,
body
,
cookie
,
</del>
<ins class="diff-chg">strategy.
</ins></p><p><ins class="diff-chg">
In
constrained
environments,
a
single
</ins><a href="#dfn-td" class= "internalDFN" data-link-type="dfn" id="ref-for-dfn-td-14"><ins class="diff-chg">
TD
</ins></a><ins class="diff-chg">
may
be
too
large
to
process
for
the
server
</ins>
or
<del class="diff-old">uri
)
</del>
<ins class="diff-chg">clients.
See
</ins><a href= "#perf-incremental-transfer" data-matched-text= "[[[#perf-incremental-transfer]]]" class="sec-ref">
<bdi class= "secno">
<del class="diff-old">5.3.3.7
</del>
<ins class="diff-chg">10.1
</ins>
</bdi>
<del class="diff-old">BearerSecurityScheme
Bearer
Token
[
RFC6750
]
security
configuration
identified
by
the
Vocabulary
Term
</del>
<ins class="diff-chg">Incremental
Transfer
</ins>
</a>
<del class="diff-old">bearer
(i.e.,
"scheme":
"bearer"
)
</del>
for
<del class="diff-old">situations
where
bearer
tokens
are
used
independently
</del>
<ins class="diff-chg">protocol-specific
recommendations
on
incremental
transfer
</ins>
of
<del class="diff-old">OAuth2.
If
</del>
the
<del class="diff-old">oauth2
scheme
is
specified
it
is
not
generally
necessary
</del>
<ins class="diff-chg">requested
payload.
</ins></p><p><ins class="diff-chg">
Error
responses:
</ins></p><ul><li><ins class="diff-chg">
401
(Unauthorized):
No
authentication.
</ins></li><li><ins class="diff-chg">
403
(Forbidden):
Insufficient
rights
</ins>
to
<del class="diff-old">specify
this
scheme
as
well
as
it
is
implied.
For
format
,
</del>
the
<del class="diff-old">value
jwt
indicates
conformance
with
[
</del>
<ins class="diff-chg">resource.
</ins></li></ul></dd></dl><dl><dt><ins class="diff-chg">
CoAP
</ins></dt><dd><p>
<del class="diff-old">RFC7519
</del>
<span class="rfc2119-assertion" id= "exploration-server-coap-method">
<ins class="diff-chg">A
CoAP-based
TD
Server
providing
a
</ins><a href="#dfn-td" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-td-15"><ins class="diff-chg">
TD
</ins>
</a>
<del class="diff-old">],
</del>
<em class="rfc2119">
<ins class="diff-chg">MUST
</ins></em><ins class="diff-chg">
serve
that
resource
with
a
</ins>
<code>
<del class="diff-old">jws
</del>
<ins class="diff-chg">GET
</ins>
</code>
<del class="diff-old">indicates
conformance
with
[
RFC7797
</del>
<ins class="diff-chg">method.
</ins></span><span class= "rfc2119-assertion" id="exploration-server-coap-resp"><ins class="diff-chg">
A
successful
response
from
a
CoAP-based
TD
Server
providing
a
</ins><a href="#dfn-td" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-td-16"><ins class="diff-chg">
TD
</ins>
</a>
<del class="diff-old">],
</del>
<em class="rfc2119">
<ins class="diff-chg">MUST
</ins></em><ins class="diff-chg">
have
a
2.05
(Content)
status,
contain
a
Content-Format
option
with
value
50
(
</ins>
<code>
<del class="diff-old">cwt
</del>
<ins class="diff-chg">application/json
</ins>
</code>
<del class="diff-old">indicates
conformance
with
[
RFC8392
],
and
</del>
<ins class="diff-chg">)
or
432
(
</ins>
<code>
<del class="diff-old">jwe
</del>
<ins class="diff-chg">application/td+json
</ins>
</code>
<del class="diff-old">indicates
conformance
with
</del>
<ins class="diff-chg">),
and
the
</ins><a href="#dfn-td" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-td-17"><ins class="diff-chg">
TD
</ins></a><ins class="diff-chg">
in
the
payload.
</ins></span><ins class="diff-chg">
Note
that
the
payload
might
be
split
over
multiple
message
exchanges
using
block-wise
transfer
</ins>
[
<cite>
<del class="diff-old">RFC7516
</del>
<a class="bibref" data-link-type= "biblio" href="#bib-rfc7959" title= "Block-Wise Transfers in the Constrained Application Protocol (CoAP)">
<ins class="diff-chg">RFC7959
</ins>
</a>
</cite>
<del class="diff-old">],
with
values
for
alg
interpreted
consistently
with
those
standards.
Other
formats
and
algorithms
for
bearer
tokens
</del>
<ins class="diff-chg">].
</ins><span class="rfc2119-assertion" id= "exploration-server-coap-alternate-content"><ins class="diff-chg">
A
CoAP-based
TD
Server
providing
a
</ins><a href="#dfn-td" class="internalDFN" data-link-type= "dfn" id="ref-for-dfn-td-18"><ins class="diff-chg">
TD
</ins></a><em class="rfc2119">
MAY
</em>
<del class="diff-old">be
specified
in
vocabulary
extensions
.
Vocabulary
term
Description
Assignment
Type
authorization
URI
of
</del>
<ins class="diff-chg">provide
alternative
representations
through
server-driven
content
negotiation,
that
is
by
honouring
</ins>
the
<del class="diff-old">authorization
server.
optional
anyURI
name
Name
for
query,
header,
cookie,
or
uri
parameters.
optional
string
alg
Encoding,
encryption,
or
digest
algorithm.
with
default
string
(e.g.,
ES256
,
or
ES512-256
)
format
Specifies
format
of
security
authentication
information.
</del>
<ins class="diff-chg">request's
Accept
option
and
responding
</ins>
with
<del class="diff-old">default
string
(e.g.,
jwt
,
cwt
,
jwe
,
or
jws
)
in
Specifies
</del>
the
<del class="diff-old">location
of
security
authentication
information.
with
default
</del>
<ins class="diff-chg">supported
</ins><a href="#dfn-td" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-td-19"><ins class="diff-chg">
TD
</ins>
</a>
<ins class="diff-new">serialization
and
equivalent
Content-Format
option.
</ins></span>
<del class="diff-old">string
</del>
</p>
<p>
<span class="rfc2119-assertion" id= "exploration-server-coap-size2">
<ins class="diff-new">A
CoAP-based
</ins><a href="#dfn-td" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-td-20"><ins class="diff-new">
TD
</ins>
</a>
<del class="diff-old">(one
of
header
,
query
,
body
,
cookie
,
or
uri
)
5.3.3.8
PSKSecurityScheme
</del>
<ins class="diff-chg">Server
providing
a
</ins><a href="#dfn-td" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-td-21"><ins class="diff-chg">
TD
</ins>
</a>
<del class="diff-old">Pre-shared
key
authentication
security
configuration
identified
</del>
<em class="rfc2119">
<ins class="diff-chg">SHOULD
</ins></em><ins class="diff-chg">
respond
to
requests
containing
a
Size2
option
</ins>
by
<ins class="diff-new">including
</ins>
the
<del class="diff-old">Vocabulary
Term
</del>
<ins class="diff-chg">size
estimate
of
the
</ins><a href="#dfn-td" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-td-22"><ins class="diff-chg">
TD
</ins>
</a>
<del class="diff-old">psk
(i.e.,
"scheme":
"psk"
).
</del>
<ins class="diff-chg">in
its
next
response.
</ins></span>
This
is
<del class="diff-old">meant
to
identify
that
</del>
<ins class="diff-chg">relevant
when
obtaining
</ins>
a
<del class="diff-old">standard
is
used
for
pre-shared
keys
such
as
TLS-PSK
[
RFC4279
</del>
<a href= "#dfn-td" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-td-23">
<ins class="diff-chg">TD
</ins>
</a>
<del class="diff-old">],
</del>
<ins class="diff-chg">using
block-wise
transfer
</ins>
and
<del class="diff-old">that
</del>
<ins class="diff-chg">enables
clients
to
abort
</ins>
the
<del class="diff-old">ciphersuite
used
for
keys
will
</del>
<ins class="diff-chg">retrieval
if
the
total
payload
size
should
</ins>
be
<del class="diff-old">established
during
protocol
negotiation.
</del>
<ins class="diff-chg">too
large
for
them
to
process.
</ins>
</p>
<del class="diff-old">Vocabulary
term
</del>
<p>
<ins class="diff-chg">In
constrained
environments,
a
single
</ins><a href="#dfn-td" class= "internalDFN" data-link-type="dfn" id="ref-for-dfn-td-24"><ins class="diff-chg">
TD
</ins>
</a>
<del class="diff-old">Description
Assignment
Type
identity
Identifier
providing
information
which
can
</del>
<ins class="diff-chg">may
</ins>
be
<del class="diff-old">used
</del>
<ins class="diff-chg">too
large
to
process
</ins>
for
<del class="diff-old">selection
</del>
<ins class="diff-chg">the
server
</ins>
or
<del class="diff-old">confirmation.
optional
string
</del>
<ins class="diff-chg">clients.
See
</ins><a href= "#perf-incremental-transfer" data-matched-text= "[[[#perf-incremental-transfer]]]" class="sec-ref">
<bdi class= "secno">
<ins class="diff-new">10.1
</ins></bdi><ins class="diff-new">
Incremental
Transfer
</ins>
</a>
<ins class="diff-chg">for
protocol-specific
recommendations
on
incremental
transfer
of
the
requested
payload.
</ins></p><p><ins class="diff-chg">
Error
responses:
</ins></p><ul><li><ins class="diff-chg">
4.01
(Unauthorized):
No
authentication.
</ins></li><li><ins class="diff-chg">
4.03
(Forbidden):
Insufficient
rights
to
the
resource.
</ins></li></ul></dd></dl>
</section>
<section id="exploration-directory" class="normative">
<div class="header-wrapper">
<h3 id="x7-3-thing-description-directory">
<bdi class= "secno">
<del class="diff-old">5.3.3.9
</del>
<ins class="diff-chg">7.3
</ins>
</bdi>
<del class="diff-old">OAuth2SecurityScheme
</del>
<ins class="diff-chg">Thing
Description
Directory
</ins></h3><a class="self-link" href="#exploration-directory" aria-label= "Permalink for Section 7.3">
</a>
</div>
<p>
<del class="diff-old">OAuth
2.0
authentication
security
configuration
</del>
<ins class="diff-chg">A
</ins><a href="#dfn-wot-thing-description-directory" class= "internalDFN" data-link-type="dfn" id= "ref-for-dfn-wot-thing-description-directory-22"><ins class="diff-chg">
Thing
Description
Directory
</ins></a><ins class="diff-chg">
(TDD
or
Directory
</ins>
for
<del class="diff-old">systems
conformant
with
[
RFC6749
</del>
<ins class="diff-chg">short)
is
a
</ins><a href= "#dfn-thing" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-thing-2"><ins class="diff-chg">
Thing
</ins>
</a>
<ins class="diff-new">that
provides
a
service
to
manage
a
set
of
TDs
describing
other
Things.
</ins></p><section id="exploration-directory-info" class="normative"><div class="header-wrapper"><h4 id="x7-3-1-information-model">
<del class="diff-old">],
[
</del>
<bdi class="secno">
<ins class="diff-chg">7.3.1
</ins></bdi><ins class="diff-chg">
Information
Model
</ins></h4><a class="self-link" href="#exploration-directory-info" aria-label= "Permalink for Section 7.3.1">
<del class="diff-old">RFC8252
</del>
</a>
<del class="diff-old">]
and
(for
the
device
flow)
[
RFC8628
</del>
</div>
<ins class="diff-chg">As
shown
in
</ins><a href="#exploration-class-diagram" data-matched-text= "[[[#exploration-class-diagram]]]" class="fig-ref" title= "The high-level class diagram of the exploration mechanisms, depicting how Thing Description Servers and Thing Description Directories provide TDs. A Self-describing Thing is a special case of a Thing Description Server that is also a Thing. A Thing Description Directory acts as a Thing Description Server for each Thing Description it contains."><ins class="diff-chg">
Figure
</ins><bdi class="figno"><ins class="diff-chg">
4
</ins></bdi>
<del class="diff-old">],
identified
by
</del>
</a>,
the
<del class="diff-old">Vocabulary
Term
oauth2
(i.e.,
"scheme":
"oauth2"
).
Vocabulary
term
</del>
<a href= "#dfn-wot-thing-description-directory" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-wot-thing-description-directory-23">
<ins class="diff-chg">Thing
</ins>
Description
<del class="diff-old">Assignment
Type
authorization
URI
of
the
authorization
server.
In
the
case
of
the
device
flow,
</del>
<ins class="diff-chg">Directory
</ins></a><ins class="diff-chg">
can
contain
zero
or
more
</ins><a href="#dfn-td" class= "internalDFN" data-link-type="dfn" id="ref-for-dfn-td-25"><ins class="diff-chg">
TDs
</ins></a>.<ins class="diff-chg">
For
every
TD,
</ins>
the
<del class="diff-old">URI
provided
</del>
<ins class="diff-chg">directory
maintains
additional
metadata
</ins>
for
<del class="diff-old">the
authorization
value
refers
to
the
device
authorization
endpoint
[
</del>
<ins class="diff-chg">bookkeeping
and
search
purposes.
These
are
described
in
</ins><a href= "#exploration-directory-registration-info" data-matched-text= "[[[#exploration-directory-registration-info]]]" class= "sec-ref">
<del class="diff-old">RFC8628
</del>
<bdi class="secno">
<ins class="diff-chg">7.3.1.1
</ins></bdi><ins class="diff-chg">
Registration
Information
</ins>
</a>
<ins class="diff-new">and
</ins><a href="#exploration-directory-anonymous-td" data-matched-text="[[[#exploration-directory-anonymous-td]]]" class="sec-ref">
<del class="diff-old">].
optional
anyURI
</del>
<bdi class="secno">
<ins class="diff-chg">7.3.1.3
</ins></bdi><ins class="diff-chg">
Anonymous
TD
Identifiers
</ins></a>.<ins class="diff-chg">
A
</ins><a href="#dfn-td" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-td-26"><ins class="diff-chg">
TD
</ins>
</a>
<del class="diff-old">token
URI
</del>
<ins class="diff-chg">that
embeds
such
additional
metadata
as
part
</ins>
of
the
<del class="diff-old">token
server.
optional
</del>
<ins class="diff-chg">interaction
with
the
directory
is
called
an
</ins><a href="#dfn-wot-enriched-thing-description" class= "internalDFN" data-link-type="dfn" id= "ref-for-dfn-wot-enriched-thing-description-1"><ins class="diff-chg">
Enriched
TD
</ins></a>.<section id="exploration-directory-registration-info" class= "normative"><div class="header-wrapper"><h5 id="x7-3-1-1-registration-information">
<del class="diff-old">anyURI
</del>
<bdi class= "secno">
<ins class="diff-chg">7.3.1.1
</ins></bdi><ins class="diff-chg">
Registration
Information
</ins></h5><a class="self-link" href= "#exploration-directory-registration-info" aria-label= "Permalink for Section 7.3.1.1">
</a>
<del class="diff-old">refresh
URI
</del>
</div>
<ins class="diff-chg">The
ontology
</ins>
of
<del class="diff-old">the
refresh
server.
optional
anyURI
</del>
<ins class="diff-chg">a
</ins><a href="#dfn-td" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-td-27"><ins class="diff-chg">
TD
</ins>
</a>
<ins class="diff-new">in
the
Discovery
context
was
introduced
in
</ins><a href= "#discovery-class-diagram-ontology" data-matched-text= "[[[#discovery-class-diagram-ontology]]]" class="fig-ref" title= "The ontology of Thing Descriptions in the Discovery context."><ins class="diff-new">
Figure
</ins><bdi class="figno"><ins class="diff-new">
5
</ins></bdi>
</a>.
<ins class="diff-chg">The
</ins>
<code>
<del class="diff-old">scopes
</del>
<ins class="diff-chg">RegistrationInformation
</ins>
</code>
<del class="diff-old">Set
of
authorization
scope
identifiers
provided
as
an
array.
These
are
provided
in
tokens
returned
by
an
authorization
server
and
</del>
<ins class="diff-chg">class
is
</ins>
associated
with
<del class="diff-old">forms
</del>
<a href="#dfn-td" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-td-28">
<ins class="diff-chg">TDs
</ins></a><ins class="diff-chg">
that
are
stored
</ins>
in
<del class="diff-old">order
to
identify
what
resources
</del>
a
<del class="diff-old">client
may
access
and
how.
</del>
<ins class="diff-chg">directory.
</ins>
The
<del class="diff-old">values
associated
with
a
form
should
be
chosen
from
those
defined
in
an
OAuth2SecurityScheme
active
on
that
form.
optional
string
or
Array
of
string
flow
Authorization
flow.
mandatory
string
</del>
<ins class="diff-chg">following
table
lists
the
registration
information
attributes
for
use
within
</ins><a href="#dfn-td" class="internalDFN" data-link-type= "dfn" id="ref-for-dfn-td-29"><ins class="diff-chg">
TDs
</ins>
</a>
<del class="diff-old">(e.g.,
code
,
client
,
</del>
<ins class="diff-chg">that
embed
</ins>
or
<del class="diff-old">device
)
For
the
code
flow
both
authorization
and
token
MUST
be
included.
For
the
client
flow
token
MUST
be
included.
For
</del>
<ins class="diff-chg">reference
</ins>
the
<del class="diff-old">client
flow
authorization
MUST
NOT
be
included.
For
</del>
<ins class="diff-chg">Discovery
context.
Note
that
only
an
</ins><a href= "#dfn-wot-enriched-thing-description" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-wot-enriched-thing-description-2"><ins class="diff-chg">
Enriched
TD
</ins></a><ins class="diff-chg">
embeds
</ins>
the
<del class="diff-old">device
flow
both
authorization
and
token
</del>
<ins class="diff-chg">registration
information.
</ins><span class= "rfc2119-assertion" id="tdd-context-injection"><ins class="diff-chg">
An
</ins><a href= "#dfn-wot-enriched-thing-description" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-wot-enriched-thing-description-3"><ins class="diff-chg">
Enriched
TD
</ins></a>
<em class="rfc2119">
MUST
</em>
<del class="diff-old">be
included.
In
the
case
of
the
device
flow
the
value
provided
for
authorization
refers
to
the
device
authorization
endpoint
defined
in
[
RFC8628
].
The
mandatory
elements
for
each
flow
are
summarized
</del>
<ins class="diff-chg">contain
</ins>
in
<ins class="diff-new">its
@context
</ins>
the
<del class="diff-old">following
table:
Element
code
</del>
<ins class="diff-chg">URI
</ins>
<code>
<ins class="diff-new">https://w3c.github.io/wot-discovery/context/discovery-context.jsonld
</ins></code>.</span><ins class="diff-new">
In
this
table,
</ins>
client
<del class="diff-old">device
authorization
mandatory
omit
mandatory;
</del>
refers
to
<del class="diff-old">device
authorization
endpoint
token
mandatory
mandatory
mandatory
refresh
optional
optional
optional
5.3.4
Hypermedia
Controls
Vocabulary
Definitions
The
present
model
provides
a
representation
for
(typed)
Web
links
and
Web
forms
exposed
by
a
Thing
.
The
Link
class
definition
reflects
a
very
common
subset
of
</del>
the
<del class="diff-old">terms
defined
in
Web
Linking
[
RFC8288
</del>
<ins class="diff-chg">producer
or
consumer
of
a
</ins><a href="#dfn-td" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-td-30"><ins class="diff-chg">
TD
</ins>
</a>
<del class="diff-old">].
The
defined
terms
can
be
used,
e.g.,
</del>
<ins class="diff-chg">and
server
refers
</ins>
to
<del class="diff-old">describe
</del>
the
<del class="diff-old">relation
to
another
Thing
such
as
a
Lamp
Thing
is
controlled
by
a
Switch
</del>
<a href= "#dfn-wot-thing-description-directory" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-wot-thing-description-directory-24">
Thing
<del class="diff-old">.
The
Form
class
corresponds
to
a
newly
introduced
form
of
hypermedia
control
to
manipulate
the
state
of
Things
(and
other
Web
resources).
5.3.4.1
Link
A
link
can
be
viewed
as
a
statement
of
the
form
"
link
context
has
a
relation
type
resource
at
link
target
",
where
the
optional
target
attributes
may
further
describe
the
resource.
</del>
<ins class="diff-chg">Description
Directory
</ins></a>.
<table class="def">
<thead>
<tr>
<th>
Vocabulary
term
</th>
<th>
Description
</th>
<th>
<ins class="diff-new">Client
Assignment
</ins></th><th><ins class="diff-new">
Server
</ins>
Assignment
</th>
<th>
Type
</th>
</tr>
</thead>
<tbody>
<del class="diff-old">href
Target
IRI
of
a
link
or
submission
target
of
a
form.
mandatory
anyURI
</del>
<tr class="rfc2119-table-assertion" id= "tdd-registrationinfo-vocab-created">
<td>
<code>
<del class="diff-old">type
</del>
<ins class="diff-chg">created
</ins>
</code>
</td>
<td>
<del class="diff-old">Target
attribute
providing
a
hint
indicating
what
</del>
<ins class="diff-chg">Provides
information
when
</ins>
the
<del class="diff-old">media
type
[
RFC2046
]
of
</del>
<ins class="diff-chg">TD
instance
was
created
inside
</ins>
the
<del class="diff-old">result
of
dereferencing
</del>
<ins class="diff-chg">directory.
</ins><p><ins class="diff-chg">
This
</ins><em class="rfc2119"><ins class="diff-chg">
MAY
</ins></em><ins class="diff-chg">
be
set
by
</ins>
the
<del class="diff-old">link
should
be.
optional
string
rel
</del>
<ins class="diff-chg">directory
and
returned
to
consumers.
</ins></p>
</td>
<td>
<del class="diff-old">A
link
relation
type
identifies
the
semantics
of
a
link.
</del>
<ins class="diff-chg">read-only
</ins>
</td>
<td>
optional
</td>
<td>
<a href= "http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#dateTime">
<code>
<del class="diff-old">string
</del>
<ins class="diff-chg">dateTime
</ins>
</code>
</a>
</td>
</tr>
<tr class="rfc2119-table-assertion" id= "tdd-registrationinfo-vocab-modified">
<td>
<code>
<del class="diff-old">anchor
</del>
<ins class="diff-chg">modified
</ins>
</code>
</td>
<td>
<del class="diff-old">Overrides
</del>
<ins class="diff-chg">Provides
information
when
</ins>
the
<del class="diff-old">link
context
(by
default
</del>
<ins class="diff-chg">TD
instance
was
last
modified
inside
</ins>
the
<del class="diff-old">Thing
itself
identified
</del>
<ins class="diff-chg">directory.
</ins><p><ins class="diff-chg">
This
</ins><em class="rfc2119"><ins class="diff-chg">
MAY
</ins></em><ins class="diff-chg">
be
set
</ins>
by
<del class="diff-old">its
id
)
with
</del>
the
<del class="diff-old">given
URI
or
IRI.
</del>
<ins class="diff-chg">directory
and
returned
to
consumers.
</ins></p></td><td><ins class="diff-chg">
read-only
</ins>
</td>
<td>
optional
</td>
<td>
<a href= "http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#dateTime">
<code>
<del class="diff-old">anyURI
</del>
<ins class="diff-chg">dateTime
</ins>
</code>
</a>
</td>
</tr>
<tr class="rfc2119-table-assertion" id= "tdd-registrationinfo-vocab-expires">
<td>
<code>
<del class="diff-old">sizes
</del>
<ins class="diff-chg">expires
</ins>
</code>
</td>
<td>
<del class="diff-old">Target
attribute
that
specifies
one
or
more
sizes
for
</del>
<ins class="diff-chg">Provides
</ins>
the
<del class="diff-old">referenced
icon.
Only
applicable
</del>
<ins class="diff-chg">absolute
time
</ins>
for
<del class="diff-old">relation
type
"icon".
The
value
pattern
follows
{Height}x{Width}
(e.g.,
"16x16",
"16x16
32x32").
optional
string
Link
relations
can
be
used
to
describe
relations
such
as
to
other
Things
(e.g.,
a
Switch
Thing
controls
a
Lamp
Thing),
to
a
specific
kind
of
Thing
Models
(e.g.,
a
Thing
Description
is
an
</del>
<ins class="diff-chg">when
the
TD
</ins>
instance
<del class="diff-old">of
a
specific
Thing
Model),
or
to
further
documentations
information
(e.g.,
device
manual
of
a
Thing).
It
is
recommended
</del>
<ins class="diff-chg">registration
expires.
</ins><p><ins class="diff-chg">
The
producer
</ins><em class="rfc2119"><ins class="diff-chg">
MAY
</ins></em><ins class="diff-chg">
set
this
</ins>
to
<del class="diff-old">reuse
existing
and
established
Link
Relation
definitions
from
IANA.
</del>
<ins class="diff-chg">indicate
the
absolute
expiry
time
during
the
registration.
</ins>
</p>
<p>
<del class="diff-old">In
the
following
a
best
practice
relation
type
table
is
introduced
</del>
<ins class="diff-chg">For
servers
</ins>
that
<ins class="diff-new">support
expirable
TDs:
If
</ins><code><ins class="diff-new">
ttl
</ins></code><ins class="diff-new">
(relative
expiry)
</ins>
is
<del class="diff-old">recommended
</del>
<ins class="diff-chg">present,
the
server
</ins><em class= "rfc2119"><ins class="diff-chg">
MUST
</ins></em><ins class="diff-chg">
ignore
client
assignments
</ins>
to
<del class="diff-old">use
within
WoT
Thing
Description
or
Thing
Model
instances.
Value
Occurrence
Explanation
Source
of
value
origin
</del>
<code>
<del class="diff-old">icon
</del>
<ins class="diff-chg">expires
</ins>
</code>
<ins class="diff-chg">and
instead
compute
and
set
it
internally.
</ins></p>
</td>
<td>
<del class="diff-old">0..*
</del>
<ins class="diff-chg">optional
</ins>
</td>
<td>
<del class="diff-old">Imports
an
icon
associated
to
the
Thing
(e.g.,
for
UI
purposes).
</del>
<ins class="diff-chg">optional
</ins>
</td>
<td>
<del class="diff-old">IANA
Link
Relation
</del>
<a href= "http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#dateTime">
<code>
<del class="diff-old">service-doc
</del>
<ins class="diff-chg">dateTime
</ins>
</code>
<del class="diff-old">0..*
Relation
to
a
resource
that
provide
(human-readable)
documentation
or
descriptions.
IANA
Link
Relation
</del>
</a>
</td>
</tr>
<tr class="rfc2119-table-assertion" id= "tdd-registrationinfo-vocab-ttl">
<td>
<code>
<del class="diff-old">alternate
</del>
<ins class="diff-chg">ttl
</ins>
</code>
</td>
<td>
<del class="diff-old">0..*
Point
to
alternative
representation
</del>
<ins class="diff-chg">Time-to-live:
relative
amount
</ins>
of
<ins class="diff-new">time
in
seconds
from
</ins>
the
<del class="diff-old">Thing
(i.e.
RDF-Turtle,
human-readable
HTML
document,
...).
IANA
Link
Relation
type
0..1
Indicate
that
</del>
<ins class="diff-chg">registration
time
until
when
</ins>
the
<del class="diff-old">Thing
is
an
</del>
<ins class="diff-chg">TD
</ins>
instance
<del class="diff-old">of
the
target
resource
such
as
</del>
<ins class="diff-chg">registration
expires.
</ins><p><ins class="diff-chg">
The
producer
</ins><em class="rfc2119"><ins class="diff-chg">
MAY
</ins></em><ins class="diff-chg">
set
this
</ins>
to
<del class="diff-old">a
Thing
Model
.
IANA
Link
Relation
tm:extends
0..1
Extends
an
existing
definition
of
</del>
<ins class="diff-chg">indicate
</ins>
the
<del class="diff-old">target
resource
such
as
a
Thing
Model
.
Only
applicable
for
Thing
Model
definitions.
W3C
WoT
Thing
Model
tm:submodel
0..*
Used
to
compose
one
or
multiple
Thing
Models
.
Only
applicable
for
Thing
Model
definitions.
W3C
WoT
Thing
Model
</del>
<ins class="diff-chg">relative
expiry
time
during
the
registration.
</ins></p><p><ins class="diff-chg">
For
servers
that
support
expirable
TDs:
The
server
</ins><em class= "rfc2119"><ins class="diff-chg">
MUST
</ins></em><ins class="diff-chg">
use
</ins>
<code>
<del class="diff-old">manifest
</del>
<ins class="diff-chg">ttl
</ins>
</code>
<del class="diff-old">0..*
Point
</del>
to
<ins class="diff-new">calculate
</ins>
the
<del class="diff-old">web
app
manifest
of
a
web
application
which
provides,
e.g.,
a
user
interface
with
which
a
user
can
interact
with
the
Thing
(also
see
[
APPMANIFEST
]).
IANA
Link
Relation
</del>
<code>
<del class="diff-old">proxy-to
</del>
<ins class="diff-chg">expires
</ins>
</code>
<del class="diff-old">0..*
</del>
<ins class="diff-chg">(absolute
expiry)
value.
</ins></p>
</td>
<td>
<del class="diff-old">Target
resource
provide
the
address
of
a
proxy.
</del>
<ins class="diff-chg">optional
</ins>
</td>
<td>
<del class="diff-old">W3C
WoT
Security
and
WoT
Binding
Template
</del>
<ins class="diff-chg">read-only
</ins>
</td>
<td>
<code>
<del class="diff-old">collection
</del>
<ins class="diff-chg">number
</ins>
</code>
</td>
<del class="diff-old">0..1
Points
to
a
collections
of
Things
.
IANA
Link
Relation
</del>
</tr>
<tr class="rfc2119-table-assertion" id= "tdd-registrationinfo-vocab-retrieved">
<td>
<code>
<del class="diff-old">item
</del>
<ins class="diff-chg">retrieved
</ins>
</code>
</td>
<td>
<del class="diff-old">0..*
Points
to
a
Thing
that
</del>
<ins class="diff-chg">The
time
at
which
the
TD
was
retrieved
from
the
server.
</ins><p><ins class="diff-chg">
This
</ins>
is
<del class="diff-old">member
</del>
<ins class="diff-chg">useful
for
clients
that
intend
to
process
other
absolute
timestamps
but
do
not
have
an
internal
clock
or
other
means
</ins>
of
<ins class="diff-new">acquiring
</ins>
the
current
<del class="diff-old">Thing
collections.
IANA
Link
Relation
predecessor-version
</del>
<ins class="diff-chg">time.
</ins></p>
</td>
<td>
<del class="diff-old">0..1
</del>
<ins class="diff-chg">read-only
</ins>
</td>
<td>
<del class="diff-old">Points
to
a
previous
Thing
Description
or
Thing
Model
version.
</del>
<ins class="diff-chg">optional
</ins>
</td>
<td>
<del class="diff-old">IANA
Link
Relation
</del>
<a href= "http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#dateTime">
<code>
<del class="diff-old">controlledBy
</del>
<ins class="diff-chg">dateTime
</ins>
</code>
<del class="diff-old">0..*
Refers
to
a
Thing
</del>
</a>
<del class="diff-old">that
controls
the
context
Thing
.
</del>
<del class="diff-old">W3C
Thing
Description
</del>
</td>
</tr>
</tbody>
</table>
</section>
<section id="exploration-directory-registration-expiry" class= "normative">
<div class="header-wrapper">
<h5 id="x7-3-1-2-registration-expiry">
<del class="diff-old">5.3.4.2
</del>
<bdi class= "secno">
<ins class="diff-chg">7.3.1.2
</ins>
</bdi>
<del class="diff-old">Form
</del>
<ins class="diff-chg">Registration
Expiry
</ins>
</h5>
<a class="self-link" href= "#exploration-directory-registration-expiry" aria-label= "Permalink for Section 7.3.1.2">
</a>
</div>
<ins class="diff-new">Section
</ins><a href="#exploration-directory-registration-info" data-matched-text="[[[#exploration-directory-registration-info]]]" class="sec-ref"><bdi class="secno"><ins class="diff-new">
7.3.1.1
</ins></bdi><ins class="diff-new">
Registration
Information
</ins></a><ins class="diff-new">
introduces
some
attributes
to
specify
and
discover
the
expiry
time
of
registered
</ins><a href="#dfn-td" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-td-31"><ins class="diff-new">
TDs
</ins></a>.
<p>
<del class="diff-old">A
form
</del>
<ins class="diff-chg">Producers
</ins>
can
<del class="diff-old">be
viewed
as
a
statement
of
"To
perform
an
operation
type
operation
on
form
context
,
make
a
request
method
request
</del>
<ins class="diff-chg">set
the
expiry
time
</ins>
to
<del class="diff-old">submission
target
"
where
</del>
<ins class="diff-chg">inform
</ins>
the
<del class="diff-old">optional
form
fields
may
further
describe
</del>
<ins class="diff-chg">directory
and
other
consumers
about
</ins>
the
<del class="diff-old">required
request.
In
Thing
Descriptions,
</del>
<ins class="diff-chg">validity
of
</ins>
the
<del class="diff-old">form
context
</del>
<ins class="diff-chg">TD
registrations.
The
expiry
</ins>
is
<ins class="diff-new">also
a
useful
indicator
to
inform
</ins>
the
<del class="diff-old">surrounding
Object,
</del>
<ins class="diff-chg">consumers
about
expiry
of
dynamic
</ins><a href="#dfn-td" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-td-32"><ins class="diff-chg">
TDs
</ins></a>,<ins class="diff-chg">
e.g.
when
changes
to
metadata
</ins>
such
as
<del class="diff-old">Properties,
Actions,
and
Events
</del>
<ins class="diff-chg">geolocation
</ins>
or
<del class="diff-old">the
Thing
itself
</del>
<ins class="diff-chg">properties
are
expected
to
be
valid
</ins>
for
<del class="diff-old">meta-interactions.
Vocabulary
term
Description
Assignment
Type
href
Target
IRI
of
a
link
or
submission
target
of
a
form.
mandatory
anyURI
contentType
Assign
</del>
a
<del class="diff-old">content
type
based
</del>
<ins class="diff-chg">limited
period.
Consumers
may
rely
</ins>
on
<del class="diff-old">a
media
type
(e.g.,
text/plain
)
and
potential
parameters
(e.g.,
charset=utf-8
)
for
</del>
the
<del class="diff-old">media
type
[
RFC2046
].
with
default
string
</del>
<ins class="diff-chg">expiry
time
to
know
how
long
a
retrieved
</ins><a href="#dfn-td" class= "internalDFN" data-link-type="dfn" id="ref-for-dfn-td-33"><ins class="diff-chg">
TD
</ins>
</a>
<del class="diff-old">contentCoding
Content
coding
values
indicate
an
encoding
transformation
that
has
been
or
can
</del>
<ins class="diff-chg">will
</ins>
be
<del class="diff-old">applied
</del>
<ins class="diff-chg">valid
and
when
they
need
</ins>
to
<ins class="diff-new">request
</ins>
a
<del class="diff-old">representation.
Content
codings
</del>
<ins class="diff-chg">more
recent
one.
Consumers
who
retrieve
an
expired
TD
may
consider
it
as
metadata
of
an
inactive
client.
</ins></p><p><ins class="diff-chg">
For
the
servers,
the
expiry
time
is
useful
for
implementing
automatic
removal
of
obsolete
or
accidental
registrations.
</ins><span class="rfc2119-assertion" id= "tdd-registrationinfo-expiry-purge"><ins class="diff-chg">
Servers
</ins><em class= "rfc2119"><ins class="diff-chg">
SHOULD
</ins></em><ins class="diff-chg">
periodically
purge
TDs
that
</ins>
are
<del class="diff-old">primarily
used
to
allow
</del>
<ins class="diff-chg">past
their
expiry
times.
</ins></span><ins class="diff-chg">
Prescribing
</ins>
a
<del class="diff-old">representation
to
be
compressed
</del>
<ins class="diff-chg">global
mandate
</ins>
or
<del class="diff-old">otherwise
usefully
transformed
without
losing
</del>
<ins class="diff-chg">upper
limit
for
</ins>
the
<del class="diff-old">identity
of
its
underlying
media
type
</del>
<ins class="diff-chg">expiry
time
is
application-specific
</ins>
and
<del class="diff-old">without
loss
of
information.
Examples
of
content
coding
include
"gzip",
"deflate",
etc.
.
optional
string
security
Set
</del>
<ins class="diff-chg">beyond
the
scope
</ins>
of
<del class="diff-old">security
definition
names,
chosen
from
those
defined
in
securityDefinitions
.
These
must
all
be
satisfied
for
access
to
resources.
optional
string
</del>
<ins class="diff-chg">this
specification.
</ins><span class="rfc2119-assertion" id= "tdd-registrationinfo-expiry-config"><ins class="diff-chg">
The
servers
</ins><em class= "rfc2119"><ins class="diff-chg">
MAY
</ins></em><ins class="diff-chg">
mandate
</ins>
or
<del class="diff-old">Array
of
string
scopes
Set
of
authorization
scope
identifiers
provided
as
an
array.
These
are
provided
in
tokens
returned
by
an
authorization
server
and
associated
with
forms
in
order
to
identify
what
resources
</del>
<ins class="diff-chg">set
</ins>
a
<del class="diff-old">client
may
access
</del>
<ins class="diff-chg">configurable
upper
limit
to
expiry
times
</ins>
and
<del class="diff-old">how.
</del>
<ins class="diff-chg">refuse
incompliant
requests.
</ins></span>
The
<del class="diff-old">values
associated
</del>
<ins class="diff-chg">purging
by
servers
is
particularly
beneficial
when
interacting
</ins>
with
<del class="diff-old">a
form
should
be
chosen
from
those
defined
in
an
OAuth2SecurityScheme
active
on
</del>
<ins class="diff-chg">clients
(e.g.
IoT
devices)
</ins>
that
<del class="diff-old">form.
optional
string
or
Array
of
string
response
</del>
<ins class="diff-chg">are
unable
to
explicitly
deregister
their
</ins><a href="#dfn-td" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-td-34"><ins class="diff-chg">
TDs
</ins></a>.
This
<del class="diff-old">optional
term
can
</del>
<ins class="diff-chg">could
</ins>
be
<del class="diff-old">used
if,
e.g.,
the
output
communication
metadata
differ
from
input
metadata
(e.g.,
output
contentType
differ
from
</del>
<ins class="diff-chg">due
to
protocol-specific
limitations,
failure,
destruction,
or
ungraceful
decommissioning.
Such
clients
should
set
a
reasonably
short
expiry
time
and
periodically
extend
it
during
</ins>
the
<del class="diff-old">input
contentType).
</del>
<ins class="diff-chg">normal
operation.
</ins>
The
<del class="diff-old">response
name
contains
metadata
</del>
<ins class="diff-chg">expiry
can
be
extended
by
updating
the
registration
either
fully
or
partially,
including
an
update
</ins>
that
<del class="diff-old">is
only
valid
for
</del>
<ins class="diff-chg">makes
no
changes
to
</ins>
the
<del class="diff-old">primary
response
messages.
optional
ExpectedResponse
additionalResponses
</del>
<ins class="diff-chg">TD;
see
</ins><a href= "#exploration-directory-api-things-update" data-matched-text= "[[[#exploration-directory-api-things-update]]]" class= "sec-ref">
<del class="diff-old">This
optional
term
can
be
used
if
additional
expected
responses
are
possible,
e.g.
for
error
reporting.
Each
additional
response
needs
</del>
<bdi class="secno">
<ins class="diff-chg">7.3.2.1.3
</ins></bdi><ins class="diff-chg">
Update
</ins></a>.<ins class="diff-chg">
If
a
client
ceases
</ins>
to
<del class="diff-old">be
distinguished
from
others
in
some
way
(for
example,
by
specifying
</del>
<ins class="diff-chg">operate,
</ins>
a
<del class="diff-old">protocol-specific
error
code),
and
may
also
have
</del>
<ins class="diff-chg">directory
with
purging
capability
will
automatically
remove
</ins>
its
<del class="diff-old">own
data
schema.
optional
</del>
<ins class="diff-chg">registration.
</ins></p></section><section id="exploration-directory-anonymous-td" class="normative"><div class="header-wrapper"><h5 id="x7-3-1-3-anonymous-td-identifiers">
<del class="diff-old">AdditionalExpectedResponse
</del>
<bdi class= "secno">
<ins class="diff-chg">7.3.1.3
</ins></bdi><ins class="diff-chg">
Anonymous
TD
Identifiers
</ins></h5><a class="self-link" href="#exploration-directory-anonymous-td" aria-label="Permalink for Section 7.3.1.3">
</a>
<del class="diff-old">or
Array
of
AdditionalExpectedResponse
</del>
</div>
<ins class="diff-new">The
directory
assigns
local
identifiers
to
</ins><a href= "#dfn-wot-anonymous-thing-description" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-wot-anonymous-thing-description-1"><ins class="diff-new">
Anonymous
TDs
</ins>
</a>
<del class="diff-old">subprotocol
Indicates
</del>
<ins class="diff-chg">to
enable
management
and
retrieval
of
such
TDs
from
</ins>
the
<del class="diff-old">exact
mechanism
by
which
</del>
<ins class="diff-chg">directory.
</ins><span class="rfc2119-assertion" id="tdd-anonymous-td-identifier"><ins class="diff-chg">
In
situations
where
the
server
exposes
</ins>
an
<del class="diff-old">interaction
will
be
accomplished
for
a
given
protocol
when
there
are
multiple
options.
For
example,
for
HTTP
and
Events,
</del>
<ins class="diff-chg">Anonymous
TD
(e.g.
retrieval,
listing,
search),
</ins>
it
<del class="diff-old">indicates
which
of
several
available
mechanisms
should
</del>
<em class="rfc2119">
<ins class="diff-chg">MUST
</ins></em><ins class="diff-chg">
add
the
local
identifier
to
the
TD
to
allow
local
referencing.
</ins></span><span class="rfc2119-assertion" id= "tdd-anonymous-td-local-uuid"><ins class="diff-chg">
The
local
identifier
</ins><em class= "rfc2119"><ins class="diff-chg">
SHOULD
</ins></em>
be
<del class="diff-old">used
for
asynchronous
notifications
such
</del>
<ins class="diff-chg">a
UUID
Version
4,
presented
</ins>
as
<del class="diff-old">long
polling
(
longpoll
),
WebSub
[
websub
]
(
websub
),
Server-Sent
Events
(
sse
)
</del>
<ins class="diff-chg">a
URN
</ins>
[
<cite>
<del class="diff-old">html
</del>
<a class="bibref" data-link-type="biblio" href= "#bib-rfc4122" title= "A Universally Unique IDentifier (UUID) URN Namespace">
<ins class="diff-chg">RFC4122
</ins>
</a>
</cite>
<del class="diff-old">]
(also
known
as
EventSource).
Please
note
that
there
</del>
<ins class="diff-chg">].
</ins></span><ins class="diff-chg">
UUID
Version
4
</ins>
is
<del class="diff-old">no
restriction
on
the
subprotocol
selection
and
other
mechanisms
can
also
be
announced
by
this
subprotocol
term.
optional
string
(e.g.,
longpoll
,
websub
,
or
sse
)
op
Indicates
the
semantic
intention
of
performing
the
operation(s)
described
by
the
form.
For
example,
the
Property
interaction
allows
get
and
set
operations.
The
protocol
binding
may
contain
a
form
for
the
get
operation
and
</del>
a
<del class="diff-old">different
form
for
the
set
operation.
The
op
attribute
indicates
which
form
is
for
</del>
<ins class="diff-chg">random
or
pseudo-random
number
</ins>
which
<del class="diff-old">and
allows
the
client
to
select
the
correct
form
for
</del>
<ins class="diff-chg">does
not
carry
unintended
information
about
</ins>
the
<del class="diff-old">operation
required.
op
can
be
assigned
one
</del>
<ins class="diff-chg">host
</ins>
or
<del class="diff-old">more
interaction
verb(s)
each
representing
a
semantic
intention
of
an
operation.
with
default
</del>
<ins class="diff-chg">the
resource.
</ins></section></section><section id="exploration-directory-api" class="normative"><div class="header-wrapper"><h4 id="x7-3-2-directory-service-api">
<del class="diff-old">string
</del>
<bdi class= "secno">
<ins class="diff-chg">7.3.2
</ins></bdi><ins class="diff-chg">
Directory
Service
API
</ins></h4><a class="self-link" href="#exploration-directory-api" aria-label= "Permalink for Section 7.3.2">
</a>
<del class="diff-old">or
Array
of
string
</del>
</div>
<p>
<ins class="diff-new">Directory
services
provide
access
to
</ins><a href= "https://www.w3.org/TR/wot-security/#dfn-system-user-data"><ins class="diff-new">
System
User
Data
</ins>
</a>
<del class="diff-old">(one
</del>
<ins class="diff-chg">and
need
to
provide
appropriate
security
and
privacy
protections.
The
use
</ins>
of
<del class="diff-old">readproperty
,
writeproperty
,
observeproperty
,
unobserveproperty
,
invokeaction
,
queryaction
,
cancelaction
,
subscribeevent
,
unsubscribeevent
,
readallproperties
,
writeallproperties
,
readmultipleproperties
,
writemultipleproperties
,
observeallproperties
,
unobserveallproperties
,
subscribeallevents
,
unsubscribeallevents
,
or
queryallactions
)
Possible
values
</del>
<ins class="diff-chg">secure
transport
protocols
and
access
controls
</ins>
for
<del class="diff-old">the
contentCoding
property
can
be
found,
e.g.,
</del>
<ins class="diff-chg">authenticity
and
confidentiality
</ins>
in
<del class="diff-old">the
IANA
HTTP
content
coding
registry
.
The
list
of
possible
operation
types
of
a
form
is
fixed.
As
of
this
version
</del>
<ins class="diff-chg">implementations
</ins>
of
the
<del class="diff-old">specification,
it
only
includes
the
well-known
types
necessary
to
implement
the
</del>
WoT
<del class="diff-old">interaction
model
described
</del>
<ins class="diff-chg">Directory
Service
API
are
governed
by
the
Security
Consideration
and
Privacy
Consierations
given
</ins>
in
[
<cite>
<del class="diff-old">WOT-ARCHITECTURE
</del>
<a class= "bibref" data-link-type="biblio" href="#bib-wot-architecture11" title= "Web of Things (WoT) Architecture 1.1">
<ins class="diff-chg">wot-architecture11
</ins>
</a>
</cite>
].
<del class="diff-old">Future
versions
of
the
standard
may
extend
</del>
</p>
<p>
<ins class="diff-chg">The
HTTP
API
responses
must
use
appropriate
status
codes
described
in
</ins>
this
<del class="diff-old">list
but
operations
types
</del>
<ins class="diff-chg">section
for
success
and
error
responses.
</ins><span class="rfc2119-assertion" id="tdd-http-error-response"><ins class="diff-chg">
The
HTTP
API
</ins>
<em class="rfc2119">
<del class="diff-old">SHOULD
NOT
</del>
<ins class="diff-chg">MUST
</ins>
</em>
<ins class="diff-new">use
the
Problem
Details
[
</ins><cite>
<del class="diff-old">be
arbitrarily
set
by
servients
and
be
restricted
</del>
<a class="bibref" data-link-type="biblio" href= "#bib-rfc7807" title= "Problem Details for HTTP APIs">
<ins class="diff-chg">RFC7807
</ins></a></cite><ins class="diff-chg">
]
format
</ins>
to
<del class="diff-old">the
values
</del>
<ins class="diff-chg">carry
error
details
</ins>
in
<del class="diff-old">the
table
below.
</del>
<ins class="diff-chg">HTTP
client
error
(4xx)
and
server
error
(5xx)
responses.
</ins>
</span>
<del class="diff-old">Operation
Type
Description
readproperty
Identifies
the
read
operation
on
Property
Affordances
to
retrieve
the
corresponding
data.
writeproperty
Identifies
the
write
operation
on
Property
Affordances
</del>
<ins class="diff-chg">This
enables
both
machines
and
humans
</ins>
to
<del class="diff-old">update
the
corresponding
data.
observeproperty
Identifies
</del>
<ins class="diff-chg">know
</ins>
the
<del class="diff-old">observe
operation
on
Property
Affordances
to
</del>
<ins class="diff-chg">high-level
error
class
and
fine-grained
details.
</ins><span class= "rfc2119-assertion" id="tdd-http-error-response-utf-8"><ins class="diff-chg">
All
HTTP
API
error
responses
described
using
Problem
Details
</ins><em class= "rfc2119"><ins class="diff-chg">
MUST
</ins></em>
be
<del class="diff-old">notified
with
the
new
data
when
the
Property
is
updated.
unobserveproperty
Identifies
the
unobserve
operation
on
Property
Affordances
to
stop
the
corresponding
notifications.
invokeaction
Identifies
the
invoke
operation
on
Action
Affordances
to
perform
</del>
<ins class="diff-chg">encoded
using
UTF-8.
</ins></span><span class= "rfc2119-assertion" id="tdd-http-error-response-lang"><ins class="diff-chg">
HTTP
API
error
responses
</ins><em class="rfc2119"><ins class="diff-chg">
MAY
</ins></em><ins class="diff-chg">
report
details
in
different
languages
using
proactive
negotiation,
if
</ins>
the
<del class="diff-old">corresponding
action.
queryaction
Identifies
</del>
<code>
<ins class="diff-chg">Accept-Language
</ins></code><ins class="diff-chg">
header
field
has
been
set
in
</ins>
the
<del class="diff-old">querying
operation
on
Action
Affordances
to
get
</del>
<ins class="diff-chg">HTTP
request
[
</ins><cite><a class="bibref" data-link-type="biblio" href= "#bib-rfc7231" title= "Hypertext Transfer Protocol (HTTP/1.1): Semantics and Content"><ins class="diff-chg">
RFC7231
</ins></a></cite><ins class="diff-chg">
].
</ins></span></p><p><ins class="diff-chg">
The
APIs
set
</ins>
the
<ins class="diff-new">HTTP
</ins>
status
<del class="diff-old">of
the
corresponding
action.
cancelaction
Identifies
the
cancel
operation
on
Action
Affordances
to
cancel
the
ongoing
corresponding
action.
subscribeevent
Identifies
the
subscribe
operation
on
Event
Affordances
to
be
notified
by
the
Thing
when
the
event
occurs.
unsubscribeevent
Identifies
the
unsubscribe
operation
on
Event
Affordances
to
stop
the
corresponding
notifications.
readallproperties
Identifies
the
readallproperties
operation
on
a
Thing
to
retrieve
the
data
of
all
Properties
</del>
<ins class="diff-chg">codes
as
defined
</ins>
in
<del class="diff-old">a
single
interaction.
writeallproperties
Identifies
the
writeallproperties
operation
on
a
Thing
to
update
the
data
</del>
<a href= "https://datatracker.ietf.org/doc/html/rfc7231#section-6">
<ins class="diff-chg">Section
6
</ins></a>
of
<del class="diff-old">all
writable
Properties
in
a
single
interaction.
readmultipleproperties
Identifies
the
readmultipleproperties
operation
on
a
Thing
to
retrieve
the
data
</del>
<ins class="diff-chg">[
</ins><cite><a class="bibref" data-link-type="biblio" href= "#bib-rfc7231" title= "Hypertext Transfer Protocol (HTTP/1.1): Semantics and Content"><ins class="diff-chg">
RFC7231
</ins></a></cite><ins class="diff-chg">
].
The
list
</ins>
of
<del class="diff-old">selected
Properties
in
a
single
interaction.
writemultipleproperties
Identifies
the
writemultipleproperties
operation
on
a
Thing
to
update
</del>
<ins class="diff-chg">used
error
codes
include
(but
are
not
limited
to)
</ins>
the
<del class="diff-old">data
of
selected
writable
Properties
</del>
<ins class="diff-chg">following:
</ins></p><ul><li><ins class="diff-chg">
400
(Bad
Request):
Invalid
client
input
</ins>
in
<del class="diff-old">a
single
interaction.
observeallproperties
Identifies
the
observeallproperties
operation
on
Properties
to
be
notified
with
new
data
when
any
Property
</del>
<ins class="diff-chg">body,
query,
or
headers.
This
</ins>
is
<del class="diff-old">updated.
unobserveallproperties
Identifies
the
unobserveallproperties
operation
on
Properties
to
stop
notifications
from
all
Properties
</del>
<ins class="diff-chg">accompanied
by
an
appropriate
response
message.
</ins></li><li><ins class="diff-chg">
401
(Unauthorized):
The
request
lacks
valid
authentication
credentials.
As
noted
</ins>
in
<del class="diff-old">a
single
interaction.
queryallactions
Identifies
the
queryallactions
operation
on
a
Thing
to
get
</del>
<a href="#exploration-secboot" data-matched-text="[[[#exploration-secboot]]]" class= "sec-ref">
<bdi class="secno">
<ins class="diff-chg">7.1.2
</ins></bdi><ins class="diff-chg">
Security
Bootstrapping
</ins></a>,<ins class="diff-chg">
this
is
</ins>
the
<del class="diff-old">status
of
all
Actions
</del>
<ins class="diff-chg">first
step
</ins>
in
<del class="diff-old">a
single
interaction.
subscribeallevents
Identifies
the
subscribeallevents
operation
on
Events
</del>
<ins class="diff-chg">authentication
negotiation,
needed
</ins>
to
<del class="diff-old">subscribe
</del>
<ins class="diff-chg">bootstrap
secure
access
</ins>
to
<del class="diff-old">notifications
from
all
Events
in
a
single
interaction.
unsubscribeallevents
Identifies
the
unsubscribeallevents
operation
</del>
<ins class="diff-chg">TDs.
Information
</ins>
on
<del class="diff-old">Events
to
unsubscribe
from
notifications
from
all
Events
</del>
<ins class="diff-chg">what
credentials
are
required
will
be
included
</ins>
in
a
<del class="diff-old">single
interaction.
The
optional
</del>
<code>
<del class="diff-old">response
</del>
<ins class="diff-chg">WWW-Authenticate
</ins>
</code>
<del class="diff-old">name-value
pair
can
be
used
</del>
<ins class="diff-chg">header.
</ins></li><li><ins class="diff-chg">
403
(Forbidden):
Insufficient
rights
</ins>
to
<del class="diff-old">provide
metadata
for
the
expected
response
message.
With
</del>
<ins class="diff-chg">access
</ins>
the
<del class="diff-old">core
vocabulary,
it
only
includes
content
type
information,
but
</del>
<ins class="diff-chg">resource.
</ins></li><li><ins class="diff-chg">
404
(Not
Found):
</ins>
TD
<del class="diff-old">Context
Extensions
could
be
applied.
If
no
response
name-value
pair
</del>
<ins class="diff-chg">or
endpoint
does
not
exist.
This
</ins>
is
<del class="diff-old">provided,
it
MUST
</del>
<ins class="diff-chg">accompanied
by
an
appropriate
response
message.
</ins></li></ul><p>
<del class="diff-old">be
assumed
</del>
<span class="rfc2119-assertion" id="tdd-http-head">
<ins class="diff-chg">For
each
HTTP
endpoint
</ins>
that
<del class="diff-old">the
content
type
of
the
response
is
equal
to
the
content
type
assigned
</del>
<ins class="diff-chg">responds
</ins>
to
the
<del class="diff-old">Form
instance.
Note
that
</del>
<code>
<del class="diff-old">contentType
</del>
<ins class="diff-chg">GET
</ins>
</code>
<del class="diff-old">within
an
</del>
<ins class="diff-chg">method,
the
server
</ins><em class="rfc2119"><ins class="diff-chg">
MUST
</ins></em><ins class="diff-chg">
accept
</ins>
<code>
<del class="diff-old">ExpectedResponse
</del>
<ins class="diff-chg">HEAD
</ins>
</code>
<del class="diff-old">Class
does
not
have
a
Default
Value
.
For
instance,
if
</del>
<ins class="diff-chg">requests
and
return
only
</ins>
the
<del class="diff-old">value
of
</del>
<ins class="diff-chg">headers.
</ins></span><ins class="diff-chg">
This
allows
clients
to
retrieve
headers
such
as
</ins>
the
<del class="diff-old">content
type
of
</del>
<ins class="diff-chg">Content-Length
without
receiving
</ins>
the
<del class="diff-old">form
is
application/xml
</del>
<ins class="diff-chg">body
and
decide
on
a
suitable
strategy
to
query
</ins>
the
<del class="diff-old">assumed
value
of
</del>
<ins class="diff-chg">information.
For
example,
a
constrained
client
can
request
only
</ins>
the
<del class="diff-old">content
type
</del>
<ins class="diff-chg">necessary
parts
</ins>
of
<del class="diff-old">the
response
will
be
also
application/xml
.
In
some
cases
additional
responses
might
be
possible.
One
example
</del>
<ins class="diff-chg">an
object
(using
an
appropriate
search
query)
or
retrieve
a
list
</ins>
of
<del class="diff-old">this
is
error
responses
but
</del>
<ins class="diff-chg">items
</ins>
in
<del class="diff-old">some
cases
there
might
also
be
additional
successful
responses.
</del>
<ins class="diff-chg">small
subsets.
</ins></p><p>
In
<del class="diff-old">this
case
the
response
name-value
pair
is
still
used
for
the
primary
response
but
additionalResponses
</del>
<ins class="diff-chg">constrained
environments,
a
single
TD
</ins>
may
<del class="diff-old">also
be
provided,
whose
value
is
an
array
of
AdditionalExpectedResponse
objects.
Each
additional
response
must
</del>
be
<del class="diff-old">distinguished
in
some
way
from
</del>
<ins class="diff-chg">too
large
to
process
for
</ins>
the
<del class="diff-old">primary
response,
either
by
contentType
</del>
<ins class="diff-chg">server
</ins>
or
<del class="diff-old">by
protocol-specific
settings
such
as
error
code
header
values.
Each
additional
response
may
also
have
</del>
<ins class="diff-chg">clients.
This
affects
both
read
(i.e.
retrieving
one
or
more
TDs
or
TD
fragments)
and
write
(i.e.
submitting
</ins>
a
<del class="diff-old">data
schema
which
can
differ
from
the
normal
output
data
schema
</del>
<ins class="diff-chg">TD
or
Partial
TD)
operations.
See
</ins><a href= "#perf-incremental-transfer" data-matched-text= "[[[#perf-incremental-transfer]]]" class="sec-ref"><bdi class= "secno"><ins class="diff-chg">
10.1
</ins></bdi><ins class="diff-chg">
Incremental
Transfer
</ins></a>
for
<ins class="diff-new">protocol-specific
recommendations
on
incremental
transfer
of
</ins>
the
<del class="diff-old">interaction.
</del>
<ins class="diff-chg">payloads.
</ins>
</p>
<p>
<del class="diff-old">In
some
use
cases,
input
</del>
<ins class="diff-chg">The
directory
APIs
include
mandatory,
recommended,
</ins>
and
<del class="diff-old">output
data
might
be
represented
in
a
different
form,
for
instance
an
Action
</del>
<ins class="diff-chg">optional
features.
Directories
</ins>
that
<del class="diff-old">accepts
JSON,
but
returns
an
image.
In
such
a
case,
the
</del>
<ins class="diff-chg">don't
offer
recommended
or
</ins>
optional
<del class="diff-old">response
name-value
pair
can
describe
</del>
<ins class="diff-chg">features
inform
</ins>
the
<del class="diff-old">content
type
</del>
<ins class="diff-chg">clients
about
the
absence
</ins>
of
<ins class="diff-new">those
features
according
to
</ins>
the
<del class="diff-old">expected
response.
</del>
<ins class="diff-chg">following
rules:
</ins></p><ul><li>
If
the
<del class="diff-old">content
type
</del>
<ins class="diff-chg">missing
feature
is
to
customize
existing
functionality
</ins>
of
<ins class="diff-new">an
API,
</ins>
the
<del class="diff-old">expected
response
differs
from
the
content
type
</del>
<ins class="diff-chg">server
will
respond
with
501
(Not
Implemented)
HTTP
status.
For
example,
if
a
client
requests
a
list
</ins>
of
<ins class="diff-new">items
with
a
particular
sorting
order,
</ins>
the
<del class="diff-old">form,
</del>
<ins class="diff-chg">server
either
respects
that
request
and
returns
</ins>
the
<del class="diff-old">Form
instance
MUST
include
a
name-value
pair
</del>
<ins class="diff-chg">list
</ins>
with
the
<del class="diff-old">name
response
.
For
instance,
an
ActionAffordance
could
only
accept
application/json
for
its
input
data,
while
it
will
respond
with
an
image/jpeg
content
type
for
its
output
data.
In
that
case
</del>
<ins class="diff-chg">requested
order,
or
rejects
</ins>
the
<del class="diff-old">content
types
differ
</del>
<ins class="diff-chg">request
</ins>
and
<ins class="diff-new">does
not
return
</ins>
the
<del class="diff-old">response
name-value
pair
has
to
be
used
to
provide
response
content
type
(
image/jpeg
)
information
to
</del>
<ins class="diff-chg">list.
The
server
will
return
</ins>
the
<del class="diff-old">Consumer
.
Similar
considerations
apply
to
additional
responses,
although
in
this
case
</del>
<ins class="diff-chg">list
with
</ins>
the
<del class="diff-old">contentType
is
optional
</del>
<ins class="diff-chg">default
order
</ins>
if
<del class="diff-old">it
</del>
<ins class="diff-chg">and
only
if
custom
sorting
</ins>
is
<del class="diff-old">the
same
as
the
input
content
Type
(e.g.
JSON).
If
the
content
type
of
an
additional
expected
response
differs
from
the
content
type
of
the
form,
the
Form
instance
MUST
include
an
entry
</del>
<ins class="diff-chg">not
requested.
The
normative
behavior
is
prescribed
</ins>
in
the
<del class="diff-old">array
associated
with
the
name
additionalResponses
that
includes
a
value
for
the
name
contentType
.
</del>
<ins class="diff-chg">respective
sections.
</ins></li><li><span class="rfc2119-assertion" id= "tdd-http-missing-api-endpoint">
If
<del class="diff-old">the
data
schema
of
</del>
an
<del class="diff-old">additional
expected
response
differs
from
the
output
data
schema
of
the
interaction,
</del>
<ins class="diff-chg">API
endpoint
is
not
provided,
</ins>
the
<del class="diff-old">Form
instance
</del>
<ins class="diff-chg">server
</ins>
<em class="rfc2119">
<del class="diff-old">MUST
</del>
<ins class="diff-chg">SHOULD
</ins>
</em>
<del class="diff-old">include
an
entry
in
the
array
associated
</del>
<ins class="diff-chg">respond
</ins>
with
<del class="diff-old">the
name
additionalResponses
that
includes
a
value
for
the
name
schema
.
</del>
<ins class="diff-chg">404
(Not
Found).
</ins>
</span>
</li>
</ul>
<p>
<span class="rfc2119-assertion" id= "tdd-http-alternate-language">
A
<del class="diff-old">Thing
Description
of
</del>
<ins class="diff-chg">Directory
server
</ins><em class= "rfc2119"><ins class="diff-chg">
MAY
</ins></em><ins class="diff-chg">
provide
modified
TDs
or
error
responses
using
</ins>
a
<del class="diff-old">WoT
producer
may
have
multiple
forms
entries
with,
e.g.,
</del>
different
<del class="diff-old">protocol
and/or
</del>
<ins class="diff-chg">default
language
after
server-driven
</ins>
content
<del class="diff-old">types
declarations
that
a
Consumer
could
possibly
support.
In
that
case
the
Consumer
may
choose
any
form
entry
</del>
<ins class="diff-chg">negotiation,
</ins>
that
<del class="diff-old">works
(e.g.,
the
protocol
and
content
type
</del>
is
<del class="diff-old">supported)
for
them.
When
one
form
is
chosen,
it
is
expected
that
the
Consumer
will
continue
to
use
it
as
long
as
possible
for
every
new
interaction
with
the
WoT
producer.
5.3.4.3
ExpectedResponse
Communication
metadata
describing
</del>
<ins class="diff-chg">by
honouring
</ins>
the
<del class="diff-old">expected
response
message
for
</del>
<ins class="diff-chg">request's
Accept-Language
header.
</ins></span><ins class="diff-chg">
The
process
of
modifying
</ins>
the
<del class="diff-old">primary
response.
Vocabulary
term
Description
Assignment
Type
contentType
Assign
</del>
<ins class="diff-chg">default
language
of
</ins>
a
<del class="diff-old">content
type
based
on
</del>
<ins class="diff-chg">TD
using
translations
already
provided
in
</ins>
a
<del class="diff-old">media
type
(e.g.,
text/plain
)
and
potential
parameters
(e.g.,
charset=utf-8
)
for
</del>
<ins class="diff-chg">TD
is
described
in
</ins>
the
<del class="diff-old">media
type
</del>
<ins class="diff-chg">WoT
Thing
Description
1.1
specification
</ins>
[
<cite>
<del class="diff-old">RFC2046
</del>
<a class="bibref" data-link-type="biblio" href="#bib-wot-thing-description11" title= "Web of Things (WoT) Thing Description 1.1">
<ins class="diff-chg">wot-thing-description11
</ins>
</a>
</cite>
].
<del class="diff-old">mandatory
string
</del>
</p>
<section id="exploration-directory-api-things" class="normative">
<div class="header-wrapper">
<h5 id="x7-3-2-1-things-api">
<del class="diff-old">5.3.4.4
</del>
<bdi class="secno">
<ins class="diff-chg">7.3.2.1
</ins>
</bdi>
<del class="diff-old">AdditionalExpectedResponse
</del>
<ins class="diff-chg">Things
API
</ins>
</h5>
<a class="self-link" href="#exploration-directory-api-things" aria-label="Permalink for Section 7.3.2.1">
</a>
</div>
<p>
<del class="diff-old">Communication
metadata
describing
</del>
<ins class="diff-chg">The
Things
API
is
a
RESTful
HTTP
API
served
at
</ins>
the
<del class="diff-old">expected
response
message
for
additional
responses.
Vocabulary
term
Description
Assignment
Type
</del>
<code>
<del class="diff-old">success
</del>
<ins class="diff-chg">/things
</ins>
</code>
<del class="diff-old">Signals
if
an
additional
response
should
not
be
considered
an
error.
</del>
<ins class="diff-chg">endpoint
providing
interfaces
to
create,
retrieve,
update,
delete,
and
list
(CRUDL)
</ins><a href="#dfn-td" class= "internalDFN" data-link-type="dfn" id="ref-for-dfn-td-35"><ins class="diff-chg">
TDs
</ins></a>.<ins class="diff-chg">
The
design
of
this
API
is
in
accordance
</ins>
with
<del class="diff-old">default
boolean
</del>
<ins class="diff-chg">[
</ins><cite>
<a class= "bibref" data-link-type="biblio" href="#bib-rfc7231" title= "Hypertext Transfer Protocol (HTTP/1.1): Semantics and Content">
<ins class="diff-new">RFC7231
</ins>
</a>
<del class="diff-old">contentType
Assign
a
content
type
based
on
a
media
type
(e.g.,
text/plain
)
</del>
</cite>
<ins class="diff-chg">]
</ins>
and
<del class="diff-old">potential
parameters
(e.g.,
charset=utf-8
)
for
the
media
type
</del>
[
<cite>
<del class="diff-old">RFC2046
</del>
<a class="bibref" data-link-type="biblio" href= "#bib-rest-iot" title= "RESTful Design for Internet of Things Systems">
<ins class="diff-chg">REST-IOT
</ins>
</a>
</cite>
].
<del class="diff-old">with
default
string
schema
Used
to
define
the
output
data
schema
for
an
additional
response
if
it
differs
from
the
default
output
data
schema.
Rather
than
a
DataSchema
object,
the
name
of
a
previous
definition
given
in
a
schemaDefinitions
map
must
be
used.
optional
string
5.4
Default
Value
Definitions
</del>
</p>
<p>
<ins class="diff-new">The
HTTP
API
follows
these
general
rules:
</ins></p><ul><li>
<del class="diff-old">When
assignments
in
a
TD
are
missing,
a
TD
Processor
</del>
<span class="rfc2119-assertion" id="tdd-things-list-only">
<ins class="diff-chg">The
API
</ins>
<em class="rfc2119">
MUST
</em>
<del class="diff-old">follow
the
Default
Value
assignments
expressed
in
</del>
<ins class="diff-chg">provide
</ins>
the
<del class="diff-old">table
of
Default
Value
Definitions
.
</del>
<ins class="diff-chg">interface
to
list
TDs.
</ins>
</span>
The
<del class="diff-old">following
table
gives
all
Default
Values
defined
in
the
TD
Information
Model
.
Class
Vocabulary
Term
Default
Value
Comment
DataSchema
readOnly
false
DataSchema
writeOnly
false
PropertyAffordance
observable
false
ActionAffordance
safe
false
ActionAffordance
idempotent
false
AdditionalExpectedResponse
success
false
AdditionalExpectedResponse
contentType
value
of
the
contentType
of
the
Form
element
it
belongs
to.
Form
contentType
application/json
Form
op
</del>
<ins class="diff-chg">Search
API
allows
filtering
and
selection
from
this
list;
see
</ins><a href="#exploration-directory-api-search" data-matched-text="[[[#exploration-directory-api-search]]]" class= "sec-ref">
<bdi class="secno">
<ins class="diff-chg">7.3.2.3
</ins></bdi><ins class="diff-chg">
Search
API
</ins></a>.</li><li>
<del class="diff-old">Array
of
string
with
</del>
<span class="rfc2119-assertion" id="tdd-things-crud">
<ins class="diff-chg">The
API
</ins><em class="rfc2119"><ins class="diff-chg">
MAY
</ins></em><ins class="diff-chg">
provide
</ins>
the
<del class="diff-old">elements
readproperty
</del>
<ins class="diff-chg">interfaces
to
create,
read,
update,
</ins>
and
<del class="diff-old">writeproperty
when
readOnly
</del>
<ins class="diff-chg">delete
(CRUD)
individual
TDs.
</ins></span></li><li><ins class="diff-chg">
A
directory
that
provides
both
read
</ins>
and
<del class="diff-old">writeOnly
are
set
to
false
or
Array
of
string
with
the
element
readproperty
when
readOnly
</del>
<ins class="diff-chg">write
over
HTTP
</ins>
is
<del class="diff-old">set
to
true
or
Array
</del>
<ins class="diff-chg">considered
a
full
HTTP
directory.
</ins><span class="rfc2119-assertion" id="tdd-things-crudl"><ins class="diff-chg">
Full
HTTP
directories
</ins><em class= "rfc2119"><ins class="diff-chg">
SHOULD
</ins></em><ins class="diff-chg">
implement
all
</ins>
of
<del class="diff-old">string
with
the
element
writeproperty
when
writeOnly
</del>
<ins class="diff-chg">CRUDL
(create,
read,
update,
delete,
and
list)
interfaces.
</ins></span><ins class="diff-chg">
It
</ins>
is
<del class="diff-old">set
</del>
<ins class="diff-chg">practical
</ins>
to
<del class="diff-old">true
.
If
defined
within
an
instance
of
PropertyAffordance
Form
op
invokeaction
If
defined
within
an
instance
of
ActionAffordance
Form
op
Array
of
string
with
</del>
<ins class="diff-chg">implement
only
</ins>
the
<del class="diff-old">elements
subscribeevent
</del>
<ins class="diff-chg">interfaces
to
read
</ins>
and
<del class="diff-old">unsubscribeevent
If
defined
within
an
instance
</del>
<ins class="diff-chg">list
if
the
directory
serves
a
static
collection
</ins>
of
<del class="diff-old">EventAffordance
BasicSecurityScheme
in
header
DigestSecurityScheme
in
header
DigestSecurityScheme
qop
auth
APIKeySecurityScheme
in
query
BearerSecurityScheme
in
header
BearerSecurityScheme
alg
ES256
BearerSecurityScheme
format
jwt
6.
TD
Representation
Format
WoT
Thing
Descriptions
represent
Things
and
are
modeled
and
structured
based
on
5.
TD
Information
Model
</del>
<a href="#dfn-td" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-td-36">
<ins class="diff-chg">TDs
</ins>
</a>.
This
<del class="diff-old">section
defines
a
JSON-based
representation
format
</del>
<ins class="diff-chg">is
also
useful
</ins>
for
<del class="diff-old">Things
,
a
serialization
of
instances
of
the
Class
Thing
defined
by
the
TD
Information
Model
.
A
TD
Processor
MUST
be
able
to
serialize
Thing
Descriptions
into
the
JSON
format
[
RFC8259
]
and/or
deserialize
Thing
Descriptions
from
</del>
<ins class="diff-chg">directories
</ins>
that
<del class="diff-old">format,
according
</del>
<ins class="diff-chg">intend
</ins>
to
<ins class="diff-new">expose
only
retrieval
operations
over
HTTP,
and
perform
other
operations
via
out-of-band
mechanisms.
</ins><span class="rfc2119-assertion" id= "tdd-things-read-only-auth"><ins class="diff-new">
To
expose
read-only
access,
</ins>
the
<del class="diff-old">rules
noted
in
6.1
Mapping
to
JSON
Types
</del>
<ins class="diff-chg">directory
</ins><em class="rfc2119"><ins class="diff-chg">
MUST
</ins></em><ins class="diff-chg">
enforce
access
control
on
create,
update,
</ins>
and
<del class="diff-old">6.3
Information
Model
Serialization
.
</del>
<ins class="diff-chg">delete
interfaces.
</ins>
</span>
</li>
<li>
<span class="rfc2119-assertion" id= "tdd-things-default-representation">
The
<del class="diff-old">JSON
</del>
<ins class="diff-chg">default
</ins>
serialization
<del class="diff-old">of
the
TD
Information
Model
is
aligned
with
the
syntax
of
JSON-LD
1.1
[
json-ld11
]
in
order
to
streamline
semantic
evaluation.
Hence,
the
TD
representation
</del>
format
<del class="diff-old">can
be
processed
either
as
raw
JSON
or
with
a
JSON-LD
1.1
processor
(for
details
about
semantic
processing,
please
refer
to
C.
JSON-LD
Context
Usage
</del>
<ins class="diff-chg">for
all
request
</ins>
and
<del class="diff-old">the
documentation
under
the
namespace
IRIs,
e.g.,
https://www.w3.org/2019/wot/td
).
In
order
to
support
interoperable
internationalization,
TDs
</del>
<ins class="diff-chg">success
response
bodies
</ins>
<em class= "rfc2119">
MUST
</em>
be
<del class="diff-old">serialized
according
to
the
requirements
defined
in
Section
8.1
of
RFC8259
</del>
<ins class="diff-chg">JSON,
with
JSON-LD
1.1
</ins>
[
<cite>
<del class="diff-old">RFC8259
</del>
<a class= "bibref" data-link-type="biblio" href="#bib-json-ld11" title= "JSON-LD 1.1">
<ins class="diff-chg">JSON-LD11
</ins>
</a>
</cite>
]
<del class="diff-old">for
open
ecosystems.
In
summary,
this
requires
the
following:
TDs
MUST
be
encoded
using
UTF-8
[
RFC3629
].
</del>
<ins class="diff-chg">syntax
to
support
extensions
and
semantic
processing.
</ins>
</span>
</li>
<li>
<del class="diff-old">Implementations
</del>
<span class="rfc2119-assertion" id= "tdd-things-representation-alternate-input">
<ins class="diff-chg">Directories
</ins>
<em class= "rfc2119">
<del class="diff-old">MUST
NOT
</del>
<ins class="diff-chg">MAY
</ins>
</em>
<del class="diff-old">add
a
byte
order
mark
(U+FEFF)
</del>
<ins class="diff-chg">accept
alternative
representations
based
on
request's
indicated
Content-Type
or
Content-Encoding
headers.
</ins></span><ins class="diff-chg">
This
is
useful
for
applications
that
need
to
provide
representations
other
than
raw
JSON
as
input
</ins>
to
<del class="diff-old">the
beginning
of
</del>
a
<del class="diff-old">TD
document.
</del>
<ins class="diff-chg">directory.
</ins>
</li>
<li>
<del class="diff-old">TD
Processors
</del>
<span class="rfc2119-assertion" id= "tdd-http-representation-alternate-output">
<ins class="diff-chg">Directories
</ins>
<em class= "rfc2119">
MAY
</em>
<del class="diff-old">ignore
</del>
<ins class="diff-chg">provide
alternative
representations
through
server-driven
content
negotiation,
that
is
by
honouring
</ins>
the
<del class="diff-old">presence
of
a
byte
order
mark
rather
</del>
<ins class="diff-chg">request's
Accept
and
Accept-Encoding
headers
and
responding
with
the
supported
TD
representation
and
equivalent
Content-Type
and
Content-Encoding
headers.
</ins></span><ins class="diff-chg">
This
is
useful
for
applications
that
need
to
retrieve
representations
other
</ins>
than
<del class="diff-old">treating
it
</del>
<ins class="diff-chg">raw
JSON
from
a
directory,
such
</ins>
as
<del class="diff-old">an
error.
</del>
<ins class="diff-chg">Gzip-compressed
JSON.
</ins>
</li>
</ul>
<p>
<ins class="diff-chg">The
CRUDL
operations
are
described
in
the
following
sections:
</ins></p><section id="exploration-directory-api-things-creation" class= "normative">
<div class="header-wrapper">
<h6 id="x7-3-2-1-1-creation">
<bdi class="secno">
<del class="diff-old">6.1
</del>
<ins class="diff-chg">7.3.2.1.1
</ins>
</bdi>
<del class="diff-old">Mapping
to
JSON
Types
</del>
<ins class="diff-chg">Creation
</ins></h6><a class="self-link" href= "#exploration-directory-api-things-creation" aria-label= "Permalink for Section 7.3.2.1.1">
</a>
</div>
<p>
<del class="diff-old">The
TD
Information
Model
is
constructed,
so
that
there
is
an
easy
mapping
between
model
Objects
and
JSON
types.
Every
Class
instances
maps
</del>
<ins class="diff-chg">Creation
refers
</ins>
to
<del class="diff-old">a
JSON
object,
where
each
name-value
pair
of
</del>
the
<del class="diff-old">Class
instance
is
a
member
</del>
<ins class="diff-chg">registration
</ins>
of
<ins class="diff-new">a
new
</ins><a href="#dfn-td" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-td-37"><ins class="diff-new">
TD
</ins></a><ins class="diff-new">
inside
</ins>
the
<del class="diff-old">JSON
object.
</del>
<ins class="diff-chg">directory.
</ins>
</p>
<p>
<del class="diff-old">Every
Simple
Type
mentioned
</del>
<ins class="diff-chg">The
TD
object
is
validated
</ins>
in
<ins class="diff-chg">accordance
with
</ins><a href= "#exploration-directory-api-things-validation" data-matched-text= "[[[#exploration-directory-api-things-validation]]]" class= "sec-ref">
<bdi class="secno">
<del class="diff-old">5.3
</del>
<ins class="diff-chg">7.3.2.1.6
</ins>
</bdi>
<del class="diff-old">Class
Definitions
(i.e.,
string
,
anyURI
,
dateTime
,
integer
,
unsignedInt
,
double
,
and
boolean
)
maps
to
a
primitive
JSON
type
(string,
number,
boolean),
as
per
the
rules
listed
below.
These
rules
apply
to
values
in
name-value
pairs:
Values
</del>
<ins class="diff-chg">Validation
</ins></a>.<ins class="diff-chg">
Note
</ins>
that
<del class="diff-old">are
of
type
string
</del>
<ins class="diff-chg">a
TD
may
</ins>
or
<del class="diff-old">anyURI
MUST
be
serialized
as
JSON
strings.
Values
that
are
of
type
dateTime
MUST
</del>
<ins class="diff-chg">may
not
</ins>
be
<del class="diff-old">serialized
as
JSON
strings
following
the
"date-time"
format
specified
</del>
<ins class="diff-chg">generated
</ins>
by
<del class="diff-old">[
RFC3339
].
Examples
would
include
2019-05-24T13:12:45Z
and
2015-07-11T09:32:26+08:00
.
Values
that
are
of
type
dateTime
SHOULD
use
the
literal
Z
representing
</del>
the
<del class="diff-old">UTC
time
zone
instead
of
an
offset.
Values
that
are
of
type
integer
</del>
<a href="#dfn-thing" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-thing-3">
<ins class="diff-chg">Thing
</ins></a><ins class="diff-chg">
it
describes.
For
brownfield
devices
in
particular
a
separate
</ins><a href="#dfn-wot-discoverer" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-wot-discoverer-2"><ins class="diff-chg">
Discoverer
</ins></a><ins class="diff-chg">
process
</ins>
or
<del class="diff-old">unsignedInt
MUST
</del>
<ins class="diff-chg">service
may
</ins>
be
<del class="diff-old">serialized
as
JSON
numbers
without
</del>
<ins class="diff-chg">required
that
generates
and
registers
</ins>
a
<del class="diff-old">fraction
or
exponent
part.
</del>
<ins class="diff-chg">TD
for
a
</ins><a href= "#dfn-thing" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-thing-4"><ins class="diff-chg">
Thing
</ins></a><ins class="diff-chg">
on
its
behalf.
</ins></p><p>
<del class="diff-old">Values
that
are
of
type
</del>
<span class="rfc2119-assertion" id= "tdd-things-create-known-vs-anonymous">
<ins class="diff-chg">A
TD
which
is
identified
with
an
</ins>
<code>
<del class="diff-old">double
</del>
<ins class="diff-chg">id
</ins>
</code>
<ins class="diff-new">attribute
</ins>
<em class="rfc2119">
MUST
</em>
be
<del class="diff-old">serialized
as
JSON
number.
Values
</del>
<ins class="diff-chg">handled
differently
with
one
</ins>
that
<del class="diff-old">are
of
type
boolean
MUST
be
serialized
as
JSON
boolean.
Every
complex
type
of
the
</del>
<ins class="diff-chg">has
no
identifier
(
</ins><a href= "#dfn-wot-anonymous-thing-description" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-wot-anonymous-thing-description-2"><ins class="diff-chg">
Anonymous
</ins>
TD
<del class="diff-old">Information
Model
(i.e.,
Arrays
,
Maps
,
and
Class
</del>
</a>
<del class="diff-old">instances)
maps
to
a
structured
JSON
type
(array
and
object),
as
per
the
rules
listed
</del>
<ins class="diff-chg">).
</ins></span><ins class="diff-chg">
The
create
operations
are
elaborated
</ins>
below:
</p>
<ul>
<li>
<span class="rfc2119-assertion" id= "tdd-things-create-known-td">
A
<del class="diff-old">value
of
type
Array
</del>
<ins class="diff-chg">TD
that
has
an
</ins><code><ins class="diff-chg">
id
</ins></code>
<em class="rfc2119">
MUST
</em>
be
<del class="diff-old">serialized
as
JSON
array,
with
each
value
of
the
name-value
pairs
as
element
of
</del>
<ins class="diff-chg">submitted
to
</ins>
the
<del class="diff-old">JSON
array
ordered
by
</del>
<ins class="diff-chg">directory
in
</ins>
the
<del class="diff-old">numeric
name
</del>
<ins class="diff-chg">body
</ins>
of
<ins class="diff-new">an
HTTP
</ins><code><ins class="diff-new">
PUT
</ins></code><ins class="diff-new">
request
at
</ins><code><ins class="diff-new">
/things/{id}
</ins></code><ins class="diff-new">
endpoint,
where
</ins><code><ins class="diff-new">
id
</ins></code><ins class="diff-new">
is
</ins>
the
<del class="diff-old">pair.
A
value
of
type
Map
MUST
be
serialized
as
JSON
object,
with
each
name-value
pair
as
member
of
</del>
<ins class="diff-chg">unique
TD
identifier,
present
inside
</ins>
the
<del class="diff-old">JSON
</del>
<ins class="diff-chg">TD
</ins>
object.
</span>
<del class="diff-old">A
Class
</del>
<ins class="diff-chg">An
</ins><a href="#dfn-wot-anonymous-thing-description" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-wot-anonymous-thing-description-3"><ins class="diff-chg">
Anonymous
TD
</ins>
</a>
<del class="diff-old">instance
</del>
<ins class="diff-chg">is
handled
differently;
see
below.
</ins><span class="rfc2119-assertion" id= "tdd-things-create-known-contenttype"><ins class="diff-chg">
The
request
</ins>
<em class= "rfc2119">
<del class="diff-old">MUST
</del>
<ins class="diff-chg">SHOULD
</ins>
</em>
<del class="diff-old">be
serialized
as
</del>
<ins class="diff-chg">contain
</ins><code><ins class="diff-chg">
application/td+json
</ins></code><ins class="diff-chg">
Content-Type
header
for
</ins>
JSON
<del class="diff-old">object,
following
the
detailed
rules
given
individually
in
6.3
Information
Model
Serialization
.
6.2
Omitting
Default
Values
A
Thing
Description
</del>
serialization
<del class="diff-old">may
omit
Vocabulary
Term
for
which
Default
Values
are
defined,
as
listed
in
the
table
given
</del>
<ins class="diff-chg">of
TD.
</ins></span><ins class="diff-chg">
The
TD
object
is
validated
</ins>
in
<ins class="diff-chg">accordance
with
</ins><a href= "#exploration-directory-api-things-validation" data-matched-text= "[[[#exploration-directory-api-things-validation]]]" class= "sec-ref">
<bdi class="secno">
<del class="diff-old">5.4
</del>
<ins class="diff-chg">7.3.2.1.6
</ins>
</bdi>
<del class="diff-old">Default
Value
Definitions
</del>
<ins class="diff-chg">Validation
</ins>
</a>.
<del class="diff-old">The
following
example
shows
</del>
<span class="rfc2119-assertion" id= "tdd-things-create-known-td-resp">
<ins class="diff-chg">Upon
successful
processing,
</ins>
the
<del class="diff-old">TD
instance
from
Example
1
</del>
<ins class="diff-chg">server
</ins><em class="rfc2119"><ins class="diff-chg">
MUST
</ins></em><ins class="diff-chg">
respond
</ins>
with
<del class="diff-old">a
checkbox
to
also
include
</del>
<ins class="diff-chg">201
(Created)
status.
</ins></span><p><ins class="diff-chg">
Note:
If
</ins>
the
<del class="diff-old">members
with
Default
Values
(=checkbox
checked).
These
members
can
be
omitted
(=checkbox
unchecked)
</del>
<ins class="diff-chg">target
location
corresponds
</ins>
to
<del class="diff-old">simplify
</del>
<ins class="diff-chg">an
existing
TD,
</ins>
the
<del class="diff-old">TD
serialization.
Note
that
a
TD
Processor
interprets
these
omitted
members
identically
</del>
<ins class="diff-chg">request
shall
instead
proceed
</ins>
as
<del class="diff-old">if
they
were
explicitly
present
with
a
given
Default
Value
.
</del>
<ins class="diff-chg">an
Update
operation
and
respond
the
appropriate
status
code
(see
Update
section).
</ins>
</p>
<del class="diff-old">Example
4
with
Default
Values
{
    : &lt;span class=
"hljs-string"&gt;"https://www.w3.org/2022/wot/td/v1.1",
    : &lt;span class=
"hljs-string"&gt;"urn:dev:ops:32473-WoTLamp-1234",
    : &lt;span class=
"hljs-string"&gt;"MyLampThing",
    : {
        : {
            : &lt;span class=
"hljs-string"&gt;"basic"
        }
    },
    : &lt;span class=
"hljs-string"&gt;"basic_sc",
    : {
        : {
            : &lt;span class=
"hljs-string"&gt;"string",
            : [{
                : &lt;span class=
"hljs-string"&gt;"https://mylamp.example.com/status"
            }]
        }
    },
    : {
        : {
            : [{
                : &lt;span class=
"hljs-string"&gt;"https://mylamp.example.com/toggle"
            }]
        }
    },
    : {
        : {
            : {
                : &lt;span class=
"hljs-string"&gt;"string"
            },
            : [{
                : &lt;span class=
"hljs-string"&gt;"https://mylamp.example.com/oh",
                &lt;span class=
"hljs-attr"&gt;"subprotocol": &lt;span class=
"hljs-string"&gt;"longpoll"
            }]
        }
    }
}
{
    : &lt;span class=
"hljs-string"&gt;"https://www.w3.org/2022/wot/td/v1.1",
    : &lt;span class=
"hljs-string"&gt;"urn:dev:ops:32473-WoTLamp-1234",
    : &lt;span class=
"hljs-string"&gt;"MyLampThing",
    : {
        : {
            : &lt;span class=
"hljs-string"&gt;"basic",
            : &lt;span class=
"hljs-string"&gt;"header"
        }
    },
    : &lt;span class=
"hljs-string"&gt;"basic_sc",
    : {
        : {
            : &lt;span class=
"hljs-string"&gt;"string",
            : &lt;span class=
"hljs-literal"&gt;false,
            &lt;span class=
"hljs-attr"&gt;"writeOnly",
            &lt;span class=
"hljs-attr"&gt;"observable": &lt;span class=
"hljs-literal"&gt;false,
            : [{
                : [
                    &lt;span class=
"hljs-string"&gt;"readproperty",
                    &lt;span class=
"hljs-string"&gt;"writeproperty"
                ],
                : &lt;span class=
"hljs-string"&gt;"https://mylamp.example.com/status",
                &lt;span class=
"hljs-attr"&gt;"contentType": &lt;span class=
"hljs-string"&gt;"application/json"
            }]
        }
    },
    : {
        : {
            : &lt;span class=
"hljs-literal"&gt;false,
            &lt;span class=
"hljs-attr"&gt;"idempotent": &lt;span class=
"hljs-literal"&gt;false,
            : [{
                : &lt;span class=
"hljs-string"&gt;"invokeaction",
                : &lt;span class=
"hljs-string"&gt;"https://mylamp.example.com/toggle",
                &lt;span class=
"hljs-attr"&gt;"contentType": &lt;span class=
"hljs-string"&gt;"application/json"
            }]
        }
    },
    : {
        : {
            : {
                : &lt;span class=
"hljs-string"&gt;"string",
                &lt;span class=
"hljs-attr"&gt;"readOnly": &lt;span class=
"hljs-literal"&gt;false,
                &lt;span class=
"hljs-attr"&gt;"writeOnly": &lt;span class=
"hljs-literal"&gt;false
            },
            : [{
                : &lt;span class=
"hljs-string"&gt;"subscribeevent",
                : &lt;span class=
"hljs-string"&gt;"https://mylamp.example.com/oh",
                &lt;span class=
"hljs-attr"&gt;"contentType": &lt;span class=
"hljs-string"&gt;"application/json",
                &lt;span class=
"hljs-attr"&gt;"subprotocol": &lt;span class=
"hljs-string"&gt;"longpoll"
            }]
        }
    }
}
</del>
<p>
<del class="diff-old">Please
note
that,
depending
on
the
Protocol
Binding
used,
additional
protocol-specific
Vocabulary
Terms
</del>
<ins class="diff-chg">The
create
operation
for
</ins><a href="#dfn-td" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-td-38"><ins class="diff-chg">
TDs
</ins>
</a>
<del class="diff-old">may
apply.
They
may
also
</del>
<ins class="diff-chg">that
</ins>
have
<del class="diff-old">associated
Default
Values
,
and
hence
can
also
be
omitted
</del>
<ins class="diff-chg">identifiers
is
specified
</ins>
as
<del class="diff-old">explained
in
this
subsection.
Further
information
can
be
found
</del>
<code>
<ins class="diff-chg">createThing
</ins></code><ins class="diff-chg">
action
</ins>
in
<del class="diff-old">8.3
Protocol
Bindings
.
</del>
<a href="#directory-api-spec" data-matched-text= "[[[#directory-api-spec]]]" class="sec-ref">
<bdi class= "secno">
<del class="diff-old">6.3
Information
Model
Serialization
6.3.1
</del>
<ins class="diff-chg">7.3.2.4
</ins>
</bdi>
<del class="diff-old">Thing
Root
Object
A
Thing
Description
is
a
data
structure
rooted
at
an
Object
of
type
Thing
.
In
turn,
a
JSON
serialization
of
the
Thing
Description
is
a
JSON
object,
which
is
the
root
of
a
syntax
tree
constructed
from
the
TD
Information
Model
</del>
<ins class="diff-chg">API
Specification
(Thing
Model)
</ins>
</a>.
</p>
</li>
<li>
<del class="diff-old">The
root
element
of
a
TD&nbsp;Serialization
</del>
<span class="rfc2119-assertion" id= "tdd-things-create-anonymous-td">
<ins class="diff-chg">An
</ins><a href= "#dfn-wot-anonymous-thing-description" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-wot-anonymous-thing-description-4"><ins class="diff-chg">
Anonymous
TD
</ins>
</a>
<em class="rfc2119">
MUST
</em>
<del class="diff-old">&nbsp;be
a
JSON
object
that
includes
a
member
with
the
name
@context
and
a
value
of
type
string
or
array
that
equals
or
respectively
contains
https://www.w3.org/2022/wot/td/v1.1
.
In
general,
this
URI
is
used
</del>
<ins class="diff-chg">be
submitted
</ins>
to
<del class="diff-old">identify
</del>
the
<del class="diff-old">TD
representation
format
version
defined
by
this
specification.
For
JSON-LD
processing
[
json-ld11
],
this
URI
specifies
</del>
<ins class="diff-chg">directory
in
</ins>
the
<del class="diff-old">Thing
Description
context
file.
An
@context
of
type
array
indicates
TD
Context
Extensions
(see
7.
TD
Context
Extensions
for
details).
Example
5
{  
    : &lt;span class=
"hljs-string"&gt;"https://www.w3.org/2022/wot/td/v1.1",
    ...
}
All
name-value
pairs
</del>
<ins class="diff-chg">body
</ins>
of
an
<del class="diff-old">instance
of
</del>
<ins class="diff-chg">HTTP
</ins>
<code>
<del class="diff-old">Thing
,
where
the
name
is
a
Vocabulary
Term
in
the
Signature
of
</del>
<ins class="diff-chg">POST
</ins></code><ins class="diff-chg">
request
at
</ins>
<code>
<del class="diff-old">Thing
,
MUST
</del>
<ins class="diff-chg">/things
</ins></code><ins class="diff-chg">
endpoint.
</ins></span><span class="rfc2119-assertion" id= "tdd-things-create-anonymous-contenttype"><ins class="diff-chg">
The
request
</ins><em class= "rfc2119"><ins class="diff-chg">
SHOULD
</ins>
</em>
<del class="diff-old">be
serialized
as
</del>
<ins class="diff-chg">contain
</ins><code><ins class="diff-chg">
application/td+json
</ins></code><ins class="diff-chg">
Content-Type
header
for
</ins>
JSON
<del class="diff-old">members
</del>
<ins class="diff-chg">serialization
</ins>
of
<del class="diff-old">the
root
object.
</del>
<ins class="diff-chg">TD.
</ins>
</span>
<del class="diff-old">A
</del>
<ins class="diff-chg">The
</ins>
TD
<del class="diff-old">snippet
for
a
serialized
root
</del>
object
<del class="diff-old">including
all
mandatory
and
optional
members
</del>
is
<del class="diff-old">given
below:
</del>
<ins class="diff-chg">validated
in
accordance
with
</ins><a href= "#exploration-directory-api-things-validation" data-matched-text= "[[[#exploration-directory-api-things-validation]]]" class= "sec-ref">
<del class="diff-old">Example
6
</del>
<bdi class="secno">
<ins class="diff-chg">7.3.2.1.6
</ins>
</bdi>
<del class="diff-old">:
Sample
of
Thing
serializations
{
    : &lt;span class=
"hljs-string"&gt;"https://www.w3.org/2022/wot/td/v1.1",
    : &lt;span class=
"hljs-string"&gt;"Thing",
    : &lt;span class=
"hljs-string"&gt;"urn:dev:ops:32473-Thing-1234",
    : &lt;span class=
"hljs-string"&gt;"MyThing",
    : {...},
    : &lt;span class=
"hljs-string"&gt;"Human readable information.",
    : {...},
    : &lt;span class=
"hljs-string"&gt;"mailto:support@example.com",
    : {...},
    : &lt;span class=
"hljs-string"&gt;"2018-11-14T19:10:23.824Z",
    : &lt;span class=
"hljs-string"&gt;"2019-06-01T09:12:43.124Z",
    : {...},
    : ...,
    : &lt;span class=
"hljs-string"&gt;"https://servient.example.com/",
    : {...},
    : {...},
    : {...},
    : [...],
    : [...]
}
All
values
assigned
to
version
,
securityDefinitions
,
properties
,
actions
,
and
events
in
an
instance
of
</del>
<ins class="diff-chg">Validation
</ins></a>.<span class="rfc2119-assertion" id= "tdd-things-create-anonymous-td-resp"><ins class="diff-chg">
Upon
successful
processing,
</ins>
the
<del class="diff-old">Class
Thing
</del>
<ins class="diff-chg">server
</ins><em class="rfc2119">
MUST
</em>
<del class="diff-old">be
serialized
as
JSON
objects.
All
values
assigned
to
links
,
</del>
<ins class="diff-chg">respond
with
201
(Created)
status
</ins>
and
<del class="diff-old">forms
in
an
instance
</del>
<ins class="diff-chg">a
Location
header
containing
a
system-generated
identifier
for
the
TD.
</ins></span><ins class="diff-chg">
The
scheme
</ins>
of
the
<del class="diff-old">Class
Thing
MUST
be
serialized
as
JSON
arrays
containing
JSON
objects
as
defined
</del>
<ins class="diff-chg">system-generated
ID
is
described
</ins>
in
<a href="#exploration-directory-anonymous-td" data-matched-text="[[[#exploration-directory-anonymous-td]]]" class="sec-ref">
<del class="diff-old">6.3.8
</del>
<bdi class="secno">
<ins class="diff-chg">7.3.1.3
</ins>
</bdi>
<ins class="diff-new">Anonymous
TD
Identifiers
</ins></a>.<p><ins class="diff-new">
The
create
operation
for
</ins><a href= "#dfn-wot-anonymous-thing-description" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-wot-anonymous-thing-description-5"><ins class="diff-new">
Anonymous
TDs
</ins></a><ins class="diff-new">
is
specified
as
</ins>
<code>
<del class="diff-old">links
</del>
<ins class="diff-chg">createAnonymousThing
</ins>
</code>
<del class="diff-old">and
</del>
<ins class="diff-chg">action
in
</ins><a href="#directory-api-spec" data-matched-text= "[[[#directory-api-spec]]]" class="sec-ref">
<bdi class= "secno">
<del class="diff-old">6.3.9
</del>
<ins class="diff-chg">7.3.2.4
</ins>
</bdi>
<del class="diff-old">forms
,&nbsp;respectively.
</del>
<ins class="diff-chg">API
Specification
(Thing
Model)
</ins></a>.
</p>
</li>
</ul>
<p>
<ins class="diff-new">A
server
that
supports
expirable
TDs
will
realize
such
functionality
as
described
in
</ins><a href= "#exploration-directory-registration-expiry" data-matched-text= "[[[#exploration-directory-registration-expiry]]]" class= "sec-ref">
<del class="diff-old">The
value
assigned
to
</del>
<bdi class="secno">
<ins class="diff-chg">7.3.1.2
</ins></bdi><ins class="diff-chg">
Registration
Expiry
</ins></a>.<ins class="diff-chg">
In
particular,
if
</ins>
<code>
<del class="diff-old">security
</del>
<ins class="diff-chg">ttl
</ins>
</code>
<del class="diff-old">in
an
instance
of
Class
</del>
<ins class="diff-chg">(relative
expiry)
is
given
during
the
creation,
such
servers
will
calculate
and
store
the
</ins>
<code>
<del class="diff-old">Thing
</del>
<ins class="diff-chg">expires
</ins>
</code>
<del class="diff-old">MUST
&nbsp;be
serialized
as
JSON&nbsp;string
or
as
JSON
array
whose
elements
are
JSON
strings.
</del>
<ins class="diff-chg">value.
</ins>
</p>
</section>
<section id="exploration-directory-api-things-retrieval" class= "normative">
<div class="header-wrapper">
<h6 id="x7-3-2-1-2-retrieval">
<del class="diff-old">6.3.2
</del>
<bdi class="secno">
<ins class="diff-chg">7.3.2.1.2
</ins>
</bdi>
<del class="diff-old">Human-Readable
Metadata
</del>
<ins class="diff-chg">Retrieval
</ins></h6><a class="self-link" href= "#exploration-directory-api-things-retrieval" aria-label= "Permalink for Section 7.3.2.1.2">
</a>
</div>
<p>
<del class="diff-old">JSON
members
named
</del>
<span class="rfc2119-assertion" id="tdd-things-retrieve">
<ins class="diff-chg">The
retrieval
of
an
existing
TD
</ins><em class="rfc2119"><ins class="diff-chg">
MUST
</ins></em><ins class="diff-chg">
be
done
using
an
HTTP
</ins>
<code>
<del class="diff-old">title
</del>
<ins class="diff-chg">GET
</ins>
</code>
<del class="diff-old">and
</del>
<ins class="diff-chg">request
at
</ins>
<code>
<del class="diff-old">description
</del>
<ins class="diff-chg">/things/{id}
</ins>
</code>
<del class="diff-old">are
used
within
a
TD
document
to
provide
human-readable
metadata.
They
can
be
used
as
comments
for
developers
inspecting
a
TD
document
or
as
display
texts
for
user
interface.
As
defined
in
5.3.1.1
</del>
<ins class="diff-chg">endpoint,
where
</ins>
<code>
<del class="diff-old">Thing
</del>
<ins class="diff-chg">id
</ins>
</code>
<del class="diff-old">,
the
base
text
direction
used
to
display
human-readable
metadata
can
either
be
estimated
using
heuristics
such
as
</del>
<ins class="diff-chg">is
</ins>
the
<del class="diff-old">first-strong
rule
or
inferred
from
language
information.
In
</del>
<ins class="diff-chg">unique
</ins>
TD
<del class="diff-old">documents
</del>
<ins class="diff-chg">identifier.
</ins></span><span class="rfc2119-assertion" id="tdd-things-retrieve-resp"><ins class="diff-chg">
A
successful
response
</ins><em class="rfc2119"><ins class="diff-chg">
MUST
</ins></em><ins class="diff-chg">
have
200
(OK)
status
and
</ins>
the
<del class="diff-old">default
language
is
defined
by
a
value
assigned
to
@language
</del>
<ins class="diff-chg">requested
TD
</ins>
in
the
<del class="diff-old">@context
,
and
this,
along
</del>
<ins class="diff-chg">body.
</ins></span><span class= "rfc2119-assertion" id="tdd-things-retrieve-resp-content-type"><ins class="diff-chg">
A
successful
response
</ins>
with
<del class="diff-old">a
script
subtag
if
necessary,
can
be
used
to
determine
a
base
text
direction.
However,
when
interpreting
human-readable
text,
each
human-readable
string
value
</del>
<ins class="diff-chg">JSON
serialization
</ins><em class= "rfc2119">
MUST
</em>
<del class="diff-old">be
processed
independently.
In
other
words,
a
TD
Processor
cannot
carry
forward
changes
in
direction
from
one
string
to
another,
</del>
<ins class="diff-chg">contain
</ins><code><ins class="diff-chg">
application/json
</ins></code>
or
<del class="diff-old">infer
direction
for
one
string
from
another
one
elsewhere
</del>
<ins class="diff-chg">more
specifically,
</ins><code><ins class="diff-chg">
application/td+json
</ins></code>
in
the
<del class="diff-old">TD.
Note
</del>
<ins class="diff-chg">Content-Type
header.
</ins>
</span>
<del class="diff-old">Strings
on
the
Web
[
STRING-META
]
suggests
both
strong-first
and
language-based
inferencing
as
means
to
determine
the
base
text
direction.
Given
</del>
<ins class="diff-chg">Note
</ins>
that
the
<del class="diff-old">Thing
Description
format
</del>
<ins class="diff-chg">default
serialization
</ins>
is
<del class="diff-old">based
on
JSON-LD
1.1
[
json-ld11
],
which
currently
lacks
explicit
direction
metadata,
these
approaches
are
currently
considered
appropriate
at
the
time
of
this
publication.
However,
if
</del>
<ins class="diff-chg">JSON
with
</ins>
JSON-LD
<del class="diff-old">1.1
adopts
support
for
explicit
base
direction
metadata
as
recommended
by
[
STRING-META
],
the
Thing
Description
format
should
</del>
<ins class="diff-chg">syntax,
and
alternative
serializations
can
</ins>
be
<del class="diff-old">updated
to
take
advantage
of
that
feature.
</del>
<ins class="diff-chg">negotiated;
see
</ins><a href="#exploration-directory-api-things" data-matched-text= "[[[#exploration-directory-api-things]]]" class= "sec-ref"><bdi class="secno"><ins class="diff-chg">
7.3.2.1
</ins></bdi><ins class="diff-chg">
Things
API
</ins></a>.
</p>
<p>
<del class="diff-old">A
TD
snippet
using
title
and
description
is
shown
below.
</del>
The
<del class="diff-old">default
language
</del>
<ins class="diff-chg">retrieve
operation
</ins>
is
<del class="diff-old">set
to
</del>
<ins class="diff-chg">specified
as
</ins>
<code>
<del class="diff-old">en
</del>
<ins class="diff-chg">retrieveThing
</ins>
</code>
<del class="diff-old">through
the
definition
</del>
<ins class="diff-chg">action
in
</ins><a href="#directory-api-spec" data-matched-text="[[[#directory-api-spec]]]" class= "sec-ref"><bdi class="secno"><ins class="diff-chg">
7.3.2.4
</ins></bdi><ins class="diff-chg">
API
Specification
(Thing
Model)
</ins></a>.</p><p><ins class="diff-chg">
The
following
is
an
example
</ins>
of
<del class="diff-old">the
@language
member
within
</del>
a
<del class="diff-old">JSON
object
in
the
@context
array.
</del>
<ins class="diff-chg">retrieved
TD:
</ins>
</p>
<aside class="example" id="example-enriched-td">
<div class="marker">
<a class="self-link" href= "#example-enriched-td">
Example
<bdi>
<del class="diff-old">7
</del>
<ins class="diff-chg">3
</ins>
</bdi>
</a>
<span class= "example-title">:
<ins class="diff-new">Example
Enriched
TD
</ins></span>
</div>
<del class="diff-old">{
    : [
</del>
<pre aria-busy="false"><code class="hljs json">{
    <span class="hljs-attr">"@context"</span>: [
        <span class="hljs-string">"http://www.w3.org/ns/td"</span>,
        <span class=
<del class="diff-old">"hljs-string"&gt;"https://www.w3.org/2022/wot/td/v1.1",
        { &lt;span class=
"hljs-string"&gt;"@language" : &lt;span class=
"hljs-string"&gt;"en" }
</del>
<ins class="diff-chg">"hljs-string">"https://w3c.github.io/wot-discovery/context/discovery-context.jsonld"</span>
</ins>
    ],
<del class="diff-old">    : &lt;span class=
"hljs-string"&gt;"MyThing",
    : &lt;span class=
"hljs-string"&gt;"Human readable information.",
    ...
    : {
        : {
            : &lt;span class=
"hljs-string"&gt;"On/Off",
            : &lt;span class=
"hljs-string"&gt;"boolean",
            : [...]
        },
        : {
            : &lt;span class=
"hljs-string"&gt;"Status",
            : &lt;span class=
"hljs-string"&gt;"object",
            ...
            : [...]
</del>
    <span class="hljs-attr">"id"</span>: <span class=
<ins class="diff-chg">"hljs-string">"urn:example:simple-td"</span>,
</ins>    <span class="hljs-attr">"security"</span>: <span class=<ins class="diff-chg">
"hljs-string">"basic_sc"</span>,
</ins>    <span class="hljs-attr">"securityDefinitions"</span>: {        <span class="hljs-attr">"basic_sc"</span>: {            <span class="hljs-attr">"scheme"</span>: <span class=<ins class="diff-chg">
"hljs-string">"basic"</span>
</ins>
        }
    },
<del class="diff-old">    ...
</del>
    <span class="hljs-attr">"registration"</span>: {
        <span class="hljs-attr">"created"</span>: <span class=
<ins class="diff-chg">"hljs-string">"2021-01-19T17:02:00Z"</span>,
</ins>        <span class="hljs-attr">"modified"</span>: <span class=<ins class="diff-chg">
"hljs-string">"2021-01-19T17:02:00Z"</span>
    },
</ins>    <span class="hljs-attr">"title"</span>: <span class=<ins class="diff-chg">
"hljs-string">"Simple TD"</span>
</ins>
}
</code>
</pre>
<div class="issue" id="issue-container-number-148-2">
<div role="heading" class="issue-title marker" id="h-issue-3" aria-level="7">
<a href= "https://github.com/w3c/wot-discovery/issues/148">
<span class= "issue-number">
<ins class="diff-new">Issue
148
</ins></span></a><span class="issue-label">:<ins class="diff-new">
Discovery
context
and
namespace
under
w3.org/ns
</ins></span>
</div>
<div class="">
The
<del class="diff-old">JSON
members
named
titles
and
descriptions
</del>
<ins class="diff-chg">context
URIs
</ins>
are
<del class="diff-old">used
within
the
TD
document
</del>
<ins class="diff-chg">tentative
and
subject
</ins>
to
<del class="diff-old">provide
human-readable
metadata
in
multiple
languages
within
a
single
</del>
<ins class="diff-chg">change.
</ins></div></div></aside><p><ins class="diff-chg">
This
is
an
</ins><a href="#dfn-wot-enriched-thing-description" class= "internalDFN" data-link-type="dfn" id= "ref-for-dfn-wot-enriched-thing-description-4"><ins class="diff-chg">
Enriched
</ins>
TD
<del class="diff-old">document.
All
name-value
pairs
of
a
MultiLanguage
Map
</del>
</a>
<del class="diff-old">MUST
&nbsp;be
serialized
as
members
of
a
JSON
object,
where
</del>
<ins class="diff-chg">which
includes
</ins>
the
<del class="diff-old">name
is
a
well-formed
language
tag
</del>
<ins class="diff-chg">registration
information
such
</ins>
as
<del class="diff-old">defined
by
[
BCP47
]
and
</del>
the
<del class="diff-old">value
is
a
human-readable
string
in
the
language
indicated
by
</del>
<ins class="diff-chg">creation
and
modification
time
of
</ins>
the
<del class="diff-old">tag.
See
5.3.1.7
MultiLanguage
for
details.
All
MultiLanguage
object
within
a
</del>
TD
<del class="diff-old">document
SHOULD
contain
</del>
<ins class="diff-chg">within
</ins>
the
<del class="diff-old">same
set
of
language
members.
</del>
<ins class="diff-chg">directory.
</ins>
</p>
<p>
<del class="diff-old">A
</del>
<ins class="diff-chg">The
example
below
shows
a
retrieved
</ins><a href= "#dfn-wot-anonymous-thing-description" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-wot-anonymous-thing-description-6"><ins class="diff-chg">
Anonymous
</ins>
TD
<del class="diff-old">snippet
using
titles
</del>
</a>
<ins class="diff-chg">that
is
in
</ins><a href="#dfn-wot-enriched-thing-description" class= "internalDFN" data-link-type="dfn" id= "ref-for-dfn-wot-enriched-thing-description-5"><ins class="diff-chg">
Enriched
TD
</ins></a><ins class="diff-chg">
form
</ins>
and
<ins class="diff-new">has
local
identifier
</ins>
<code>
<del class="diff-old">descriptions
at
different
levels
is
given
below:
</del>
<ins class="diff-chg">urn:uuid:48951ff3-4019-4e67-b217-dbbf011873dc
</ins></code>.
</p>
<aside class="example" id="example-anonymous-enriched-td">
<div class="marker">
<a class="self-link" href= "#example-anonymous-enriched-td">
Example
<bdi>
<del class="diff-old">8
</del>
<ins class="diff-chg">4
</ins>
</bdi>
</a>
<span class="example-title">:
<ins class="diff-new">Example
Enriched
Anonymous
TD
</ins></span>
</div>
<del class="diff-old">{
    : &lt;span class=
"hljs-string"&gt;"https://www.w3.org/2022/wot/td/v1.1",
    : &lt;span class=
"hljs-string"&gt;"MyThing",
    : {
        :&lt;span class=
"hljs-string"&gt;"MyThing",
        : &lt;span class=
"hljs-string"&gt;"MeinDing",
        : &lt;span class=
"hljs-string"&gt;"私の物",
        : &lt;span class=
"hljs-string"&gt;"我的东西", 
        : &lt;span class=
"hljs-string"&gt;"我的東西"
    },
    : {
        :&lt;span class=
"hljs-string"&gt;"Human readable information.",
        : &lt;span class=
"hljs-string"&gt;"Menschenlesbare Informationen.",
        : &lt;span class=
"hljs-string"&gt;"人間が読むことができる情報",
        : &lt;span class=
"hljs-string"&gt;"人们可阅读的信息", 
        : &lt;span class=
"hljs-string"&gt;"人們可閱讀的資訊"
    },
    ...
    : {
        : {
            : {
                : &lt;span class=
"hljs-string"&gt;"On/Off",
                : &lt;span class=
"hljs-string"&gt;"An/Aus",
                : &lt;span class=
"hljs-string"&gt;"オンオフ",
                &lt;span class=
"hljs-string"&gt;"zh-Hans": &lt;span class=
"hljs-string"&gt;"开关",
                &lt;span class=
"hljs-string"&gt;"zh-Hant": &lt;span class=
"hljs-string"&gt;"開關" },
            : &lt;span class=
"hljs-string"&gt;"boolean",
            : [...]
        },
        : {
            : {
                : &lt;span class=
"hljs-string"&gt;"Status",
                : &lt;span class=
"hljs-string"&gt;"Zustand",
                : &lt;span class=
"hljs-string"&gt;"状態",
                &lt;span class=
"hljs-string"&gt;"zh-Hans": &lt;span class=
"hljs-string"&gt;"状态",
                &lt;span class=
"hljs-string"&gt;"zh-Hant": &lt;span class=
"hljs-string"&gt;"狀態" },
            : &lt;span class=
"hljs-string"&gt;"object",
            ...
            : [...]
</del>
<pre aria-busy="false"><code class="hljs json">{
    <span class="hljs-attr">"@context"</span>: [
        <span class="hljs-string">"http://www.w3.org/ns/td"</span>,
        <span class=
<ins class="diff-chg">"hljs-string">"https://w3c.github.io/wot-discovery/context/discovery-context.jsonld"</span>
    ],
</ins>    <span class="hljs-attr">"id"</span>: <span class=<ins class="diff-chg">
"hljs-string">"urn:uuid:48951ff3-4019-4e67-b217-dbbf011873dc"</span>,
</ins>    <span class="hljs-attr">"security"</span>: <span class=<ins class="diff-chg">
"hljs-string">"basic_sc"</span>,
</ins>    <span class="hljs-attr">"securityDefinitions"</span>: {        <span class="hljs-attr">"basic_sc"</span>: {            <span class="hljs-attr">"scheme"</span>: <span class=<ins class="diff-chg">
"hljs-string">"basic"</span>
</ins>
        }
    },
<del class="diff-old">    ...
</del>
    <span class="hljs-attr">"registration"</span>: {
        <span class="hljs-attr">"created"</span>: <span class=
<ins class="diff-chg">"hljs-string">"2021-01-19T17:02:00Z"</span>,
</ins>        <span class="hljs-attr">"modified"</span>: <span class=<ins class="diff-chg">
"hljs-string">"2021-01-19T17:02:00Z"</span>
    },
</ins>    <span class="hljs-attr">"title"</span>: <span class=<ins class="diff-chg">
"hljs-string">"Anonymous TD"</span>
</ins>
}
</code>
</pre>
<div class="issue" id="issue-container-number-148-3">
<div role="heading" class="issue-title marker" id="h-issue-4" aria-level="7">
<del class="diff-old">TD
instances
may
also
combine
the
use
of
title
and
description
with
titles
and
descriptions
.
When
title
and
titles
or
description
and
descriptions
are
present
within
the
same
JSON
object,
the
values
of
title
and
description
MAY
be
seen
as
the
default
text.
</del>
<a href= "https://github.com/w3c/wot-discovery/issues/148">
<span class= "issue-number">
<ins class="diff-chg">Issue
148
</ins>
</span>
<del class="diff-old">When
title
and
titles
or
description
</del>
</a>
<span class="issue-label">:
<ins class="diff-chg">Discovery
context
</ins>
and
<del class="diff-old">descriptions
</del>
<ins class="diff-chg">namespace
under
w3.org/ns
</ins></span></div><div class=""><ins class="diff-chg">
The
context
URIs
</ins>
are
<del class="diff-old">present
in
</del>
<ins class="diff-chg">tentative
and
subject
to
change.
</ins></div></div></aside><p><ins class="diff-chg">
The
following
is
an
example
of
</ins>
a
<ins class="diff-new">retrieved
</ins>
TD
<del class="diff-old">document,
each
title
and
description
member
SHOULD
have
</del>
<ins class="diff-chg">that
was
registered
with
</ins>
a
<del class="diff-old">corresponding
titles
and
descriptions
member,
respectively.
The
language
</del>
<ins class="diff-chg">relative
expiry
time
</ins>
of
<ins class="diff-new">3600
seconds
(one
hour).
The
server
has
calculated
</ins>
the
<del class="diff-old">default
text
is
indicated
by
the
default
language,
which
is
usually
set
by
the
creator
of
</del>
<ins class="diff-chg">absolute
expiry
time
as
one
hour
after
</ins>
the
<del class="diff-old">Thing
Description
instance.
</del>
<ins class="diff-chg">modification
time.
</ins>
</p>
<aside class="example" id="example-expirable-enriched-td">
<div class="marker">
<a class="self-link" href= "#example-expirable-enriched-td">
Example
<bdi>
<del class="diff-old">9
</del>
<ins class="diff-chg">5
</ins>
</bdi>
</a>
<span class="example-title">:
<ins class="diff-new">Example
Expirable
Enriched
TD
</ins></span>
</div>
<del class="diff-old">{
    : [
</del>
<pre aria-busy="false"><code class="hljs json">{
    <span class="hljs-attr">"@context"</span>: [
        <span class="hljs-string">"http://www.w3.org/ns/td"</span>,
        <span class=
<del class="diff-old">"hljs-string"&gt;"https://www.w3.org/2022/wot/td/v1.1",
        { &lt;span class=
"hljs-string"&gt;"@language" : &lt;span class=
"hljs-string"&gt;"de" }
</del>
<ins class="diff-chg">"hljs-string">"https://w3c.github.io/wot-discovery/context/discovery-context.jsonld"</span>
</ins>
    ],
<del class="diff-old">    : &lt;span class=
"hljs-string"&gt;"MeinDing",
    : {
        : &lt;span class=
"hljs-string"&gt;"MyThing",
        : &lt;span class=
"hljs-string"&gt;"MeinDing",
        : &lt;span class=
"hljs-string"&gt;"私の物",
        : &lt;span class=
"hljs-string"&gt;"我的东西", 
        : &lt;span class=
"hljs-string"&gt;"我的東西"
    },
    : &lt;span class=
"hljs-string"&gt;"Menschenlesbare Informationen.",
    : {
        : &lt;span class=
"hljs-string"&gt;"Human readable information.",
        : &lt;span class=
"hljs-string"&gt;"Menschenlesbare Informationen.",
        : &lt;span class=
"hljs-string"&gt;"人間が読むことができる情報",
        : &lt;span class=
"hljs-string"&gt;"人们可阅读的信息", 
        : &lt;span class=
"hljs-string"&gt;"人們可閱讀的資訊"
    },
    ...
    : {
        : {
            : &lt;span class=
"hljs-string"&gt;"An/Aus",
            : {
                : &lt;span class=
"hljs-string"&gt;"On/Off",
                : &lt;span class=
"hljs-string"&gt;"An/Aus",
                : &lt;span class=
"hljs-string"&gt;"オンオフ",
                &lt;span class=
"hljs-string"&gt;"zh-Hans": &lt;span class=
"hljs-string"&gt;"开关",
                &lt;span class=
"hljs-string"&gt;"zh-Hant": &lt;span class=
"hljs-string"&gt;"開關" },
            : &lt;span class=
"hljs-string"&gt;"boolean",
            : [...]
        },
        : {
            : &lt;span class=
"hljs-string"&gt;"Zustand",
            : {
                : &lt;span class=
"hljs-string"&gt;"Status",
                : &lt;span class=
"hljs-string"&gt;"Zustand",
                : &lt;span class=
"hljs-string"&gt;"状態",
                &lt;span class=
"hljs-string"&gt;"zh-Hans": &lt;span class=
"hljs-string"&gt;"状态",
                &lt;span class=
"hljs-string"&gt;"zh-Hant": &lt;span class=
"hljs-string"&gt;"狀態" },
            : &lt;span class=
"hljs-string"&gt;"object",
            ...
            : [...]
</del>
    <span class="hljs-attr">"id"</span>: <span class=
<ins class="diff-chg">"hljs-string">"urn:example:expirable-td"</span>,
</ins>    <span class="hljs-attr">"security"</span>: <span class=<ins class="diff-chg">
"hljs-string">"basic_sc"</span>,
</ins>    <span class="hljs-attr">"securityDefinitions"</span>: {        <span class="hljs-attr">"basic_sc"</span>: {            <span class="hljs-attr">"scheme"</span>: <span class=<ins class="diff-chg">
"hljs-string">"basic"</span>
</ins>
        }
    },
<del class="diff-old">    ...
</del>
    <span class="hljs-attr">"registration"</span>: {
        <span class="hljs-attr">"created"</span>: <span class=
<ins class="diff-chg">"hljs-string">"2021-05-10T16:00:00Z"</span>,
</ins>        <span class="hljs-attr">"modified"</span>: <span class=<ins class="diff-chg">
"hljs-string">"2021-05-10T17:00:00Z"</span>,
</ins>        <span class="hljs-attr">"expires"</span>: <span class=<ins class="diff-chg">
"hljs-string">"2021-05-10T18:00:00Z"</span>,
</ins>        <span class="hljs-attr">"ttl"</span>: <span class=<ins class="diff-chg">
"hljs-number">3600</span>,
</ins>        <span class="hljs-attr">"retrieved"</span>: <span class=<ins class="diff-chg">
"hljs-string">"2021-05-10T17:35:00Z"</span>
    },
</ins>    <span class="hljs-attr">"title"</span>: <span class=<ins class="diff-chg">
"hljs-string">"Expirable TD"</span>
</ins>
}
</code>
</pre>
<div class="issue" id="issue-container-number-148-4">
<div role="heading" class="issue-title marker" id="h-issue-5" aria-level="7">
<a href= "https://github.com/w3c/wot-discovery/issues/148">
<span class= "issue-number">
<ins class="diff-new">Issue
148
</ins></span></a><span class="issue-label">:<ins class="diff-new">
Discovery
context
and
namespace
under
w3.org/ns
</ins></span>
</div>
<del class="diff-old">Another
possibility
to
set
the
default
language
is
through
a
language
negotiation
mechanism,
such
as
the
Accept-Language
header
field
of
HTTP.
In
cases
where
the
default
language
has
been
negotiated,
an
@language
member
MUST
be
present
to
indicate
the
result
of
the
negotiation
</del>
<div class="">
<ins class="diff-chg">The
context
URIs
are
tentative
</ins>
and
<ins class="diff-new">subject
to
change.
</ins></div></div></aside><p><ins class="diff-new">
For
</ins>
the
<del class="diff-old">corresponding
default
language
</del>
<ins class="diff-chg">sake
</ins>
of
<ins class="diff-new">readability,
</ins>
the
<del class="diff-old">returned
content.
When
the
default
language
has
been
negotiated
successfully,
TD
documents
SHOULD
include
the
appropriate
matching
</del>
<ins class="diff-chg">time
</ins>
values
<del class="diff-old">for
the
members
title
and
description
in
preference
to
MultiLanguage
objects
</del>
in
<del class="diff-old">titles
and
descriptions
members.
Note
however
that
Things
MAY
choose
to
not
support
such
dynamically-generated
TDs
nor
</del>
<ins class="diff-chg">this
example
are
set
</ins>
to
<del class="diff-old">support
language
negotiation
(e.g.,
because
of
resource
constraints).
</del>
<ins class="diff-chg">exact
numbers.
In
realistic
settings,
time
values
may
include
fractions.
</ins>
</p>
</section>
<section id="exploration-directory-api-things-update" class= "normative">
<div class="header-wrapper">
<h6 id="x7-3-2-1-3-update">
<bdi class="secno">
<del class="diff-old">6.3.3
</del>
<ins class="diff-chg">7.3.2.1.3
</ins>
</bdi>
<del class="diff-old">version
</del>
<ins class="diff-chg">Update
</ins></h6><a class="self-link" href= "#exploration-directory-api-things-update" aria-label= "Permalink for Section 7.3.2.1.3">
</a>
</div>
<p>
<ins class="diff-new">The
update
operations
are
to
replace
or
partially
modify
an
existing
TD.
</ins></p><p><ins class="diff-new">
The
update
operations
are
described
below:
</ins></p><ul><li>
<del class="diff-old">All
name-value
pairs
of
</del>
<span class="rfc2119-assertion" id="tdd-things-update">
<ins class="diff-chg">A
modified
TD
</ins><em class="rfc2119"><ins class="diff-chg">
MUST
</ins></em><ins class="diff-chg">
replace
</ins>
an
<del class="diff-old">instance
of
</del>
<ins class="diff-chg">existing
one
when
submitted
using
an
HTTP
</ins>
<code>
<del class="diff-old">VersionInfo
,
</del>
<ins class="diff-chg">PUT
</ins></code><ins class="diff-chg">
request
at
</ins><code><ins class="diff-chg">
/things/{id}
</ins></code><ins class="diff-chg">
endpoint,
</ins>
where
<del class="diff-old">the
name
</del>
<code>
<ins class="diff-chg">id
</ins></code>
is
<del class="diff-old">a
Vocabulary
Term
included
in
</del>
the
<del class="diff-old">Signature
</del>
<ins class="diff-chg">identifier
</ins>
of
<del class="diff-old">VersionInfo
,
</del>
<ins class="diff-chg">the
existing
TD.
</ins></span><span class= "rfc2119-assertion" id="tdd-things-update-contenttype"><ins class="diff-chg">
The
request
</ins>
<em class="rfc2119">
<del class="diff-old">MUST
</del>
<ins class="diff-chg">SHOULD
</ins>
</em>
<del class="diff-old">be
serialized
as
</del>
<ins class="diff-chg">contain
</ins><code><ins class="diff-chg">
application/td+json
</ins></code><ins class="diff-chg">
Content-Type
header
for
</ins>
JSON
<del class="diff-old">members
with
the
Vocabulary
Term
as
name.
</del>
<ins class="diff-chg">serialization
of
TD.
</ins>
</span>
<del class="diff-old">A
</del>
<ins class="diff-chg">The
</ins>
TD
<del class="diff-old">snippet
of
a
version
information
</del>
object
is
<del class="diff-old">given
below:
</del>
<ins class="diff-chg">validated
in
accordance
with
</ins><a href= "#exploration-directory-api-things-validation" data-matched-text= "[[[#exploration-directory-api-things-validation]]]" class= "sec-ref">
<del class="diff-old">Example
10
</del>
<bdi class="secno">
<ins class="diff-chg">7.3.2.1.6
</ins>
</bdi>
<del class="diff-old">{
    ...
    "version": { &lt;span class=
"hljs-string"&gt;"instance": &lt;span class=
"hljs-string"&gt;"1.2.1" },
    ...
}
</del>
<ins class="diff-chg">Validation
</ins></a>.<span class="rfc2119-assertion" id="tdd-things-update-resp"><ins class="diff-chg">
Upon
success,
the
server
</ins><em class="rfc2119"><ins class="diff-chg">
MUST
</ins></em><ins class="diff-chg">
respond
with
204
(No
Content)
status.
</ins></span>
<p>
<del class="diff-old">The
version
member
</del>
<ins class="diff-chg">This
operation
</ins>
is
<del class="diff-old">intended
</del>
<ins class="diff-chg">specified
</ins>
as
<del class="diff-old">container
for
additional
application-
and/or
device-specific
version
information
based
on
TD
Context
Extensions
.
See
</del>
<code>
<ins class="diff-chg">updateThing
</ins></code><ins class="diff-chg">
property
in
</ins><a href="#directory-api-spec" data-matched-text= "[[[#directory-api-spec]]]" class="sec-ref">
<del class="diff-old">7.1
</del>
<bdi class= "secno">
<ins class="diff-chg">7.3.2.4
</ins>
</bdi>
<del class="diff-old">Semantic
Annotations
for
details.
</del>
<ins class="diff-chg">API
Specification
(Thing
Model)
</ins></a>.
</p>
<p>
<ins class="diff-chg">A
server
that
supports
expirable
TDs
will
realize
such
functionality
as
described
in
</ins><a href= "#exploration-directory-registration-expiry" data-matched-text= "[[[#exploration-directory-registration-expiry]]]" class= "sec-ref">
<del class="diff-old">6.3.4
</del>
<bdi class="secno">
<ins class="diff-chg">7.3.1.2
</ins>
</bdi>
<ins class="diff-new">Registration
Expiry
</ins></a>.<ins class="diff-new">
If
</ins>
<code>
<del class="diff-old">securityDefinitions
</del>
<ins class="diff-chg">ttl
</ins>
</code>
<ins class="diff-new">(relative
expiry)
is
set
during
the
update
operation,
the
server
will
calculate
</ins>
and
<ins class="diff-new">set
the
</ins>
<code>
<del class="diff-old">security
</del>
<ins class="diff-chg">expires
</ins>
</code>
<ins class="diff-chg">(absolute
expiry)
value.
</ins></p>
<p>
<del class="diff-old">In
a
Thing
instance,
</del>
<ins class="diff-chg">Note:
If
</ins>
the
<del class="diff-old">value
assigned
</del>
<ins class="diff-chg">target
location
does
not
correspond
</ins>
to
<del class="diff-old">securityDefinitions
is
a
Map
of
instances
of
SecurityScheme
.
All
name-value
pairs
of
a
Map
of
SecurityScheme
instances
MUST
&nbsp;be
serialized
as
members
of
the
JSON
object
that
results
from
serializing
the
Map
;
</del>
<ins class="diff-chg">an
existing
TD,
</ins>
the
<del class="diff-old">name
of
a
pair
MUST
&nbsp;be
serialized
</del>
<ins class="diff-chg">request
shall
instead
proceed
</ins>
as
a
<del class="diff-old">JSON
string
</del>
<ins class="diff-chg">Create
operation
</ins>
and
<ins class="diff-new">respond
</ins>
the
<del class="diff-old">value
of
the
pair,
</del>
<ins class="diff-chg">appropriate
status
code
(see
Create
section).
In
other
words,
</ins>
an
<del class="diff-old">instance
of
</del>
<ins class="diff-chg">HTTP
</ins>
<code>
<del class="diff-old">SecurityScheme
,
MUST
be
serialized
</del>
<ins class="diff-chg">PUT
</ins></code><ins class="diff-chg">
request
acts
</ins>
as
a
<del class="diff-old">JSON
object.
</del>
<ins class="diff-chg">create
or
update
operation.
</ins>
</p>
</li>
<li>
<del class="diff-old">All
name-value
pairs
of
an
instance
of
one
of
</del>
<span class="rfc2119-assertion" id= "tdd-things-update-partial">
<ins class="diff-chg">An
existing
TD
</ins><em class= "rfc2119"><ins class="diff-chg">
MUST
</ins></em><ins class="diff-chg">
be
partially
modified
when
</ins>
the
<del class="diff-old">Subclasses
of
</del>
<ins class="diff-chg">modified
parts
are
submitted
using
an
HTTP
</ins>
<code>
<del class="diff-old">SecurityScheme
,
</del>
<ins class="diff-chg">PATCH
</ins></code><ins class="diff-chg">
request
at
</ins><code><ins class="diff-chg">
/things/{id}
</ins></code><ins class="diff-chg">
endpoint,
</ins>
where
<del class="diff-old">the
name
</del>
<code>
<ins class="diff-chg">id
</ins></code>
is
<del class="diff-old">a
Vocabulary
Term
included
in
</del>
the
<del class="diff-old">Signature
</del>
<ins class="diff-chg">identifier
</ins>
of
<del class="diff-old">that
Subclass
or
in
</del>
the
<del class="diff-old">Signature
of
SecurityScheme
,
</del>
<ins class="diff-chg">existing
TD.
</ins></span><span class= "rfc2119-assertion" id="tdd-things-update-partial-mergepatch"><ins class="diff-chg">
The
partial
update
</ins>
<em class="rfc2119">
MUST
</em>
be
<del class="diff-old">serialized
as
members
of
</del>
<ins class="diff-chg">processed
using
</ins>
the
JSON
<del class="diff-old">object
that
results
from
serializing
the
SecurityScheme
Subclass
's
instance,
with
the
Vocabulary
Term
</del>
<ins class="diff-chg">merge
patch
format
described
in
[
</ins><cite><a class="bibref" data-link-type="biblio" href="#bib-rfc7396" title= "JSON Merge Patch"><ins class="diff-chg">
RFC7396
</ins>
</a>
<del class="diff-old">as
name.
</del>
<del class="diff-old">The
following
TD
snippet
shows
a
simple
security
configuration
specifying
basic
username/password
authentication
in
the
header.
</del>
</cite>
<ins class="diff-chg">].
</ins></span><span class= "rfc2119-assertion" id="tdd-things-update-partial-contenttype">
The
<del class="diff-old">value
given
for
</del>
<ins class="diff-chg">request
</ins><em class="rfc2119"><ins class="diff-chg">
MUST
</ins></em><ins class="diff-chg">
contain
</ins>
<code>
<del class="diff-old">in
</del>
<ins class="diff-chg">application/merge-patch+json
</ins>
</code>
<del class="diff-old">is
actually
the
Default
Value
(
</del>
<ins class="diff-chg">Content-Type
</ins>
header
<del class="diff-old">)
and
could
be
omitted.
A
named
security
configuration
must
be
given
in
the
securityDefinitions
map.
That
definition
must
be
activated
by
including
its
</del>
<ins class="diff-chg">for
</ins>
JSON
<del class="diff-old">name
in
the
security
member,
which
can
and
should
be
</del>
<ins class="diff-chg">serialization
</ins>
of
<del class="diff-old">type
string
when
only
one
definition
is
activated.
Example
11
...
: {
    : {
        : &lt;span class=
"hljs-string"&gt;"basic",
        : &lt;span class=
"hljs-string"&gt;"header"
    }
},
: &lt;span class=
"hljs-string"&gt;"basic_sc",
...
Security
configuration
in
</del>
the
<del class="diff-old">TD
is
mandatory.
At
least
one
security
definition
</del>
<ins class="diff-chg">merge
patch
document.
</ins></span><span class= "rfc2119-assertion" id="tdd-things-update-partial-partialtd"><ins class="diff-chg">
The
input
</ins>
<em class="rfc2119">
MUST
</em>
be
<del class="diff-old">activated
through
the
security
member
at
the
Thing
level
(i.e.,
</del>
in
<a href= "#dfn-wot-partial-thing-description" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-wot-partial-thing-description-1">
<ins class="diff-new">Partial
TD
</ins></a><ins class="diff-new">
form
and
conform
to
</ins>
the
<ins class="diff-new">original
</ins>
TD
<del class="diff-old">root
object).
</del>
<ins class="diff-chg">structure.
</ins>
</span>
<del class="diff-old">This
configuration
can
be
seen
as
the
default
security
mechanism
required
to
interact
with
</del>
<ins class="diff-chg">If
</ins>
the
<del class="diff-old">Thing
.
Security
definitions
MAY
also
be
activated
at
</del>
<ins class="diff-chg">input
contains
members
that
appear
in
</ins>
the
<del class="diff-old">form
level
by
including
</del>
<ins class="diff-chg">original
TD,
their
values
are
replaced.
If
</ins>
a
<del class="diff-old">security
</del>
member
<ins class="diff-new">does
not
appear
</ins>
in
<del class="diff-old">form
objects,
which
overrides
(i.e.,
completely
replace)
all
definitions
activated
at
the
Thing
level.
The
nosec
security
scheme
is
provided
for
</del>
the
<del class="diff-old">case
</del>
<ins class="diff-chg">original
TD,
</ins>
that
<del class="diff-old">no
security
is
needed.
The
minimal
security
configuration
for
a
Thing
</del>
<ins class="diff-chg">member
</ins>
is
<del class="diff-old">activation
of
</del>
<ins class="diff-chg">added.
If
</ins>
the
<ins class="diff-new">member
is
set
to
</ins>
<code>
<del class="diff-old">nosec
</del>
<ins class="diff-chg">null
</ins>
</code>
<del class="diff-old">security
scheme
at
the
Thing
level,
as
shown
</del>
<ins class="diff-chg">but
appear
</ins>
in
the
<del class="diff-old">following
example:
Example
12
{
    : &lt;span class=
"hljs-string"&gt;"https://www.w3.org/2022/wot/td/v1.1",
    : &lt;span class=
"hljs-string"&gt;"urn:dev:ops:32473-Thing-1234",
    : &lt;span class=
"hljs-string"&gt;"MyThing",
    : &lt;span class=
"hljs-string"&gt;"Human readable information.",
    : &lt;span class=
"hljs-string"&gt;"https://servient.example.com/contact",
    &lt;span class=
"hljs-string"&gt;"securityDefinitions": { &lt;span class=
"hljs-string"&gt;"nosec_sc": { &lt;span class=
"hljs-string"&gt;"scheme": &lt;span class=
"hljs-string"&gt;"nosec" }},
    : &lt;span class=
"hljs-string"&gt;"nosec_sc",
    : {...},
    : {...},
    : {...},
    : [...]
}
6.3.4.1
Multiple
Security
Definitions
To
give
a
more
complex
example,
suppose
we
have
a
Thing
where
all
Interaction
Affordances
require
basic
authentication
except
for
one,
for
which
no
authentication
</del>
<ins class="diff-chg">original
TD,
that
member
</ins>
is
<del class="diff-old">required.
For
</del>
<ins class="diff-chg">removed.
Members
with
object
values
are
processed
recursively.
After
applying
</ins>
the
<del class="diff-old">status
Property
and
</del>
<ins class="diff-chg">modifications,
</ins>
the
<del class="diff-old">toggle
Action,
basic
authentication
</del>
<ins class="diff-chg">TD
object
</ins>
is
<del class="diff-old">required
and
defined
at
the
Thing
level.
For
</del>
<ins class="diff-chg">validated
in
accordance
with
</ins><a href="#exploration-directory-api-things-validation" data-matched-text= "[[[#exploration-directory-api-things-validation]]]" class= "sec-ref"><bdi class="secno"><ins class="diff-chg">
7.3.2.1.6
</ins></bdi><ins class="diff-chg">
Validation
</ins></a>.<span class="rfc2119-assertion" id= "tdd-things-update-partial-resp"><ins class="diff-chg">
Upon
success,
</ins>
the
<ins class="diff-new">server
</ins><em class="rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
respond
with
a
204
(No
Content)
status.
</ins></span><p><ins class="diff-new">
This
operation
is
specified
as
</ins>
<code>
<del class="diff-old">overheating
</del>
<ins class="diff-chg">partiallyUpdateThing
</ins>
</code>
<del class="diff-old">Event,
however,
no
authentication
is
required,
and
hence
the
security
configuration
is
overridden
at
the
form
level.
</del>
<ins class="diff-chg">property
in
</ins><a href="#directory-api-spec" data-matched-text= "[[[#directory-api-spec]]]" class="sec-ref">
<del class="diff-old">Example
13
</del>
<bdi class= "secno">
<ins class="diff-chg">7.3.2.4
</ins>
</bdi>
<del class="diff-old">{
    ...
    "securityDefinitions": {
        : {&lt;span class=
"hljs-string"&gt;"scheme": &lt;span class=
"hljs-string"&gt;"basic"},
        "nosec_sc": {&lt;span class=
"hljs-string"&gt;"scheme": &lt;span class=
"hljs-string"&gt;"nosec"}
    },
    "security": ,
    ...
    : {
        : {
            ...
            : [{
                &lt;span class=
"hljs-string"&gt;"href": &lt;span class=
"hljs-string"&gt;"https://mylamp.example.com/status"
            }]
        }
    },
    "actions": {
        : {
            ...
            : [{
                &lt;span class=
"hljs-string"&gt;"href": &lt;span class=
"hljs-string"&gt;"https://mylamp.example.com/toggle"
            }]
        }
    },
    "events": {
        : {
            ...
            : [{
                &lt;span class=
"hljs-string"&gt;"href": &lt;span class=
"hljs-string"&gt;"https://mylamp.example.com/oh",
                &lt;span class=
"hljs-string"&gt;"security": &lt;span class=
"hljs-string"&gt;"nosec_sc"
            }]
        }
    }
}
</del>
<ins class="diff-chg">API
Specification
(Thing
Model)
</ins></a>.</p>
<p>
<ins class="diff-new">A
server
that
supports
expirable
</ins>
TDs
<del class="diff-old">can
specify
a
combination
of
security
schemes
</del>
<ins class="diff-chg">will
realize
such
functionality
</ins>
as
<del class="diff-old">well.
Below
is
a
TD
snippet
showing
digest
authentication
on
a
proxy
combined
with
bearer
token
authentication
on
the
Thing
</del>
<ins class="diff-chg">described
in
</ins><a href= "#exploration-directory-registration-expiry" data-matched-text= "[[[#exploration-directory-registration-expiry]]]" class= "sec-ref"><bdi class="secno"><ins class="diff-chg">
7.3.1.2
</ins></bdi><ins class="diff-chg">
Registration
Expiry
</ins>
</a>.
<del class="diff-old">In
</del>
<ins class="diff-chg">During
</ins>
the
<del class="diff-old">digest
scheme,
</del>
<ins class="diff-chg">partial
update
operation,
if
</ins>
the
<del class="diff-old">Default
Value
</del>
<ins class="diff-chg">resulting
</ins><a href= "#dfn-td" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-td-39"><ins class="diff-chg">
TD
</ins>
</a>
<del class="diff-old">of
in
(i.e.,
</del>
<ins class="diff-chg">has
</ins>
<code>
<del class="diff-old">header
</del>
<ins class="diff-chg">ttl
</ins>
</code>
<del class="diff-old">)
is
omitted,
but
still
applies.
Note
that
</del>
<ins class="diff-chg">(relative
expiry),
</ins>
the
<del class="diff-old">corresponding
private
security
configuration
such
as
username/password
</del>
<ins class="diff-chg">server
will
calculate
</ins>
and
<del class="diff-old">tokens
must
be
configured
in
the
Consumer
to
interact
successfully.
When
activating
multiple
security
definitions,
the
</del>
<ins class="diff-chg">set
a
new
</ins>
<code>
<del class="diff-old">security
</del>
<ins class="diff-chg">expires
</ins>
</code>
<del class="diff-old">member
becomes
an
array.
</del>
<ins class="diff-chg">(absolute
expiry)
value.
</ins>
</p>
<del class="diff-old">Example
14
...
: {
    : {
        : &lt;span class=
"hljs-string"&gt;"digest",
        : &lt;span class=
"hljs-string"&gt;"https://portal.example.com/"
    },
    : {
        : &lt;span class=
"hljs-string"&gt;"bearer",
        :&lt;span class=
"hljs-string"&gt;"header",
        : &lt;span class=
"hljs-string"&gt;"jwt",
        : &lt;span class=
"hljs-string"&gt;"ES256",
        &lt;span class=
"hljs-string"&gt;"authorization": &lt;span class=
"hljs-string"&gt;"https://servient.example.com:8443/"
    }
},
: [&lt;span class=
"hljs-string"&gt;"proxy_sc", &lt;span class=
"hljs-string"&gt;"bearer_sc"],
...
</del>
<p>
<del class="diff-old">However,
</del>
<ins class="diff-chg">A
patch
operation
is
particularly
useful
to
efficiently
extend
</ins>
the
<del class="diff-old">use
</del>
<ins class="diff-chg">expiry
</ins>
of
<del class="diff-old">an
array
with
multiple
elements
to
combine
security
schemes
in
</del>
<ins class="diff-chg">a
registration
that
uses
</ins>
a
<code>
<del class="diff-old">security
element
is
now
deprecated.
A
ComboSecurityScheme
</del>
<ins class="diff-chg">ttl
</ins>
</code>
<del class="diff-old">should
be
used
instead
as
in
the
following
example,
which
</del>
<ins class="diff-chg">(relative
expiry)
value.
This
</ins>
is
<del class="diff-old">exactly
equivalent
</del>
<ins class="diff-chg">typically
done
by
submitting
an
empty
merge
patch
document,
i.e.
an
empty
JSON
object.
This
effectively
translates
</ins>
to
<ins class="diff-new">performing
a
partial
update
operation
that
updates
nothing,
but
triggers
</ins>
the
<del class="diff-old">one
above:
Example
15
...
: {
    : {
        : &lt;span class=
"hljs-string"&gt;"digest",
        : &lt;span class=
"hljs-string"&gt;"https://portal.example.com/"
    },
    : {
        : &lt;span class=
"hljs-string"&gt;"bearer",
        :&lt;span class=
"hljs-string"&gt;"header",
        : &lt;span class=
"hljs-string"&gt;"jwt",
        : &lt;span class=
"hljs-string"&gt;"ES256",
        &lt;span class=
"hljs-string"&gt;"authorization": &lt;span class=
"hljs-string"&gt;"https://servient.example.com:8443/"
    },
    : {
        : &lt;span class=
"hljs-string"&gt;"combo",
        : [&lt;span class=
"hljs-string"&gt;"proxy_sc", &lt;span class=
"hljs-string"&gt;"bearer_sc"]
    }
},
: &lt;span class=
"hljs-string"&gt;"combo_sc",
...
6.3.4.2
</del>
<ins class="diff-chg">recalculation
of
</ins>
<code>
<del class="diff-old">security
</del>
<ins class="diff-chg">expires
</ins>
</code>
<ins class="diff-new">(absolute
expiry)
value.
This
expiry
functionality
only
works
if
the
server
supports
it
as
defined
</ins>
in
<del class="diff-old">Forms
</del>
<a href= "#exploration-directory-registration-expiry" data-matched-text= "[[[#exploration-directory-registration-expiry]]]" class= "sec-ref">
<del class="diff-old">Security
configurations
can
also
be
specified
for
different
forms
within
the
same
Interaction
Affordance
</del>
<bdi class="secno">
<ins class="diff-chg">7.3.1.2
</ins></bdi><ins class="diff-chg">
Registration
Expiry
</ins>
</a>.
<del class="diff-old">This
may
be
required
for
devices
that
support
multiple
protocols,
for
</del>
</p>
<p>
<ins class="diff-chg">The
following
</ins>
example
<del class="diff-old">HTTP
and
CoAP
[
RFC7252
],
which
support
different
security
mechanisms.
This
</del>
is
<del class="diff-old">also
useful
when
alternative
authentication
mechanisms
are
allowed.
Here
is
a
TD
snippet
demonstrating
three
possible
ways
to
activate
</del>
a
<del class="diff-old">Property
affordance:
via
HTTPS
with
basic
authentication,
with
digest
authentication,
with
bearer
token
authentication.
In
other
words,
the
use
of
different
security
configurations
within
multiple
forms
provides
a
way
</del>
<ins class="diff-chg">merge
patch
document
</ins>
to
<del class="diff-old">combine
security
mechanisms
in
an
"OR"
fashion.
In
contrast,
putting
multiple
security
configurations
in
</del>
<ins class="diff-chg">update
only
</ins>
the
<del class="diff-old">same
</del>
<code>
<del class="diff-old">security
</del>
<ins class="diff-chg">base
</ins>
</code>
<del class="diff-old">member
combines
them
in
an
"AND"
fashion,
since
in
that
case
they
would
all
need
to
be
satisfied
to
allow
activation
</del>
<ins class="diff-chg">and
registration
</ins><code><ins class="diff-chg">
expires
</ins></code><ins class="diff-chg">
fields
</ins>
of
<del class="diff-old">the
Interaction
Affordance
.
Note
that
activating
one
(default)
configuration
at
the
Thing
level
is
still
mandatory.
</del>
<ins class="diff-chg">a
TD:
</ins>
</p>
<aside class="example" id="example-patch-enriched-td">
<div class="marker">
<a class="self-link" href= "#example-patch-enriched-td">
Example
<bdi>
<del class="diff-old">16
</del>
<ins class="diff-chg">6
</ins>
</bdi>
</a>
<span class= "example-title">:
<ins class="diff-new">Example
merge
patch
document
</ins></span>
</div>
<del class="diff-old">{
    ...
    "securityDefinitions": {
        : { &lt;span class=
"hljs-string"&gt;"scheme": &lt;span class=
"hljs-string"&gt;"basic" },
        "digest_sc": { &lt;span class=
"hljs-string"&gt;"scheme": &lt;span class=
"hljs-string"&gt;"digest" },
        "bearer_sc": { &lt;span class=
"hljs-string"&gt;"scheme": &lt;span class=
"hljs-string"&gt;"bearer" }
    },
    "security": ,
    ...
    : {
        : {
            ...
            : [{
                &lt;span class=
"hljs-string"&gt;"href": &lt;span class=
"hljs-string"&gt;"https://mylamp.example.com/status"
            }, {
                "href": &lt;span class=
"hljs-string"&gt;"https://mylamp.example.com/status",
                &lt;span class=
"hljs-string"&gt;"security": &lt;span class=
"hljs-string"&gt;"digest_sc"
            }, {
                "href": &lt;span class=
"hljs-string"&gt;"https://mylamp.example.com/status",
                &lt;span class=
"hljs-string"&gt;"security": &lt;span class=
"hljs-string"&gt;"bearer_sc"
            }]
        }
    },
    ...
</del>
<pre aria-busy="false"><code class="hljs json">{
    <span class="hljs-attr">"base"</span>: <span class=
<ins class="diff-chg">"hljs-string">"http://192.168.0.2/"</span>,
</ins>    <span class="hljs-attr">"registration"</span>: {        <span class="hljs-attr">"expires"</span>: <span class=<ins class="diff-chg">
"hljs-string">"2021-01-20T17:02:00Z"</span>
    }
</ins>
}
</code>
</pre>
<del class="diff-old">6.3.4.3
ComboSecurityScheme
To
avoid
redundancy
in
this
case,
e.g.
repeating
the
details
</del>
<ins class="diff-chg">This
is
a
valid
way
</ins>
of
<ins class="diff-new">extending
</ins>
the
<ins class="diff-new">absolute
expiry
only
if
the
stored
TD
has
no
</ins>
<code>
<del class="diff-old">form
elements,
a
ComboSecurityScheme
with
oneOf
</del>
<ins class="diff-chg">ttl
</ins>
</code>
<del class="diff-old">can
be
used
instead.
</del>
<ins class="diff-chg">(relative
expiry).
For
more
details,
refer
to
</ins><a href= "#exploration-directory-registration-expiry" data-matched-text= "[[[#exploration-directory-registration-expiry]]]" class= "sec-ref">
<del class="diff-old">Example
17
</del>
<bdi class="secno">
<ins class="diff-chg">7.3.1.2
</ins>
</bdi>
<del class="diff-old">{
    ...
    "securityDefinitions": {
        : { &lt;span class=
"hljs-string"&gt;"scheme": &lt;span class=
"hljs-string"&gt;"basic" },
        "digest_sc": { &lt;span class=
"hljs-string"&gt;"scheme": &lt;span class=
"hljs-string"&gt;"digest" },
        "bearer_sc": { &lt;span class=
"hljs-string"&gt;"scheme": &lt;span class=
"hljs-string"&gt;"bearer" },
        "combo_sc": { 
            : &lt;span class=
"hljs-string"&gt;"combo", 
            &lt;span class=
"hljs-string"&gt;"oneOf" ] 
        }
    },
    "security": ,
    ...
    : {
        : {
            ...
            : [{
                &lt;span class=
"hljs-string"&gt;"href": &lt;span class=
"hljs-string"&gt;"https://mylamp.example.com/status"
            }]
        }
    },
    ...
}
</del>
<ins class="diff-chg">Registration
Expiry
</ins></a>.</aside></li></ul>
</section>
<section id="exploration-directory-api-things-deletion" class= "normative">
<div class="header-wrapper">
<h6 id="x7-3-2-1-4-deletion">
<bdi class="secno">
<del class="diff-old">6.3.4.4
</del>
<ins class="diff-chg">7.3.2.1.4
</ins>
</bdi>
<del class="diff-old">OAuth
2.0
usage
</del>
<ins class="diff-chg">Deletion
</ins></h6><a class="self-link" href= "#exploration-directory-api-things-deletion" aria-label= "Permalink for Section 7.3.2.1.4">
</a>
</div>
<p>
<del class="diff-old">As
another
more
complex
example,
OAuth
2.0
makes
use
of
scopes.
These
are
identifiers
that
may
appear
in
tokens
and
must
match
with
corresponding
identifiers
in
a
resource
to
allow
access
to
that
resource
(or
Interaction
Affordance
in
the
case
of
W3C
WoT).
For
example,
in
the
following,
the
status
Property
can
</del>
<span class="rfc2119-assertion" id="tdd-things-delete">
<ins class="diff-chg">A
delete
operation
</ins><em class="rfc2119"><ins class="diff-chg">
MUST
</ins></em>
be
<del class="diff-old">read
by
Consumers
</del>
<ins class="diff-chg">done
</ins>
using
<del class="diff-old">bearer
tokens
containing
the
scope
limited
,
but
the
configure
Action
can
only
be
invoked
with
a
token
containing
the
special
scope.
Scopes
are
not
identical
to
roles,
but
are
often
associated
with
them;
for
example,
perhaps
only
those
in
an
administrative
role
are
authorized
to
perform
"special"
interactions.
Tokens
can
have
more
than
one
scope
and
are
issued
by
dedicated
web
services
to
users.
In
this
example,
</del>
an
<del class="diff-old">administrator
could
be
issued
tokens
with
both
the
</del>
<ins class="diff-chg">HTTP
</ins>
<code>
<del class="diff-old">limited
</del>
<ins class="diff-chg">DELETE
</ins>
</code>
<del class="diff-old">and
</del>
<ins class="diff-chg">request
at
</ins>
<code>
<del class="diff-old">special
</del>
<ins class="diff-chg">/things/{id}
</ins></code>,<ins class="diff-chg">
where
</ins><code><ins class="diff-chg">
id
</ins>
</code>
<del class="diff-old">scopes,
while
ordinary
users
could
be
provided
with
tokens
with
</del>
<ins class="diff-chg">is
the
identifier
of
</ins>
the
<ins class="diff-new">existing
TD.
</ins></span><span class="rfc2119-assertion" id="tdd-things-delete-resp"><ins class="diff-new">
A
successful
response
</ins><em class="rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
have
204
(No
Content)
status.
</ins></span><ins class="diff-new">
The
retrieve
operation
is
specified
as
</ins>
<code>
<del class="diff-old">limited
</del>
<ins class="diff-chg">deleteThing
</ins>
</code>
<del class="diff-old">scope.
</del>
<ins class="diff-chg">property
in
</ins><a href="#directory-api-spec" data-matched-text="[[[#directory-api-spec]]]" class= "sec-ref">
<del class="diff-old">Example
18
</del>
<bdi class="secno">
<ins class="diff-chg">7.3.2.4
</ins>
</bdi>
<del class="diff-old">{
    ...
    "securityDefinitions": {
        : {
            : &lt;span class=
"hljs-string"&gt;"oauth2",
            : &lt;span class=
"hljs-string"&gt;"client",
            : &lt;span class=
"hljs-string"&gt;"https://example.com/token",
            &lt;span class=
"hljs-string"&gt;"scopes"]
        }
    },
    "security": ,
    ...
    : {
        : {
            ...
            : [{
                &lt;span class=
"hljs-string"&gt;"href": &lt;span class=
"hljs-string"&gt;"https://scopes.example.com/status",
                &lt;span class=
"hljs-string"&gt;"scopes": [&lt;span class=
"hljs-string"&gt;"limited"]
            }]
        }
    },
    "actions": {
        : {
            ...
            : [{
                &lt;span class=
"hljs-string"&gt;"href": &lt;span class=
"hljs-string"&gt;"https://scopes.example.com/configure",
                &lt;span class=
"hljs-string"&gt;"scopes": [&lt;span class=
"hljs-string"&gt;"special"]
            }]
        }
    },
    ...
}
</del>
<ins class="diff-chg">API
Specification
(Thing
Model)
</ins></a>.</p>
</section>
<section id="exploration-directory-api-things-listing" class= "normative">
<div class="header-wrapper">
<h6 id="x7-3-2-1-5-listing">
<bdi class="secno">
<del class="diff-old">6.3.4.5
</del>
<ins class="diff-chg">7.3.2.1.5
</ins>
</bdi>
<del class="diff-old">API
key
usage
</del>
<ins class="diff-chg">Listing
</ins></h6><a class="self-link" href= "#exploration-directory-api-things-listing" aria-label= "Permalink for Section 7.3.2.1.5">
</a>
</div>
<p>
<del class="diff-old">A
Thing
can
require
an
onboarding
process
that
results
in
the
Consumer
requiring
an
API
key
to
interact
with
the
Thing.
This
API
key
can
be
included
in
the
request
to
the
Thing
in
</del>
<ins class="diff-chg">The
listing
endpoint
provides
</ins>
different
ways
<del class="diff-old">as
</del>
<ins class="diff-chg">to
query
</ins>
the
<del class="diff-old">API
key
scheme
specifies.
Below
is
an
example
</del>
<ins class="diff-chg">collection
</ins>
of
<del class="diff-old">how
it
can
be
used
as
a
URI
template
where
the
API
key
should
be
replaced
in
the
URI
by
</del>
<ins class="diff-chg">full
TD
objects
from
</ins>
the
<del class="diff-old">Consumer
when
sending
an
HTTPS
request.
</del>
<ins class="diff-chg">directory.
</ins>
</p>
<del class="diff-old">Example
19
{
    ...
    "securityDefinitions": {
        : {
            : &lt;span class=
"hljs-string"&gt;"apikey",
            : &lt;span class=
"hljs-string"&gt;"uri",
            : &lt;span class=
"hljs-string"&gt;"adminKey"
        }
    },
    "security": ,
    : {
        : {
            ...
            : [{
                &lt;span class=
"hljs-string"&gt;"href": &lt;span class=
"hljs-string"&gt;"https://example.com/{adminKey}/status",
                ...
            }]
        }
    },
    ...
}
</del>
<p>
<del class="diff-old">To
give
another
example
</del>
<ins class="diff-chg">In
many
scenarios,
retrieving
parts
instead
</ins>
of
<del class="diff-old">the
use
</del>
<ins class="diff-chg">full
TD
objects
is
preferred
because
only
a
subset
</ins>
of
<del class="diff-old">the
</del>
<ins class="diff-chg">elements
are
needed
(e.g.
</ins>
<code>
<del class="diff-old">ComboSecurityScheme
</del>
<ins class="diff-chg">id
</ins>
</code>
<del class="diff-old">in
addition
to
the
use
of
URI
templates
example
shown
above,
suppose
there
is
a
security
scheme
where
a
client
ID
</del>
and
<code>
<ins class="diff-new">href
</ins></code><ins class="diff-new">
of
</ins>
a
<del class="diff-old">"secret"
key
provided
by
a
cloud
service
provider
must
both
be
embedded
in
the
URL.
Technically,
only
the
key
is
actually
secret
and
must
be
handled
out-of-band,
</del>
<ins class="diff-chg">property
for
all
TDs)
</ins>
and
<del class="diff-old">the
client
ID,
which
is
not
secret,
could
be
embedded
in
the
TD.
However,
if
the
client
ID
cannot
be
easily
rotated
we
may
want
to
avoid
embedding
it
in
the
TD
</del>
to
<del class="diff-old">enhance
privacy.
In
this
case
we
can
combine
two
instances
</del>
<ins class="diff-chg">save
networking
resources.
The
Search
API
allows
querying
parts
</ins>
of
<ins class="diff-chg">TD
objects;
see
</ins><a href= "#exploration-directory-api-search" data-matched-text= "[[[#exploration-directory-api-search]]]" class= "sec-ref">
<del class="diff-old">APIKeySecurityScheme
</del>
<bdi class="secno">
<ins class="diff-chg">7.3.2.3
</ins></bdi><ins class="diff-chg">
Search
API
</ins></a>.</p><p>
<del class="diff-old">,
both
</del>
<span class="rfc2119-assertion" id="tdd-things-list-method">
<ins class="diff-chg">The
directory
</ins><em class="rfc2119"><ins class="diff-chg">
MUST
</ins></em><ins class="diff-chg">
allow
retrieval
of
existing
TDs
</ins>
using
<del class="diff-old">the
uri
value
for
the
</del>
<ins class="diff-chg">HTTP
</ins>
<code>
<del class="diff-old">in
</del>
<ins class="diff-chg">GET
</ins>
</code>
<del class="diff-old">location
specifier,
to
declare
two
URI
variables.
These
can
then
(in
fact,
they
must)
be
used
in
</del>
<ins class="diff-chg">requests
at
</ins>
the
<code>
<del class="diff-old">href
in
a
Form
where
the
security
scheme
is
active.
An
example
follows:
Example
20
{
    ...
    "securityDefinitions": {
        : {
            : &lt;span class=
"hljs-string"&gt;"apikey",
            : &lt;span class=
"hljs-string"&gt;"uri",
            : &lt;span class=
"hljs-string"&gt;"secKey"
        },
        "apikey_id": {
            : &lt;span class=
"hljs-string"&gt;"apikey",
            : &lt;span class=
"hljs-string"&gt;"uri",
            : &lt;span class=
"hljs-string"&gt;"secClientID"
        },
        "apikey_combo": {
            : &lt;span class=
"hljs-string"&gt;"combo",
            : [&lt;span class=
"hljs-string"&gt;"apikey_key",&lt;span class=
"hljs-string"&gt;"apikey_id"]
        }
    },
    "security": ,
    ...
    : {
        : {
            ...
            : [{
                &lt;span class=
"hljs-string"&gt;"href": &lt;span class=
"hljs-string"&gt;"https://example.com/{secClientID}/status/{secKey}",
                ...
            }]
        }
    },
    ...
}
While
not
shown
in
this
example,
it
is
legal
to
declare
additional
URI
template
variables
using
uriVariables
</del>
<ins class="diff-chg">/things
</ins>
</code>
<ins class="diff-new">endpoint.
</ins></span><span class= "rfc2119-assertion" id="tdd-things-list-resp"><ins class="diff-new">
A
successful
response
</ins><em class="rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
have
200
(OK)
status
</ins>
and
<del class="diff-old">include
them
in
the
same
URI
template,
although
the
names
cannot
conflict
with
those
declared
in
security
schemes.
Using
a
specific
prefix
as
</del>
<ins class="diff-chg">an
array
of
TDs
</ins>
in
the
<del class="diff-old">above
example
for
URI
variables
declared
in
security
schemes
can
make
it
easier
to
avoid
name
conflicts.
API
Key
in
Body:
Security
parameters
might
also
be
included
along
</del>
<ins class="diff-chg">body.
</ins></span><span class="rfc2119-assertion" id= "tdd-things-list-resp-content-type"><ins class="diff-chg">
A
successful
response
</ins>
with
<del class="diff-old">the
payload
in
some
systems.
For
example,
suppose
a
system
requires
every
payload
to
be
a
</del>
JSON
<del class="diff-old">object
including
a
member
named
</del>
<ins class="diff-chg">serialization
</ins><em class="rfc2119"><ins class="diff-chg">
MUST
</ins></em><ins class="diff-chg">
contain
</ins>
<code>
<del class="diff-old">auth
</del>
<ins class="diff-chg">application/json
</ins>
</code>
<del class="diff-old">whose
value
is
an
object
containing
a
member
called
</del>
<ins class="diff-chg">or
more
specifically,
</ins>
<code>
<del class="diff-old">key
</del>
<ins class="diff-chg">application/ld+json
</ins>
</code>
<del class="diff-old">containing
an
access
key.
Depending
on
the
interaction,
however,
other
elements
of
the
JSON
object
might
vary.
This
situation
can
be
dealt
with
using
</del>
<ins class="diff-chg">in
</ins>
the
<del class="diff-old">body
security
information
location.
</del>
<ins class="diff-chg">Content-Type
header.
</ins></span>
Note
that
<del class="diff-old">for
this
location,
</del>
the
<del class="diff-old">name
parameter
</del>
<ins class="diff-chg">default
serialization
</ins>
is
<del class="diff-old">actually
a
</del>
JSON
<del class="diff-old">pointer
evaluated
relative
to
the
root
of
the
DataSchema
for
each
interaction
it
is
bound
with,
which
allows
it
to
be
used
</del>
with
<del class="diff-old">payloads
that
vary
in
other
respects.
As
an
example,
here
is
a
light
that
has
a
property
to
set
its
brightness
and
color
and
two
separate
actions
to
turn
it
on
</del>
<ins class="diff-chg">JSON-LD
syntax,
</ins>
and
<del class="diff-old">off.
Although
the
JSON
payloads
are
different
for
these
actions
the
/auth/key
element
occurs
in
the
same
relative
location
so
single
JSON
pointer
</del>
<ins class="diff-chg">alternative
serializations
</ins>
can
be
<del class="diff-old">used.
Note:
if
the
security
key
occurs
in
different
inconsistent
locations,
it
will
</del>
<ins class="diff-chg">negotiated;
see
</ins><a href= "#exploration-directory-api-things" data-matched-text= "[[[#exploration-directory-api-things]]]" class= "sec-ref"><bdi class="secno"><ins class="diff-chg">
7.3.2.1
</ins></bdi><ins class="diff-chg">
Things
API
</ins></a>.</p><p><ins class="diff-chg">
There
may
</ins>
be
<del class="diff-old">necessary
</del>
<ins class="diff-chg">scenarios
in
which
clients
need
</ins>
to
<del class="diff-old">use
multiple
security
scheme
definitions.
</del>
<ins class="diff-chg">retrieve
the
collection
in
small
subsets
of
TDs.
While
the
Search
API
(
</ins><a href= "#exploration-directory-api-search" data-matched-text= "[[[#exploration-directory-api-search]]]" class= "sec-ref">
<del class="diff-old">Example
21
</del>
<bdi class="secno">
<ins class="diff-chg">7.3.2.3
</ins>
</bdi>
<ins class="diff-chg">Search
API
</ins>
</a>
<del class="diff-old">{
    ...
    "securityDefinitions": {
        : {
            : &lt;span class=
"hljs-string"&gt;"apikey",
            : &lt;span class=
"hljs-string"&gt;"body",
            : &lt;span class=
"hljs-string"&gt;"/auth/key"
        }
    },
    "security": ,
    ...
    : {
        : {
            ...
            : &lt;span class=
"hljs-string"&gt;"object",
            : {
                : {
                    &lt;span class=
"hljs-string"&gt;"type": &lt;span class=
"hljs-string"&gt;"number",
                    ...
                },
                "rgb": {
                    &lt;span class=
"hljs-string"&gt;"type": &lt;span class=
"hljs-string"&gt;"array",
                    ...
                },
                "auth": {
                    &lt;span class=
"hljs-string"&gt;"type": &lt;span class=
"hljs-string"&gt;"object",
                    &lt;span class=
"hljs-string"&gt;"properties": {
                        : {
                           &lt;span class=
"hljs-string"&gt;"type": &lt;span class=
"hljs-string"&gt;"string"
                        }
                    },
                    "required": [&lt;span class=
"hljs-string"&gt;"key"]
                }
            },
            "required": [&lt;span class=
"hljs-string"&gt;"brightness", &lt;span class=
"hljs-string"&gt;"rgb", &lt;span class=
"hljs-string"&gt;"auth"],
            : [{
                &lt;span class=
"hljs-string"&gt;"href": &lt;span class=
"hljs-string"&gt;"https://example.com/color",
                ...
            }]
        }
    },
    "action": {
        : {
            ...
            : {
                : {
                    &lt;span class=
"hljs-string"&gt;"type": &lt;span class=
"hljs-string"&gt;"object",
                    &lt;span class=
"hljs-string"&gt;"properties": {
                        : {
                           &lt;span class=
"hljs-string"&gt;"type": &lt;span class=
"hljs-string"&gt;"string"
                        }
                    },
                    "required": [&lt;span class=
"hljs-string"&gt;"key"]
                }
            },
            "required": [],
            : [{
                &lt;span class=
"hljs-string"&gt;"href": &lt;span class=
"hljs-string"&gt;"https://example.com/on",
                ...
            }]
        },
        "off": {
            ...
            : {
                : {
                    &lt;span class=
"hljs-string"&gt;"type": &lt;span class=
"hljs-string"&gt;"object",
                    &lt;span class=
"hljs-string"&gt;"properties": {
                        : {
                           &lt;span class=
"hljs-string"&gt;"type": &lt;span class=
"hljs-string"&gt;"string"
                        }
                    },
                    "required": [&lt;span class=
"hljs-string"&gt;"key"]
                }
            },
            "required": [],
            : [{
                &lt;span class=
"hljs-string"&gt;"href": &lt;span class=
"hljs-string"&gt;"https://example.com/off",
                ...
            }]
        }
    },
    ...
}
However,
it
is
rather
annoying
and
redundant
to
add
</del>
<ins class="diff-chg">)
does
offer
</ins>
the
<del class="diff-old">security
information
to
every
data
schema.
It
is
possible
</del>
<ins class="diff-chg">ability
</ins>
to
<del class="diff-old">simplify
this
example
by
using
the
feature
that
the
location
referenced
by
a
JSON
pointer
in
</del>
<ins class="diff-chg">query
</ins>
a
<del class="diff-old">body
location
will
be
automatically
inserted
if
</del>
<ins class="diff-chg">specific
range,
</ins>
it
<del class="diff-old">does
</del>
<ins class="diff-chg">may
</ins>
not
<del class="diff-old">exist.
In
this
case
the
above
example
can
</del>
be
<del class="diff-old">simplified
</del>
<ins class="diff-chg">optimal,
nor
developer-friendly.
</ins><span class="rfc2119-assertion" id= "tdd-things-list-pagination"><ins class="diff-chg">
The
server
</ins><em class= "rfc2119"><ins class="diff-chg">
MAY
</ins></em><ins class="diff-chg">
support
pagination
</ins>
to
<ins class="diff-new">return
</ins>
the
<del class="diff-old">following.
Note
that
</del>
<ins class="diff-chg">collection
</ins>
in
<del class="diff-old">fact
a
data
schema
will
effectively
</del>
<ins class="diff-chg">small
subsets.
</ins></span><ins class="diff-chg">
The
pagination
must
</ins>
be
<del class="diff-old">created
for
the
actions
</del>
<ins class="diff-chg">based
</ins>
on
<del class="diff-old">and
off
to
hold
just
</del>
the
<del class="diff-old">security
information.
Example
22
{
    ...
    "securityDefinitions": {
        : {
            : &lt;span class=
"hljs-string"&gt;"apikey",
            : &lt;span class=
"hljs-string"&gt;"body",
            : &lt;span class=
"hljs-string"&gt;"/auth/key"
        }
    },
    "security": ,
    ...
    : {
        : {
            ...
            : &lt;span class=
"hljs-string"&gt;"object",
            : {
                : {
                    &lt;span class=
"hljs-string"&gt;"type": &lt;span class=
"hljs-string"&gt;"number",
                    ...
                },
                "rgb": {
                    &lt;span class=
"hljs-string"&gt;"type": &lt;span class=
"hljs-string"&gt;"array",
                    ...
                }
            },
            "required": [&lt;span class=
"hljs-string"&gt;"brightness", &lt;span class=
"hljs-string"&gt;"rgb"],
            : [{
                &lt;span class=
"hljs-string"&gt;"href": &lt;span class=
"hljs-string"&gt;"https://example.com/color",
                ...
            }]
        }
    },
    "action": {
        : {
            ...
            &lt;span class=
"hljs-string"&gt;"required": [&lt;span class=
"hljs-string"&gt;"auth"],
            : [{
                &lt;span class=
"hljs-string"&gt;"href": &lt;span class=
"hljs-string"&gt;"https://example.com/on",
                ...
            }]
        },
        "off": {
            ...
            : [{
                &lt;span class=
"hljs-string"&gt;"href": &lt;span class=
"hljs-string"&gt;"https://example.com/off",
                ...
            }]
        }
    },
    ...
}
6.3.5
properties
</del>
<ins class="diff-chg">following
rules:
</ins></p><ul><li>
<del class="diff-old">The
value
assigned
to
properties
in
a
</del>
<span class="rfc2119-assertion" id= "tdd-things-list-pagination-limit">
<ins class="diff-chg">When
the
</ins>
<code>
<del class="diff-old">Thing
</del>
<ins class="diff-chg">limit
</ins>
</code>
<del class="diff-old">instance
</del>
<ins class="diff-chg">query
parameter
</ins>
is
<ins class="diff-new">set
to
</ins>
a
<del class="diff-old">Map
of
instances
of
PropertyAffordance
.
All
name-value
pairs
of
a
Map
of
PropertyAffordance
instances
MUST
&nbsp;be
serialized
as
members
of
the
JSON
object
that
results
from
serializing
the
Map
;
</del>
<ins class="diff-chg">positive
integer,
</ins>
the
<del class="diff-old">name
of
a
pair
</del>
<ins class="diff-chg">server
</ins>
<em class= "rfc2119">
<del class="diff-old">MUST
</del>
<ins class="diff-chg">MAY
</ins>
</em>
<del class="diff-old">&nbsp;be
serialized
as
</del>
<ins class="diff-chg">respond
with
</ins>
a
<del class="diff-old">JSON
string
and
the
value
</del>
<ins class="diff-chg">subset
</ins>
of
<ins class="diff-new">TDs
totalling
to
less
than
or
equal
to
</ins>
the
<del class="diff-old">pair,
an
instance
of
PropertyAffordance
,
MUST
be
serialized
as
a
JSON
object.
</del>
<ins class="diff-chg">requested
number.
</ins>
</span>
</li>
<li>
<del class="diff-old">All
name-value
pairs
of
an
instance
</del>
<span class="rfc2119-assertion" id= "tdd-things-list-pagination-header-nextlink">
<ins class="diff-chg">When
there
are
more
TDs
after
a
returned
subset
</ins>
of
<del class="diff-old">PropertyAffordance
,
where
</del>
the
<del class="diff-old">name
is
a
Vocabulary
Term
included
in
(one
of)
</del>
<ins class="diff-chg">collection,
</ins>
the
<del class="diff-old">Signatures
of
PropertyAffordance
,
InteractionAffordance
,
or
DataSchema
,
</del>
<ins class="diff-chg">response
</ins>
<em class="rfc2119">
MUST
</em>
<del class="diff-old">be
serialized
as
members
of
the
JSON
object
that
results
from
serializing
the
PropertyAffordance
instance,
with
the
Vocabulary
Term
as
name.
See
6.3.10
Data
Schemas
for
details
on
serializing
</del>
<ins class="diff-chg">contain
a
</ins>
<code>
<del class="diff-old">DataSchema
</del>
<ins class="diff-chg">next
</ins>
</code>
<ins class="diff-new">Link
header
[
</ins><cite>
<a class="bibref" data-link-type="biblio" href= "#bib-rfc8288" title="Web Linking">
<ins class="diff-new">RFC8288
</ins>
</a>
<del class="diff-old">instances.
</del>
<del class="diff-old">The
value
assigned
to
forms
in
an
instance
</del>
</cite>
<ins class="diff-chg">]
with
the
URL
</ins>
of
<ins class="diff-new">the
next
subset.
</ins></span><span class="rfc2119-assertion" id= "tdd-things-list-pagination-header-nextlink-attr"><ins class="diff-new">
The
</ins>
<code>
<del class="diff-old">PropertyAffordance
</del>
<ins class="diff-chg">next
</ins>
</code>
<ins class="diff-new">link
</ins>
<em class="rfc2119">
MUST
</em>
<del class="diff-old">be
serialized
as
a
JSON
array
containing
one
or
more
JSON
object
serializations
as
defined
</del>
<ins class="diff-chg">include
all
arguments
needed
to
produce
the
same
set
of
data
and
its
ordering,
</ins>
in
<del class="diff-old">6.3.9
</del>
<ins class="diff-chg">particular
the
same
</ins>
<code>
<del class="diff-old">forms
</del>
<ins class="diff-chg">limit
</ins>
</code>
<del class="diff-old">.
A
snippet
for
two
Property
affordances
is
</del>
<ins class="diff-chg">argument
</ins>
given
<del class="diff-old">below:
Example
23
:
Sample
of
Property
serializations
...
"properties": {
    : {
        : &lt;span class=
"hljs-string"&gt;"boolean",
        : [...]
    },
    "status": {
        : &lt;span class=
"hljs-string"&gt;"object",
        : {
            : {
                &lt;span class=
"hljs-string"&gt;"type": &lt;span class=
"hljs-string"&gt;"number",
                &lt;span class=
"hljs-string"&gt;"minimum": &lt;span class=
"hljs-number"&gt;0.0,
                &lt;span class=
"hljs-string"&gt;"maximum": &lt;span class=
"hljs-number"&gt;100.0
            },
            "rgb": {
                &lt;span class=
"hljs-string"&gt;"type": &lt;span class=
"hljs-string"&gt;"array",
                : {
                    &lt;span class=
"hljs-string"&gt;"type": &lt;span class=
"hljs-string"&gt;"number",
                    &lt;span class=
"hljs-string"&gt;"minimum",
                    &lt;span class=
"hljs-string"&gt;"maximum": &lt;span class=
"hljs-number"&gt;255
                },
                "minItems": ,
                &lt;span class=
"hljs-string"&gt;"maxItems"
            }
        },
        "required": [&lt;span class=
"hljs-string"&gt;"brightness", &lt;span class=
"hljs-string"&gt;"rgb"],
        : [...]
    }
},
...
6.3.6
actions
In
a
Thing
instance,
</del>
<ins class="diff-chg">on
</ins>
the
<del class="diff-old">value
assigned
to
actions
is
a
Map
of
instances
of
ActionAffordance
.
All
name-value
pairs
of
a
Map
of
ActionAffordance
instances
MUST
&nbsp;be
serialized
</del>
<ins class="diff-chg">initial
request
</ins>
as
<del class="diff-old">members
of
the
JSON
object
that
results
from
serializing
the
Map
;
the
name
of
a
pair
MUST
&nbsp;be
serialized
</del>
<ins class="diff-chg">well
</ins>
as
a
<del class="diff-old">JSON
string
and
</del>
<ins class="diff-chg">zero-based
</ins><code><ins class="diff-chg">
offset
</ins></code><ins class="diff-chg">
argument
anchored
at
</ins>
the
<del class="diff-old">value
</del>
<ins class="diff-chg">beginning
</ins>
of
the
<del class="diff-old">pair,
an
instance
of
ActionAffordance
,
</del>
<ins class="diff-chg">next
subset.
</ins></span><span class="rfc2119-assertion" id= "tdd-things-list-pagination-header-nextlink-base"><ins class="diff-chg">
The
link
</ins>
<em class="rfc2119">
MUST
</em>
be
<del class="diff-old">serialized
as
a
JSON
object.
</del>
<ins class="diff-chg">absolute
or
relative
to
directory
API's
base
URL.
</ins>
</span>
<ins class="diff-new">Moreover,
it
may
include
additional
arguments
that
are
necessary
for
ordering
or
session
management.
</ins></li><li>
<span class="rfc2119-assertion" id= "tdd-things-list-pagination-header-canonicallink">
All
<del class="diff-old">name-value
pairs
of
an
instance
of
ActionAffordance
,
where
the
name
is
a
Vocabulary
Term
included
in
(one
of)
the
Signatures
of
ActionAffordance
or
InteractionAffordance
,
</del>
<ins class="diff-chg">paged
responses
</ins>
<em class="rfc2119">
MUST
</em>
<del class="diff-old">be
serialized
as
members
of
the
JSON
object
that
results
from
serializing
the
</del>
<ins class="diff-chg">contain
a
</ins>
<code>
<del class="diff-old">ActionAffordance
</del>
<ins class="diff-chg">canonical
</ins>
</code>
<del class="diff-old">instance,
with
the
Vocabulary
Term
as
name.
</del>
<ins class="diff-chg">Link
header
[
</ins><cite>
<a class="bibref" data-link-type="biblio" href="#bib-rfc8288" title= "Web Linking">
<ins class="diff-chg">RFC8288
</ins></a>
<del class="diff-old">The
values
assigned
</del>
</cite>
<ins class="diff-chg">]
pointing
</ins>
to
<del class="diff-old">input
</del>
<ins class="diff-chg">the
collection
</ins>
and
<ins class="diff-new">include
an
</ins>
<code>
<del class="diff-old">output
</del>
<ins class="diff-chg">etag
</ins>
</code>
<del class="diff-old">in
an
instance
</del>
<ins class="diff-chg">parameter
to
represent
the
current
state
</ins>
of
<ins class="diff-new">the
collection.
</ins></span><ins class="diff-new">
The
link
may
be
absolute
or
relative
to
directory
API's
base
URL.
The
</ins>
<code>
<del class="diff-old">ActionAffordance
</del>
<ins class="diff-chg">etag
</ins>
</code>
<del class="diff-old">MUST
</del>
<ins class="diff-chg">value
could
</ins>
be
<del class="diff-old">serialized
as
JSON
objects.
They
</del>
<ins class="diff-chg">a
revision
number,
timestamp,
or
UUID
Version
4,
set
whenever
the
TD
collection
changes
in
a
way
that
affects
the
ordering
of
the
TDs.
The
clients
may
</ins>
rely
on
the
<del class="diff-old">Class
</del>
<code>
<del class="diff-old">DataSchema
</del>
<ins class="diff-chg">etag
</ins>
</code>
<del class="diff-old">,
whose
serialization
is
defined
in
6.3.10
Data
Schemas
.
The
</del>
value
<del class="diff-old">assigned
</del>
to
<del class="diff-old">forms
in
an
instance
</del>
<ins class="diff-chg">know
whether
the
collection
remains
consistent
across
paginated
retrieval
</ins>
of
<del class="diff-old">ActionAffordance
</del>
<ins class="diff-chg">the
collection.
For
example,
creation
or
deletion
of
TDs
or
update
of
TD
fields
used
for
ordering
may
make
shift
the
calculated
paging
window.
</ins></li><li><span class="rfc2119-assertion" id= "tdd-things-list-pagination-order-default"><ins class="diff-chg">
By
default,
the
collection
</ins>
<em class="rfc2119">
MUST
</em>
be
<del class="diff-old">serialized
as
a
JSON
array
containing
one
or
more
JSON
object
serializations
as
defined
in
6.3.9
forms
.
A
TD
snippet
of
an
Action
affordance
is
given
below:
Example
24
:
Sample
</del>
<ins class="diff-chg">sorted
using
UTF-8
lexicographical
order
by
the
unique
identifier
</ins>
of
<del class="diff-old">an
Action
serialization
</del>
<ins class="diff-chg">TDs.
</ins>
</span>
<del class="diff-old">...
"actions": {
    : {
        : &lt;span class=
"hljs-string"&gt;"Fade in/out",
        &lt;span class=
"hljs-string"&gt;"description",
        : {
            : &lt;span class=
"hljs-string"&gt;"object",
            : {
                : {
                    &lt;span class=
"hljs-string"&gt;"type": &lt;span class=
"hljs-string"&gt;"integer",
                    &lt;span class=
"hljs-string"&gt;"minimum",
                    &lt;span class=
"hljs-string"&gt;"maximum": &lt;span class=
"hljs-number"&gt;100
                },
                "": {
                    &lt;span class=
"hljs-string"&gt;"type": &lt;span class=
"hljs-string"&gt;"integer",
                    &lt;span class=
"hljs-string"&gt;"minimum",
                    &lt;span class=
"hljs-string"&gt;"maximum": &lt;span class=
"hljs-number"&gt;100
                },
                "duration": {&lt;span class=
"hljs-string"&gt;"type": &lt;span class=
"hljs-string"&gt;"number"}
            },
            "required": [&lt;span class=
"hljs-string"&gt;"to",&lt;span class=
"hljs-string"&gt;"duration"]
        },
        "output": {&lt;span class=
"hljs-string"&gt;"type": &lt;span class=
"hljs-string"&gt;"string"},
        "forms": [...]
    }
},
...
6.3.7
</del>
<span class="rfc2119-assertion" id= "tdd-things-list-pagination-order">
<ins class="diff-chg">The
server
</ins><em class= "rfc2119"><ins class="diff-chg">
MAY
</ins></em><ins class="diff-chg">
support
sorting
by
other
TD
attributes
using
query
arguments:
</ins>
<code>
<del class="diff-old">events
</del>
<ins class="diff-chg">sort_by
</ins>
</code>
<del class="diff-old">In
</del>
<ins class="diff-chg">to
select
</ins>
a
<ins class="diff-new">field
(e.g.
</ins>
<code>
<del class="diff-old">Thing
</del>
<ins class="diff-chg">created
</ins>
</code>
<del class="diff-old">instance,
the
value
assigned
to
</del>
<ins class="diff-chg">)
and
</ins>
<code>
<del class="diff-old">events
</del>
<ins class="diff-chg">sort_order
</ins>
</code>
<del class="diff-old">is
a
map
of
instances
of
</del>
<ins class="diff-chg">to
choose
the
order
(i.e.
</ins>
<code>
<del class="diff-old">EventAffordance
.
All
name-value
pairs
of
a
Map
of
</del>
<ins class="diff-chg">asc
</ins></code><ins class="diff-chg">
or
</ins>
<code>
<del class="diff-old">EventAffordance
</del>
<ins class="diff-chg">desc
</ins>
</code>
<del class="diff-old">instances
</del>
<ins class="diff-chg">for
ascending
and
descending
ordering).
</ins></span><span class="rfc2119-assertion" id= "tdd-things-list-pagination-orderable"><ins class="diff-chg">
A
server
</ins>
<em class= "rfc2119">
MUST
</em>
<del class="diff-old">&nbsp;be
serialized
as
members
of
the
JSON
object
</del>
<ins class="diff-chg">reject
requests
to
sort
on
fields
</ins>
that
<del class="diff-old">results
from
serializing
the
Map
;
the
name
of
a
pair
MUST
&nbsp;be
serialized
as
a
JSON
string
and
the
value
of
the
pair,
an
instance
of
EventAffordance
,
MUST
be
serialized
as
</del>
<ins class="diff-chg">do
not
have
values
that
are
orderable
basic
types,
with
</ins>
a
<del class="diff-old">JSON
object.
</del>
<ins class="diff-chg">400
(Bad
Request)
status.
</ins>
</span>
<del class="diff-old">All
name-value
pairs
of
an
instance
of
EventAffordance
,
where
the
name
is
a
Vocabulary
Term
included
in
(one
of)
</del>
<span class="rfc2119-assertion" id= "tdd-things-list-pagination-order-unsupported">
<ins class="diff-chg">If
</ins>
the
<del class="diff-old">Signatures
of
EventAffordance
or
InteractionAffordance
,
</del>
<ins class="diff-chg">server
does
not
support
custom
sorting,
it
</ins>
<em class="rfc2119">
MUST
</em>
<del class="diff-old">be
serialized
as
members
of
the
JSON
object
that
results
from
serializing
</del>
<ins class="diff-chg">reject
</ins>
the
<del class="diff-old">EventAffordance
instance,
</del>
<ins class="diff-chg">request
</ins>
with
<del class="diff-old">the
Vocabulary
Term
as
name.
</del>
<ins class="diff-chg">501
(Not
Implemented)
status.
</ins>
</span>
<del class="diff-old">The
values
assigned
to
subscription
,
data
,
and
cancellation
in
an
instance
of
EventAffordance
</del>
<span class= "rfc2119-assertion" id= "tdd-things-list-pagination-order-nextlink">
<ins class="diff-chg">If
sorting
attributes
are
accepted,
they
</ins>
<em class="rfc2119">
MUST
</em>
be
<del class="diff-old">serialized
as
JSON
objects.
They
rely
on
the
Class
DataSchema
,
whose
serialization
is
defined
in
6.3.10
Data
Schemas
.
The
value
assigned
</del>
<ins class="diff-chg">added
consistently
</ins>
to
<ins class="diff-new">all
</ins>
<code>
<del class="diff-old">forms
in
an
instance
of
EventAffordance
</del>
<ins class="diff-chg">next
</ins>
</code>
<ins class="diff-chg">links.
</ins></span><span class= "rfc2119-assertion" id= "tdd-things-list-pagination-order-utf-8"><ins class="diff-chg">
Sorting
order
</ins><em class= "rfc2119">
MUST
</em>
<ins class="diff-new">always
</ins>
be
<del class="diff-old">serialized
as
a
JSON
array
containing
one
or
more
JSON
object
serializations
as
</del>
defined
<del class="diff-old">in
6.3.9
forms
.
A
TD
snippet
of
an
Event
object
is
given
below:
Example
25
:
Sample
</del>
<ins class="diff-chg">using
lexicographical
ordering
on
a
UTF-8
encoding
</ins>
of
<del class="diff-old">an
Event
serialization
</del>
<ins class="diff-chg">the
relevant
fields.
</ins>
</span>
<del class="diff-old">...
"events": {
    : {
        : {
            : &lt;span class=
"hljs-string"&gt;"string"
        },
        "forms": [...]
    }
},
...
</del>
</li>
</ul>
<p>
<del class="diff-old">Event
affordances
have
been
defined
in
</del>
<ins class="diff-chg">This
above
specification
follows
</ins>
a
<del class="diff-old">flexible
manner,
in
order
to
adopt
existing
(e.g.,
WebSub
[
websub
])
or
customer-oriented
event
mechanisms
(e.g.,
Webhooks).
For
this
reason,
subscription
and
cancellation
can
be
defined
according
to
the
desired
mechanism.
Please
find
further
details
in
</del>
<ins class="diff-chg">subset
of
Linked
Data
Paging
</ins>
[
<cite>
<del class="diff-old">WOT-BINDING-TEMPLATES
</del>
<a class="bibref" data-link-type="biblio" href= "#bib-ldp-paging" title= "Linked Data Platform Paging 1.0">
<ins class="diff-chg">LDP-Paging
</ins>
</a>
</cite>
<del class="diff-old">].
Example
A.3
Webhook
Event
Example
illustrates
how
Events
can
use
subscription
and
cancellation
</del>
<ins class="diff-chg">]
</ins>
to
<del class="diff-old">describe
Webhooks.
6.3.8
links
All
name-value
pairs
of
an
instance
</del>
<ins class="diff-chg">allow
optional
pagination
</ins>
of
<del class="diff-old">Link
,
where
the
name
is
a
Vocabulary
Term
included
in
</del>
the
<del class="diff-old">Signature
</del>
<ins class="diff-chg">JSON-LD
array.
Additional
parts
</ins>
of
<del class="diff-old">Link
,
MUST
</del>
<ins class="diff-chg">Linked
Data
Paging
may
</ins>
be
<del class="diff-old">serialized
as
members
of
the
JSON
object
that
results
from
serializing
the
Link
instance,
with
the
Vocabulary
Term
as
name.
It
is
recommended
to
follow
the
link
relation
values
as
provided
in
Section
5.3.4.1
Link
.
The
</del>
<ins class="diff-chg">implemented
for
</ins>
examples
<del class="diff-old">provided
below
demonstrate
the
use
of
different
</del>
<ins class="diff-chg">to
honour
client's
query
preference
or
to
add
other
</ins>
link
<del class="diff-old">relation
types.
</del>
<ins class="diff-chg">relations
for
semantic
annotation
and
alternative
navigation
links.
</ins>
</p>
<p>
<del class="diff-old">A
reference
can
be
provided
that
points
to
a
Thing
(e.g.,
</del>
<ins class="diff-chg">The
following
example
provides
</ins>
a
<del class="diff-old">controller)
that
controls
</del>
<ins class="diff-chg">walk-through
of
</ins>
the
<del class="diff-old">underlying
unit
(e.g.,
a
lamp).
For
this
controlledBy
can
be
used:
</del>
<ins class="diff-chg">paginated
retrieval
of
TDs:
</ins>
</p>
<aside class="example" id="example-pagination">
<div class="marker">
<a class="self-link" href= "#example-pagination">
Example
<bdi>
<del class="diff-old">26
</del>
<ins class="diff-chg">7
</ins>
</bdi>
</a>
<span class= "example-title">:
<del class="diff-old">Sample
of
a
Link
serialization
</del>
<ins class="diff-chg">Query
all
TDs
with
page
size
10.
</ins>
</span>
</div>
<del class="diff-old">...
"links": [{
    : &lt;span class=
"hljs-string"&gt;"controlledBy",
    : &lt;span class=
"hljs-string"&gt;"https://servient.example.com/things/lampController",
    : &lt;span class=
"hljs-string"&gt;"application/td+json"
}]
...
To
point
to
a
developer
documentation
of
a
Thing
</del>
<ins class="diff-chg">The
client
requests
</ins>
the
<del class="diff-old">value
</del>
<ins class="diff-chg">list
with
a
</ins>
<code>
<del class="diff-old">service-doc
</del>
<ins class="diff-chg">limit
</ins></code><ins class="diff-chg">
of
10:
</ins><pre aria-busy="false"><code class=<ins class="diff-chg">
"hljs">GET /things?limit=10 HTTP/1.1   
Host:
tdd.example.com
</ins>
</code>
<del class="diff-old">can
be
used:
</del>
<del class="diff-old">Example
27
</del>
</pre>
<ins class="diff-chg">Response:
</ins><pre aria-busy="false"><code class="hljs http"><span class=<ins class="diff-chg">
"hljs-meta">HTTP/1.1</span> <span class="hljs-number">200</span> OK
</ins><span class="hljs-attribute">Content-Type</span><span class=<ins class="diff-chg">
"hljs-punctuation">: </span>application/ld+json
</ins><span class="hljs-attribute">Link</span><span class=<ins class="diff-chg">
"hljs-punctuation">: </span>&lt;/things?offset=10&amp;limit=10&gt;; rel="next"
</ins><span class="hljs-attribute">Link</span><span class=<ins class="diff-chg">
"hljs-punctuation">: </span>&lt;/things&gt;; rel="canonical"; etag="v1"
</ins>
<span class="css"><span class=
<ins class="diff-chg">"hljs-selector-attr">
[{
TD
},
...9
other
TDs...
]
</ins></span>
<del class="diff-old">:
Link
to
developer
documentation
</del>
</span>
<del class="diff-old">...
"links": [{
    : &lt;span class=
"hljs-string"&gt;"service-doc",
    : &lt;span class=
"hljs-string"&gt;"https://example.com/howTo",
    : &lt;span class=
"hljs-string"&gt;"application/pdf"
}]
...
</del>
</code>
</pre>
<del class="diff-old">A
superordinate
Thing
can
collect
a
group
of
Things
and
refer
to
them
by
using
the
item
value:
Example
28
:
An
electric
drive
</del>
<ins class="diff-chg">The
response
</ins>
includes
two
<del class="diff-old">motors.
&lt;code class=
"hljs css"&gt;"title" : ,
...
: [{
    : &lt;span class=
"hljs-string"&gt;"item",
    : &lt;span class=
"hljs-string"&gt;"coaps://motor1.example.com",
    : &lt;span class=
"hljs-string"&gt;" application/td+json"
},
{
    "rel": ,
    : &lt;span class=
"hljs-string"&gt;"coaps://motor2.example.com",
    : &lt;span class=
"hljs-string"&gt;" application/td+json"
}
]
...
</del>
<ins class="diff-chg">Link
headers
with
relative
URLs:
</ins><code><ins class="diff-chg">
next
</ins>
</code>
<del class="diff-old">A
Thing
refers
</del>
<ins class="diff-chg">link
</ins>
to
<del class="diff-old">a
group
in
which
it
is
collected
with
</del>
<ins class="diff-chg">query
</ins>
the
<ins class="diff-new">remaining
TDs,
</ins>
<code>
<del class="diff-old">collection
</del>
<ins class="diff-chg">canonical
</ins>
</code>
<del class="diff-old">value:
Example
29
:
An
electric
motor
is
member
of
</del>
<ins class="diff-chg">link
referencing
</ins>
the
<del class="diff-old">electric
drive
collection.
&lt;code class=
"hljs css"&gt;"title" : ,
: &lt;span class=
"hljs-string"&gt;"coaps://motor1.example.com",
...
: [{
    : &lt;span class=
"hljs-string"&gt;"collection",
    : &lt;span class=
"hljs-string"&gt;"coaps://drive.example.com",
    : &lt;span class=
"hljs-string"&gt;" application/td+json"
}]
...
6.3.9
</del>
<ins class="diff-chg">full
collection
with
</ins>
<code>
<del class="diff-old">forms
</del>
<ins class="diff-chg">etag
</ins>
</code>
<del class="diff-old">All
name-value
pairs
of
an
instance
of
Form
,
where
</del>
<ins class="diff-chg">value
indicating
</ins>
the
<del class="diff-old">name
</del>
<ins class="diff-chg">state
of
that
collection.
</ins><br /><ins class="diff-chg">
The
response
body
</ins>
is
<del class="diff-old">a
Vocabulary
Term
included
in
the
Signature
</del>
<ins class="diff-chg">an
array
</ins>
of
<del class="diff-old">Form
,
MUST
be
serialized
as
members
</del>
<ins class="diff-chg">10
TDs.
</ins><br /><br /><ins class="diff-chg">
The
presence
</ins>
of
the
<del class="diff-old">JSON
object
that
results
from
serializing
the
</del>
<code>
<del class="diff-old">Form
</del>
<ins class="diff-chg">next
</ins>
</code>
<del class="diff-old">instance,
with
the
Vocabulary
Term
as
name.
If
required,
form
objects
MAY
</del>
<ins class="diff-chg">link
implies
that
subsequent
pages
should
</ins>
be
<del class="diff-old">supplemented
with
protocol-specific
Vocabulary
Terms
identified
with
a
prefix.
See
also
8.3
Protocol
Bindings
.
A
TD
snippet
of
a
form
object
in
</del>
<ins class="diff-chg">queried
for
the
remaining
TDs.
The
client
requests
the
next
page
via
</ins>
the
<code>
<del class="diff-old">forms
</del>
<ins class="diff-chg">next
</ins></code><ins class="diff-chg">
link:
</ins><pre aria-busy="false"><code class=<ins class="diff-chg">
"hljs">GET /things?offset=10&amp;limit=10 HTTP/1.1   
Host:
tdd.example.com
</ins>
</code>
<del class="diff-old">array
is
given
below:
</del>
<del class="diff-old">Example
30
</del>
</pre>
<ins class="diff-chg">Response:
</ins><pre aria-busy="false"><code class="hljs http"><span class=<ins class="diff-chg">
"hljs-meta">HTTP/1.1</span> <span class="hljs-number">200</span> OK
</ins><span class="hljs-attribute">Content-Type</span><span class=<ins class="diff-chg">
"hljs-punctuation">: </span>application/ld+json
</ins><span class="hljs-attribute">Link</span><span class=<ins class="diff-chg">
"hljs-punctuation">: </span>&lt;/things&gt;; rel="canonical"; etag="v1"
</ins>
<span class="css"><span class=
<ins class="diff-chg">"hljs-selector-attr">
[{
TD
},
{
TD
}]
</ins></span>
<del class="diff-old">:
Sample
of
a
Form
serialization
</del>
</span>
<del class="diff-old">...
"forms": [{
    : &lt;span class=
"hljs-string"&gt;"writeproperty",
    : &lt;span class=
"hljs-string"&gt;"http://mytemp.example.com:5683/temp",
    : &lt;span class=
"hljs-string"&gt;"application/json",
    : &lt;span class=
"hljs-string"&gt;"POST"
}]
...
</del>
</code>
</pre>
<del class="diff-old">6.3.9.1
uriVariables
href
may
also
carry
a
URI
that
contains
dynamic
variables
such
as
</del>
<ins class="diff-chg">The
server
response
has
the
remaining
two
TDs.
There
is
no
</ins>
<code>
<del class="diff-old">lat
</del>
<ins class="diff-chg">next
</ins>
</code>
<del class="diff-old">and
</del>
<ins class="diff-chg">link,
because
this
is
the
last
page.
The
</ins>
<code>
<del class="diff-old">lon
</del>
<ins class="diff-chg">etag
</ins>
</code>
<del class="diff-old">in
http://example.org/weather/?lat=35&amp;lon=139
.
In
</del>
<ins class="diff-chg">value
has
not
changed
implying
</ins>
that
<del class="diff-old">case
</del>
the
<del class="diff-old">URI
can
be
defined
as
template
as
defined
in
[
RFC6570
]:
http://example.org/weather/{?lat,long}
.
</del>
<ins class="diff-chg">collection
has
remained
consistent
between
the
two
requests.
</ins><br /><br /><ins class="diff-chg">
The
client
has
retrieved
the
whole
collection,
containing
12
TDs.
</ins></aside>
<p>
<del class="diff-old">In
such
a
case,
</del>
<span class="rfc2119-assertion" id= "tdd-things-list-pagination-collection">
<ins class="diff-chg">As
an
alternative
to
an
array
of
TDs
as
</ins>
the
<del class="diff-old">URI
Template
variables
</del>
<ins class="diff-chg">body
of
the
response,
the
server
</ins>
<em class= "rfc2119">
<del class="diff-old">MUST
</del>
<ins class="diff-chg">MAY
</ins>
</em>
<ins class="diff-new">send
a
more
verbose
payload
allowing
server-side
information,
such
as
pagination
information,
to
</ins>
be
<del class="diff-old">collected
in
the
JSON-object
based
uriVariables
member
either
in
the
Thing
level
or
</del>
<ins class="diff-chg">included
</ins>
in
<del class="diff-old">Interaction
Affordance
level
with
</del>
<ins class="diff-chg">addition
to
</ins>
the
<del class="diff-old">associated
(unique)
variable
names
as
JSON
names.
</del>
<ins class="diff-chg">actual
data.
</ins>
</span>
</p>
<p>
The
<del class="diff-old">serialization
of
each
value
in
the
map
assigned
to
uriVariables
in
an
instance
of
Form
MUST
rely
on
the
Class
DataSchema
,
whose
serialization
</del>
<ins class="diff-chg">alternative
pagination
format
</ins>
is
<del class="diff-old">defined
in
6.3.10
Data
Schemas
</del>
<ins class="diff-chg">derived
from
</ins><a href= "https://www.hydra-cg.com/spec/latest/core/#advanced-concepts"><ins class="diff-chg">
Hydra
Advanced
Concepts
</ins></a>,<ins class="diff-chg">
more
concretely
the
</ins><a href= "https://www.hydra-cg.com/spec/latest/core/#example-20-a-hydra-partialcollectionview-splits-a-collection-into-multiple-views"><ins class="diff-chg">
Partial
Collection
View
</ins>
</a>.
<del class="diff-old">A
TD
snippet
</del>
<ins class="diff-chg">Adapted
to
our
purposes
and
</ins>
using
<del class="diff-old">a
URI
Template
</del>
<ins class="diff-chg">the
</ins><i><ins class="diff-chg">
members
</ins></i><ins class="diff-chg">
field
to
accomodate
the
array
of
TDs,
it
looks
as
follows
</ins>
for
<del class="diff-old">query
parameters
and
uriVariables
in
</del>
the
<del class="diff-old">Interaction
Affordance
level
is
given
below:
</del>
<ins class="diff-chg">listing
endpoint:
</ins>
</p>
<aside class="example" id="example-alternative-payload">
<div class="marker">
<a class="self-link" href= "#example-alternative-payload">
Example
<bdi>
<del class="diff-old">31
</del>
<ins class="diff-chg">8
</ins>
</bdi>
</a>
<span class= "example-title">:
<ins class="diff-new">Alternative
payload
format
including
pagination
information
</ins></span>
</div>
<pre aria-busy="false"><code class="hljs javascript">{
<del class="diff-old">    : &lt;span class=
"hljs-string"&gt;"https://www.w3.org/2022/wot/td/v1.1",
    ...
    : {
        : {
            ...
            : {
                : { 
                    &lt;span class=
"hljs-string"&gt;"type": &lt;span class=
"hljs-string"&gt;"number", 
                    &lt;span class=
"hljs-string"&gt;"minimum": &lt;span class=
"hljs-number"&gt;0, 
                    &lt;span class=
"hljs-string"&gt;"maximum": &lt;span class=
"hljs-number"&gt;90, 
                    &lt;span class=
"hljs-string"&gt;"description": &lt;span class=
"hljs-string"&gt;"Latitude for the desired location in the world" },
                : { 
                    &lt;span class=
"hljs-string"&gt;"type": &lt;span class=
"hljs-string"&gt;"number", 
                    &lt;span class=
"hljs-string"&gt;"minimum": -&lt;span class=
"hljs-number"&gt;180, 
                    &lt;span class=
"hljs-string"&gt;"maximum": &lt;span class=
"hljs-number"&gt;180, 
                    &lt;span class=
"hljs-string"&gt;"description": &lt;span class=
"hljs-string"&gt;"Longitude for the desired location in the world" }
            },
            : [{
              : &lt;span class=
"hljs-string"&gt;"http://example.org/weather/{?lat,long}",
              &lt;span class=
"hljs-string"&gt;"htv:methodName": &lt;span class=
"hljs-string"&gt;"GET"
            }]
        },
        ...
    },
    ...
</del>
        <span class="hljs-string">"@context"</span>: <span class=
<ins class="diff-chg">"hljs-string">"https://w3c.github.io/wot-discovery/context/discovery-context.jsonld"</span>,
</ins>        <span class="hljs-string">"@type"</span>: <span class=<ins class="diff-chg">
"hljs-string">"ThingCollection"</span>,
</ins>        <span class="hljs-string">"total"</span>: <span class=<ins class="diff-chg">
"hljs-number">12</span>,
</ins>        <span class="hljs-string">"members"</span>: [<ins class="diff-chg">
                { TD },
</ins>                <span class="hljs-number">9</span> other TDs...<ins class="diff-chg">
        ],
</ins>        <span class="hljs-string">"@id"</span>: <span class=<ins class="diff-chg">
"hljs-string">"/things?offset=0&amp;limit=10&amp;format=collection"</span>,
</ins>        <span class="hljs-string">"next"</span>: <span class=<ins class="diff-chg">
"hljs-string">"/things?offset=10&amp;limit=10&amp;format=collection"</span>
</ins>
}
</code>
</pre>
</aside>
<p>
<del class="diff-old">Alternatively,
as
defined
in
[
RFC6570
],
</del>
<ins class="diff-chg">To
tell
the
server
which
format
to
send,
the
additional
query
parameter
</ins>
<code>
<del class="diff-old">uriVariables
</del>
<ins class="diff-chg">?format=array|collection
</ins>
</code>
can
be
<del class="diff-old">used
for
replacing
</del>
<ins class="diff-chg">added
to
</ins>
the
<ins class="diff-new">request.
</ins>
<code>
<del class="diff-old">href
</del>
<ins class="diff-chg">?format=array
</ins>
</code>
<del class="diff-old">structure.
An
example
TD
</del>
is
<del class="diff-old">provided
below
where
a
valid
request
to
get
</del>
the
<del class="diff-old">forecast
of
Bogota,
Colombia
would
be
an
HTTP
GET
request
</del>
<ins class="diff-chg">default
parameter,
does
not
have
</ins>
to
<del class="diff-old">http://example.org/weather/bogota
:
Example
32
{
    : &lt;span class=
"hljs-string"&gt;"http://www.w3.org/ns/td",
    ...
    : {
        : {
            ...
            : {
                : {
                    &lt;span class=
"hljs-string"&gt;"type": &lt;span class=
"hljs-string"&gt;"string",
                    &lt;span class=
"hljs-string"&gt;"description": &lt;span class=
"hljs-string"&gt;"City name to find the weather information for" 
                }
            },
            : [{
                &lt;span class=
"hljs-string"&gt;"href": &lt;span class=
"hljs-string"&gt;"http://example.org/weather/{city}",
                &lt;span class=
"hljs-string"&gt;"htv:methodName": &lt;span class=
"hljs-string"&gt;"GET"
            }]
        },
    ...
    },
    ...
}
The
two
examples
below
can
</del>
be
<del class="diff-old">also
combined,
while
using
</del>
<ins class="diff-chg">provided
explicitly,
and
yields
to
a
server
response
of
</ins>
the
<del class="diff-old">same
</del>
<ins class="diff-chg">pure
array
of
TDs.
</ins>
<code>
<del class="diff-old">uriVariables
</del>
<ins class="diff-chg">?format=collection
</ins>
</code>
<del class="diff-old">feature.
An
HTTP
GET
request
</del>
<ins class="diff-chg">should
yield
</ins>
to
<del class="diff-old">http://example.org/weather/bogota/?unit=Celsius
can
be
described
</del>
<ins class="diff-chg">a
server
response
with
the
format
</ins>
as
<del class="diff-old">follows:
</del>
<ins class="diff-chg">described
in
</ins><a href= "#example-alternative-payload" data-matched-text= "[[[#example-alternative-payload]]]" class="box-ref">
Example
<bdi>
<del class="diff-old">33
</del>
<ins class="diff-chg">8
</ins>
</bdi>
<del class="diff-old">{
    : &lt;span class=
"hljs-string"&gt;"http://www.w3.org/ns/td",
    ...
    : {
        : {
            ...
            : {
                : {
                    &lt;span class=
"hljs-string"&gt;"type": &lt;span class=
"hljs-string"&gt;"string",
                    &lt;span class=
"hljs-string"&gt;"description": &lt;span class=
"hljs-string"&gt;"City name to find the weather information for" 
                },
                : {
                    &lt;span class=
"hljs-string"&gt;"type": &lt;span class=
"hljs-string"&gt;"string",
                    &lt;span class=
"hljs-string"&gt;"enum":[&lt;span class=
"hljs-string"&gt;"Fahrenheit",&lt;span class=
"hljs-string"&gt;"Celsius"],
                    &lt;span class=
"hljs-string"&gt;"description": &lt;span class=
"hljs-string"&gt;"Desired unit for the temperature value"
                }
            },
            : [{
                &lt;span class=
"hljs-string"&gt;"href": &lt;span class=
"hljs-string"&gt;"http://example.org/weather/{city}/{?unit}",
                &lt;span class=
"hljs-string"&gt;"htv:methodName": &lt;span class=
"hljs-string"&gt;"GET"
            }]
        },
    ...
    },
    ...
}
</del>
</a>.
</p>
<p>
<del class="diff-old">uriVariables
are
mainly
for
properties
and
events.
When
retrofitting
an
existing
system,
it
may
be
necessary
to
use
uriVariables
for
actions.
In
general,
it
</del>
<ins class="diff-chg">The
listing
operation
</ins>
is
<del class="diff-old">recommended
to
avoid
</del>
<ins class="diff-chg">specified
as
</ins>
<code>
<del class="diff-old">uriVariables
</del>
<ins class="diff-chg">things
</ins>
</code>
<del class="diff-old">as
much
as
possible
when
a
new
WoT-based
system
is
designed.
</del>
<ins class="diff-chg">property
in
</ins><a href="#directory-api-spec" data-matched-text= "[[[#directory-api-spec]]]" class="sec-ref"><bdi class= "secno"><ins class="diff-chg">
7.3.2.4
</ins></bdi><ins class="diff-chg">
API
Specification
(Thing
Model)
</ins></a>.
</p>
</section>
<section id="exploration-directory-api-things-validation" class= "normative">
<div class="header-wrapper">
<h6 id="x7-3-2-1-6-validation">
<bdi class="secno">
<del class="diff-old">6.3.9.2
</del>
<ins class="diff-chg">7.3.2.1.6
</ins>
</bdi>
<del class="diff-old">contentType
</del>
<ins class="diff-chg">Validation
</ins></h6><a class="self-link" href= "#exploration-directory-api-things-validation" aria-label= "Permalink for Section 7.3.2.1.6">
</a>
</div>
<p>
<span class="rfc2119-assertion" id= "tdd-validation-syntactic">
The
<del class="diff-old">contentType
member
</del>
<ins class="diff-chg">syntactic
validation
of
TD
objects
before
storage
</ins>
is
<del class="diff-old">used
</del>
<em class="rfc2119">
<ins class="diff-chg">RECOMMENDED
</ins></em>
to
<del class="diff-old">assign
a
media
type
</del>
<ins class="diff-chg">prevent
common
erroneous
submissions.
</ins></span><span class= "rfc2119-assertion" id="tdd-validation-jsonschema"><ins class="diff-chg">
The
server
</ins><em class="rfc2119"><ins class="diff-chg">
SHOULD
</ins></em><ins class="diff-chg">
use
at
least
</ins><a href= "https://www.w3.org/TR/wot-thing-description11/#minimal-validation-serialization-json"><ins class="diff-chg">
Minimal
Validation
</ins></a><ins class="diff-chg">
as
defined
in
</ins>
[
<cite>
<del class="diff-old">RFC2046
</del>
<a class="bibref" data-link-type="biblio" href="#bib-wot-thing-description11" title= "Web of Things (WoT) Thing Description 1.1">
<ins class="diff-chg">wot-thing-description11
</ins>
</a>
</cite>
]
<ins class="diff-new">to
validate
TDs,
</ins>
including
<del class="diff-old">media
type
parameters
as
attribute-value
pairs
separated
by
a
;
character.
Example:
Example
34
...
: &lt;span class=
"hljs-string"&gt;"text/plain; charset=utf-8",
...
6.3.9.3
response
In
some
</del>
use
<del class="diff-old">cases,
the
form
metadata
</del>
of
the
<del class="diff-old">Interaction
Affordance
</del>
<a href= "https://www.w3.org/TR/wot-thing-description/#json-schema-for-validation">
<ins class="diff-chg">WoT
Thing
Description
(1.0)
JSON
Schema
</ins>
</a>
<del class="diff-old">not
only
describes
the
request,
but
also
provides
metadata
for
</del>
<ins class="diff-chg">or
</ins><a href= "https://www.w3.org/TR/wot-thing-description11/#json-schema-for-validation"><ins class="diff-chg">
WoT
Thing
Description
1.1
JSON
Schema
</ins></a>,<ins class="diff-chg">
and
</ins>
the
<del class="diff-old">expected
response.
For
instance,
an
Action
takePhoto
defines
an
input
</del>
<ins class="diff-chg">JSON
</ins>
schema
<del class="diff-old">to
submit
parameter
settings
of
a
camera
(aperture
priority,
timer,
etc.)
using
</del>
<ins class="diff-chg">defined
in
</ins><a href="#tdd-extensions-jsonschema" data-matched-text= "[[[#tdd-extensions-jsonschema]]]" class="sec-ref"><bdi class= "secno"><ins class="diff-chg">
A.
</ins></bdi>
JSON
<ins class="diff-new">Schema
for
WoT
Discovery
TD-extensions
</ins></a>
for
<a href="#dfn-wot-enriched-thing-description" class= "internalDFN" data-link-type="dfn" id= "ref-for-dfn-wot-enriched-thing-description-6">
<ins class="diff-new">Enriched
TDs
</ins></a>,<ins class="diff-new">
as
appropriate
based
on
</ins>
the
<del class="diff-old">request
payload
(i.e.,
"contentType":
"application/json"
).
The
output
</del>
<ins class="diff-chg">value
</ins>
of
<del class="diff-old">this
action
is
the
photo
taken,
which
is
available
in
JPEG
format,
for
example.
In
such
cases,
</del>
the
<code>
<del class="diff-old">response
member
is
used
</del>
<ins class="diff-chg">@context
</ins></code>.</span></p><p><ins class="diff-chg">
Additional
forms
of
validation
can
be
added
</ins>
to
<del class="diff-old">indicate
the
representation
format
</del>
<ins class="diff-chg">support
various
use
cases.
For
example,
a
use
case
may
require
stateful
validation
</ins>
of
the
<del class="diff-old">response
payload
(e.g.,
"contentType":
"image/jpeg"
).
Here
no
</del>
<ins class="diff-chg">input
TDs
to
ensure
that
the
</ins>
<code>
<del class="diff-old">output
</del>
<ins class="diff-chg">version
</ins>
</code>
<del class="diff-old">schema
</del>
<ins class="diff-chg">value
</ins>
is
<del class="diff-old">required,
as
the
content
type
fully
specifies
the
representation
format.
</del>
<ins class="diff-chg">initialized
and
updated
according
to
pre-defined
rules.
</ins>
</p>
<p>
<span class="rfc2119-assertion" id="tdd-validation-result">
If
<del class="diff-old">present,
</del>
the
<del class="diff-old">value
assigned
</del>
<ins class="diff-chg">server
fails
</ins>
to
<del class="diff-old">response
in
an
instance
of
Form
MUST
be
a
JSON
object.
If
present,
</del>
<ins class="diff-chg">validate
</ins>
the
<del class="diff-old">response
object
</del>
<ins class="diff-chg">TD
object,
it
</ins>
<em class= "rfc2119">
MUST
</em>
<del class="diff-old">contain
a
contentType
member
as
defined
in
</del>
<ins class="diff-chg">inform
</ins>
the
<del class="diff-old">Class
definition
of
ExpectedResponse
.
A
form
snippet
</del>
<ins class="diff-chg">client
</ins>
with
<ins class="diff-new">necessary
details
to
identify
and
resolve
</ins>
the
<del class="diff-old">response
member
is
shown
below
based
on
the
takePhoto
Action
</del>
<ins class="diff-chg">errors.
</ins></span><span class= "rfc2119-assertion" id="tdd-validation-response"><ins class="diff-chg">
The
validation
error
</ins><em class="rfc2119"><ins class="diff-chg">
MUST
</ins></em><ins class="diff-chg">
be
</ins>
described
<del class="diff-old">above:
Example
35
{
    ...
    "actions": {
        : {
            ...
            : [{
                : &lt;span class=
"hljs-string"&gt;"invokeaction",
                &lt;span class=
"hljs-string"&gt;"href": &lt;span class=
"hljs-string"&gt;"http://camera.example.com/api/snapshot",
                &lt;span class=
"hljs-string"&gt;"contentType": &lt;span class=
"hljs-string"&gt;"application/json",
                : {
                    &lt;span class=
"hljs-string"&gt;"contentType": &lt;span class=
"hljs-string"&gt;"image/jpeg"
                }
            }]
        }
    },
    ...
}
6.3.9.4
contentMediaType
and
contentEncoding
</del>
<ins class="diff-chg">as
Problem
Details
[
</ins><cite>
<a class="bibref" data-link-type="biblio" href= "#bib-rfc7807" title= "Problem Details for HTTP APIs">
<ins class="diff-new">RFC7807
</ins>
</a>
<del class="diff-old">In
some
cases
binary
data
is
embedded
in
text-based
values,
e.g.,
a
JSON
string-based
value
embeds
a
base64
encoded
image.
The
terms
contentMediaType
and
</del>
</cite>
<ins class="diff-chg">]
with
an
extension
field
called
</ins>
<code>
<del class="diff-old">contentEncoding
can
be
used
</del>
<ins class="diff-chg">validationErrors
</ins></code>,<ins class="diff-chg">
set
</ins>
to
<del class="diff-old">clarify
the
context
and
encoding
format
of
such
name-value
pairs.
A
sample
usage
</del>
<ins class="diff-chg">an
array
</ins>
of
<ins class="diff-new">objects
with
</ins>
<code>
<del class="diff-old">contentMediaType
</del>
<ins class="diff-chg">field
</ins>
</code>
and
<code>
<del class="diff-old">contentEncoding
is
shown
below:
Example
36
{
    ...
    "properties": {
        : { 
                &lt;span class=
"hljs-string"&gt;"description": &lt;span class=
"hljs-string"&gt;"Provides latest image", 
                &lt;span class=
"hljs-string"&gt;"type": &lt;span class=
"hljs-string"&gt;"string",
                &lt;span class=
"hljs-string"&gt;"contentMediaType": &lt;span class=
"hljs-string"&gt;"image/png",
                &lt;span class=
"hljs-string"&gt;"contentEncoding": &lt;span class=
"hljs-string"&gt;"base64",
                : [{ 
                            &lt;span class=
"hljs-string"&gt;"op": &lt;span class=
"hljs-string"&gt;"readproperty", 
                            &lt;span class=
"hljs-string"&gt;"href": &lt;span class=
"hljs-string"&gt;"coaps://mylamp.example.com/lastPicture", 
                            &lt;span class=
"hljs-string"&gt;"cov:methodName": &lt;span class=
"hljs-string"&gt;"GET",
                            &lt;span class=
"hljs-string"&gt;"contentType": &lt;span class=
"hljs-string"&gt;"application/json" 
                    }] 
        }
    },
    ...
}
6.3.9.5
Top
level
forms
When
forms
</del>
<ins class="diff-chg">description
</ins>
</code>
<ins class="diff-new">fields.
</ins></span><ins class="diff-new">
This
</ins>
is
<del class="diff-old">present
at
the
top
level,
it
can
be
used
</del>
<ins class="diff-chg">necessary
</ins>
to
<del class="diff-old">describe
meta
interactions
offered
by
a
Thing
.
For
example,
the
operation
types
readallproperties
and
writeallproperties
are
for
meta
interactions
with
a
Thing
by
which
Consumers
can
read,
write
or
observe
all
properties
at
once.
In
</del>
<ins class="diff-chg">represent
</ins>
the
<del class="diff-old">example
below,
</del>
<ins class="diff-chg">error
in
</ins>
a
<del class="diff-old">forms
member
is
included
</del>
<ins class="diff-chg">machine-readable
way.
</ins><span class= "rfc2119-assertion" id="tdd-validation-response-utf-8"><ins class="diff-chg">
All
validation
error
responses
described
using
Problem
Details
</ins><em class="rfc2119"><ins class="diff-chg">
MUST
</ins></em><ins class="diff-chg">
be
encoded
using
UTF-8.
</ins></span><span class="rfc2119-assertion" id= "tdd-validation-response-lang"><ins class="diff-chg">
Validation
error
responses
</ins><em class="rfc2119"><ins class="diff-chg">
MAY
</ins></em><ins class="diff-chg">
report
details
</ins>
in
<ins class="diff-new">different
languages
using
proactive
negotiation,
if
</ins>
the
<del class="diff-old">TD
root
object
and
the
Consumer
can
use
the
submission
target
</del>
<code>
<del class="diff-old">https://mylamp.example.com/properties
both
to
read
or
write
all
Properties
(i.e.,
on
,
brightness
,
and
timer
</del>
<ins class="diff-chg">Accept-Language
</ins>
</code>
<del class="diff-old">)
of
</del>
<ins class="diff-chg">header
field
has
been
set
in
</ins>
the
<del class="diff-old">Thing
</del>
<ins class="diff-chg">HTTP
request
[
</ins><cite><a class= "bibref" data-link-type="biblio" href="#bib-rfc7231" title= "Hypertext Transfer Protocol (HTTP/1.1): Semantics and Content"><ins class="diff-chg">
RFC7231
</ins>
</a>
<del class="diff-old">in
a
single
protocol
transaction.
</del>
</cite>
<ins class="diff-chg">].
</ins></span>
</p>
<p>
<a href="#example-validation-error" data-matched-text= "[[[#example-validation-error]]]" class="box-ref">
Example
<bdi>
<del class="diff-old">37
</del>
<ins class="diff-chg">9
</ins>
</bdi>
</a>
<del class="diff-old">{
    ...
    "properties": {
        : {
            : &lt;span class=
"hljs-string"&gt;"boolean",
            : [...]
        },
        "brightness": {
            : &lt;span class=
"hljs-string"&gt;"number",
            : [...]
        },
        "timer": {
            : &lt;span class=
"hljs-string"&gt;"integer",
            : [...]
        }
    },
    ...
    "forms": [{
        : &lt;span class=
"hljs-string"&gt;"readallproperties",
        : &lt;span class=
"hljs-string"&gt;"https://mylamp.example.com/properties",
        &lt;span class=
"hljs-string"&gt;"contentType",
        &lt;span class=
"hljs-string"&gt;"htv:methodName": &lt;span class=
"hljs-string"&gt;"GET"
    }, 
    {
        "op": &lt;span class=
"hljs-string"&gt;"writeallproperties",
        : &lt;span class=
"hljs-string"&gt;"https://mylamp.example.com/properties",
        &lt;span class=
"hljs-string"&gt;"contentType",
        &lt;span class=
"hljs-string"&gt;"htv:methodName": &lt;span class=
"hljs-string"&gt;"PUT"
    }]
}
Thing-level
uriVariables
can
be
used
here
to
supply
further
variables
to
the
operation
or
to
specify
a
list
of
Property
Affordance
names
for
a
readmultipleproperties
operation.
In
the
</del>
<ins class="diff-chg">is
an
</ins>
example
<del class="diff-old">below,
the
unit
for
the
properties
can
be
set
via
such
a
variable
and
the
desired
list
of
properties
can
be
set:
</del>
<ins class="diff-chg">error
response
with
two
validation
errors.
</ins>
</p>
<aside class="example" id="example-validation-error">
<div class="marker">
<a class="self-link" href= "#example-validation-error">
Example
<bdi>
<del class="diff-old">38
</del>
<ins class="diff-chg">9
</ins>
</bdi>
</a>
<span class= "example-title">:
<ins class="diff-new">Example
validation
error
response
</ins></span>
</div>
<del class="diff-old">{
    ...
    "properties": {
        : {
            : &lt;span class=
"hljs-string"&gt;"number",
            : [...]
        },
        "brightness": {
            : &lt;span class=
"hljs-string"&gt;"number",
            : [...]
        },
        "humidity": {
            : &lt;span class=
"hljs-string"&gt;"integer",
            : [...]
        }
    },
    "uriVariables":{
        :{
            : &lt;span class=
"hljs-string"&gt;"string",
</del>
<pre aria-busy="false"><code class="hljs json">{
    <span class="hljs-attr">"title"</span>: <span class=
<ins class="diff-chg">"hljs-string">"Bad Request"</span>,
</ins>    <span class="hljs-attr">"status"</span>: <span class=<ins class="diff-chg">
"hljs-number">400</span>,
</ins>    <span class="hljs-attr">"detail"</span>: <span class=<ins class="diff-chg">
"hljs-string">"The input did not pass the JSON Schema validation"</span>,
</ins>    <span class="hljs-attr">"instance"</span>: <span class=<ins class="diff-chg">
"hljs-string">"/errors/30585584-cce2-4d04-8079-67b33ffdafbc"</span>,
</ins>    <span class="hljs-attr">"validationErrors"</span>: [<ins class="diff-chg">
        {
</ins>            <span class="hljs-attr">"field"</span>: <span class=<ins class="diff-chg">
"hljs-string">"(root)"</span>,
</ins>
            <span class=
<del class="diff-old">"hljs-string"&gt;"description": &lt;span class=
"hljs-string"&gt;"Comma separated list of property names to select."
</del>
<ins class="diff-chg">"hljs-attr">"description"</span>: <span class=
"hljs-string">"security is required"</span>
</ins>
        },
<del class="diff-old">        "unitSystem":{
            : &lt;span class=
"hljs-string"&gt;"string",
            :[&lt;span class=
"hljs-string"&gt;"metric",&lt;span class=
"hljs-string"&gt;"imperial",&lt;span class=
"hljs-string"&gt;"uscustomary"],
</del>
<ins class="diff-chg">        {
</ins>            <span class="hljs-attr">"field"</span>: <span class=<ins class="diff-chg">
"hljs-string">"properties.status.forms.0.href"</span>,
</ins>
            <span class=
<del class="diff-old">"hljs-string"&gt;"description":&lt;span class=
"hljs-string"&gt;"System of Measurement that will be used for the values"
</del>
<ins class="diff-chg">"hljs-attr">"description"</span>: <span class=
"hljs-string">"Invalid type. Expected: string, given: integer"</span>
</ins>
        }
<del class="diff-old">    }
    "forms": [{
        : &lt;span class=
"hljs-string"&gt;"readallproperties",
        : &lt;span class=
"hljs-string"&gt;"https://mything.example.com/properties{?unitSystem}",
        &lt;span class=
"hljs-string"&gt;"contentType",
        &lt;span class=
"hljs-string"&gt;"htv:methodName": &lt;span class=
"hljs-string"&gt;"GET"
    }, 
    {
        "op": &lt;span class=
"hljs-string"&gt;"readmultipleproperties",
        : &lt;span class=
"hljs-string"&gt;"https://mylamp.example.com/properties{?propertyNames,unitSystem}",
        &lt;span class=
"hljs-string"&gt;"contentType",
        &lt;span class=
"hljs-string"&gt;"htv:methodName": &lt;span class=
"hljs-string"&gt;"GET"
    }]
</del>
<ins class="diff-chg">    ]
</ins>
}
</code>
</pre>
</aside>
<div class="issue closed" id="issue-container-number-99">
<div role="heading" class="issue-title marker" id="h-issue-6" aria-level="7">
<a href= "https://github.com/w3c/wot-discovery/issues/99">
<span class= "issue-number">
<ins class="diff-new">Issue
99
</ins></span></a><span class="issue-label">:<ins class="diff-new">
Define
requirements
and
add
section
for
validation
</ins></span>
</div>
<del class="diff-old">For
</del>
<p dir="auto">
<ins class="diff-chg">How
much
validation
does
</ins>
a
<del class="diff-old">readmultipleproperties
operation,
an
example
HTTP
GET
request
</del>
<ins class="diff-chg">directory
need
</ins>
to
<del class="diff-old">the
URI
https://mylamp.example.com/properties?propertyNames=humidity,temperature&amp;unitSystem=metric
would
return
the
values
humidity
and
temperature
Property
Affordances,
with
the
metric
System
of
Measurement.
</del>
<ins class="diff-chg">do?
</ins>
</p>
<del class="diff-old">In
the
case
of
operation
type
writeallproperties
,
it
is
expected
that
the
Consumer
provides
all
writable
(non
readOnly
)
properties
and
the
(new)
assigned
values
(e.g.,
within
payload).
Similarly,
for
the
writemultipleproperties
operation
type,
</del>
<ol dir="auto">
<li>
<ins class="diff-chg">If
</ins>
it
<ins class="diff-new">only
supports
syntactic
queries,
</ins>
is
<del class="diff-old">expected
that
the
Consumer
provides
writable
(non
readOnly
)
properties.
On
the
Thing
side,
Thing
is
expected
</del>
<ins class="diff-chg">JSONSchema
validation
sufficient?
Do
we
also
use
SHACL?
</ins></li><li><ins class="diff-chg">
If
we
support
SPARQL,
do
we
need
</ins>
to
<del class="diff-old">return
readable
(non
writeOnly
)
properties
in
</del>
<ins class="diff-chg">do
more
to
make
sure
</ins>
the
<del class="diff-old">case
</del>
<ins class="diff-chg">ontologies
used
are
correct?
</ins></li><li><ins class="diff-chg">
Is
there
a
subset
</ins>
of
<del class="diff-old">readmultipleproperties
and
readallproperties
operation
types.
</del>
<ins class="diff-chg">TD
assertions
we
should
check?
</ins></li></ol></div>
</section>
</section>
<section id="exploration-directory-api-notification" class= "normative">
<div class="header-wrapper">
<h5 id="x7-3-2-2-events-api">
<bdi class="secno">
<del class="diff-old">6.3.10
</del>
<ins class="diff-chg">7.3.2.2
</ins>
</bdi>
<del class="diff-old">Data
Schemas
</del>
<ins class="diff-chg">Events
API
</ins></h5><a class="self-link" href="#exploration-directory-api-notification" aria-label="Permalink for Section 7.3.2.2">
</a>
</div>
<p>
The
<del class="diff-old">data
schemas
of
</del>
<ins class="diff-chg">Notification
API
is
to
notify
clients
about
</ins>
the
<del class="diff-old">WoT
Thing
Description
defined
through
</del>
<ins class="diff-chg">changes
to
</ins><a href="#dfn-td" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-td-40"><ins class="diff-chg">
TDs
</ins></a><ins class="diff-chg">
maintained
within
</ins>
the
<ins class="diff-chg">directory.
</ins><span class="rfc2119-assertion" id="tdd-notification"><ins class="diff-chg">
Directories
</ins><em class="rfc2119"><ins class="diff-chg">
MAY
</ins></em><ins class="diff-chg">
implement
the
Notification
API.
</ins></span>
<del class="diff-old">DataSchema
</del>
</p>
<p>
<del class="diff-old">Class
are
based
on
a
subset
of
</del>
<span class="rfc2119-assertion" id="tdd-notification-sse">
<ins class="diff-chg">The
Notification
API
</ins><em class="rfc2119"><ins class="diff-chg">
MUST
</ins></em><ins class="diff-chg">
follow
</ins>
the
<del class="diff-old">JSON
Schema
terms
</del>
<ins class="diff-chg">Server-Sent
Events
(SSE)
</ins>
[
<cite>
<del class="diff-old">JSON-SCHEMA
</del>
<a class="bibref" data-link-type= "biblio" href="#bib-eventsource" title= "Server-Sent Events">
<ins class="diff-chg">EVENTSOURCE
</ins>
</a>
</cite>
<del class="diff-old">].
Thus,
serializations
of
the
TD
data
schemas
can
be
fed
directly
into
JSON
Schema
validator
implementations
</del>
<ins class="diff-chg">]
specifications
</ins>
to
<del class="diff-old">validate
the
data
exchanged
with
Things
.
Data
schema
serialization
applies
</del>
<ins class="diff-chg">serve
events
</ins>
to
<ins class="diff-new">clients
at
</ins>
<code>
<del class="diff-old">PropertyAffordance
</del>
<ins class="diff-chg">/events
</ins>
</code>
<del class="diff-old">instances,
</del>
<ins class="diff-chg">endpoint.
</ins></span><ins class="diff-chg">
In
particular,
</ins>
the
<del class="diff-old">values
assigned
</del>
<ins class="diff-chg">server
responds
</ins>
to
<del class="diff-old">input
</del>
<ins class="diff-chg">successful
requests
with
200
(OK)
status
</ins>
and
<code>
<del class="diff-old">output
</del>
<ins class="diff-chg">text/event-stream
</ins>
</code>
<del class="diff-old">in
</del>
<ins class="diff-chg">Content
Type.
Re-connecting
clients
may
continue
from
the
last
event
by
providing
the
last
event
ID
as
</ins>
<code>
<del class="diff-old">ActionAffordance
</del>
<ins class="diff-chg">Last-Event-ID
</ins>
</code>
<del class="diff-old">instances,
</del>
<ins class="diff-chg">header
value.
</ins><span class="rfc2119-assertion" id="tdd-notification-event-id"><ins class="diff-chg">
The
server
</ins><em class="rfc2119"><ins class="diff-chg">
SHOULD
</ins></em><ins class="diff-chg">
provide
an
event
ID
as
</ins>
the
<del class="diff-old">values
assigned
to
</del>
<code>
<del class="diff-old">subscription
,
data
,
and
cancellation
</del>
<ins class="diff-chg">id
</ins>
</code>
<ins class="diff-new">field
</ins>
in
<del class="diff-old">EventAffordance
instances,
</del>
<ins class="diff-chg">each
event
</ins>
and
<del class="diff-old">the
value
assigned
</del>
<ins class="diff-chg">respond
</ins>
to
<del class="diff-old">uriVariables
in
instances
of
Subclasses
of
InteractionAffordance
(when
a
form
object
uses
a
URI
Template).
</del>
<ins class="diff-chg">re-connecting
clients
by
delivering
all
missed
events.
</ins></span>
</p>
<p>
<del class="diff-old">All
name-value
pairs
of
an
instance
of
one
</del>
<ins class="diff-chg">The
rest
</ins>
of
<ins class="diff-new">this
section
describes
</ins>
the
<del class="diff-old">Subclasses
</del>
<ins class="diff-chg">implementation
details
on
top
</ins>
of
<del class="diff-old">DataSchema
,
where
</del>
the
<del class="diff-old">name
is
a
Vocabulary
Term
included
in
</del>
<ins class="diff-chg">SSE
protocol.
Realizing
</ins>
the
<del class="diff-old">Signature
of
that
Subclass
or
</del>
<ins class="diff-chg">notification
functionality
using
other
protocols
such
as
MQTT
are
possible
and
may
be
formalized
</ins>
in
<del class="diff-old">the
Signature
</del>
<ins class="diff-chg">future
versions
</ins>
of
<del class="diff-old">DataSchema
,
</del>
<ins class="diff-chg">this
specification.
</ins></p><dl><dt><ins class="diff-chg">
Event
Types
</ins></dt><dd><span class="rfc2119-assertion" id= "tdd-notification-event-types"><ins class="diff-chg">
The
server
</ins><em class= "rfc2119">
MUST
</em>
<del class="diff-old">be
serialized
as
members
</del>
<ins class="diff-chg">produce
events
attributed
to
the
lifecycle
</ins>
of
the
<del class="diff-old">JSON
object
that
results
from
serializing
</del>
<ins class="diff-chg">Thing
Descriptions
within
</ins>
the
<ins class="diff-new">directory
using
</ins>
<code>
<del class="diff-old">DataSchema
</del>
<ins class="diff-chg">thing_created
</ins></code>,<code><ins class="diff-chg">
thing_updated
</ins></code>,<ins class="diff-chg">
and
</ins><code><ins class="diff-chg">
thing_deleted
</ins>
</code>
<del class="diff-old">Subclass
's
instance,
with
the
Vocabulary
Term
as
name.
</del>
<ins class="diff-chg">event
types.
</ins>
</span>
</dd>
<dt>
<ins class="diff-chg">Event
Filtering
</ins></dt><dd><ins class="diff-chg">
The
API
enables
server-side
filtering
of
events
to
reduce
resource
consumption
by
delivering
only
the
events
required
by
clients.
Client
libraries
may
offer
additional
filtering
capabilities
on
the
client-side.
</ins>
<p>
<span class="rfc2119-assertion" id= "tdd-notification-filter-type">
The
<del class="diff-old">value
assigned
to
properties
in
an
instance
of
ObjectSchema
</del>
<ins class="diff-chg">server
</ins><em class= "rfc2119">
MUST
</em>
<del class="diff-old">be
serialized
as
a
JSON
object.
</del>
<ins class="diff-chg">support
event
filtering
based
on
the
event
type
given
by
the
client
upon
subscription.
</ins>
</span>
</p>
<p>
<del class="diff-old">The
values
assigned
to
enum
,
</del>
<ins class="diff-chg">For
example,
given
the
URI
Template
</ins>
<code>
<del class="diff-old">required
,
and
</del>
<ins class="diff-chg">/events{/type}
</ins></code>:</p><ul><li>
<code>
<del class="diff-old">oneOf
</del>
<ins class="diff-chg">/events/thing_created
</ins>
</code>
<del class="diff-old">in
an
instance
</del>
<ins class="diff-chg">instructs
the
server
to
only
deliver
events
</ins>
of
<ins class="diff-new">type
</ins>
<code>
<del class="diff-old">DataSchema
</del>
<ins class="diff-chg">thing_created
</ins>
</code>
<del class="diff-old">MUST
be
serialized
as
a
JSON
array.
</del>
</li>
<li>
<del class="diff-old">The
value
assigned
to
</del>
<code>
<del class="diff-old">items
in
an
instance
of
ArraySchema
</del>
<ins class="diff-chg">/events
</ins>
</code>
<del class="diff-old">MUST
be
serialized
as
a
JSON
object
or
a
JSON
array
containing
JSON
objects.
A
TD
snippet
data
schema
members
is
given
below.
Note
that
</del>
<ins class="diff-chg">instructs
</ins>
the
<del class="diff-old">surrounding
object
may
be
</del>
<ins class="diff-chg">server
to
deliver
all
events
</ins></li></ul><p><ins class="diff-chg">
The
clients
need
to
subscribe
separately
to
receive
</ins>
a
<del class="diff-old">data
schema
object
(e.g.,
for
</del>
<ins class="diff-chg">subset
of
the
events
(e.g.
only
</ins>
<code>
<del class="diff-old">input
</del>
<ins class="diff-chg">thing_created
</ins>
</code>
and
<code>
<del class="diff-old">output
</del>
<ins class="diff-chg">thing_deleted
</ins>
</code>
)
<del class="diff-old">or
</del>
<ins class="diff-chg">from
the
server.
When
using
HTTP/2,
multiple
subscriptions
on
the
same
domain
(HTTP
streams)
get
multiplexed
on
</ins>
a
<del class="diff-old">Property
object,
which
would
contain
additional
members.
</del>
<ins class="diff-chg">single
connection.
</ins>
</p>
<del class="diff-old">Example
39
</del>
</dd>
<dt>
<ins class="diff-chg">Event
Data
</ins></dt><dd><p>
<del class="diff-old">:
Sample
of
a
DataSchema
</del>
<span class="rfc2119-assertion" id="tdd-notification-data">
<ins class="diff-chg">The
event
data
</ins><em class="rfc2119"><ins class="diff-chg">
MUST
</ins></em><ins class="diff-chg">
contain
the
JSON
</ins>
serialization
<ins class="diff-new">of
the
event
object.
</ins>
</span>
<del class="diff-old">...
"type": ,
: {
    : {
        : &lt;span class=
"hljs-string"&gt;"Status",
        : &lt;span class=
"hljs-string"&gt;"string",
        : [&lt;span class=
"hljs-string"&gt;"On", &lt;span class=
"hljs-string"&gt;"Off", &lt;span class=
"hljs-string"&gt;"Error"]
    },
    "brightness": {
        : &lt;span class=
"hljs-string"&gt;"Brightness value",
        : &lt;span class=
"hljs-string"&gt;"number",
        : &lt;span class=
"hljs-number"&gt;0.0,
        : &lt;span class=
"hljs-number"&gt;100.0
    },
    "rgb": {
        : &lt;span class=
"hljs-string"&gt;"RGB color value",
        : &lt;span class=
"hljs-string"&gt;"array",
        : {
            : &lt;span class=
"hljs-string"&gt;"number",
            &lt;span class=
"hljs-string"&gt;"minimum",
            &lt;span class=
"hljs-string"&gt;"maximum"
        },
        "minItems": ,
        : &lt;span class=
"hljs-number"&gt;3
    }
},
...
</del>
The
<del class="diff-old">terms
readOnly
and
writeOnly
can
be
used
to
signal
which
</del>
<ins class="diff-chg">event
</ins>
data
<del class="diff-old">items
are
exchanged
in
read
interactions
(i.e.,
when
reading
a
Property)
and
which
in
write
interactions
(i.e.,
when
writing
a
Property).
This
can
be
used
as
</del>
<ins class="diff-chg">object
is
</ins>
a
<del class="diff-old">workaround
when
Properties
of
an
unconventional
Thing
</del>
<a href="#dfn-wot-partial-thing-description" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-wot-partial-thing-description-2">
<ins class="diff-chg">Partial
TD
</ins>
</a>
<del class="diff-old">exhibit
different
data
for
reading
and
writing,
which
can
be
the
case
when
augmenting
an
existing
device
</del>
or
<del class="diff-old">service
with
a
Thing
Description.
</del>
<ins class="diff-chg">the
whole
</ins><a href="#dfn-td" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-td-41"><ins class="diff-chg">
TD
</ins></a><ins class="diff-chg">
object
depending
on
the
request:
</ins>
</p>
<ul>
<li>
<p>
<del class="diff-old">A
TD
snippet
with
</del>
<span class="rfc2119-assertion" id= "tdd-notification-data-td-id">
<ins class="diff-chg">The
event
data
object
</ins><em class= "rfc2119"><ins class="diff-chg">
MUST
</ins></em><ins class="diff-chg">
at
least
include
</ins>
the
<del class="diff-old">usage
</del>
<ins class="diff-chg">identifier
</ins>
of
<del class="diff-old">readOnly
and
writeOnly
is
given
below:
</del>
<ins class="diff-chg">the
TD
created,
updated,
or
deleted
at
that
event
in
</ins><a href= "#dfn-wot-partial-thing-description" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-wot-partial-thing-description-3"><ins class="diff-chg">
Partial
TD
</ins></a><ins class="diff-chg">
form.
</ins></span>
</p>
<aside class="example" id= "example-creation-and-deletion-sse-events-for-a-td">
<div class="marker">
<a class="self-link" href= "#example-creation-and-deletion-sse-events-for-a-td">
Example
<bdi>
<del class="diff-old">40
</del>
<ins class="diff-chg">10
</ins>
</bdi>
</a>
<span class="example-title">:
<ins class="diff-new">Creation
and
deletion
SSE
events
for
a
TD
</ins></span>
</div>
<del class="diff-old">...
: {
    : {
        &lt;span class=
"hljs-string"&gt;"description",
        : &lt;span class=
"hljs-string"&gt;"object",
        : {
            : {
                &lt;span class=
"hljs-string"&gt;"type": &lt;span class=
"hljs-string"&gt;"string",
                &lt;span class=
"hljs-string"&gt;"enum": [&lt;span class=
"hljs-string"&gt;"On"],
                &lt;span class=
"hljs-string"&gt;"readOnly": &lt;span class=
"hljs-literal"&gt;true
            },
            : {
                &lt;span class=
"hljs-string"&gt;"type": &lt;span class=
"hljs-string"&gt;"string",
                &lt;span class=
"hljs-string"&gt;"enum": [&lt;span class=
"hljs-string"&gt;"On"],
                &lt;span class=
"hljs-string"&gt;"writeOnly": &lt;span class=
"hljs-literal"&gt;true
            }
        },
        : [...]
    }
}
...
</del>
<pre aria-busy="false"><code class="hljs css">event: thing_created
<ins class="diff-chg">data: {<span class="hljs-string">"id"</span>: <span class=
"hljs-string">"urn:example:simple-td"</span>}
id: event_1
event: thing_deleted
data: {<span class="hljs-string">"id"</span>: <span class=
"hljs-string">"urn:example:simple-td"</span>}
id:
event_2
</ins>
</code>
</pre>
</aside>
</li>
<li>
<p>
<span class="rfc2119-assertion" id= "tdd-notification-data-create-full">
When
<del class="diff-old">the
</del>
<code>
<del class="diff-old">status
</del>
<ins class="diff-chg">diff
</ins>
</code>
<del class="diff-old">Property
is
read,
the
status
data
</del>
<ins class="diff-chg">query
parameter
</ins>
is
<del class="diff-old">returned
using
a
latestStatus
member
in
the
payload.
To
update
the
</del>
<ins class="diff-chg">set
to
</ins>
<code>
<del class="diff-old">status
</del>
<ins class="diff-chg">true
</ins>
</code>
<del class="diff-old">Property,
</del>
<ins class="diff-chg">and
</ins>
the
<del class="diff-old">new
value
must
be
provided
through
a
</del>
<ins class="diff-chg">event
has
</ins>
<code>
<del class="diff-old">newStatusValue
</del>
<ins class="diff-chg">thing_created
</ins>
</code>
<del class="diff-old">member
in
</del>
<ins class="diff-chg">type,
</ins>
the
<del class="diff-old">payload.
As
an
additional
feature,
a
Thing
Description
instance
allows
</del>
<ins class="diff-chg">server
</ins><em class= "rfc2119"><ins class="diff-chg">
MAY
</ins></em><ins class="diff-chg">
return
</ins>
the
<del class="diff-old">usage
of
a
unit
member
within
data
schemas.
This
can
be
used
to
associate
a
unit
of
measure
to
a
data
item.
Its
string
value
can
be
selected
freely.
However,
it
is
recommended
to
select
units
defined
in
well-known
Vocabularies
.
See
7.
</del>
<ins class="diff-chg">whole
</ins>
TD
<del class="diff-old">Context
Extensions
for
an
example.
6.4
Identification
The
JSON-based
serialization
of
Thing
Descriptions
is
identified
by
the
media
type
application/td+json
or
the
CoAP
Content-Format
ID
432
(see
</del>
<ins class="diff-chg">object
as
event
data.
</ins></span>
<del class="diff-old">12.
IANA
Considerations
).
</del>
</p>
<aside class="example" id="example-create-event-full">
<div class="marker">
<del class="diff-old">6.5
</del>
<a class="self-link" href= "#example-create-event-full">
<ins class="diff-chg">Example
</ins><bdi><ins class="diff-chg">
11
</ins>
</bdi>
<del class="diff-old">Validation
</del>
</a>
<del class="diff-old">Editor's
note
:
No
Tag
Yet
This
section
refers
to
tagging
of
assertions
into
different
categories
for
the
purposes
of
validation.
This
has
not
yet
been
done
but
will
be
done
prior
to
CR
transition.
In
several
contexts
automatic
validation
of
a
JSON-based
serialization
of
a
Thing
Description
is
useful.
Formally,
a
valid
TD
must
satisfy
all
the
assertions
in
this
specification,
but
not
all
assertions
can
be
validated
given
only
the
JSON
serialization,
</del>
<span class= "example-title">:
<ins class="diff-chg">Full
creation
SSE
event
</ins>
for
<del class="diff-old">instance,
the
assertions
listed
under
8.
Behavioral
Assertions
that
relate
</del>
a
TD
<del class="diff-old">to
the
behavior
of
a
Thing
that
it
describes.
Extensions
are
also
problematic,
in
that
even
if
formal
metadata
is
given
for
validating
an
extension,
dynamically
fetching
this
metadata
in
a
deployment
might
pose
a
privacy
risk.
In
this
section,
therefore,
we
name
and
define
various
levels
of
validation
appropriate
for
different
contexts.
</del>
</span>
<del class="diff-old">6.5.1
Minimal
Validation
</del>
</div>
<pre aria-busy="false"><code class="hljs css">event: thing_created
<ins class="diff-chg">data: {
data:     <span class="hljs-string">"@context"</span>: [
data:         <span class=
"hljs-string">"https://www.w3.org/2019/wot/td/v1"</span>,
data:         <span class=
"hljs-string">"https://w3c.github.io/wot-discovery/context/discovery-context.jsonld"</span>
data:     ],
data:     <span class=
"hljs-string">"description"</span>: <span class=
"hljs-string">"This is a new TD"</span>,
data:     <span class="hljs-string">"id"</span>: <span class=
"hljs-string">"urn:example:simple-td"</span>,
data:     <span class="hljs-string">"security"</span>: <span class=
"hljs-string">"basic_sc"</span>,
data:     <span class="hljs-string">"securityDefinitions"</span>: {
data:         <span class="hljs-string">"basic_sc"</span>: {
data:             <span class=
"hljs-string">"scheme"</span>: <span class=
"hljs-string">"basic"</span>
data:         }
data:     },
data:     <span class="hljs-string">"registration"</span>: {
data:         <span class=
"hljs-string">"created"</span>: <span class=
"hljs-string">"2021-01-19T17:02:00Z"</span>,
data:         <span class=
"hljs-string">"modified"</span>: <span class=
"hljs-string">"2021-01-19T17:02:00Z"</span>
data:     },
data:     <span class="hljs-string">"title"</span>: <span class=
"hljs-string">"Simple TD"</span>
data: }
id:
event_1
</ins></code>
</pre>
<div class="issue" id="issue-container-number-148-5">
<div role="heading" class="issue-title marker" id="h-issue-7" aria-level="6">
<del class="diff-old">Minimal
Validation
is
appropriate
where
validation
needs
to
be
self-contained
(e.g.
devices
on
isolated
networks).
It
does
not
attempt
to
validate
context
extensions
and
vocabularies.
In
practice,
these
assertions
can
be
validated
using
a
JSON
Schema
in
combination
with
a
few
spot
checks,
for
example
to
check
that
security
schema
names
have
matching
definitions.
This
level
of
validation
includes
all
assertions
implied
by
normative
tables
in
this
document
as
well
as
all
assertions
marked
with
the
"Minimal"
tag.
</del>
<a href= "https://github.com/w3c/wot-discovery/issues/148">
<del class="diff-old">6.5.2
Basic
Validation
</del>
<span class= "issue-number">
<ins class="diff-chg">Issue
148
</ins></span>
</a>
<del class="diff-old">Basic
validation
is
appropriate
in
situations
where
network
access
is
possible
and
does
not
pose
a
privacy
risk,
and
for
relatively
unconstrained
computing
requirements.
It
is
suitable
for
gateways,
for
example,
but
not
for
endpoints,
since
semantic
processing
is
required.
It
can
validate
extensions.
In
this
case,
context
definition
files
and
SHACL
definitions
can
be
used
to
validate
additional
assertions
and
check
TDs
for
semantic
consistency.
In
addition,
if
</del>
<span class="issue-label">:
<ins class="diff-chg">Discovery
</ins>
context
<del class="diff-old">definitions
</del>
and
<del class="diff-old">SHACL
constraints
for
extension
vocabularies
can
be
fetched,
then
these
can
be
used
to
validate
extensions.
This
level
of
validation
includes
all
those
covered
by
6.5.1
Minimal
Validation
as
well
as
all
assertions
marked
with
the
"Basic"
tag.
6.5.3
Full
Validation
</del>
<ins class="diff-chg">namespace
under
w3.org/ns
</ins></span>
</div>
<del class="diff-old">Full
validation
confirms
that
all
the
assertions
in
this
document
</del>
<div class="">
<ins class="diff-chg">The
context
URIs
</ins>
are
<del class="diff-old">satisfied,
including
the
assertions
given
in
8.
Behavioral
Assertions
that
confirm
the
TD
is
consistent
with
the
Thing
it
describes.
This
level
of
validation
is
appropriate
during
development,
before
release,
and
possibly
after
installation.
Validation
during
development
would
have
to
be
on
test
Things.
Actual
installation
of
instances
of
such
Things
requires
updating
the
TD
with
appropriate
per-instance
identifiers
and
URLs
</del>
<ins class="diff-chg">tentative
</ins>
and
<del class="diff-old">so
for
maximum
assurance,
in-field
validation
would
have
</del>
<ins class="diff-chg">subject
</ins>
to
<del class="diff-old">take
place
after
installation.
7.
TD
Context
Extensions
</del>
<ins class="diff-chg">change.
</ins>
</div>
</div>
</aside>
</li>
<li>
<p>
<del class="diff-old">This
section
</del>
<span class="rfc2119-assertion" id= "tdd-notification-data-update-diff">
<ins class="diff-chg">When
</ins><code><ins class="diff-chg">
diff
</ins></code><ins class="diff-chg">
query
parameter
</ins>
is
<del class="diff-old">non-normative.
In
addition
</del>
<ins class="diff-chg">set
</ins>
to
<code>
<ins class="diff-new">true
</ins></code><ins class="diff-new">
and
</ins>
the
<del class="diff-old">standard
Vocabulary
definitions
in
5.
TD
Information
Model
,
the
WoT
Thing
Description
offers
the
possibility
to
add
context
knowledge
from
additional
namespaces.
This
mechanism
can
be
used
to
enrich
</del>
<ins class="diff-chg">event
has
</ins><code><ins class="diff-chg">
thing_updated
</ins></code><ins class="diff-chg">
type,
</ins>
the
<del class="diff-old">Thing
Description
instances
with
additional
(e.g.,
domain-specific)
semantics.
It
can
also
be
used
to
import
additional
Protocol
Bindings
or
new
security
schemes
in
</del>
<ins class="diff-chg">server
</ins><em class= "rfc2119"><ins class="diff-chg">
MAY
</ins></em><ins class="diff-chg">
inform
</ins>
the
<del class="diff-old">future.
For
such
TD
Context
Extensions
,
</del>
<ins class="diff-chg">client
about
</ins>
the
<del class="diff-old">Thing
Descriptions
use
</del>
<ins class="diff-chg">updated
parts
following
</ins>
the
<ins class="diff-new">JSON
Merge
Patch
[
</ins><cite><a class="bibref" data-link-type="biblio" href="#bib-rfc7396" title= "JSON Merge Patch"><ins class="diff-new">
RFC7396
</ins></a></cite><ins class="diff-new">
]
format.
</ins></span><span class= "rfc2119-assertion" id="tdd-notification-data-update-id"><ins class="diff-new">
A
</ins>
<code>
<del class="diff-old">@context
</del>
<ins class="diff-chg">thing_updated
</ins>
</code>
<del class="diff-old">mechanism
known
from
JSON-LD
</del>
<ins class="diff-chg">event
data
that
is
based
on
JSON
Merge
Patch
</ins>
[
<cite>
<del class="diff-old">json-ld11
</del>
<a class="bibref" data-link-type="biblio" href= "#bib-rfc7396" title="JSON Merge Patch">
<ins class="diff-chg">RFC7396
</ins>
</a>
</cite>
<del class="diff-old">].
When
using
TD
Context
Extensions
,
</del>
<ins class="diff-chg">]
</ins><em class="rfc2119"><ins class="diff-chg">
MUST
</ins></em><ins class="diff-chg">
always
include
</ins>
the
<del class="diff-old">value
of
@context
</del>
<ins class="diff-chg">identifier
</ins>
of
the
<del class="diff-old">Class
Thing
is
an
Array
with
additional
elements
</del>
<ins class="diff-chg">TD
regardless
</ins>
of
<del class="diff-old">type
anyURI
identifying
JSON-LD
context
files
or
Map
containing
namespace
IRIs
as
defined
in
5.3.1.1
Thing
</del>
<ins class="diff-chg">whether
it
is
changed.
</ins></span>
<del class="diff-old">.
</del>
</p>
<p>
The
<del class="diff-old">serialization
rules
for
complex
types
in
6.1
Mapping
to
JSON
Types
define
</del>
<ins class="diff-chg">following
example
shows
</ins>
the
<del class="diff-old">serialization
</del>
<ins class="diff-chg">event
triggered
on
update
</ins>
of
<del class="diff-old">an
extended
@context
name-value
pair.
A
snippet
with
</del>
<ins class="diff-chg">the
</ins>
TD
<del class="diff-old">Context
Extensions
is
given
below:
</del>
<ins class="diff-chg">from
</ins><a href="#example-create-event-full" data-matched-text= "[[[#example-create-event-full]]]" class="box-ref"><ins class="diff-chg">
Example
</ins><bdi><ins class="diff-chg">
11
</ins></bdi></a>:
</p>
<aside class="example" id="example-update-event-full">
<div class="marker">
<a class="self-link" href= "#example-update-event-full">
Example
<bdi>
<del class="diff-old">41
</del>
<ins class="diff-chg">12
</ins>
</bdi>
</a>
<span class= "example-title">:
<ins class="diff-new">Full
update
SSE
event
for
a
TD
with
removed
description
and
changed
title
</ins></span>
</div>
<del class="diff-old">{
    : [
        &lt;span class=
"hljs-string"&gt;"https://www.w3.org/2022/wot/td/v1.1",
        {
            : &lt;span class=
"hljs-string"&gt;"http://example.org/iot#",
            : &lt;span class=
"hljs-string"&gt;"http://www.example.org/coap-binding#"
        },
        
    ],
    ...
}
</del>
<pre aria-busy="false"><code class="hljs css">event: thing_updated
<ins class="diff-chg">data: {
data:     <span class="hljs-string">"description"</span>: null,
data:     <span class="hljs-string">"id"</span>: <span class=
"hljs-string">"urn:example:simple-td"</span>,
data:     <span class="hljs-string">"title"</span>: <span class=
"hljs-string">"Updated TD"</span>
data: }
id:
event_3
</ins>
</code>
</pre>
<del class="diff-old">7.1
Semantic
Annotations
</del>
</aside>
</li>
<li>
<p>
<del class="diff-old">TD
Context
Extensions
allow
</del>
<span class="rfc2119-assertion" id= "tdd-notification-data-delete-diff">
<ins class="diff-chg">The
</ins><code><ins class="diff-chg">
diff
</ins></code><ins class="diff-chg">
query
parameter
</ins><em class="rfc2119"><ins class="diff-chg">
MUST
</ins></em><ins class="diff-chg">
be
ignored
</ins>
for
<code>
<ins class="diff-new">thing_deleted
</ins></code><ins class="diff-new">
events.
</ins></span><ins class="diff-new">
In
other
words,
</ins>
the
<del class="diff-old">use
of
</del>
<ins class="diff-chg">server
shall
not
include
</ins>
additional
<del class="diff-old">Vocabulary
Terms
</del>
<ins class="diff-chg">properties
</ins>
in
<del class="diff-old">a
Thing
Description
instance.
If
the
included
namespaces
are
based
on
Class
definitions
such
as
those
provided
by
</del>
the
<del class="diff-old">RDF
Schema
or
OWL,
they
can
be
used
to
annotate
any
Class
instance
</del>
<ins class="diff-chg">payload
</ins>
of
<del class="diff-old">a
Thing
Description
semantically
by
associating
the
instance
to
a
such
an
external
Class
definition.
This
is
done
by
assigning
a
Class
name
to
the
</del>
<code>
<del class="diff-old">@type
</del>
<ins class="diff-chg">thing_deleted
</ins>
</code>
<del class="diff-old">name-value
pair
or
including
Class
name
in
its
Array
value
for
multiple
associations/annotations.
Following
the
serialization
rules
in
6.1
Mapping
to
JSON
Types
,
</del>
<ins class="diff-chg">events
when
</ins>
<code>
<del class="diff-old">@type
</del>
<ins class="diff-chg">diff
</ins>
</code>
is
<del class="diff-old">either
serialized
as
a
JSON
string
or
as
</del>
<ins class="diff-chg">set
to
</ins><code><ins class="diff-chg">
true
</ins></code>.</p></li><li><p><span class="rfc2119-assertion" id= "tdd-notification-data-diff-unsupported"><ins class="diff-chg">
When
</ins>
a
<del class="diff-old">JSON
array.
</del>
<ins class="diff-chg">server
which
does
not
support
the
</ins>
<code>
<del class="diff-old">@type
</del>
<ins class="diff-chg">diff
</ins>
</code>
<ins class="diff-new">query
parameter
</ins>
is
<ins class="diff-new">requested
with
such
query
parameter,
it
</ins><em class="rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
reject
</ins>
the
<del class="diff-old">JSON-LD
keyword
[
json-ld11
]
used
</del>
<ins class="diff-chg">request
with
501
(Not
Implemented)
status.
</ins></span><ins class="diff-chg">
This
is
</ins>
to
<del class="diff-old">set
the
type
of
a
node.
TD
Context
Extensions
also
allow
the
inclusion
of
additional
name-value
pairs
and
well-defined
values
within
any
Class
instance
of
a
Thing
Description.
These
pairs
and
values
are
defined
through
</del>
<ins class="diff-chg">inform
</ins>
the
<del class="diff-old">included
Vocabulary
Terms
and
are
serialized
as
additional
members
in
</del>
<ins class="diff-chg">clients
about
</ins>
the
<del class="diff-old">corresponding
JSON
objects
or
values
</del>
<ins class="diff-chg">lack
</ins>
of
<del class="diff-old">existing
members,
respectively.
Examples
are
additional
version
metadata
for
</del>
<ins class="diff-chg">such
functionality
at
</ins>
the
<del class="diff-old">Thing
or
units
of
measure
for
</del>
<ins class="diff-chg">connection
time
to
avoid
runtime
exceptions
caused
by
missing
event
</ins>
data
<del class="diff-old">items.
</del>
<ins class="diff-chg">attributes.
</ins>
</p>
</li>
</ul>
</dd>
</dl>
<p>
The
<del class="diff-old">next
subsections
show
some
sample
usage
of
different
kind
of
ontologies
</del>
<ins class="diff-chg">Notification
API
is
specified
as
three
event
affordances
</ins>
in
<del class="diff-old">Thing
Descriptions.
</del>
<a href="#directory-api-spec" data-matched-text= "[[[#directory-api-spec]]]" class="sec-ref">
<bdi class= "secno">
<del class="diff-old">7.1.1
</del>
<ins class="diff-chg">7.3.2.4
</ins>
</bdi>
<del class="diff-old">Example
I:
Additional
Basic
Metadata
The
sample
TD
snippet
below
provides
additional
metadata
terms
from
different
external
context
files
as
provided
in
</del>
<ins class="diff-chg">API
Specification
(Thing
Model)
</ins></a>,<ins class="diff-chg">
namely:
</ins>
<code>
<del class="diff-old">@context
.
The
version
information
container
is
extended
by
adding
additional
version
information
about
the
used
software
(
</del>
<ins class="diff-chg">thingCreated
</ins></code>,
<code>
<del class="diff-old">s:softwareVersion
).
schema.org
is
used
for
providing
serial
number
</del>
<ins class="diff-chg">thingUpdated
</ins></code>,
and
<del class="diff-old">organisation
information
such
as
the
company
name
of
the
Thing
.
The
SAREF
ontology
is
used
to
provide
a
semantic
context
of
the
Thing
(
</del>
<code>
<del class="diff-old">saref:TemperatureSensor
),
and
for
the
unit
assignment
for
the
temperature
property
the
Ontology
of
Units
of
Measure
(OM)
is
used.
</del>
<ins class="diff-chg">thingDeleted
</ins></code>.
</p>
<div class="note" id="issue-container-generatedID-3">
<div role="heading" class="ednote-title marker" id="h-ednote-3" aria-level="6">
<span>
<del class="diff-old">Note
</del>
<ins class="diff-chg">Editor's
note
</ins></span><span class= "issue-label">:<ins class="diff-chg">
SSE
Authorization
Header
</ins>
</span>
</div>
<p class="">
<del class="diff-old">Please
note
that
these
Vocabularies
</del>
<ins class="diff-chg">Some
early
SSE
implementations
(including
HTML5
EventSource)
do
not
allow
setting
custom
headers
in
the
initial
HTTP
request.
Authorization
header
is
required
in
few
OAuth2
flows
</ins>
and
<del class="diff-old">ontologies
are
used
</del>
<ins class="diff-chg">passing
it
</ins>
as
<del class="diff-old">examples.
Others
can
be
used
based
on
application
domain
</del>
<ins class="diff-chg">a
query
parameter
is
</ins><a href= "https://tools.ietf.org/html/rfc6750#section-2.3"><ins class="diff-chg">
not
advised
</ins></a>.<ins class="diff-chg">
There
are
polyfills
for
browsers
</ins>
and
<del class="diff-old">use
case.
</del>
<ins class="diff-chg">modern
libraries
which
allow
setting
Authorization
header.
</ins>
</p>
</div>
</section>
<section id="exploration-directory-api-search" class="normative">
<div class="header-wrapper">
<h5 id="x7-3-2-3-search-api">
<del class="diff-old">Example
42
</del>
<bdi class="secno">
<ins class="diff-chg">7.3.2.3
</ins>
</bdi>
<ins class="diff-new">Search
API
</ins></h5><a class="self-link" href="#exploration-directory-api-search" aria-label="Permalink for Section 7.3.2.3">
</a>
</div>
<del class="diff-old">{
    : [
        &lt;span class=
"hljs-string"&gt;"https://www.w3.org/2022/wot/td/v1.1",
        {
            : &lt;span class=
"hljs-string"&gt;"https://w3id.org/saref#",
            : &lt;span class=
"hljs-string"&gt;"http://www.ontology-of-units-of-measure.org/resource/om-2/",
            : &lt;span class=
"hljs-string"&gt;"http://schema.org" 
        }
    ],
    : {
        : &lt;span class=
"hljs-string"&gt;"1.2.1",
        &lt;span class=
"hljs-string"&gt;"schema:softwareVersion" : &lt;span class=
"hljs-string"&gt;"1.0.1"
    },
    &lt;span class=
"hljs-string"&gt;"schema:serialNumber": &lt;span class=
"hljs-string"&gt;"4CE0460D0G",
    &lt;span class=
"hljs-string"&gt;"schema:manufacturer": {&lt;span class=
"hljs-string"&gt;"name": &lt;span class=
"hljs-string"&gt;"CompanyName"},
    ...
    : &lt;span class=
"hljs-string"&gt;"saref:TemperatureSensor",
    : {
        : {
            &lt;span class=
"hljs-string"&gt;"description": &lt;span class=
"hljs-string"&gt;"Temperature value of the weather station",
            : &lt;span class=
"hljs-string"&gt;"number",
            &lt;span class=
"hljs-string"&gt;"minimum": -&lt;span class=
"hljs-number"&gt;32.5,
            &lt;span class=
"hljs-string"&gt;"maximum",
            : &lt;span class=
"hljs-string"&gt;"om:degree_Celsius",
            : [...]
        },
        ...
    },
    ...
}
</del>
<div class="note" id="issue-container-generatedID-4">
<div role="heading" class="ednote-title marker" id="h-ednote-4" aria-level="6">
<del class="diff-old">7.1.2
Example
II:
State
Annotations
</del>
<span>
<ins class="diff-chg">Editor's
note
</ins></span>
<span class= "issue-label">:
<ins class="diff-chg">Search
API
Overview
</ins></span>
</div>
<del class="diff-old">In
many
cases,
TD
Context
Extensions
may
be
used
to
annotate
pieces
of
a
data
schema,
to
be
able
</del>
<p class="">
<ins class="diff-chg">Sub-API
</ins>
to
<del class="diff-old">semantically
process
the
state
information
of
the
physical
world
object,
which
is
represented
by
the
data
exchanged
during
an
interaction
(e.g.,
in
the
payload
of
</del>
<ins class="diff-chg">search
</ins>
a
<del class="diff-old">response).
For
example,
</del>
<ins class="diff-chg">directory,
e.g.
issue
</ins>
a
<del class="diff-old">semantic
description
of
this
state
information
in
RDF
can
be
embedded
in
the
TD
Document
</del>
<ins class="diff-chg">query.
There
are
different
forms
</ins>
and
<del class="diff-old">pieces
of
a
data
schema
can
be
individually
annotated
as
referring
to
specific
parts
of
that
RDF-modeled
state
of
the
physical
world
object.
The
TD
snippet
below
uses
SAREF
to
describe
the
state
of
a
lamp.
The
external
Vocabulary
Term
ssn:forProperty
,
taken
from
SSN
,
the
Semantic
Sensor
Network
Ontology
[
VOCAB-SSN
],
is
being
used
to
link
the
data
schema
of
the
status
Property
with
the
actual
on/off
state
of
the
physical
world
object.
Example
43
{
    : [
        &lt;span class=
"hljs-string"&gt;"https://www.w3.org/2022/wot/td/v1.1",
        {
            : &lt;span class=
"hljs-string"&gt;"https://w3id.org/saref#",
            : &lt;span class=
"hljs-string"&gt;"http://www.w3.org/ns/ssn/"
        }
    ],
    : &lt;span class=
"hljs-string"&gt;"urn:dev:ops:32473-WoTLamp-1234",
    : &lt;span class=
"hljs-string"&gt;"saref:LightSwitch",
    : {
        : &lt;span class=
"hljs-string"&gt;"urn:dev:ops:32473-WoTLamp-1234/state",
        : &lt;span class=
"hljs-string"&gt;"saref:OnOffState"
    },
    ...
    : {
        : {
            &lt;span class=
"hljs-string"&gt;"ssn:forProperty": &lt;span class=
"hljs-string"&gt;"urn:dev:ops:32473-WoTLamp-1234/state",
            : &lt;span class=
"hljs-string"&gt;"string",
            &lt;span class=
"hljs-string"&gt;"forms"}]
        },
        : {
            &lt;span class=
"hljs-string"&gt;"ssn:forProperty": &lt;span class=
"hljs-string"&gt;"urn:dev:ops:32473-WoTLamp-1234/state",
            : &lt;span class=
"hljs-string"&gt;"object",
            : {
                &lt;span class=
"hljs-string"&gt;"statusString": { &lt;span class=
"hljs-string"&gt;"type": &lt;span class=
"hljs-string"&gt;"string" },
                &lt;span class=
"hljs-string"&gt;"statusCode": { &lt;span class=
"hljs-string"&gt;"type": &lt;span class=
"hljs-string"&gt;"number" },
                &lt;span class=
"hljs-string"&gt;"statusDescription": { &lt;span class=
"hljs-string"&gt;"type": &lt;span class=
"hljs-string"&gt;"string" }
            },
            &lt;span class=
"hljs-string"&gt;"forms"}]
        },
        ...
    },
    ...
}
In
Example
2
,
the
state
</del>
<ins class="diff-chg">levels
</ins>
of
<del class="diff-old">the
Thing
is
given
by
the
status
affordance
itself
</del>
<ins class="diff-chg">query
possible,
for
example,
syntactic
(JSONPath,
XPath)
vs.
semantic
(SPARQL),
</ins>
and
<del class="diff-old">possible
state
changes
are
given
by
the
toggle
affordance.
In
other
words,
the
state
of
the
physical
world
object
directly
provides
the
Interaction
Affordances
of
</del>
the
<del class="diff-old">Thing
.
This
design
is
satisfactory
for
simple
cases.
In
</del>
more
<del class="diff-old">elaborate
cases,
however,
several
affordances
</del>
<ins class="diff-chg">advanced
query
types
</ins>
may
<ins class="diff-new">not
</ins>
be
<del class="diff-old">available
for
the
same
physical
state.
In
the
example
above,
the
fullStatus
Property
provides
an
alternative,
more
verbose
representation
</del>
<ins class="diff-chg">supported
by
all
directories.
So
this
API
will
have
further
subsections,
some
of
which
will
be
optional.
Search
also
includes
a
sub-API
</ins>
for
<ins class="diff-new">managing
listing
</ins>
the
<del class="diff-old">state
</del>
<ins class="diff-chg">contents
(e.g.
returned
by
a
query)
including
handling
pagination,
etc.
Note
that
one
special
form
</ins>
of
<del class="diff-old">the
lamp.
7.1.3
Example
III:
Geolocation
Annotations
Issue
1
This
new
subsection
is
in
work
in
progress.
Examples
</del>
<ins class="diff-chg">query
</ins>
will
be
<del class="diff-old">updated
based
on
experience
of
</del>
<ins class="diff-chg">able
to
return
everything.
Results
may
be
subject
to
</ins>
the
<del class="diff-old">next
PlugFests.
</del>
<ins class="diff-chg">requestor's
authorization.
</ins><br /><ins class="diff-chg">
To
discuss
further:
Federated
queries
to
other
TDDs,
Spatial
and
network-limited
queries,
Links
</ins>
</p>
</div>
<del class="diff-old">For
many
use
cases
like
in
building,
agriculture,
or
smart
city
location
based
data
is
required.
</del>
This
<del class="diff-old">information
can
be
provided
in
the
Thing
Description
in
different
ways
and
can
be
relied
on
different
kind
of
location
ontologies
(e.g.,[
</del>
<ins class="diff-chg">specification
describes
three
search
APIs:
syntactic
search
with
JSONPath
[
</ins>
<cite>
<del class="diff-old">w3c-basic-geo
</del>
<a class="bibref" data-link-type="biblio" href="#bib-jsonpath" title= "JSONPath: Query expressions for JSON">
<ins class="diff-chg">JSONPATH
</ins>
</a>
</cite>
],
<del class="diff-old">schema.org)
depending
on
purpose
(e.g.,
indoor,
outdoor).
Also
see
</del>
<ins class="diff-chg">syntactic
search
with
XPath
</ins>
[
<cite>
<del class="diff-old">sdw-bp
</del>
<a class="bibref" data-link-type="biblio" href="#bib-xpath-31" title= "XML Path Language (XPath) 3.1">
<ins class="diff-chg">xpath-31
</ins>
</a>
</cite>
<del class="diff-old">].
The
TD
snippet
below
uses
lat
</del>
<ins class="diff-chg">],
</ins>
and
<del class="diff-old">long
from
the
</del>
<ins class="diff-chg">semantic
search
with
SPARQL
</ins>
[
<cite>
<del class="diff-old">w3c-basic-geo
</del>
<a class="bibref" data-link-type="biblio" href="#bib-sparql11-overview" title= "SPARQL 1.1 Overview">
<ins class="diff-chg">sparql11-overview
</ins>
</a>
</cite>
<del class="diff-old">]
ontology
to
provide
static
latitude
</del>
<ins class="diff-chg">].
</ins><span class= "rfc2119-assertion" id="tdd-search-sparql"><ins class="diff-chg">
The
Directory
</ins><em class= "rfc2119"><ins class="diff-chg">
MAY
</ins></em><ins class="diff-chg">
implement
semantic
search
with
SPARQL.
</ins></span><ins class="diff-chg">
JSONPath
</ins>
and
<del class="diff-old">longitude
metadata
at
Thing's
top
level.
Example
44
{
    : [
        &lt;span class=
"hljs-string"&gt;"https://www.w3.org/2022/wot/td/v1.1",
        {
            : &lt;span class=
"hljs-string"&gt;"http://www.w3.org/2003/01/geo/wgs84_pos#"        
        }
    ],
    : &lt;span class=
"hljs-string"&gt;"Thing",
    : &lt;span class=
"hljs-string"&gt;"26.58",
    : &lt;span class=
"hljs-string"&gt;"297.83",
    ...
    : {
        ...
    
}
In
some
use
cases
location
based
metadata
have
to
be
provided
at
the
interaction
level,
e.g.,
as
provided
as
a
Property
that
returns
the
latest
longitude
,
latitude
,
</del>
<ins class="diff-chg">XPath
are
informative
</ins>
and
<del class="diff-old">elevation
values
based
on
schema.org:
Example
45
{
    : [
        &lt;span class=
"hljs-string"&gt;"https://www.w3.org/2022/wot/td/v1.1",
        {
            : &lt;span class=
"hljs-string"&gt;"http://schema.org#"
        }
    ],
    ...
    : {
        : {
            : &lt;span class=
"hljs-string"&gt;"object",
            : &lt;span class=
"hljs-string"&gt;"schema:GeoCoordinates",
            : {
                    &lt;span class=
"hljs-string"&gt;"longitude": { &lt;span class=
"hljs-string"&gt;"type": &lt;span class=
"hljs-string"&gt;"number" },
                    &lt;span class=
"hljs-string"&gt;"latitude":  { &lt;span class=
"hljs-string"&gt;"type": &lt;span class=
"hljs-string"&gt;"number" },
                    &lt;span class=
"hljs-string"&gt;"elevation": { &lt;span class=
"hljs-string"&gt;"type": &lt;span class=
"hljs-string"&gt;"number" }
            },
            &lt;span class=
"hljs-string"&gt;"forms"}]
        },
        ...
    },
    ...
}
</del>
<ins class="diff-chg">subject
to
change.
</ins>
<p>
<del class="diff-old">In
case
a
different
name
</del>
<span class="rfc2119-assertion" id="tdd-search-large-tdds">
<ins class="diff-chg">It
</ins>
is
<del class="diff-old">desired
for,
e.g.,
longitude
,
latitude
,
and
elevation
in
the
data
model,
the
jsonld:context
can
be
used
to
link
terms
</del>
<em class="rfc2119">
<ins class="diff-chg">RECOMMENDED
</ins></em><ins class="diff-chg">
that
directories
implement
a
search
API
</ins>
to
<del class="diff-old">specific
vocabulary
from
an
ontology
(also
see
[
JSON-SCHEMA-ONTOLOGY
</del>
<ins class="diff-chg">efficiently
serve
</ins><a href="#dfn-td" class= "internalDFN" data-link-type="dfn" id="ref-for-dfn-td-42"><ins class="diff-chg">
TDs
</ins>
</a>
<ins class="diff-new">based
on
client-specific
queries.
</ins></span>
<del class="diff-old">],
Section
3.3
Defining
a
JSON-LD
context
for
data
instances):
</del>
</p>
<del class="diff-old">Example
46
{
    : [
        &lt;span class=
"hljs-string"&gt;"https://www.w3.org/2022/wot/td/v1.1",
        {
            : &lt;span class=
"hljs-string"&gt;"http://schema.org#"
        }
    ],
    ...
    : {
        : {
        : {
            : &lt;span class=
"hljs-string"&gt;"http://schema.org/"
            : &lt;span class=
"hljs-string"&gt;"schema:longitude",
            : &lt;span class=
"hljs-string"&gt;"schema:latitude",
            : &lt;span class=
"hljs-string"&gt;"schema:elevation"
        },
        : &lt;span class=
"hljs-string"&gt;"object",
        : {
            : { &lt;span class=
"hljs-string"&gt;"type": &lt;span class=
"hljs-string"&gt;"number" },
            : { &lt;span class=
"hljs-string"&gt;"type": &lt;span class=
"hljs-string"&gt;"number" },
            &lt;span class=
"hljs-string"&gt;"height": { &lt;span class=
"hljs-string"&gt;"type": &lt;span class=
"hljs-string"&gt;"number" }
        }
        }
  },
    ...
}
</del>
<section id="jsonpath-semantic" class="informative">
<div class="header-wrapper">
<h6 id="x7-3-2-3-1-syntactic-search-jsonpath">
<del class="diff-old">7.2
</del>
<bdi class= "secno">
<ins class="diff-chg">7.3.2.3.1
</ins>
</bdi>
<del class="diff-old">Adding
Protocol
Bindings
</del>
<ins class="diff-chg">Syntactic
search:
JSONPath
</ins></h6><a class="self-link" href="#jsonpath-semantic" aria-label= "Permalink for Section 7.3.2.3.1">
</a>
</div>
<p>
<del class="diff-old">With
the
TD
Context
Extensions
in
a
Thing
Description,
the
communication
metadata
can
be
supplemented
or
new
Protocol
Bindings
added
through
additional
Vocabulary
Terms
serialized
into
JSON
objects
representing
a
Form
instance.
(see
also
</del>
<del class="diff-old">8.3
Protocol
Bindings
).
The
following
TD
example
uses
a
fictional
CoAP
Protocol
Binding
,
as
no
such
Protocol
Binding
is
available
at
the
time
of
writing
this
specification.
</del>
<em>
This
<del class="diff-old">TD
Context
Extension
assumes
that
there
</del>
<ins class="diff-chg">section
</ins>
is
<del class="diff-old">a
CoAP
in
RDF
vocabulary
similar
to
HTTP
Vocabulary
in
RDF
1.0
</del>
<ins class="diff-chg">non-normative.
</ins>
</em>
<del class="diff-old">[
HTTP-in-RDF10
</del>
<del class="diff-old">]
that
</del>
</p>
<ins class="diff-chg">Support
for
JSONPath
Search
API
</ins>
is
<del class="diff-old">accessible
via
an
example
namespace
http://www.example.org/coap-binding#
.
The
supplemented
cov:methodName
member
instructs
</del>
<ins class="diff-chg">optional.
If
implemented,
</ins>
the
<del class="diff-old">Consumer
which
CoAP
method
has
to
be
applied
(e.g.,
</del>
<ins class="diff-chg">JSONPath
API
must
allow
searching
TDs
using
an
HTTP
</ins>
<code>
GET
</code>
<del class="diff-old">for
the
CoAP
Method
Code
0.01,
</del>
<ins class="diff-chg">request
at
</ins>
<code>
<del class="diff-old">POST
</del>
<ins class="diff-chg">/search/jsonpath?query={query}
</ins>
</code>
<del class="diff-old">for
the
CoAP
Method
Code
0.02,
or
</del>
<ins class="diff-chg">endpoint,
where
</ins>
<code>
<del class="diff-old">iPATCH
for
CoAP
Method
Code
0.07).
Example
47
:
Specialization
of
forms
through
TD
Context
Extension
{
    : [
        &lt;span class=
"hljs-string"&gt;"https://www.w3.org/2022/wot/td/v1.1",
        { : &lt;span class=
"hljs-string"&gt;"http://www.example.org/coap-binding#" }
    ],
    ...
    : {
        : {
            &lt;span class=
"hljs-string"&gt;"description": &lt;span class=
"hljs-string"&gt;"The current brightness setting",
            : &lt;span class=
"hljs-string"&gt;"integer",
            &lt;span class=
"hljs-string"&gt;"minimum": -&lt;span class=
"hljs-number"&gt;64,
            &lt;span class=
"hljs-string"&gt;"maximum",
            : [{
                : &lt;span class=
"hljs-string"&gt;"readproperty",
                &lt;span class=
"hljs-string"&gt;"href": &lt;span class=
"hljs-string"&gt;"coap://example.org:61616/api/brightness",
                &lt;span class=
"hljs-string"&gt;"cov:methodName": &lt;span class=
"hljs-string"&gt;"GET"
            }, {
                : &lt;span class=
"hljs-string"&gt;"writeproperty",
                &lt;span class=
"hljs-string"&gt;"href": &lt;span class=
"hljs-string"&gt;"coap://example.org:61616/api/brightness",
                &lt;span class=
"hljs-string"&gt;"cov:methodName": &lt;span class=
"hljs-string"&gt;"POST"
            }]
        },
        ...
    },
    ...
}
</del>
<ins class="diff-chg">query
</ins>
</code>
<del class="diff-old">7.3
Adding
Security
Schemes
Finally,
new
security
schemes
that
are
not
included
in
5.3.3
Security
Vocabulary
Definitions
can
be
imported
using
</del>
<ins class="diff-chg">is
</ins>
the
<del class="diff-old">TD
Context
Extension
mechanism.
This
example
uses
</del>
<ins class="diff-chg">JSONPath
expression.
The
request
must
contain
</ins>
a
<del class="diff-old">fictional
ACE
security
scheme
based
on
</del>
<ins class="diff-chg">valid
JSONPath
</ins>
[
<cite>
<del class="diff-old">ACE
</del>
<a class="bibref" data-link-type= "biblio" href="#bib-jsonpath" title= "JSONPath: Query expressions for JSON">
<ins class="diff-chg">JSONPATH
</ins>
</a>
</cite>
]
<del class="diff-old">that
is,
for
this
example,
defined
by
the
namespace
at
http://www.example.org/ace-security#
.
Note
that
such
additional
security
schemes
</del>
<ins class="diff-chg">as
searching
parameter.
A
successful
response
</ins>
must
<del class="diff-old">be
Subclasses
of
the
Class
</del>
<ins class="diff-chg">have
200
(OK)
status,
contain
</ins>
<code>
<del class="diff-old">SecurityScheme
.
Example
48
{
    @context: [
        &lt;span class=
"hljs-string"&gt;"https://www.w3.org/2022/wot/td/v1.1",
        {
            : &lt;span class=
"hljs-string"&gt;"http://www.example.org/coap-binding#",
            : &lt;span class=
"hljs-string"&gt;"http://www.example.org/ace-security#"
        }
    ],
    ...
    : {
        : {
            : &lt;span class=
"hljs-string"&gt;"ace:ACESecurityScheme",
            ...
            : &lt;span class=
"hljs-string"&gt;"coaps://as.example.com/token",
            &lt;span class=
"hljs-string"&gt;"ace:audience": &lt;span class=
"hljs-string"&gt;"coaps://rs.example.com",
            &lt;span class=
"hljs-string"&gt;"ace:scopes": [&lt;span class=
"hljs-string"&gt;"limited", &lt;span class=
"hljs-string"&gt;"special"],
            &lt;span class=
"hljs-string"&gt;"ace:cnonce": &lt;span class=
"hljs-literal"&gt;true
        }
    },
    : [&lt;span class=
"hljs-string"&gt;"ace_sc"],
    : {
        : {
            ...
            : [{
                : &lt;span class=
"hljs-string"&gt;"readproperty",
                &lt;span class=
"hljs-string"&gt;"href": &lt;span class=
"hljs-string"&gt;"coaps://rs.example.com/status",
                &lt;span class=
"hljs-string"&gt;"contentType": &lt;span class=
"hljs-string"&gt;"application/cbor",
                &lt;span class=
"hljs-string"&gt;"cov:methodName": &lt;span class=
"hljs-string"&gt;"GET",
                &lt;span class=
"hljs-string"&gt;"ace:scopes": [&lt;span class=
"hljs-string"&gt;"limited"]
            }]
        }
    },
    : {
        : {
            ...
            : [{
                : &lt;span class=
"hljs-string"&gt;"invokeaction",
                &lt;span class=
"hljs-string"&gt;"href": &lt;span class=
"hljs-string"&gt;"coaps://rs.example.com/configure",
                &lt;span class=
"hljs-string"&gt;"contentType": &lt;span class=
"hljs-string"&gt;"application/cbor",
                &lt;span class=
"hljs-string"&gt;"cov:methodName": &lt;span class=
"hljs-string"&gt;"POST",
                &lt;span class=
"hljs-string"&gt;"ace:scopes": [&lt;span class=
"hljs-string"&gt;"special"]
            }]
        }
    },
    ...
}
</del>
<ins class="diff-chg">application/json
</ins>
</code>
<del class="diff-old">Note
that
all
security
schemes
defined
</del>
in
<del class="diff-old">5.3.3
Security
Vocabulary
Definitions
are
already
part
of
</del>
the
<del class="diff-old">TD
context
</del>
<ins class="diff-chg">Content-Type
header,
</ins>
and
<del class="diff-old">need
not
to
be
included
through
</del>
a
<del class="diff-old">TD
Context
Extension
.
8.
Behavioral
Assertions
The
following
assertions
relate
to
the
behavior
of
components
</del>
<ins class="diff-chg">set
</ins>
of
<del class="diff-old">a
WoT
system,
as
opposed
to
the
representation
</del>
<ins class="diff-chg">complete
TDs
</ins>
or
<del class="diff-old">information
model
</del>
<ins class="diff-chg">a
set
</ins>
of
<del class="diff-old">the
TD.
However,
note
that
TDs
are
descriptive,
and
may
</del>
<ins class="diff-chg">TD
fragments
</ins>
in
<del class="diff-old">particular
be
used
to
describe
pre-existing
network
interfaces.
In
these
cases,
assertions
cannot
be
made
that
constrain
the
behavior
of
such
pre-existing
interfaces.
Instead,
</del>
the
<del class="diff-old">assertions
must
be
interpreted
</del>
<ins class="diff-chg">body.
The
syntactic
search
with
JSONPath
is
specified
</ins>
as
<del class="diff-old">constraints
on
the
TD
to
accurately
represent
such
interfaces.
</del>
<code>
<ins class="diff-chg">searchJSONPath
</ins></code><ins class="diff-chg">
action
in
</ins><a href="#directory-api-spec" data-matched-text="[[[#directory-api-spec]]]" class= "sec-ref">
<bdi class="secno">
<del class="diff-old">8.1
</del>
<ins class="diff-chg">7.3.2.4
</ins>
</bdi>
<del class="diff-old">Security
Configurations
</del>
<ins class="diff-chg">API
Specification
(Thing
Model)
</ins></a>.</section><section id="xpath-semantic" class="informative"><div class="header-wrapper"><h6 id="x7-3-2-3-2-syntactic-search-xpath"><bdi class= "secno"><ins class="diff-chg">
7.3.2.3.2
</ins></bdi><ins class="diff-chg">
Syntactic
search:
XPath
</ins></h6><a class="self-link" href="#xpath-semantic" aria-label= "Permalink for Section 7.3.2.3.2">
</a>
</div>
<p>
<del class="diff-old">To
enable
secure
interoperation,
security
configurations
must
accurately
reflect
the
requirements
of
the
Thing
:
If
a
Thing
requires
a
specific
access
mechanism
for
an
interaction,
that
mechanism
MUST
be
specified
in
the
security
configuration
of
the
Thing
Description.
</del>
<del class="diff-old">If
a
Thing
does
not
require
a
specific
access
mechanism
for
an
interaction,
that
mechanism
MUST
NOT
</del>
<em>
<ins class="diff-chg">This
section
is
non-normative.
</ins>
</em>
<del class="diff-old">be
specified
in
the
security
configuration
of
the
Thing
Description.
</del>
<del class="diff-old">Some
security
protocols
may
ask
</del>
</p>
<ins class="diff-chg">Support
</ins>
for
<del class="diff-old">authentication
information
dynamically,
including
required
encoding
or
encryption
schemes.
One
consequence
of
the
above
</del>
<ins class="diff-chg">XPath
Search
API
</ins>
is
<del class="diff-old">that
if
a
protocol
asks
for
a
form
of
security
credentials
or
an
encoding
or
encryption
scheme
not
declared
in
the
Thing
Description
then
</del>
<ins class="diff-chg">optional.
If
implemented,
</ins>
the
<del class="diff-old">Thing
Description
</del>
<ins class="diff-chg">XPath
query
API
must
allow
searching
TDs
using
an
HTTP
</ins><code><ins class="diff-chg">
GET
</ins></code><ins class="diff-chg">
request
at
</ins><code><ins class="diff-chg">
/search/xpath?query={query}
</ins></code><ins class="diff-chg">
endpoint,
where
</ins><code><ins class="diff-chg">
query
</ins></code>
is
<del class="diff-old">to
be
considered
invalid.
8.2
Data
Schemas
</del>
<ins class="diff-chg">the
XPath
expression.
The
request
must
contain
a
valid
XPath
3.1
[
</ins><cite>
<a class="bibref" data-link-type= "biblio" href="#bib-xpath-31" title= "XML Path Language (XPath) 3.1">
<ins class="diff-new">xpath-31
</ins>
</a>
<del class="diff-old">The
data
schemas
provided
</del>
</cite>
<ins class="diff-chg">]
as
search
parameter.
A
successful
response
must
have
200
(OK)
status,
contain
</ins><code><ins class="diff-chg">
application/json
</ins></code>
in
the
<del class="diff-old">TD
should
accurately
represent
the
data
payloads
returned
</del>
<ins class="diff-chg">Content-Type
header,
</ins>
and
<del class="diff-old">accepted
by
</del>
the
<del class="diff-old">described
Thing
</del>
<ins class="diff-chg">query
response
</ins>
in
<del class="diff-old">the
interactions
specified
</del>
<ins class="diff-chg">JSON
serialization
</ins>
in
the
<del class="diff-old">TD.
In
general,
Consumers
should
follow
the
</del>
<ins class="diff-chg">body.
The
</ins>
data
<del class="diff-old">schemas
strictly,
not
generating
anything
not
given
in
</del>
<ins class="diff-chg">schema
for
</ins>
the
<del class="diff-old">WoT
Thing
Description,
but
should
accept
additional
data
from
</del>
<ins class="diff-chg">response
is
defined
implicitly
by
</ins>
the
<del class="diff-old">Thing
not
given
explicitly
in
</del>
<ins class="diff-chg">query
and
</ins>
the
<del class="diff-old">WoT
Thing
Description.
In
general,
Things
are
described
by
WoT
Thing
Descriptions,
but
Consumers
are
constrained
to
follow
WoT
Thing
Descriptions
when
interacting
</del>
<ins class="diff-chg">XPath
specification.
The
syntactic
search
</ins>
with
<del class="diff-old">Things
.
A
Thing
acting
</del>
<ins class="diff-chg">XPath
is
specified
</ins>
as
<del class="diff-old">a
Consumer
when
interacting
with
another
target
Thing
described
in
a
WoT
Thing
Description
MUST
generate
data
organized
according
to
the
data
schemas
given
</del>
<code>
<ins class="diff-chg">searchXPath
</ins></code><ins class="diff-chg">
action
</ins>
in
<del class="diff-old">the
corresponding
interactions.
</del>
<a href="#directory-api-spec" data-matched-text="[[[#directory-api-spec]]]" class= "sec-ref">
<del class="diff-old">A
WoT
Thing
Description
MUST
accurately
describe
the
data
returned
and
accepted
by
each
interaction.
</del>
<bdi class="secno">
<ins class="diff-chg">7.3.2.4
</ins></bdi><ins class="diff-chg">
API
Specification
(Thing
Model)
</ins></a>.</section><section id="search-semantic" class="normative"><div class="header-wrapper"><h6 id="x7-3-2-3-3-semantic-search-sparql">
<bdi class= "secno">
<ins class="diff-chg">7.3.2.3.3
</ins></bdi><ins class="diff-chg">
Semantic
search:
SPARQL
</ins></h6><a class="self-link" href="#search-semantic" aria-label= "Permalink for Section 7.3.2.3.3">
<del class="diff-old">A
Thing
</del>
</a>
<del class="diff-old">MAY
return
additional
data
from
an
interaction
even
when
such
data
</del>
</div>
<ins class="diff-chg">Support
for
SPARQL
Search
API
</ins>
is
<del class="diff-old">not
described
in
</del>
<ins class="diff-chg">optional.
</ins><span class= "rfc2119-assertion" id="tdd-search-sparql-version"><ins class="diff-chg">
If
implemented,
</ins>
the
<del class="diff-old">data
schemas
given
in
its
WoT
Thing
Description.
This
applies
to
ObjectSchema
and
ArraySchema
(when
items
is
an
Array
of
DataSchema
)
where
there
can
be
additional
properties
or
items
in
</del>
<ins class="diff-chg">SPARQL
search
API
</ins><em class="rfc2119"><ins class="diff-chg">
MUST
</ins></em><ins class="diff-chg">
allow
searching
TDs
using
</ins>
the
<del class="diff-old">data
returned.
This
behaves
as
if
"additionalProperties":true
or
"additionalItems":true
as
defined
in
</del>
<ins class="diff-chg">SPARQL
1.1
protocol
</ins>
[
<cite>
<del class="diff-old">JSON-SCHEMA
</del>
<a class="bibref" data-link-type="biblio" href="#bib-sparql11-overview" title= "SPARQL 1.1 Overview">
<ins class="diff-chg">sparql11-overview
</ins>
</a>
</cite>
].
<del class="diff-old">A
Thing
acting
as
a
Consumer
when
interacting
with
another
Thing
</del>
</span>
<span class="rfc2119-assertion" id= "tdd-search-sparql-method-get">
<ins class="diff-chg">The
SPARQL
API
</ins>
<em class= "rfc2119">
MUST
</em>
accept
<del class="diff-old">without
error
any
additional
data
not
described
in
the
data
schemas
given
in
the
Thing
Description
of
the
target
Thing
.
This
applies
to
</del>
<ins class="diff-chg">queries
using
HTTP
</ins>
<code>
<del class="diff-old">ObjectSchema
</del>
<ins class="diff-chg">GET
</ins>
</code>
<del class="diff-old">and
</del>
<ins class="diff-chg">requests
at
</ins>
<code>
<del class="diff-old">ArraySchema
</del>
<ins class="diff-chg">/search/sparql?query={query}
</ins>
</code>
<del class="diff-old">(when
</del>
<ins class="diff-chg">endpoint,
where
</ins>
<code>
<del class="diff-old">items
</del>
<ins class="diff-chg">query
</ins>
</code>
is
<del class="diff-old">an
Array
of
DataSchema
)
where
there
can
be
additional
properties
or
items
in
</del>
the
<del class="diff-old">data
returned.
This
behaves
as
if
</del>
<ins class="diff-chg">SPARQL
expression.
</ins></span><span class="rfc2119-assertion" id= "tdd-search-sparql-method-post"><ins class="diff-chg">
The
support
for
SPARQL
search
using
HTTP
</ins>
<code>
<del class="diff-old">"additionalProperties":true
</del>
<ins class="diff-chg">POST
</ins>
</code>
<del class="diff-old">or
</del>
<ins class="diff-chg">method
at
</ins>
<code>
<del class="diff-old">"additionalItems":true
</del>
<ins class="diff-chg">/search/sparql
</ins>
</code>
<del class="diff-old">as
defined
in
[
JSON-SCHEMA
].
A
Thing
acting
as
a
Consumer
when
interacting
with
another
Thing
</del>
<ins class="diff-chg">endpoint
is
</ins>
<em class="rfc2119">
<del class="diff-old">MUST
NOT
generate
data
not
described
in
the
data
schemas
given
in
the
Thing
Description
of
that
Thing
.
</del>
<ins class="diff-chg">OPTIONAL
</ins></em>.
</span>
<span class= "rfc2119-assertion" id="tdd-search-sparql-resp-select-ask">
A
<del class="diff-old">Thing
acting
as
a
Consumer
when
interacting
</del>
<ins class="diff-chg">successful
request
</ins>
with
<del class="diff-old">another
Thing
</del>
<ins class="diff-chg">a
query
</ins><code><ins class="diff-chg">
SELECT
</ins></code><ins class="diff-chg">
or
</ins><code><ins class="diff-chg">
ASK
</ins></code><em class="rfc2119">
MUST
</em>
<del class="diff-old">generate
URIs
according
to
the
URI
Templates,
base
URIs,
</del>
<ins class="diff-chg">return
a
response
200
(OK)
status,
</ins>
and
<del class="diff-old">form
href
parameters
given
</del>
<ins class="diff-chg">contain
</ins><code><ins class="diff-chg">
application/json
</ins></code><ins class="diff-chg">
by
default
</ins>
in
the
<del class="diff-old">Thing
Description
of
the
target
Thing
.
</del>
<ins class="diff-chg">Content-Type
header.
</ins>
</span>
<del class="diff-old">URI
Templates,
base
URIs,
and
href
members
in
</del>
<span class= "rfc2119-assertion" id= "tdd-search-sparql-resp-describe-construct">
<ins class="diff-chg">A
successful
request
with
</ins>
a
<del class="diff-old">WoT
Thing
Description
</del>
<ins class="diff-chg">query
</ins><code><ins class="diff-chg">
CONSTRUCT
</ins></code><ins class="diff-chg">
and
</ins><code><ins class="diff-chg">
DESCRIBE
</ins></code>
<em class="rfc2119">
MUST
</em>
<del class="diff-old">accurately
describe
the
WoT
Interface
of
</del>
<ins class="diff-chg">return
a
response
200
(OK)
status,
and
contain
</ins><code><ins class="diff-chg">
application/ld+json
</ins></code><ins class="diff-chg">
by
default
in
</ins>
the
<del class="diff-old">Thing
.
</del>
<ins class="diff-chg">Content-Type
header.
</ins>
</span>
<del class="diff-old">8.3
Protocol
Bindings
</del>
<span class="rfc2119-assertion" id= "tdd-search-sparql-error">
A
<del class="diff-old">Protocol
Binding
is
the
mapping
</del>
<ins class="diff-chg">request
with
any
query
different
</ins>
from
<del class="diff-old">an
Interaction
Affordance
to
concrete
messages
of
a
specific
protocol
such
as
HTTP
[
RFC7231
],
CoAP
[
RFC7252
],
or
MQTT
[
MQTT
].
Protocol
Bindings
of
Interaction
Affordances
are
serialized
as
</del>
<code>
<del class="diff-old">forms
as
defined
in
6.3.9
</del>
<ins class="diff-chg">SELECT
</ins></code>,
<code>
<del class="diff-old">forms
</del>
<ins class="diff-chg">ASK
</ins></code>,<code><ins class="diff-chg">
CONSTRUCT
</ins>
</code>
<del class="diff-old">.
Every
form
in
a
WoT
Thing
Description
must
have
a
submission
target,
given
by
the
</del>
<ins class="diff-chg">or
</ins>
<code>
<del class="diff-old">href
</del>
<ins class="diff-chg">DESCRIBE
</ins>
</code>
<del class="diff-old">member.
</del>
<em class="rfc2119">
<ins class="diff-chg">MUST
</ins></em><ins class="diff-chg">
return
a
response
400
(Bad
Request).
</ins></span>
The
<del class="diff-old">URI
scheme
[
RFC3986
]
of
this
submission
target
indicates
what
Protocol
Binding
the
Thing
implements
[
WOT-ARCHITECTURE
].
For
instance,
if
the
target
starts
</del>
<ins class="diff-chg">semantic
search
</ins>
with
<ins class="diff-new">SPARQL
is
specified
as
</ins>
<code>
<del class="diff-old">http
</del>
<ins class="diff-chg">searchSPARQL
</ins>
</code>
<del class="diff-old">or
https
,
a
Consumer
can
then
infer
the
Thing
implements
the
Protocol
Binding
based
on
HTTP
and
it
should
expect
HTTP-specific
terms
</del>
<ins class="diff-chg">action
</ins>
in
<del class="diff-old">the
form
instance
(see
next
section,
</del>
<a href= "#directory-api-spec" data-matched-text="[[[#directory-api-spec]]]" class="sec-ref">
<del class="diff-old">8.3.1
</del>
<bdi class="secno">
<ins class="diff-chg">7.3.2.4
</ins>
</bdi>
<del class="diff-old">Protocol
Binding
based
on
HTTP
).
Every
form
in
a
</del>
<ins class="diff-chg">API
Specification
(Thing
Model)
</ins></a>.<span class="rfc2119-assertion" id= "tdd-search-sparql-federation"><ins class="diff-chg">
A
</ins>
WoT
Thing
Description
<ins class="diff-new">Directory
</ins>
<em class="rfc2119">
<del class="diff-old">MUST
</del>
<ins class="diff-chg">MAY
</ins>
</em>
<del class="diff-old">follow
the
requirements
of
the
Protocol
Binding
Template
indicated
by
the
URI
scheme
[
RFC3986
]
of
</del>
<ins class="diff-chg">implement
federation
in
</ins>
its
<del class="diff-old">href
member
as
indicated
by
the
Binding
Templates
specification
at
Creating
a
New
Protocol
Binding
.
</del>
<ins class="diff-chg">SPARQL
query
API.
</ins>
</span>
<del class="diff-old">Every
form
in
a
WoT
Thing
Description
</del>
<span class="rfc2119-assertion" id= "tdd-search-sparql-federation-version">
<ins class="diff-chg">If
implemented,
the
SPARQL
API
</ins>
<em class="rfc2119">
MUST
</em>
<del class="diff-old">accurately
describe
requests
(including
request
headers,
if
present)
accepted
by
the
Thing
in
an
interaction.
Note
Optimally,
the
protocols
used
are
listed
as
a
scheme
in
</del>
<ins class="diff-chg">implement
</ins>
the
<del class="diff-old">IANA
registry
</del>
<ins class="diff-chg">SPARQL
1.1
Federated
Query
standard
</ins>
[
<cite>
<del class="diff-old">IANA-URI-SCHEMES
</del>
<a class="bibref" data-link-type= "biblio" href="#bib-sparql11-overview" title= "SPARQL 1.1 Overview">
<ins class="diff-chg">sparql11-overview
</ins>
</a>
</cite>
<del class="diff-old">]).
This
guarantees
a
unique
Protocol
Binding
assignment.
In
case
the
desired
protocol
is
not
yet
registered
with
IANA,
it
is
recommended
to
follow
the
scheme
value
of
the
protocol
specifications,
if
available.
In
principle,
to
avoid
ambiguity
in
the
identification
of
the
protocol
via
the
scheme,
the
Protocol
Binding
document
will
provide
a
recommended
scheme
value
to
enable
unique
protocol
identification
in
the
context
of
WoT.
</del>
<ins class="diff-chg">].
</ins></span></section></section><section id="directory-api-spec">
<div class="header-wrapper">
<h5 id="x7-3-2-4-api-specification-thing-model">
<bdi class= "secno">
<del class="diff-old">8.3.1
</del>
<ins class="diff-chg">7.3.2.4
</ins>
</bdi>
<del class="diff-old">Protocol
Binding
based
on
HTTP
</del>
<ins class="diff-chg">API
Specification
(Thing
Model)
</ins></h5><a class="self-link" href="#directory-api-spec" aria-label= "Permalink for Section 7.3.2.4">
</a>
</div>
<p>
<del class="diff-old">Per
default
</del>
<ins class="diff-chg">A
template
for
</ins>
the
<ins class="diff-new">API
of
</ins>
Thing
Description
<del class="diff-old">supports
the
Protocol
Binding
based
on
HTTP
by
including
the
HTTP
RDF
vocabulary
definitions
from
HTTP
Vocabulary
in
RDF
1.0
[
HTTP-in-RDF10
].
This
vocabulary
can
</del>
<ins class="diff-chg">Directories
is
given
here
as
a
</ins><a href="#dfn-thing-model" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-thing-model-1"><ins class="diff-chg">
Thing
Model
</ins></a>.<ins class="diff-chg">
The
Thing
Model
is
normative
(except
where
noted)
but
should
not
</ins>
be
<del class="diff-old">directly
used
within
TD
instances
by
the
usage
of
</del>
<ins class="diff-chg">considered
as
</ins>
the
<del class="diff-old">prefix
htv
,
which
points
</del>
<ins class="diff-chg">sole
reference
</ins>
to
<del class="diff-old">http://www.w3.org/2011/http#
.
Further
details
of
Protocol
Binding
based
on
HTTP
can
be
found
in
[
WOT-BINDING-TEMPLATES
].
To
</del>
<ins class="diff-chg">implement
or
</ins>
interact
with
a
<del class="diff-old">Thing
that
implements
the
Protocol
Binding
based
on
HTTP,
a
Consumer
needs
to
know
what
HTTP
method
to
use
when
submitting
a
form.
In
the
general
case,
a
</del>
Thing
Description
<del class="diff-old">can
explicitly
include
a
term
indicating
the
method,
i.e.,
htv:methodName
.
For
the
sake
of
conciseness,
the
Protocol
Binding
based
on
HTTP
defines
Default
Values
for
the
operation
types
listed
below,
which
</del>
<ins class="diff-chg">Directory.
Please
refer
</ins>
also
<del class="diff-old">aims
at
convergence
of
the
methods
expected
by
Things
(e.g.,
GET
to
read,
PUT
</del>
to
<del class="diff-old">write).
When
no
method
is
indicated
in
a
form
representing
an
Protocol
Binding
based
on
HTTP,
a
Default
Value
MUST
be
assumed
as
shown
in
</del>
the
<del class="diff-old">following
table.
</del>
<ins class="diff-chg">specifications
given
in
</ins><a href="#exploration-directory-api" data-matched-text="[[[#exploration-directory-api]]]" class= "sec-ref">
<bdi class="secno">
<ins class="diff-new">7.3.2
</ins></bdi><ins class="diff-new">
Directory
Service
API
</ins></a>.
</p>
<del class="diff-old">Vocabulary
term
Default
value
Context
htv:methodName
GET
Form
with
operation
type
readproperty
,
readallproperties
,
readmultipleproperties
htv:methodName
PUT
Form
with
operation
type
writeproperty
,
writeallproperties
,
writemultipleproperties
htv:methodName
POST
</del>
<p>
<ins class="diff-chg">The
</ins>
<code>
<del class="diff-old">Form
</del>
<ins class="diff-chg">searchJSONPath
</ins>
</code>
<del class="diff-old">with
operation
type
</del>
<ins class="diff-chg">and
</ins>
<code>
<del class="diff-old">invokeaction
</del>
<ins class="diff-chg">searchXPath
</ins>
</code>
<del class="diff-old">For
example,
the
Example
1
</del>
<ins class="diff-chg">affordances
given
</ins>
in
<del class="diff-old">1.
Introduction
does
</del>
<ins class="diff-chg">this
Thing
Model
are
</ins>
not
<del class="diff-old">contain
operation
types
</del>
<ins class="diff-chg">normative
</ins>
and
<del class="diff-old">HTTP
methods
in
the
forms.
The
following
Default
Values
should
be
assumed
</del>
<ins class="diff-chg">are
provided
</ins>
for
<del class="diff-old">the
forms
in
the
Example
1
:
</del>
<ins class="diff-chg">information
only.
</ins>
</p>
<del class="diff-old">Example
49
with
default
values
for
Protocol
Binding
based
on
HTTP
{
    : &lt;span class=
"hljs-string"&gt;"https://www.w3.org/2022/wot/td/v1.1",
    : &lt;span class=
"hljs-string"&gt;"urn:dev:ops:32473-WoTLamp-1234",
</del>
<pre class="advisement" aria-busy="false"><code class="hljs json">{
    <span class="hljs-attr">"@context"</span>: [
        <span class="hljs-string">"http://www.w3.org/ns/td"</span>,
        <span class=
<ins class="diff-chg">"hljs-string">"https://w3c.github.io/wot-discovery/context/discovery-context.jsonld"</span>
    ],
</ins>    <span class="hljs-attr">"@type"</span>: [        <span class="hljs-string">"tm:ThingModel"</span>,        <span class="hljs-string">"ThingDirectory"</span><ins class="diff-chg">
    ],
</ins>
    <span class="hljs-attr">"title"</span>: <span class=
<del class="diff-old">"hljs-string"&gt;"MyLampThing",
    : {
        : {
            : &lt;span class=
"hljs-string"&gt;"basic",
            : &lt;span class=
"hljs-string"&gt;"header"
        }
</del>
<ins class="diff-chg">"hljs-string">"Thing Description Directory (TDD) Thing Model"</span>,
</ins>    <span class="hljs-attr">"version"</span>: {        <span class="hljs-attr">"model"</span>: <span class=<ins class="diff-chg">
"hljs-string">"1.0.0-beta.2"</span>
</ins>
    },
<del class="diff-old">    : [
        
</del>
    <span class="hljs-attr">"base"</span>: <span class=
<ins class="diff-chg">"hljs-string">"{{DIRECTORY_BASE_URL}}"</span>,
</ins>    <span class="hljs-attr">"tm:required"</span>: [        <span class="hljs-string">"#/properties/things"</span>
    ],
    <span class="hljs-attr">"properties"</span>: {
<del class="diff-old">        : {
            : &lt;span class=
</del>
        <span class="hljs-attr">"things"</span>: {
            <span class=
<ins class="diff-chg">"hljs-attr">"description"</span>: <span class=
"hljs-string">"Retrieve all Thing Descriptions"</span>,
</ins>            <span class="hljs-attr">"uriVariables"</span>: {                <span class="hljs-attr">"offset"</span>: {                    <span class=<ins class="diff-chg">
"hljs-attr">"title"</span>: <span class=
"hljs-string">"Number of TDs to skip before the page"</span>,
</ins>                    <span class=<ins class="diff-chg">
"hljs-attr">"type"</span>: <span class=
"hljs-string">"number"</span>,
</ins>                    <span class=<ins class="diff-chg">
"hljs-attr">"default"</span>: <span class="hljs-number">0</span>
                },
</ins>                <span class="hljs-attr">"limit"</span>: {                    <span class=<ins class="diff-chg">
"hljs-attr">"title"</span>: <span class=
"hljs-string">"Number of TDs in a page"</span>,
</ins>                    <span class=<ins class="diff-chg">
"hljs-attr">"type"</span>: <span class=
"hljs-string">"number"</span>
                },
</ins>                <span class="hljs-attr">"format"</span>: {                    <span class=<ins class="diff-chg">
"hljs-attr">"title"</span>: <span class=
"hljs-string">"Payload format"</span>,
</ins>                    <span class=<ins class="diff-chg">
"hljs-attr">"type"</span>: <span class=
</ins>
"hljs-string">"string"</span>,
<del class="diff-old">            : &lt;span class=
"hljs-literal"&gt;true,
</del>
                    <span class="hljs-attr">"enum"</span>: [
                        <span class="hljs-string">"array"</span>,
                        <span class=
<ins class="diff-chg">"hljs-string">"collection"</span>
                    ],
</ins>                    <span class=<ins class="diff-chg">
"hljs-attr">"default"</span>: <span class=
"hljs-string">"array"</span>
                },
</ins>                <span class="hljs-attr">"sort_by"</span>: {                    <span class=<ins class="diff-chg">
"hljs-attr">"title"</span>: <span class=
"hljs-string">"Comparator TD attribute for collection sorting"</span>,
</ins>                    <span class=<ins class="diff-chg">
"hljs-attr">"type"</span>: <span class=
"hljs-string">"string"</span>,
</ins>                    <span class=<ins class="diff-chg">
"hljs-attr">"default"</span>: <span class="hljs-string">"id"</span>
                },
</ins>                <span class="hljs-attr">"sort_order"</span>: {                    <span class=<ins class="diff-chg">
"hljs-attr">"title"</span>: <span class=
"hljs-string">"Sorting order"</span>,
</ins>                    <span class=<ins class="diff-chg">
"hljs-attr">"type"</span>: <span class=
"hljs-string">"string"</span>,
</ins>                    <span class="hljs-attr">"enum"</span>: [                        <span class="hljs-string">"asc"</span>,                        <span class="hljs-string">"desc"</span><ins class="diff-chg">
                    ],
</ins>                    <span class=<ins class="diff-chg">
"hljs-attr">"default"</span>: <span class=
"hljs-string">"asc"</span>
                }
            },
</ins>
            <span class="hljs-attr">"forms"</span>: [
                {
                    <span class=
<del class="diff-old">"hljs-attr"&gt;"op": &lt;span class=
"hljs-string"&gt;"readproperty",
                    &lt;span class=
</del>
"hljs-attr">"href"</span>: <span class=
<del class="diff-old">"hljs-string"&gt;"https://mylamp.example.com/status"
</del>
<ins class="diff-chg">"hljs-string">"/things{?offset,limit,format,sort_by,sort_order}"</span>,
</ins>                    <span class=<ins class="diff-chg">
"hljs-attr">"htv:methodName"</span>: <span class=
"hljs-string">"GET"</span>,
</ins>                    <span class="hljs-attr">"response"</span>: {                        <span class=<ins class="diff-chg">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"Success response"</span>,
</ins>                        <span class=<ins class="diff-chg">
"hljs-attr">"htv:statusCodeValue"</span>: <span class=
"hljs-number">200</span>,
</ins>                        <span class=<ins class="diff-chg">
"hljs-attr">"contentType"</span>: <span class=
"hljs-string">"application/ld+json"</span>,
</ins>                        <span class=<ins class="diff-chg">
"hljs-attr">"htv:headers"</span>: [
                            {
</ins>                                <span class=<ins class="diff-chg">
"hljs-attr">"htv:fieldName"</span>: <span class=
"hljs-string">"Link"</span>
                            }
                        ]
                    },
</ins>                    <span class=<ins class="diff-chg">
"hljs-attr">"additionalResponses"</span>: [
                        {
</ins>                            <span class=<ins class="diff-chg">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"Invalid query arguments"</span>,
</ins>                            <span class=<ins class="diff-chg">
"hljs-attr">"contentType"</span>: <span class=
"hljs-string">"application/problem+json"</span>,
</ins>                            <span class=<ins class="diff-chg">
"hljs-attr">"htv:statusCodeValue"</span>: <span class=
"hljs-number">400</span>
                        }
                    ]
</ins>
                }
            ]
        }
    },
    <span class="hljs-attr">"actions"</span>: {
<del class="diff-old">        : {
</del>
        <span class="hljs-attr">"createThing"</span>: {
            <span class=
<ins class="diff-chg">"hljs-attr">"description"</span>: <span class=
"hljs-string">"Create a Thing Description"</span>,
</ins>            <span class="hljs-attr">"uriVariables"</span>: {                <span class="hljs-attr">"id"</span>: {                    <span class=<ins class="diff-chg">
"hljs-attr">"@type"</span>: <span class=
"hljs-string">"ThingID"</span>,
</ins>                    <span class=<ins class="diff-chg">
"hljs-attr">"title"</span>: <span class=
"hljs-string">"Thing Description ID"</span>,
</ins>                    <span class=<ins class="diff-chg">
"hljs-attr">"type"</span>: <span class=
"hljs-string">"string"</span>,
</ins>                    <span class=<ins class="diff-chg">
"hljs-attr">"format"</span>: <span class=
"hljs-string">"iri-reference"</span>
                }
            },
</ins>            <span class="hljs-attr">"input"</span>: {                <span class=<ins class="diff-chg">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"The schema is implied by the content type"</span>,
</ins>                <span class="hljs-attr">"type"</span>: <span class=<ins class="diff-chg">
"hljs-string">"object"</span>
            },
</ins>
            <span class="hljs-attr">"forms"</span>: [
                {
                    <span class=
"hljs-attr">"href"</span>: <span class=
<del class="diff-old">"hljs-string"&gt;"https://mylamp.example.com/toggle"
</del>
<ins class="diff-chg">"hljs-string">"/things/{id}"</span>,
</ins>                    <span class=<ins class="diff-chg">
"hljs-attr">"htv:methodName"</span>: <span class=
"hljs-string">"PUT"</span>,
</ins>                    <span class=<ins class="diff-chg">
"hljs-attr">"contentType"</span>: <span class=
"hljs-string">"application/td+json"</span>,
</ins>                    <span class="hljs-attr">"response"</span>: {                        <span class=<ins class="diff-chg">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"Success response"</span>,
</ins>                        <span class=<ins class="diff-chg">
"hljs-attr">"htv:statusCodeValue"</span>: <span class=
"hljs-number">201</span>
                    },
</ins>                    <span class=<ins class="diff-chg">
"hljs-attr">"additionalResponses"</span>: [
                        {
</ins>                            <span class=<ins class="diff-chg">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"Invalid serialization or TD"</span>,
</ins>                            <span class=<ins class="diff-chg">
"hljs-attr">"contentType"</span>: <span class=
"hljs-string">"application/problem+json"</span>,
</ins>                            <span class=<ins class="diff-chg">
"hljs-attr">"htv:statusCodeValue"</span>: <span class=
"hljs-number">400</span>
                        }
                    ]
</ins>
                }
            ]
<del class="diff-old">        }
    },
    : {
        : {
            : {
</del>
<ins class="diff-chg">        },
</ins>        <span class="hljs-attr">"createAnonymousThing"</span>: {            <span class=<ins class="diff-chg">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"Create an anonymous Thing Description"</span>,
</ins>            <span class="hljs-attr">"input"</span>: {                <span class=<ins class="diff-chg">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"The schema is implied by the content type"</span>,
</ins>
                <span class="hljs-attr">"type"</span>: <span class=
<del class="diff-old">"hljs-string"&gt;"string"
</del>
<ins class="diff-chg">"hljs-string">"object"</span>
</ins>
            },
            <span class="hljs-attr">"forms"</span>: [
                {
                    <span class=
"hljs-attr">"href"</span>: <span class=
<del class="diff-old">"hljs-string"&gt;"https://mylamp.example.com/oh",
</del>
<ins class="diff-chg">"hljs-string">"/things"</span>,
</ins>
                    <span class=
<del class="diff-old">"hljs-attr"&gt;"subprotocol": &lt;span class=
"hljs-string"&gt;"longpoll"
</del>
<ins class="diff-chg">"hljs-attr">"htv:methodName"</span>: <span class=
"hljs-string">"POST"</span>,
</ins>                    <span class=<ins class="diff-chg">
"hljs-attr">"contentType"</span>: <span class=
"hljs-string">"application/td+json"</span>,
</ins>                    <span class="hljs-attr">"response"</span>: {                        <span class=<ins class="diff-chg">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"Success response including the system-generated URI"</span>,
</ins>                        <span class=<ins class="diff-chg">
"hljs-attr">"htv:headers"</span>: [
                            {
</ins>                                <span class=<ins class="diff-chg">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"System-generated URI"</span>,
</ins>                                <span class=<ins class="diff-chg">
"hljs-attr">"htv:fieldName"</span>: <span class=
"hljs-string">"Location"</span>
                            }
                        ],
</ins>                        <span class=<ins class="diff-chg">
"hljs-attr">"htv:statusCodeValue"</span>: <span class=
"hljs-number">201</span>
                    },
</ins>                    <span class=<ins class="diff-chg">
"hljs-attr">"additionalResponses"</span>: [
                        {
</ins>                            <span class=<ins class="diff-chg">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"Invalid serialization or TD"</span>,
</ins>                            <span class=<ins class="diff-chg">
"hljs-attr">"contentType"</span>: <span class=
"hljs-string">"application/problem+json"</span>,
</ins>                            <span class=<ins class="diff-chg">
"hljs-attr">"htv:statusCodeValue"</span>: <span class=
"hljs-number">400</span>
                        }
                    ]
</ins>
                }
            ]
<del class="diff-old">        }
    }
}
{
    : &lt;span class=
"hljs-string"&gt;"https://www.w3.org/2022/wot/td/v1.1",
    : &lt;span class=
"hljs-string"&gt;"urn:dev:ops:32473-WoTLamp-1234",
    : &lt;span class=
"hljs-string"&gt;"MyLampThing",
    : {
        : {
            : &lt;span class=
"hljs-string"&gt;"basic",
            : &lt;span class=
"hljs-string"&gt;"header"
        }
    },
    : [
        
    ],
    : {
        : {
            : &lt;span class=
</del>
<ins class="diff-chg">        },
</ins>        <span class="hljs-attr">"retrieveThing"</span>: {            <span class=<ins class="diff-chg">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"Retrieve a Thing Description"</span>,
</ins>            <span class="hljs-attr">"uriVariables"</span>: {                <span class="hljs-attr">"id"</span>: {                    <span class=<ins class="diff-chg">
"hljs-attr">"@type"</span>: <span class=
"hljs-string">"ThingID"</span>,
</ins>                    <span class=<ins class="diff-chg">
"hljs-attr">"title"</span>: <span class=
"hljs-string">"Thing Description ID"</span>,
</ins>                    <span class=<ins class="diff-chg">
"hljs-attr">"type"</span>: <span class=
</ins>
"hljs-string">"string"</span>,
<del class="diff-old">            : &lt;span class=
</del>
                    <span class=
<ins class="diff-chg">"hljs-attr">"format"</span>: <span class=
"hljs-string">"iri-reference"</span>
                }
            },
</ins>            <span class="hljs-attr">"output"</span>: {                <span class=<ins class="diff-chg">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"The schema is implied by the content type"</span>,
</ins>                <span class="hljs-attr">"type"</span>: <span class=<ins class="diff-chg">
"hljs-string">"object"</span>
            },
</ins>            <span class="hljs-attr">"safe"</span>: <span class=<ins class="diff-chg">
"hljs-literal">true</span>,
</ins>            <span class=<ins class="diff-chg">
"hljs-attr">"idempotent"</span>: <span class=
</ins>
"hljs-literal">true</span>,
            <span class="hljs-attr">"forms"</span>: [
                {
                    <span class=
<del class="diff-old">"hljs-attr"&gt;"op": &lt;span class=
"hljs-string"&gt;"readproperty",
</del>
<ins class="diff-chg">"hljs-attr">"href"</span>: <span class=
"hljs-string">"/things/{id}"</span>,
</ins>                    <span class=<ins class="diff-chg">
"hljs-attr">"htv:methodName"</span>: <span class=
"hljs-string">"GET"</span>,
</ins>                    <span class="hljs-attr">"response"</span>: {                        <span class=<ins class="diff-chg">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"Success response"</span>,
</ins>                        <span class=<ins class="diff-chg">
"hljs-attr">"htv:statusCodeValue"</span>: <span class=
"hljs-number">200</span>,
</ins>                        <span class=<ins class="diff-chg">
"hljs-attr">"contentType"</span>: <span class=
"hljs-string">"application/td+json"</span>
                    },
</ins>                    <span class=<ins class="diff-chg">
"hljs-attr">"additionalResponses"</span>: [
                        {
</ins>                            <span class=<ins class="diff-chg">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"TD with the given id not found"</span>,
</ins>                            <span class=<ins class="diff-chg">
"hljs-attr">"contentType"</span>: <span class=
"hljs-string">"application/problem+json"</span>,
</ins>                            <span class=<ins class="diff-chg">
"hljs-attr">"htv:statusCodeValue"</span>: <span class=
"hljs-number">404</span>
                        }
                    ]
                }
            ]
        },
</ins>        <span class="hljs-attr">"updateThing"</span>: {            <span class=<ins class="diff-chg">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"Update a Thing Description"</span>,
</ins>            <span class="hljs-attr">"uriVariables"</span>: {                <span class="hljs-attr">"id"</span>: {                    <span class=<ins class="diff-chg">
"hljs-attr">"@type"</span>: <span class=
"hljs-string">"ThingID"</span>,
</ins>                    <span class=<ins class="diff-chg">
"hljs-attr">"title"</span>: <span class=
"hljs-string">"Thing Description ID"</span>,
</ins>                    <span class=<ins class="diff-chg">
"hljs-attr">"type"</span>: <span class=
"hljs-string">"string"</span>,
</ins>                    <span class=<ins class="diff-chg">
"hljs-attr">"format"</span>: <span class=
"hljs-string">"iri-reference"</span>
                }
            },
</ins>            <span class="hljs-attr">"input"</span>: {                <span class=<ins class="diff-chg">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"The schema is implied by the content type"</span>,
</ins>                <span class="hljs-attr">"type"</span>: <span class=<ins class="diff-chg">
"hljs-string">"object"</span>
            },
</ins>            <span class="hljs-attr">"forms"</span>: [<ins class="diff-chg">
                {
</ins>
                    <span class=
"hljs-attr">"href"</span>: <span class=
<del class="diff-old">"hljs-string"&gt;"https://mylamp.example.com/status",
</del>
<ins class="diff-chg">"hljs-string">"/things/{id}"</span>,
</ins>
                    <span class=
"hljs-attr">"htv:methodName"</span>: <span class=
<del class="diff-old">"hljs-string"&gt;"GET"
</del>
<ins class="diff-chg">"hljs-string">"PUT"</span>,
</ins>                    <span class=<ins class="diff-chg">
"hljs-attr">"contentType"</span>: <span class=
"hljs-string">"application/td+json"</span>,
</ins>                    <span class="hljs-attr">"response"</span>: {                        <span class=<ins class="diff-chg">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"Success response"</span>,
</ins>                        <span class=<ins class="diff-chg">
"hljs-attr">"htv:statusCodeValue"</span>: <span class=
"hljs-number">204</span>
                    },
</ins>                    <span class=<ins class="diff-chg">
"hljs-attr">"additionalResponses"</span>: [
                        {
</ins>                            <span class=<ins class="diff-chg">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"Invalid serialization or TD"</span>,
</ins>                            <span class=<ins class="diff-chg">
"hljs-attr">"contentType"</span>: <span class=
"hljs-string">"application/problem+json"</span>,
</ins>                            <span class=<ins class="diff-chg">
"hljs-attr">"htv:statusCodeValue"</span>: <span class=
"hljs-number">400</span>
                        }
                    ]
</ins>
                }
            ]
<del class="diff-old">        }
    },
    : {
        : {
</del>
<ins class="diff-chg">        },
</ins>        <span class="hljs-attr">"partiallyUpdateThing"</span>: {            <span class=<ins class="diff-chg">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"Partially update a Thing Description"</span>,
</ins>            <span class="hljs-attr">"uriVariables"</span>: {                <span class="hljs-attr">"id"</span>: {                    <span class=<ins class="diff-chg">
"hljs-attr">"@type"</span>: <span class=
"hljs-string">"ThingID"</span>,
</ins>                    <span class=<ins class="diff-chg">
"hljs-attr">"title"</span>: <span class=
"hljs-string">"Thing Description ID"</span>,
</ins>                    <span class=<ins class="diff-chg">
"hljs-attr">"type"</span>: <span class=
"hljs-string">"string"</span>,
</ins>                    <span class=<ins class="diff-chg">
"hljs-attr">"format"</span>: <span class=
"hljs-string">"iri-reference"</span>
                }
            },
</ins>            <span class="hljs-attr">"input"</span>: {                <span class=<ins class="diff-chg">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"The schema is implied by the content type"</span>,
</ins>                <span class="hljs-attr">"type"</span>: <span class=<ins class="diff-chg">
"hljs-string">"object"</span>
            },
</ins>
            <span class="hljs-attr">"forms"</span>: [
                {
                    <span class=
<del class="diff-old">"hljs-attr"&gt;"op": &lt;span class=
"hljs-string"&gt;"invokeaction",
</del>
<ins class="diff-chg">"hljs-attr">"href"</span>: <span class=
"hljs-string">"/things/{id}"</span>,
</ins>                    <span class=<ins class="diff-chg">
"hljs-attr">"htv:methodName"</span>: <span class=
"hljs-string">"PATCH"</span>,
</ins>                    <span class=<ins class="diff-chg">
"hljs-attr">"contentType"</span>: <span class=
"hljs-string">"application/merge-patch+json"</span>,
</ins>                    <span class="hljs-attr">"response"</span>: {                        <span class=<ins class="diff-chg">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"Success response"</span>,
</ins>                        <span class=<ins class="diff-chg">
"hljs-attr">"htv:statusCodeValue"</span>: <span class=
"hljs-number">204</span>
                    },
</ins>                    <span class=<ins class="diff-chg">
"hljs-attr">"additionalResponses"</span>: [
                        {
</ins>                            <span class=<ins class="diff-chg">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"Invalid serialization or TD"</span>,
</ins>                            <span class=<ins class="diff-chg">
"hljs-attr">"contentType"</span>: <span class=
"hljs-string">"application/problem+json"</span>,
</ins>                            <span class=<ins class="diff-chg">
"hljs-attr">"htv:statusCodeValue"</span>: <span class=
"hljs-number">400</span>
                        },
                        {
</ins>                            <span class=<ins class="diff-chg">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"TD with the given id not found"</span>,
</ins>                            <span class=<ins class="diff-chg">
"hljs-attr">"contentType"</span>: <span class=
"hljs-string">"application/problem+json"</span>,
</ins>                            <span class=<ins class="diff-chg">
"hljs-attr">"htv:statusCodeValue"</span>: <span class=
"hljs-number">404</span>
                        }
                    ]
                }
            ]
        },
</ins>        <span class="hljs-attr">"deleteThing"</span>: {            <span class=<ins class="diff-chg">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"Delete a Thing Description"</span>,
</ins>            <span class="hljs-attr">"uriVariables"</span>: {                <span class="hljs-attr">"id"</span>: {                    <span class=<ins class="diff-chg">
"hljs-attr">"@type"</span>: <span class=
"hljs-string">"ThingID"</span>,
</ins>                    <span class=<ins class="diff-chg">
"hljs-attr">"title"</span>: <span class=
"hljs-string">"Thing Description ID"</span>,
</ins>                    <span class=<ins class="diff-chg">
"hljs-attr">"type"</span>: <span class=
"hljs-string">"string"</span>,
</ins>                    <span class=<ins class="diff-chg">
"hljs-attr">"format"</span>: <span class=
"hljs-string">"iri-reference"</span>
                }
            },
</ins>            <span class="hljs-attr">"forms"</span>: [<ins class="diff-chg">
                {
</ins>
                    <span class=
"hljs-attr">"href"</span>: <span class=
<del class="diff-old">"hljs-string"&gt;"https://mylamp.example.com/toggle",
</del>
<ins class="diff-chg">"hljs-string">"/things/{id}"</span>,
</ins>
                    <span class=
"hljs-attr">"htv:methodName"</span>: <span class=
<del class="diff-old">"hljs-string"&gt;"POST"
</del>
<ins class="diff-chg">"hljs-string">"DELETE"</span>,
</ins>                    <span class="hljs-attr">"response"</span>: {                        <span class=<ins class="diff-chg">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"Success response"</span>,
</ins>                        <span class=<ins class="diff-chg">
"hljs-attr">"htv:statusCodeValue"</span>: <span class=
"hljs-number">204</span>
                    },
</ins>                    <span class=<ins class="diff-chg">
"hljs-attr">"additionalResponses"</span>: [
                        {
</ins>                            <span class=<ins class="diff-chg">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"TD with the given id not found"</span>,
</ins>                            <span class=<ins class="diff-chg">
"hljs-attr">"contentType"</span>: <span class=
"hljs-string">"application/problem+json"</span>,
</ins>                            <span class=<ins class="diff-chg">
"hljs-attr">"htv:statusCodeValue"</span>: <span class=
"hljs-number">404</span>
                        }
                    ]
</ins>
                }
            ]
<del class="diff-old">        }
    },
    : {
        : {
            : {
</del>
<ins class="diff-chg">        },
</ins>        <span class="hljs-attr">"searchJSONPath"</span>: {            <span class=<ins class="diff-chg">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"JSONPath syntactic search.  This affordance is not normative and is provided for information only."</span>,
</ins>            <span class="hljs-attr">"uriVariables"</span>: {                <span class="hljs-attr">"query"</span>: {                    <span class=<ins class="diff-chg">
"hljs-attr">"title"</span>: <span class=
"hljs-string">"A valid JSONPath expression"</span>,
</ins>                    <span class=<ins class="diff-chg">
"hljs-attr">"type"</span>: <span class=
"hljs-string">"string"</span>
                }
            },
</ins>            <span class="hljs-attr">"output"</span>: {                <span class=<ins class="diff-chg">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"The schema depends on the given query"</span>,
</ins>
                <span class="hljs-attr">"type"</span>: <span class=
<ins class="diff-new">"hljs-string">"object"</span>
            },
</ins>            <span class="hljs-attr">"safe"</span>: <span class=<ins class="diff-new">
"hljs-literal">true</span>,
</ins>            <span class=<ins class="diff-new">
"hljs-attr">"idempotent"</span>: <span class=
"hljs-literal">true</span>,
</ins>            <span class="hljs-attr">"forms"</span>: [<ins class="diff-new">
                {
</ins>                    <span class=<ins class="diff-new">
"hljs-attr">"href"</span>: <span class=
"hljs-string">"/search/jsonpath?query={query}"</span>,
</ins>                    <span class=<ins class="diff-new">
"hljs-attr">"htv:methodName"</span>: <span class=
"hljs-string">"GET"</span>,
</ins>                    <span class="hljs-attr">"response"</span>: {                        <span class=<ins class="diff-new">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"Success response"</span>,
</ins>                        <span class=<ins class="diff-new">
"hljs-attr">"contentType"</span>: <span class=
"hljs-string">"application/json"</span>,
</ins>                        <span class=<ins class="diff-new">
"hljs-attr">"htv:statusCodeValue"</span>: <span class=
"hljs-number">200</span>
                    },
</ins>                    <span class=<ins class="diff-new">
"hljs-attr">"additionalResponses"</span>: [
                        {
</ins>                            <span class=<ins class="diff-new">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"JSONPath expression not provided or contains syntax errors"</span>,
</ins>                            <span class=<ins class="diff-new">
"hljs-attr">"contentType"</span>: <span class=
"hljs-string">"application/problem+json"</span>,
</ins>                            <span class=<ins class="diff-new">
"hljs-attr">"htv:statusCodeValue"</span>: <span class=
"hljs-number">400</span>
                        }
                    ]
                }
            ]
        },
</ins>        <span class="hljs-attr">"searchXPath"</span>: {            <span class=<ins class="diff-new">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"XPath syntactic search.  This affordance is not normative and is provided for information only."</span>,
</ins>            <span class="hljs-attr">"uriVariables"</span>: {                <span class="hljs-attr">"query"</span>: {                    <span class=<ins class="diff-new">
"hljs-attr">"title"</span>: <span class=
"hljs-string">"A valid XPath expression"</span>,
</ins>                    <span class=<ins class="diff-new">
"hljs-attr">"type"</span>: <span class=
</ins>
"hljs-string">"string"</span>
<ins class="diff-new">                }
            },
</ins>            <span class="hljs-attr">"output"</span>: {                <span class=<ins class="diff-new">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"The schema depends on the given query"</span>,
</ins>                <span class="hljs-attr">"type"</span>: <span class=<ins class="diff-new">
"hljs-string">"object"</span>
</ins>
            },
            <span class="hljs-attr">"safe"</span>: <span class=
<ins class="diff-new">"hljs-literal">true</span>,
</ins>            <span class=<ins class="diff-new">
"hljs-attr">"idempotent"</span>: <span class=
"hljs-literal">true</span>,
</ins>
            <span class="hljs-attr">"forms"</span>: [
                {
                    <span class=
<del class="diff-old">"hljs-attr"&gt;"op": &lt;span class=
"hljs-string"&gt;"subscribeevent",
</del>
<ins class="diff-chg">"hljs-attr">"href"</span>: <span class=
"hljs-string">"/search/xpath?query={query}"</span>,
</ins>                    <span class=<ins class="diff-chg">
"hljs-attr">"htv:methodName"</span>: <span class=
"hljs-string">"GET"</span>,
</ins>                    <span class="hljs-attr">"response"</span>: {                        <span class=<ins class="diff-chg">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"Success response"</span>,
</ins>                        <span class=<ins class="diff-chg">
"hljs-attr">"contentType"</span>: <span class=
"hljs-string">"application/json"</span>,
</ins>                        <span class=<ins class="diff-chg">
"hljs-attr">"htv:statusCodeValue"</span>: <span class=
"hljs-number">200</span>
                    },
</ins>                    <span class=<ins class="diff-chg">
"hljs-attr">"additionalResponses"</span>: [
                        {
</ins>                            <span class=<ins class="diff-chg">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"XPath expression not provided or contains syntax errors"</span>,
</ins>                            <span class=<ins class="diff-chg">
"hljs-attr">"contentType"</span>: <span class=
"hljs-string">"application/problem+json"</span>,
</ins>                            <span class=<ins class="diff-chg">
"hljs-attr">"htv:statusCodeValue"</span>: <span class=
"hljs-number">400</span>
                        }
                    ]
                }
            ]
        },
</ins>        <span class="hljs-attr">"searchSPARQL"</span>: {            <span class=<ins class="diff-chg">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"SPARQL semantic search"</span>,
</ins>            <span class="hljs-attr">"uriVariables"</span>: {                <span class="hljs-attr">"query"</span>: {                    <span class=<ins class="diff-chg">
"hljs-attr">"title"</span>: <span class=
"hljs-string">"A valid SPARQL 1.1. query"</span>,
</ins>                    <span class=<ins class="diff-chg">
"hljs-attr">"type"</span>: <span class=
"hljs-string">"string"</span>
                }
            },
</ins>            <span class="hljs-attr">"output"</span>: {                <span class=<ins class="diff-chg">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"The schema depends on the given query"</span>,
</ins>                <span class="hljs-attr">"type"</span>: <span class=<ins class="diff-chg">
"hljs-string">"object"</span>
            },
</ins>            <span class="hljs-attr">"safe"</span>: <span class=<ins class="diff-chg">
"hljs-literal">true</span>,
</ins>            <span class=<ins class="diff-chg">
"hljs-attr">"idempotent"</span>: <span class=
"hljs-literal">true</span>,
</ins>            <span class="hljs-attr">"forms"</span>: [<ins class="diff-chg">
                {
</ins>
                    <span class=
"hljs-attr">"href"</span>: <span class=
<del class="diff-old">"hljs-string"&gt;"https://mylamp.example.com/oh",
</del>
<ins class="diff-chg">"hljs-string">"/search/sparql?query={query}"</span>,
</ins>
                    <span class=
<del class="diff-old">"hljs-attr"&gt;"subprotocol": &lt;span class=
"hljs-string"&gt;"longpoll"
</del>
<ins class="diff-chg">"hljs-attr">"htv:methodName"</span>: <span class=
"hljs-string">"GET"</span>,
</ins>                    <span class="hljs-attr">"response"</span>: {                        <span class=<ins class="diff-chg">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"Success response"</span>,
</ins>                        <span class=<ins class="diff-chg">
"hljs-attr">"contentType"</span>: <span class=
"hljs-string">"application/json"</span>,
</ins>                        <span class=<ins class="diff-chg">
"hljs-attr">"htv:statusCodeValue"</span>: <span class=
"hljs-number">200</span>
                    },
</ins>                    <span class=<ins class="diff-chg">
"hljs-attr">"additionalResponses"</span>: [
                        {
</ins>                            <span class=<ins class="diff-chg">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"SPARQL query not provided or contains syntax errors"</span>,
</ins>                            <span class=<ins class="diff-chg">
"hljs-attr">"contentType"</span>: <span class=
"hljs-string">"application/problem+json"</span>,
</ins>                            <span class=<ins class="diff-chg">
"hljs-attr">"htv:statusCodeValue"</span>: <span class=
"hljs-number">400</span>
                        }
                    ]
                },
                {
</ins>                    <span class=<ins class="diff-chg">
"hljs-attr">"href"</span>: <span class=
"hljs-string">"/search/sparql"</span>,
</ins>                    <span class=<ins class="diff-chg">
"hljs-attr">"htv:methodName"</span>: <span class=
"hljs-string">"POST"</span>,
</ins>                    <span class="hljs-attr">"response"</span>: {                        <span class=<ins class="diff-chg">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"Success response"</span>,
</ins>                        <span class=<ins class="diff-chg">
"hljs-attr">"contentType"</span>: <span class=
"hljs-string">"application/json"</span>,
</ins>                        <span class=<ins class="diff-chg">
"hljs-attr">"htv:statusCodeValue"</span>: <span class=
"hljs-number">200</span>
                    },
</ins>                    <span class=<ins class="diff-chg">
"hljs-attr">"additionalResponses"</span>: [
                        {
</ins>                            <span class=<ins class="diff-chg">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"SPARQL query not provided or contains syntax errors"</span>,
</ins>                            <span class=<ins class="diff-chg">
"hljs-attr">"contentType"</span>: <span class=
"hljs-string">"application/problem+json"</span>,
</ins>                            <span class=<ins class="diff-chg">
"hljs-attr">"htv:statusCodeValue"</span>: <span class=
"hljs-number">400</span>
                        }
                    ]
</ins>
                }
            ]
        }
<del class="diff-old">    }
}
In
the
case
of
a
forms
entry
that
has
multiple
op
values
the
usage
of
the
htv:methodName
is
not
permitted.
A
TD
Processor
will
extend
the
multiple
op
values
to
separate
forms
entries
and
associates
a
single
operation
with
the
default
assumption.
The
address
information
(e.g.
href
)
and
other
metadata
are
taken
over
in
the
extended
version.
Example
50
extended
forms
in
case
of
multiple
values
in
op
{
    : &lt;span class=
"hljs-string"&gt;"https://www.w3.org/2022/wot/td/v1.1",
    : &lt;span class=
"hljs-string"&gt;"urn:dev:ops:32473-WoTLamp-1234",
    : &lt;span class=
"hljs-string"&gt;"MyLampThing",
    : {
        : {
            : &lt;span class=
"hljs-string"&gt;"basic",
            : &lt;span class=
"hljs-string"&gt;"header"
        }
</del>
    },
<del class="diff-old">    : [
        
    ],
    : {
        : {
            : &lt;span class=
"hljs-string"&gt;"string",
</del>
    <span class="hljs-attr">"events"</span>: {
        <span class="hljs-attr">"thingCreated"</span>: {
            <span class=
<ins class="diff-chg">"hljs-attr">"description"</span>: <span class=
"hljs-string">"Registration of Thing Descriptions inside the directory"</span>,
</ins>            <span class="hljs-attr">"uriVariables"</span>: {                <span class="hljs-attr">"diff"</span>: {                    <span class=<ins class="diff-chg">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"Receive the full created TD as event data"</span>,
</ins>                    <span class=<ins class="diff-chg">
"hljs-attr">"type"</span>: <span class=
"hljs-string">"boolean"</span>
                }
            },
</ins>            <span class="hljs-attr">"data"</span>: {                <span class=<ins class="diff-chg">
"hljs-attr">"title"</span>: <span class="hljs-string">"Partial/Full TD"</span>,
</ins>                <span class="hljs-attr">"type"</span>: <span class=<ins class="diff-chg">
"hljs-string">"object"</span>
            },
</ins>
            <span class="hljs-attr">"forms"</span>: [
                {
                    <span class=
<del class="diff-old">"hljs-attr"&gt;"op" : [&lt;span class=
"hljs-string"&gt;"readproperty", &lt;span class=
"hljs-string"&gt;"writeproperty"],
</del>
<ins class="diff-chg">"hljs-attr">"op"</span>: <span class=
"hljs-string">"subscribeevent"</span>,
</ins>
                    <span class=
"hljs-attr">"href"</span>: <span class=
<del class="diff-old">"hljs-string"&gt;"https://mylamp.example.com/status"
</del>
<ins class="diff-chg">"hljs-string">"/events/thing_created{?diff}"</span>,
</ins>                    <span class=<ins class="diff-chg">
"hljs-attr">"subprotocol"</span>: <span class=
"hljs-string">"sse"</span>,
</ins>                    <span class="hljs-attr">"htv:headers"</span>: [<ins class="diff-chg">
                        {
</ins>                            <span class=<ins class="diff-chg">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"ID of the last event for reconnection"</span>,
</ins>                            <span class=<ins class="diff-chg">
"hljs-attr">"htv:fieldName"</span>: <span class=
"hljs-string">"Last-Event-ID"</span>
                        }
                    ],
</ins>                    <span class="hljs-attr">"response"</span>: {                        <span class=<ins class="diff-chg">
"hljs-attr">"contentType"</span>: <span class=
"hljs-string">"text/event-stream"</span>
                    }
</ins>
                }
            ]
<del class="diff-old">        }
    }
}
{
    : &lt;span class=
"hljs-string"&gt;"https://www.w3.org/2022/wot/td/v1.1",
    : &lt;span class=
"hljs-string"&gt;"urn:dev:ops:32473-WoTLamp-1234",
    : &lt;span class=
"hljs-string"&gt;"MyLampThing",
    : {
        : {
            : &lt;span class=
"hljs-string"&gt;"basic",
            : &lt;span class=
"hljs-string"&gt;"header"
        }
    },
    : [
        
    ],
    : {
        : {
            : &lt;span class=
"hljs-string"&gt;"string",
</del>
<ins class="diff-chg">        },
</ins>        <span class="hljs-attr">"thingUpdated"</span>: {            <span class=<ins class="diff-chg">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"Updates to Thing Descriptions within the directory"</span>,
</ins>            <span class="hljs-attr">"uriVariables"</span>: {                <span class="hljs-attr">"diff"</span>: {                    <span class=<ins class="diff-chg">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"Include TD changes inside event data"</span>,
</ins>                    <span class=<ins class="diff-chg">
"hljs-attr">"type"</span>: <span class=
"hljs-string">"boolean"</span>
                }
            },
</ins>            <span class="hljs-attr">"data"</span>: {                <span class=<ins class="diff-chg">
"hljs-attr">"title"</span>: <span class="hljs-string">"Partial TD"</span>,
</ins>                <span class="hljs-attr">"type"</span>: <span class=<ins class="diff-chg">
"hljs-string">"object"</span>,
</ins>                <span class=<ins class="diff-chg">
"hljs-attr">"contentMediaType"</span>: <span class=
"hljs-string">"application/merge-patch+json"</span>
            },
</ins>
            <span class="hljs-attr">"forms"</span>: [
                {
                    <span class=
"hljs-attr">"op"</span>: <span class=
<del class="diff-old">"hljs-string"&gt;"readproperty",
</del>
<ins class="diff-chg">"hljs-string">"subscribeevent"</span>,
</ins>
                    <span class=
"hljs-attr">"href"</span>: <span class=
<del class="diff-old">"hljs-string"&gt;"https://mylamp.example.com/status",
</del>
<ins class="diff-chg">"hljs-string">"/events/thing_updated{?diff}"</span>,
</ins>
                    <span class=
<del class="diff-old">"hljs-attr"&gt;"htv:methodName": &lt;span class=
"hljs-string"&gt;"GET"
                },
</del>
<ins class="diff-chg">"hljs-attr">"subprotocol"</span>: <span class=
"hljs-string">"sse"</span>,
</ins>                    <span class="hljs-attr">"htv:headers"</span>: [<ins class="diff-chg">
                        {
</ins>                            <span class=<ins class="diff-chg">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"ID of the last event for reconnection"</span>,
</ins>                            <span class=<ins class="diff-chg">
"hljs-attr">"htv:fieldName"</span>: <span class=
"hljs-string">"Last-Event-ID"</span>
                        }
                    ],
</ins>                    <span class="hljs-attr">"response"</span>: {                        <span class=<ins class="diff-chg">
"hljs-attr">"contentType"</span>: <span class=
"hljs-string">"text/event-stream"</span>
                    }
                }
            ]
        },
</ins>        <span class="hljs-attr">"thingDeleted"</span>: {            <span class=<ins class="diff-chg">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"Deletion of Thing Descriptions from the directory"</span>,
</ins>            <span class="hljs-attr">"data"</span>: {                <span class=<ins class="diff-chg">
"hljs-attr">"title"</span>: <span class="hljs-string">"Partial TD"</span>,
</ins>                <span class="hljs-attr">"type"</span>: <span class=<ins class="diff-chg">
"hljs-string">"object"</span>
            },
</ins>            <span class="hljs-attr">"forms"</span>: [
                {
                    <span class=
"hljs-attr">"op"</span>: <span class=
<del class="diff-old">"hljs-string"&gt;"writeproperty",
</del>
<ins class="diff-chg">"hljs-string">"subscribeevent"</span>,
</ins>
                    <span class=
"hljs-attr">"href"</span>: <span class=
<del class="diff-old">"hljs-string"&gt;"https://mylamp.example.com/status",
</del>
<ins class="diff-chg">"hljs-string">"/events/thing_deleted"</span>,
</ins>
                    <span class=
<del class="diff-old">"hljs-attr"&gt;"htv:methodName": &lt;span class=
"hljs-string"&gt;"PUT"
</del>
<ins class="diff-chg">"hljs-attr">"subprotocol"</span>: <span class=
"hljs-string">"sse"</span>,
</ins>                    <span class="hljs-attr">"htv:headers"</span>: [<ins class="diff-chg">
                        {
</ins>                            <span class=<ins class="diff-chg">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"ID of the last event for reconnection"</span>,
</ins>                            <span class=<ins class="diff-chg">
"hljs-attr">"htv:fieldName"</span>: <span class=
"hljs-string">"Last-Event-ID"</span>
                        }
                    ],
</ins>                    <span class="hljs-attr">"response"</span>: {                        <span class=<ins class="diff-chg">
"hljs-attr">"contentType"</span>: <span class=
"hljs-string">"text/event-stream"</span>
                    }
</ins>
                }
            ]
        }
    }
}
</code>
</pre>
<del class="diff-old">8.3.2
Other
Protocol
Bindings
The
number
of
Protocol
Bindings
a
Thing
can
implement
is
not
restricted.
Other
Protocol
Bindings
(e.g.,
for
CoAP,
MQTT,
or
OPC
UA)
are
intended
to
be
standardized
in
separate
documents
such
as
a
protocol
Vocabulary
similar
to
HTTP
Vocabulary
in
RDF
1.0
[
HTTP-in-RDF10
]
or
specifications
including
Default
Value
definitions.
Such
protocols
can
be
simply
integrated
into
the
TD
by
the
usage
of
the
TD
Context
Extension
mechanism
(see
7.
TD
Context
Extensions
).
Please
refer
to
[
WOT-BINDING-TEMPLATES
]
for
information
on
how
to
describe
IoT
platforms
and
ecosystems.
</del>
<div class="note" id="issue-container-generatedID-5">
<div role="heading" class="ednote-title marker" id="h-ednote-5" aria-level="6">
<span>
Editor's
note
</span>
<span class= "issue-label">:
<ins class="diff-new">Context
URIs
</ins></span>
</div>
<p class="">
<del class="diff-old">Needs
to
be
updated
to
include
points
noted
in
TD
Issue
1348
.
Note
that
separate
Security
and
Privacy
Consideration
sections
</del>
<ins class="diff-chg">The
context
URIs
</ins>
are
<del class="diff-old">now
required,
so
this
section
has
been
refactored.
</del>
<ins class="diff-chg">tentative
and
subject
to
change.
</ins>
</p>
</div>
</section>
</section>
</section>
</section>
<section id="security-considerations">
<div class="header-wrapper">
<h2 id="x8-security-considerations">
<bdi class="secno">
<del class="diff-old">9.
</del>
<ins class="diff-chg">8.
</ins>
</bdi>
Security
Considerations
</h2>
<a class="self-link" href="#security-considerations" aria-label= "Permalink for Section 8.">
</a>
</div>
<p>
<del class="diff-old">This
section
</del>
<ins class="diff-chg">Security
</ins>
is
<del class="diff-old">non-normative.
In
general
the
security
measures
taken
to
protect
</del>
a
<ins class="diff-new">cross-cutting
issue
that
needs
to
be
considered
in
all
</ins>
WoT
<del class="diff-old">system
will
depend
on
the
threats
</del>
<ins class="diff-chg">building
blocks
</ins>
and
<del class="diff-old">attackers
that
system
may
face
</del>
<ins class="diff-chg">WoT
implementations.
This
chapter
summarizes
some
general
issues
</ins>
and
<ins class="diff-new">guidelines
to
help
preserve
</ins>
the
<del class="diff-old">value
</del>
<ins class="diff-chg">security
</ins>
of
<del class="diff-old">the
assets
needs
to
protect.
A
</del>
<ins class="diff-chg">concrete
WoT
discovery
implementations.
For
a
more
</ins>
detailed
<del class="diff-old">discussion
</del>
<ins class="diff-chg">and
complete
analysis
</ins>
of
<ins class="diff-new">both
</ins>
security
<del class="diff-old">(and
privacy)
considerations
for
the
Web
of
Things,
including
a
threat
model
that
can
be
adapted
to
various
circumstances,
is
presented
in
</del>
<ins class="diff-chg">and
privacy
issues,
see
</ins>
the
<del class="diff-old">informative
document
</del>
<em>
<ins class="diff-chg">WoT
Security
and
Privacy
Guidelines
</ins></em><ins class="diff-chg">
specification
</ins>
[
<cite>
<del class="diff-old">WOT-SECURITY-GUIDELINES
</del>
<a class="bibref" data-link-type="biblio" href= "#bib-wot-security" title= "Web of Things (WoT) Security and Privacy Guidelines">
<ins class="diff-chg">WOT-SECURITY
</ins>
</a>
</cite>
].
<del class="diff-old">This
section
discusses
only
security
risks
and
possible
mitigations
directly
relevant
to
the
</del>
WoT
Thing
<del class="diff-old">Description.
A
</del>
<ins class="diff-chg">and
</ins>
WoT
<del class="diff-old">Thing
Description
can
describe
both
secure
</del>
<ins class="diff-chg">TDDs
are
also
web
services
</ins>
and
<del class="diff-old">insecure
network
interfaces.
When
a
Thing
Description
is
retro-fitted
</del>
<ins class="diff-chg">should
be
implemented
using
best
practices
for
web
services.
In
addition
</ins>
to
<del class="diff-old">an
existing
network
interface,
no
change
in
</del>
the
<ins class="diff-new">specific
</ins>
security
<del class="diff-old">status
of
the
network
interface
is
to
be
expected.
The
use
of
a
WoT
Thing
Description
introduces
</del>
<ins class="diff-chg">considerations
below,
</ins>
the
<del class="diff-old">privacy
</del>
<ins class="diff-chg">security
</ins>
risks
<del class="diff-old">given
</del>
<ins class="diff-chg">and
mitigations
discussed
</ins>
in
<ins class="diff-new">guides
such
as
</ins>
the
<del class="diff-old">following
sections.
After
each
risk,
we
suggest
some
possible
mitigations.
</del>
<ins class="diff-chg">OWASP
Top
10
[
</ins><cite><a class="bibref" data-link-type="biblio" href= "#bib-owasp-top-10" title="OWASP Top Ten"><ins class="diff-chg">
OWASP-Top-10
</ins></a></cite><ins class="diff-chg">
]
should
be
evaluated,
and
if
applicable,
addressed.
</ins>
</p>
<section id="security-consideration-dos">
<div class="header-wrapper">
<h3 id="x8-1-denial-of-service">
<del class="diff-old">9.1
</del>
<bdi class="secno">
<ins class="diff-chg">8.1
</ins>
</bdi>
<del class="diff-old">TD
Interception
and
Tampering
Risk
</del>
<ins class="diff-chg">Denial
of
Service
</ins>
</h3>
<a class="self-link" href="#security-consideration-dos" aria-label= "Permalink for Section 8.1">
</a>
</div>
<p>
<del class="diff-old">Intercepting
</del>
<ins class="diff-chg">Certain
functions
of
the
directory
service,
in
particular
search
queries,
may
require
significant
resources
to
execute
</ins>
and
<del class="diff-old">tampering
with
TDs
</del>
<ins class="diff-chg">this
fact
</ins>
can
be
used
to
launch
<del class="diff-old">man-in-the-middle
attacks,
for
example
</del>
<ins class="diff-chg">denial
of
service
(DoS)
attacks
against
WoT
Thing
Description
Directory
services.
In
such
an
attack
a
WoT
Directory
would
be
overloaded
</ins>
by
<del class="diff-old">rewriting
URLs
in
TDs
to
redirect
accesses
</del>
<ins class="diff-chg">requests
from
the
attacker
and
unable
</ins>
to
<del class="diff-old">a
malicious
intermediary
that
can
capture
or
manipulate
data.
</del>
<ins class="diff-chg">service
other
requests.
</ins>
</p>
<dl>
<dt>
<del class="diff-old">Mitigation:
</del>
<ins class="diff-chg">Mitigations:
</ins>
</dt>
<dd>
<del class="diff-old">Obtain
</del>
<ul>
<li>
<span class="rfc2119-assertion" id="sec-tdd-throttle-queries">
<ins class="diff-chg">A
WoT
</ins>
Thing
<del class="diff-old">Descriptions
only
through
mutually
authenticated
secure
channels.
This
ensures
that
the
Consumer
and
</del>
<ins class="diff-chg">Description
Directory
implementation
</ins><em class= "rfc2119"><ins class="diff-chg">
SHOULD
</ins></em><ins class="diff-chg">
limit
</ins>
the
<del class="diff-old">server
are
both
sure
</del>
<ins class="diff-chg">number
</ins>
of
<ins class="diff-new">queries
per
unit
time
from
</ins>
the
<del class="diff-old">identity
</del>
<ins class="diff-chg">same
requestor.
</ins></span></li><li><span class="rfc2119-assertion" id= "sec-tdd-limit-query-complexity"><ins class="diff-chg">
A
WoT
Thing
Description
Directory
implementation
</ins><em class="rfc2119"><ins class="diff-chg">
SHOULD
</ins></em><ins class="diff-chg">
limit
the
complexity
</ins>
of
<ins class="diff-new">queries
(for
example,
</ins>
the
<del class="diff-old">other
party
to
</del>
<ins class="diff-chg">total
length
of
</ins>
the
<del class="diff-old">communication.
This
is
also
necessary
in
order
to
deliver
TDs
only
</del>
<ins class="diff-chg">query
expression
or
its
depth).
</ins></span></li><li><span class="rfc2119-assertion" id="sec-tdd-query-watchdog"><ins class="diff-chg">
A
WoT
Thing
Description
Directory
implementation
</ins><em class= "rfc2119"><ins class="diff-chg">
SHOULD
</ins></em><ins class="diff-chg">
use
a
watchdog
timer
</ins>
to
<del class="diff-old">authorized
users.
</del>
<ins class="diff-chg">abort
queries
that
take
more
than
a
certain
maximum
(implementation-configurable)
amount
of
time.
</ins></span></li></ul>
</dd>
</dl>
</section>
<section id="security-consideration-amp-ddos">
<div class="header-wrapper">
<del class="diff-old">9.2
</del>
<h3 id="x8-2-amplification-and-distributed-denial-of-service">
<bdi class="secno">
<ins class="diff-chg">8.2
</ins>
</bdi>
<del class="diff-old">Context
Interception
</del>
<ins class="diff-chg">Amplification
</ins>
and
<del class="diff-old">Tampering
Risk
</del>
<ins class="diff-chg">Distributed
Denial
of
Service
</ins>
</h3>
<a class="self-link" href="#security-consideration-amp-ddos" aria-label="Permalink for Section 8.2">
</a>
</div>
<p>
<del class="diff-old">Intercepting
and
tampering
with
context
files
can
</del>
<ins class="diff-chg">It
may
also
</ins>
be
<del class="diff-old">used
</del>
<ins class="diff-chg">possible
</ins>
to
<del class="diff-old">facilitate
</del>
<ins class="diff-chg">use
elements
of
WoT
Discovery
mechanisms
to
launch
distributed
denial
of
service
(DDoS)
</ins>
attacks
<del class="diff-old">by
modifying
</del>
<ins class="diff-chg">against
other
targets.
In
such
an
attack
</ins>
the
<del class="diff-old">interpretation
</del>
<ins class="diff-chg">WoT
Discovery
service
itself
is
not
the
target.
Instead,
an
aspect
</ins>
of
<del class="diff-old">vocabulary.
Mitigation:
Ideally
context
files
</del>
<ins class="diff-chg">the
WoT
Discovery
service
</ins>
would
<del class="diff-old">only
</del>
be
<del class="diff-old">obtained
through
secure
channels
established
by
mutual
authentication
but
it
is
notable
(and
unfortunate)
</del>
<ins class="diff-chg">exploited
to
generate
amplified
network
traffic
</ins>
that
<del class="diff-old">many
contexts
are
indicated
using
HTTP
URLs,
which
are
vulnerable
</del>
<ins class="diff-chg">overloads
a
third
party,
the
actual
target.
Such
an
attack
has
two
requirements:
first,
the
ability
</ins>
to
<del class="diff-old">interception
and
modification
if
dereferenced.
However,
if
context
files
are
immutable
and
cached,
</del>
<ins class="diff-chg">redirect
traffic
to
a
third
party,
</ins>
and
<del class="diff-old">dereferencing
is
avoided
whenever
possible,
then
this
risk
</del>
<ins class="diff-chg">second,
an
intermediary
service
that
</ins>
can
be
<del class="diff-old">reduced.
If
it
is
necessary
</del>
<ins class="diff-chg">exploited
</ins>
to
<del class="diff-old">fetch
a
context
file,
an
implementation
may
also
attempt
</del>
<ins class="diff-chg">amplify
network
traffic
from
the
attacker.
Redirection
of
network
traffic
is
possible
in
some
protocols,
such
as
unsecured
CoAP,
by
modifying
source
information
in
headers.
Amplification
is
possible
by
taking
advantage
of
three
multiplicative
factors:
the
ratio
of
request
</ins>
to
<ins class="diff-new">response
payload
sizes,
</ins>
use
<del class="diff-old">HTTPS
(HTTP
over
TLS)
even
when
only
</del>
<ins class="diff-chg">of
"observe"
in
protocols
like
CoAP
(which
can
give
multiple
results
for
one
request),
and
use
of
multicast
(which
can
allow
multiple
servers
to
respond
to
one
request).
Services
which
do
not
support
authentication
are
ideal
intermediaries
for
such
</ins>
an
<del class="diff-old">HTTP
URL
is
given.
10.
Privacy
Considerations
</del>
<ins class="diff-chg">indirect
attack.
Unfortunately,
the
Introduction
mechanisms
for
WoT
Discovery
are
meant
to
provide
open
access
mechanisms
to
initiate
discovery
and
might
be
exploited
for
this
purpose.
</ins></p><dl><dt><ins class="diff-chg">
Mitigations:
</ins></dt><dd><ul><li>
<span class="rfc2119-assertion" id= "sec-tdd-intro-no-observe">
<ins class="diff-chg">Open
implementations
of
Introduction
mechanisms
</ins><em class="rfc2119"><ins class="diff-chg">
SHOULD
NOT
</ins></em><ins class="diff-chg">
support
observe
or
similar
extended
result
subprotocols.
</ins></span>
</li>
<li>
<del class="diff-old">This
section
is
non-normative.
</del>
<span class="rfc2119-assertion" id= "sec-tdd-intro-no-multicast">
<ins class="diff-chg">Open
implementations
of
Introduction
mechanisms
</ins><em class="rfc2119"><ins class="diff-chg">
SHOULD
NOT
</ins>
</em>
<del class="diff-old">Privacy
risks
will
depend
on
</del>
<ins class="diff-chg">respond
to
multicast
requests
unless
this
is
absolutely
required
by
</ins>
the
<del class="diff-old">association
</del>
<ins class="diff-chg">protocol.
</ins></span><span class="rfc2119-assertion" id= "sec-tdd-intro-if-multicast-required"><ins class="diff-chg">
If
support
for
multicast
is
required,
in
the
case
</ins>
of
<del class="diff-old">Things
with
identifiable
people
and
both
</del>
<ins class="diff-chg">CoAP,
</ins>
the
<del class="diff-old">direct
information
and
</del>
<ins class="diff-chg">recommendations
made
in
[
</ins><cite><a class="bibref" data-link-type="biblio" href= "#bib-rfc9175" title= "Constrained Application Protocol (CoAP): Echo, Request-Tag, and Token Processing"><ins class="diff-chg">
RFC9175
</ins></a></cite><ins class="diff-chg">
]
</ins><em class="rfc2119"><ins class="diff-chg">
SHOULD
</ins></em><ins class="diff-chg">
be
applied.
</ins></span><ins class="diff-chg">
Note
however
that
in
</ins>
the
<del class="diff-old">inferred
information
available
from
such
an
association.
A
detailed
discussion
</del>
<ins class="diff-chg">case
</ins>
of
<del class="diff-old">privacy
(and
security)
considerations
for
</del>
<ins class="diff-chg">discovery
</ins>
the
<del class="diff-old">Web
</del>
<ins class="diff-chg">number
</ins>
of
<del class="diff-old">Things,
including
a
threat
model
</del>
<ins class="diff-chg">servers
</ins>
that
<del class="diff-old">can
be
adapted
</del>
<ins class="diff-chg">might
respond
</ins>
to
<del class="diff-old">various
circumstances,
is
presented
</del>
<ins class="diff-chg">a
multicast
request
will
generally
not
be
known
in
advance,
</ins>
in
<ins class="diff-new">which
case
</ins>
the
<del class="diff-old">informative
document
</del>
<ins class="diff-chg">mitigations
proposed
in
</ins>
[
<cite>
<del class="diff-old">WOT-SECURITY-GUIDELINES
</del>
<a class= "bibref" data-link-type="biblio" href="#bib-rfc9175" title= "Constrained Application Protocol (CoAP): Echo, Request-Tag, and Token Processing">
<ins class="diff-chg">RFC9175
</ins>
</a>
</cite>
<del class="diff-old">].
This
section
discusses
only
privacy
risks
and
possible
mitigations
directly
relevant
</del>
<ins class="diff-chg">]
may
not
be
effective.
</ins></li><li><ins class="diff-chg">
Limit
the
size
of
responses
</ins>
to
the
<del class="diff-old">WoT
Thing
Description.
</del>
<ins class="diff-chg">minimum.
</ins><span class= "rfc2119-assertion" id="sec-tdd-intro-limit-response-size">
The
<del class="diff-old">use
</del>
<ins class="diff-chg">total
size
</ins>
of
<del class="diff-old">a
WoT
Thing
Description
introduces
the
privacy
risks
given
in
the
following
sections.
After
each
risk,
we
suggest
some
possible
mitigations.
10.1
Context
Fetching
Fetching
</del>
<ins class="diff-chg">responses
to
an
Introduction
</ins><em class= "rfc2119"><ins class="diff-chg">
SHOULD
</ins></em><ins class="diff-chg">
be
less
than
3x
</ins>
the
<del class="diff-old">vocabulary
files
given
in
</del>
<ins class="diff-chg">size
of
</ins>
the
<del class="diff-old">@context
member
</del>
<ins class="diff-chg">total
size
</ins>
of
<ins class="diff-new">request,
and
this
should
include
</ins>
any
<del class="diff-old">JSON-LD
</del>
<ins class="diff-chg">error
responses.
</ins></span><ins class="diff-chg">
This
is
consistent
with
DDOS
mitigations
in
</ins>
[
<cite>
<del class="diff-old">json-ld11
</del>
<a class="bibref" data-link-type="biblio" href="#bib-rfc9000" title= "QUIC: A UDP-Based Multiplexed and Secure Transport">
<ins class="diff-chg">RFC9000
</ins>
</a>
</cite>
]
<del class="diff-old">document
can
be
a
privacy
risk.
In
the
case
of
the
WoT,
an
attacker
can
observe
</del>
<ins class="diff-chg">(QUIC)
and
HTTP/3.
Here
"total
size"
includes
any
headers
required
by
</ins>
the
<ins class="diff-new">protocol
itself.
</ins></li><li><span class="rfc2119-assertion" id= "sec-tdd-intro-throttling"><ins class="diff-new">
Introductions
</ins><em class= "rfc2119"><ins class="diff-new">
SHOULD
</ins></em><ins class="diff-new">
rate-limit
responses
to
any
particular
request
source.
</ins></span></li><li><span class="rfc2119-assertion" id= "sec-tdd-intro-no-ext"><ins class="diff-new">
Introduction
mechanisms
on
a
segmented
</ins>
network
<del class="diff-old">traffic
produced
by
</del>
<ins class="diff-chg">behind
a
firewall
(e.g.
a
LAN)
</ins><em class="rfc2119"><ins class="diff-chg">
SHOULD
NOT
</ins></em><ins class="diff-chg">
respond
to
requests
that
are
(apparently)
from
outside
that
LAN.
</ins></span></li></ul><ins class="diff-chg">
Of
particular
concern
are
Introduction
mechanisms
that
can
return
multiple
results,
</ins>
such
<del class="diff-old">fetches
</del>
<ins class="diff-chg">as
CoRE-RD
</ins>
and
<del class="diff-old">can
</del>
<ins class="diff-chg">DID.
It
may
be
necessary
to
</ins>
use
<del class="diff-old">the
metadata
of
the
fetch,
</del>
<ins class="diff-chg">authentication/authorization
on
</ins>
such
<ins class="diff-new">Introduction
mechanisms
</ins>
as
<del class="diff-old">the
destination
IP
address,
to
infer
information
about
the
device
especially
if
domain-specific
vocabularies
are
used.
This
is
a
risk
even
</del>
<ins class="diff-chg">well
</ins>
if
the
<del class="diff-old">connection
is
encrypted,
and
</del>
<ins class="diff-chg">other
mitigations
above
are
not
sufficient.
A
recommended
alternative
</ins>
is
<del class="diff-old">related
</del>
to
<del class="diff-old">DNS
privacy
leaks.
Mitigation:
Avoid
actual
fetching
of
vocabulary
files.
Vocabulary
files
should
be
cached
whenever
possible.
Ideally
they
would
be
made
immutable,
built
</del>
<ins class="diff-chg">move
multiple
results
from
such
Introductions
</ins>
into
<del class="diff-old">the
interpreting
device,
</del>
<ins class="diff-chg">a
WoT
TDD,
which
can
then
be
protected
by
appropriate
authentication
</ins>
and
<del class="diff-old">not
fetched
at
all,
with
the
URI
in
</del>
<ins class="diff-chg">authorization
measures.
Then
</ins>
the
<del class="diff-old">@context
member
serving
</del>
<ins class="diff-chg">open
Introduction
mechanism
</ins>
only
<del class="diff-old">as
an
identifier
of
the
(known)
vocabulary.
This
requires
</del>
<ins class="diff-chg">has
to
return
one
result,
</ins>
the
<del class="diff-old">use
</del>
<ins class="diff-chg">URL
</ins>
of
<del class="diff-old">strict
version
control,
as
updates
should
use
a
new
URI
to
ensure
that
existing
URIs
can
refer
to
immutable
data.
Use
well-known
standard
vocabulary
files
whenever
possible
to
improve
</del>
the
<del class="diff-old">chances
</del>
<ins class="diff-chg">TDD.
Introduction
mechanisms
</ins>
that
<ins class="diff-new">are
visible
on
</ins>
the
<del class="diff-old">context
file
will
</del>
<ins class="diff-chg">open
internet
should
</ins>
be
<del class="diff-old">available
locally
</del>
<ins class="diff-chg">especially
careful
</ins>
to
<del class="diff-old">systems
interpreting
</del>
<ins class="diff-chg">implement
</ins>
the
<del class="diff-old">metadata
in
a
Thing
Description.
</del>
<ins class="diff-chg">above
mitigations,
and
perhaps
avoid
Introduction
mechanisms
that
can
return
multiple
URLs
completely.
</ins>
</dd>
</dl>
</section>
<section id="security-consideration-lan-self-discovery">
<div class="header-wrapper">
<h3 id="x8-3-self-discovery-on-lans">
<bdi class="secno">
<del class="diff-old">10.2
</del>
<ins class="diff-chg">8.3
</ins>
</bdi>
<del class="diff-old">Immutable
Identifiers
</del>
<ins class="diff-chg">Self-Discovery
on
LANs
</ins>
</h3>
<a class="self-link" href= "#security-consideration-lan-self-discovery" aria-label= "Permalink for Section 8.3">
</a>
</div>
<p>
<del class="diff-old">A
Thing
Description
containing
an
identifier
(
id
)
</del>
<ins class="diff-chg">On
a
LAN,
certificates
and
browsers
</ins>
may
<del class="diff-old">describe
</del>
<ins class="diff-chg">not
be
able
to
property
set
up
TLS
for
HTTPS
because
browsers
expect
certificates
pointing
to
</ins>
a
<del class="diff-old">Thing
that
</del>
<ins class="diff-chg">publicly-visible
URL.
Using
HTTP
</ins>
is
<del class="diff-old">associated
</del>
<ins class="diff-chg">common
practice
inside
LANs
but
in
combination
</ins>
with
<del class="diff-old">an
identifiable
person.
Such
identifiers
pose
various
risks
including
tracking.
However,
if
the
identifier
is
also
immutable,
then
the
tracking
risk
is
amplified,
since
a
device
may
</del>
<ins class="diff-chg">self-description
it
means
that
WoT
Things
would
</ins>
be
<del class="diff-old">sold
or
given
</del>
<ins class="diff-chg">essentially
be
making
TDs
visible
</ins>
to
<del class="diff-old">another
person
and
the
known
ID
used
</del>
<ins class="diff-chg">everyone
with
access
</ins>
to
<del class="diff-old">track
that
person.
</del>
<ins class="diff-chg">the
private
LAN.
Even
if
security
mechanisms
such
as
HTTP
passwords
were
used,
these
are
not
effective
(they
can
be
easily
discovered
by
a
traffic
analyser)
without
transport
security.
</ins>
</p>
<dl>
<dt>
<del class="diff-old">Mitigation:
</del>
<ins class="diff-chg">Mitigations:
</ins>
</dt>
<dd>
<del class="diff-old">All
identifiers
should
be
mutable,
and
there
should
</del>
<p>
<span class="rfc2119-assertion" id="sec-self-psk">
<ins class="diff-chg">PSK
(pre-shared
keys)
</ins><em class="rfc2119"><ins class="diff-chg">
SHOULD
</ins></em>
be
<del class="diff-old">a
mechanism
to
update
the
id
</del>
<ins class="diff-chg">used
if
possible
on
LANs,
meaning
one
</ins>
of
<del class="diff-old">a
Thing
.
Specifically,
</del>
the
<del class="diff-old">id
of
a
Thing
should
not
be
fixed
</del>
<ins class="diff-chg">ciphersuites
</ins>
in
<del class="diff-old">hardware.
</del>
<ins class="diff-chg">[
</ins><cite><a class="bibref" data-link-type="biblio" href= "#bib-rfc4279" title= "Pre-Shared Key Ciphersuites for Transport Layer Security (TLS)"><ins class="diff-chg">
RFC4279
</ins></a></cite><ins class="diff-chg">
].
</ins></span>
This
<del class="diff-old">does,
however,
conflict
with
the
Linked
Data
ideal
</del>
<ins class="diff-chg">does
require
</ins>
that
<del class="diff-old">identifiers
</del>
<ins class="diff-chg">Things
</ins>
are
<del class="diff-old">fixed
URIs.
In
many
circumstances
it
will
be
acceptable
to
only
allow
updates
to
identifiers
if
</del>
<ins class="diff-chg">assigned
PSKs
in
</ins>
a
<del class="diff-old">Thing
</del>
<ins class="diff-chg">common
security
domain,
which
</ins>
is
<del class="diff-old">reinitialized.
In
this
case
as
a
software
entity
</del>
<ins class="diff-chg">typically
done
by
following
an
onboarding
process.
Unfortunately,
specific
onboarding
processes
are
currently
out
of
scope
of
</ins>
the
<del class="diff-old">old
Thing
ceases
to
exist
and
a
new
Thing
</del>
<ins class="diff-chg">WoT
specifications.
</ins></p><p><ins class="diff-chg">
An
alternative
</ins>
is
<del class="diff-old">created.
This
can
be
sufficient
</del>
to
<del class="diff-old">break
a
tracking
chain
when,
for
example,
a
device
</del>
<ins class="diff-chg">depend
on
local
network
security
(i.e.
WEP).
This
</ins>
is
<del class="diff-old">sold
to
a
new
owner.
Alternatively,
if
more
frequent
changes
are
desired
during
</del>
<ins class="diff-chg">not
</ins>
the
<del class="diff-old">operational
phase
of
a
device,
</del>
<ins class="diff-chg">best
solution
from
</ins>
a
<del class="diff-old">mechanism
can
be
put
into
place
to
notify
only
authorized
users
</del>
<ins class="diff-chg">security
or
privacy
point
</ins>
of
<del class="diff-old">the
change
</del>
<ins class="diff-chg">view
but
may
be
acceptable
</ins>
in
<del class="diff-old">identifier
when
a
change
is
made.
</del>
<ins class="diff-chg">some
contexts.
</ins>
Note
however
that
<del class="diff-old">some
classes
of
devices,
e.g.,
medical
devices,
may
require
immutable
IDs
by
law
in
some
jurisdictions.
In
this
case
extra
attention
should
be
paid
to
secure
</del>
<ins class="diff-chg">all
users
with
</ins>
access
to
<del class="diff-old">files,
such
as
Thing
Descriptions,
containing
such
immutable
identifiers.
It
may
also
be
desirable
to
not
share
the
"true"
immutable
identifier
in
such
a
case
in
</del>
the
<del class="diff-old">TD
whenever
possible.
10.3
Fingerprinting
As
noted
above,
the
id
member
</del>
<ins class="diff-chg">network
would
</ins>
in
<del class="diff-old">a
TD
can
pose
a
privacy
risk.
However,
even
if
the
id
is
updated
as
described
</del>
<ins class="diff-chg">turn
have
access
</ins>
to
<del class="diff-old">mitigate
its
tracking
risk,
it
may
still
</del>
<ins class="diff-chg">all
TDs
via
self-description.
</ins><span class="rfc2119-assertion" id="sec-self-segment"><ins class="diff-chg">
If
Things
cannot
</ins>
be
<del class="diff-old">possible
to
associate
a
TD
</del>
<ins class="diff-chg">individually
secured
</ins>
with
<del class="diff-old">a
particular
physical
device,
</del>
<ins class="diff-chg">transport
security
</ins>
and
<del class="diff-old">from
there
to
an
identifiable
person,
through
fingerprinting.
Even
if
</del>
<ins class="diff-chg">authentication
and
authorization,
</ins>
a
<del class="diff-old">specific
device
instance
cannot
be
identified
through
fingerprinting,
it
may
</del>
<ins class="diff-chg">separate
network
</ins><em class="rfc2119"><ins class="diff-chg">
SHOULD
</ins></em>
be
<del class="diff-old">possible
to
infer
the
type
of
</del>
<ins class="diff-chg">set
up,
i.e.
with
an
alternative
SSID,
and
used
only
for
IoT
devices.
</ins></span><ins class="diff-chg">
Using
</ins>
a
<del class="diff-old">device
from
</del>
<ins class="diff-chg">segmented
network
reduces
</ins>
the
<del class="diff-old">information
in
</del>
<ins class="diff-chg">need
for
distributing
</ins>
the
<del class="diff-old">TD,
such
as
</del>
<ins class="diff-chg">password
to
this
network
to
those
who
need
access
to
</ins>
the
set
of
<del class="diff-old">interactions,
and
use
this
type
</del>
<ins class="diff-chg">IoT
devices
connected
</ins>
to
<del class="diff-old">infer
private
information
about
an
identifiable
person,
such
as
a
medical
condition.
</del>
<ins class="diff-chg">it.
</ins>
</p>
<del class="diff-old">Mitigation:
Only
authorized
users
should
</del>
<p>
<ins class="diff-chg">Another
alternative
is
to
use
a
reverse
proxy
service
based
in
the
cloud.
Secure
setup
can
</ins>
be
<del class="diff-old">provided
</del>
<ins class="diff-chg">accomplished
if
the
IoT
device
has
</ins>
access
to
the
<del class="diff-old">Thing
Description
for
a
Thing
,
and
only
the
amount
of
information
needed
for
</del>
<ins class="diff-chg">cloud,
since
</ins>
the
<del class="diff-old">level
of
authorization
</del>
<ins class="diff-chg">proxy
server
can
have
a
public
URL
</ins>
and
the
<ins class="diff-new">initial
connection
can
</ins>
use
<del class="diff-old">case
should
be
provided.
If
the
TD
is
only
distributed
to
authorized
users
through
</del>
<ins class="diff-chg">HTTPS,
then
open
a
</ins>
secure
<del class="diff-old">and
confidential
channels,
for
example
through
</del>
<ins class="diff-chg">tunnel
over
</ins>
a
<del class="diff-old">directory
service
that
requires
authentication,
then
external
unauthorized
parties
will
not
have
access
to
the
TD
to
fingerprint
it.
To
further
mitigate
this
risk,
information
not
necessary
for
</del>
<ins class="diff-chg">websocket.
The
proxy
can
in
turn
re-expose
</ins>
a
<del class="diff-old">particular
use
case
</del>
<ins class="diff-chg">secure
endpoint,
and
possible
add
authentication.
The
disadvantages
</ins>
of
<del class="diff-old">a
TD
should
be
omitted
whenever
possible.
For
example,
for
</del>
<ins class="diff-chg">this
approach
including
depending
on
</ins>
an
<del class="diff-old">ad-hoc
connection
</del>
<ins class="diff-chg">external
cloud
service
and
the
need
</ins>
to
<ins class="diff-new">expose
an
external
access
point
(which
is
itself
</ins>
a
<del class="diff-old">device
where
the
Consumer
does
not
store
state
about
the
Thing,
the
id
</del>
<ins class="diff-chg">security
risk).
The
first
disadvantage
</ins>
can
be
<del class="diff-old">omitted.
If
</del>
<ins class="diff-chg">addressed
by
hosting
</ins>
the
<del class="diff-old">Consumer
does
not
need
certain
interactions
for
its
use
case,
they
can
be
omitted.
If
</del>
<ins class="diff-chg">proxy
service
locally
and
exposing
a
public
URL
using
e.g.
dynamic
DNS
if
</ins>
the
<del class="diff-old">Consumer
</del>
<ins class="diff-chg">local
server
</ins>
is
<del class="diff-old">not
authorized
to
use
certain
interactions,
they
can
likewise
be
omitted.
</del>
<ins class="diff-chg">connected
through
an
ISP.
</ins><span class="rfc2119-assertion" id="sec-self-proxy">
If
<del class="diff-old">the
Consumer
does
not
have
any
capability
to
display
human-readable
information
such
as
titles
or
descriptions,
they
can
</del>
<ins class="diff-chg">Things
cannot
</ins>
be
<del class="diff-old">omitted
or
replaced
</del>
<ins class="diff-chg">individually
secured
</ins>
with
<del class="diff-old">zero-length
strings.
</del>
<ins class="diff-chg">transport
security
and
authentication
and
authorization,
then
they
</ins><em class= "rfc2119"><ins class="diff-chg">
MAY
</ins></em><ins class="diff-chg">
be
made
available
for
general
access
via
a
proxy
that
can
provide
suitable
access
controls.
</ins></span></p>
</dd>
</dl>
</section>
</section>
<section id="privacy-considerations">
<div class="header-wrapper">
<h2 id="x9-privacy-considerations">
<del class="diff-old">10.4
</del>
<bdi class="secno">
<ins class="diff-chg">9.
</ins>
</bdi>
<del class="diff-old">Globally
Unique
Identifiers
</del>
<ins class="diff-chg">Privacy
Considerations
</ins></h2><a class="self-link" href="#privacy-considerations" aria-label= "Permalink for Section 9.">
</a>
</div>
<p>
<del class="diff-old">Globally
unique
identifiers
pose
a
privacy
risk
if
a
centralized
authority
</del>
<ins class="diff-chg">Privacy
</ins>
is
<del class="diff-old">needed
to
create
and
distribute
them,
since
then
a
third
party
has
knowledge
of
the
identifiers.
Mitigation:
The
id
field
in
TDs
are
intentionally
not
required
to
be
globally
unique.
There
are
several
cryptographic
mechanisms
available
to
generate
suitable
IDs
in
</del>
a
<del class="diff-old">distributed
fashion
</del>
<ins class="diff-chg">cross-cutting
issue
</ins>
that
<del class="diff-old">do
not
require
a
central
registry.
These
mechanisms
typically
have
a
very
low
probability
of
generating
duplicate
identifiers,
and
this
</del>
needs
to
be
<del class="diff-old">taken
into
account
</del>
<ins class="diff-chg">considered
</ins>
in
<del class="diff-old">the
system
design;
for
example,
by
detecting
duplicates
</del>
<ins class="diff-chg">all
WoT
building
blocks
</ins>
and
<del class="diff-old">regenerating
IDs
when
necessary.
The
scope
of
IDs
also
does
not
need
to
be
global:
it
is
acceptable
</del>
<ins class="diff-chg">WoT
implementations.
This
chapter
summarizes
some
general
issues
and
guidelines
</ins>
to
<del class="diff-old">use
identifiers
that
only
distinguish
Things
in
a
certain
context,
such
as
within
</del>
<ins class="diff-chg">help
preserve
the
privacy
of
concrete
WoT
discovery
implementations.
For
</ins>
a
<del class="diff-old">home
or
factory.
10.5
Inferencing
</del>
<ins class="diff-chg">more
detailed
and
complete
analysis
</ins>
of
<del class="diff-old">Personally
Identifiable
Information
</del>
<ins class="diff-chg">both
security
and
privacy
issues,
see
the
</ins><em><ins class="diff-chg">
WoT
Security
and
Privacy
Guidelines
</ins></em><ins class="diff-chg">
specification
[
</ins><cite>
<a class="bibref" data-link-type="biblio" href= "#bib-wot-security" title= "Web of Things (WoT) Security and Privacy Guidelines">
<ins class="diff-new">WOT-SECURITY
</ins>
</a>
</cite>
<ins class="diff-chg">].
</ins></p>
<p>
<del class="diff-old">In
many
locales,
in
order
</del>
<ins class="diff-chg">The
WoT
discovery
architecture
is
designed
</ins>
to
<del class="diff-old">protect
</del>
<ins class="diff-chg">avoid
a
dependence
on
</ins>
the
privacy
of
<del class="diff-old">users,
there
are
legal
requirements
</del>
<ins class="diff-chg">existing
discovery
schemes
by
using
a
two-phase
approach
and
allowing
</ins>
for
the
<del class="diff-old">handling
</del>
<ins class="diff-chg">enforcement
</ins>
of
<del class="diff-old">personally
identifiable
information,
that
is,
information
that
can
be
associated
</del>
<ins class="diff-chg">authorization
before
metadata
release.
However
several
privacy
risks
still
exist.
These
are
listed
below
along
</ins>
with
<del class="diff-old">a
particular
person.
Such
information
can
</del>
<ins class="diff-chg">possible
mitigations.
The
level
</ins>
of
<del class="diff-old">course
be
generated
by
IoT
devices
directly.
However,
</del>
<ins class="diff-chg">risk
to
privacy
in
particular
depends
on
</ins>
the
<del class="diff-old">existence
</del>
<ins class="diff-chg">use
case
</ins>
and
<del class="diff-old">metadata
of
IoT
devices
(the
kind
of
data
stored
in
</del>
<ins class="diff-chg">whether
there
is
</ins>
a
<del class="diff-old">Thing
Description)
can
also
contain
or
be
used
to
infer
personally
identifiable
information.
This
information
can
be
as
simple
as
the
fact
</del>
<ins class="diff-chg">risk
</ins>
that
<ins class="diff-new">information
related
to
</ins>
a
<del class="diff-old">certain
</del>
person
<del class="diff-old">owns
</del>
<ins class="diff-chg">might
be
distributed
in
</ins>
a
<del class="diff-old">certain
type
</del>
<ins class="diff-chg">fashion
inconsistent
with
the
privacy
desires
</ins>
of
<del class="diff-old">device,
which
can
lead
to
additional
inferences
about
</del>
that
person.
<ins class="diff-new">For
privacy
we
distinguish
the
following
broad
classes
of
use
case
scenarios:
</ins>
</p>
<dl>
<dt>
<del class="diff-old">Mitigation:
</del>
<ins class="diff-chg">Institutional
</ins>
</dt>
<dd>
<del class="diff-old">Treat
a
Thing
Description
associated
with
a
personal
device
as
if
it
contained
personally
identifiable
information.
As
an
example
application
of
this
principle,
consider
how
to
obtain
user
consent.
Consent
for
usage
</del>
<ins class="diff-chg">Both
the
Things
producing
metadata
and
the
Consumers
</ins>
of
<del class="diff-old">personally
identifiable
data
generated
</del>
<ins class="diff-chg">that
metadata
are
owned
and
controlled
</ins>
by
<ins class="diff-new">an
institution
or
representatives
of
an
institution.
Example:
Automation
in
</ins>
a
<del class="diff-old">Thing
is
often
obtained
when
</del>
<ins class="diff-chg">factory
where
</ins>
a
<del class="diff-old">Thing
is
paired
with
</del>
<ins class="diff-chg">control
</ins>
system
<del class="diff-old">consuming
the
data,
which
</del>
is
<del class="diff-old">frequently
also
when
the
Thing
Description
is
registered
with
a
local
directory
or
the
system
consuming
</del>
<ins class="diff-chg">accessing
</ins>
the
<del class="diff-old">Thing
Description
</del>
<ins class="diff-chg">state
of
an
assembly
line
</ins>
in
order
to
<del class="diff-old">access
the
device.
In
this
case,
consent
for
using
data
from
a
Thing
can
be
combined
with
consent
for
accessing
</del>
<ins class="diff-chg">evaluate
quality.
</ins></dd><dt><ins class="diff-chg">
Service
</ins></dt><dd><ins class="diff-chg">
The
Things
producing
metadata
are
owned
and
controlled
by
an
institution
or
representatives
of
an
institution
while
</ins>
the
<del class="diff-old">Thing
Description
</del>
<ins class="diff-chg">consumers
are
individuals.
Example:
driver
</ins>
of
<ins class="diff-new">an
electric
vehicle
accessing
</ins>
the
<del class="diff-old">Thing
.
As
a
second
example,
if
we
consider
a
</del>
TD
<del class="diff-old">to
contain
personally
identifiable
information,
then
it
should
not
be
retained
indefinitely
or
used
for
purposes
other
than
those
</del>
for
<del class="diff-old">which
consent
was
given.
11.
Thing
Model
Note
The
following
section
has
its
origin
</del>
<ins class="diff-chg">a
charge
station
</ins>
in
<del class="diff-old">[
wot-thing-description
],
Annex
C.
Here
Thing
Description
Template
is
renamed
</del>
<ins class="diff-chg">order
</ins>
to
<del class="diff-old">Thing
Model
,
but
keeps
the
same
intention.
For
this
version
</del>
<ins class="diff-chg">check
status
</ins>
of
<ins class="diff-new">a
charge.
</ins></dd><dt><ins class="diff-new">
Personal
</ins></dt><dd><ins class="diff-new">
Both
</ins>
the
<del class="diff-old">specification,
Thing
Model
</del>
<ins class="diff-chg">Things
producing
metadata
</ins>
and
<del class="diff-old">its
model
features
(e.g.,
extensions,
referencing,
obligations,
placeholder)
are
formal
introduced.
For
Thing
Model,
an
own
content
type
is
under
discussion.
Please
note
this
section
is
in
work
in
progress.
11.1
Basic
Concept
The
figure
below
illustrates
</del>
the
<del class="diff-old">relation
</del>
<ins class="diff-chg">Consumers
</ins>
of
<del class="diff-old">the
Thing
Model
</del>
<ins class="diff-chg">that
metadata
are
owned
</ins>
and
<del class="diff-old">Thing
Description
.
A
Thing
Model
mainly
describes
interaction
affordances
such
as
</del>
<ins class="diff-chg">controlled
by
</ins>
the
<del class="diff-old">Properties
,
Actions
,
</del>
<ins class="diff-chg">same
individual.
Example:
A
smart
home
control
system
for
charging
an
electric
car
from
home-attached
solar
panels,
both
home
</ins>
and
<del class="diff-old">Events
</del>
<ins class="diff-chg">car
owned
by
the
same
person.
</ins></dd><dt><ins class="diff-chg">
Personal
Peer-to-Peer
</ins></dt><dd><ins class="diff-chg">
The
Things
producing
metadata
</ins>
and
<del class="diff-old">common
metadata.
This
kind
</del>
<ins class="diff-chg">the
Consumers
</ins>
of
<del class="diff-old">template
should
be
valid
</del>
<ins class="diff-chg">that
metadata
are
owned
</ins>
and
<del class="diff-old">followed
</del>
<ins class="diff-chg">controlled
by
different
individuals.
Example:
A
smart
home
control
system
</ins>
for
<del class="diff-old">all
instantiated
Thing
Descriptions
</del>
<ins class="diff-chg">charging
a
guest's
electric
car
from
home-attached
solar
panels.
</ins></dd><dt><ins class="diff-chg">
Institutional
Peer-to-Peer
</ins></dt><dd><ins class="diff-chg">
The
Things
producing
metadata
and
the
Consumers
of
</ins>
that
<ins class="diff-new">metadata
</ins>
are
<del class="diff-old">relied
on
this
Thing
Model
.
This
paradigm
can
be
compared
with
abstract
class
or
interface
definition
(~Thing
Model)
in
object-oriented
programming
to
create
objects
(~Thing
Descriptions).
Figure
5
Thing
Model
</del>
<ins class="diff-chg">owned
</ins>
and
<del class="diff-old">its
relation
</del>
<ins class="diff-chg">controlled
by
different
institutions.
Example:
A
utility
provides
and
manages
power
delivered
</ins>
to
<del class="diff-old">the
Thing
Description.
The
Thing
Model
is
</del>
a
<del class="diff-old">logical
description
of
</del>
<ins class="diff-chg">factory,
and
</ins>
the
<ins class="diff-new">factory
provides
an
</ins>
interface
<del class="diff-old">and
possible
interaction
with
Thing
's
Properties
,
Actions
,
and
Events
,
however
it
does
not
contain
Thing
instance-specific
information,
such
as
concrete
protocol
</del>
<ins class="diff-chg">for
the
utility
to
negotiate
on-demand
power
</ins>
usage
<del class="diff-old">(e.g.,
IP
address),
or
even
a
serial
number
</del>
<ins class="diff-chg">reductions.
</ins></dd><dt><ins class="diff-chg">
Client
</ins></dt><dd><ins class="diff-chg">
The
Things
producing
metadata
are
owned
</ins>
and
<del class="diff-old">GPS
location.
However,
Thing
Models
allows
to
include,
e.g.,
security
schemes
if
they
apply
to
</del>
<ins class="diff-chg">controlled
by
an
individual
while
</ins>
the
<del class="diff-old">entire
class
</del>
<ins class="diff-chg">consumers
are
an
institution
or
representatives
</ins>
of
<del class="diff-old">instances
the
model
describes.
They
might
have
URLs
(e.g.,
like
token
servers)
that
might
need
</del>
<ins class="diff-chg">an
institution.
Example:
A
personal
electric
vehicle
exposes
an
interface
</ins>
to
<del class="diff-old">be
omitted
or
parameterized
(with
templates)
although
in
</del>
a
<del class="diff-old">lot
of
cases
these
might
also
be
given.
Thing
Model
</del>
<ins class="diff-chg">public
charging
station
so
that
the
charging
station
</ins>
can
<del class="diff-old">be
serialized
in
</del>
<ins class="diff-chg">evaluate
</ins>
the
<del class="diff-old">same
JSON-based
format
as
a
Thing
Description
which
also
allows
JSON-LD
processing.
Note
that
a
Thing
Model
cannot
be
validated
in
</del>
<ins class="diff-chg">charge
status
of
</ins>
the
<del class="diff-old">same
way
as
Thing
Description
instances
due
to
some
missing
mandatory
terms.
11.2
Thing
Model
Declaration
</del>
<ins class="diff-chg">vehicle.
</ins></dd></dl>
<p>
<del class="diff-old">A
Thing
Model
is
recognized
by
the
top
level
@type
.
Thing
Model
definitions
MUST
use
</del>
<ins class="diff-chg">All
of
these
in
fact
carry
privacy
risks.
Even
in
</ins>
the
<del class="diff-old">keyword
@type
at
top
level
and
a
value
</del>
<ins class="diff-chg">case
</ins>
of
<del class="diff-old">type
string
or
array
that
equals
or
respectively
contains
tm:ThingModel
.
The
prefix
tm
</del>
<ins class="diff-chg">factory
automation,
there
</ins>
is
<del class="diff-old">defined
within
Thing
Descriptions
'
context
and
points
to
</del>
the
<del class="diff-old">Thing
Model
namespace
as
defined
in
4.
Namespaces
.
It
is
intended
</del>
<ins class="diff-chg">chance
</ins>
that
<del class="diff-old">vocabulary
from
the
tm
context
only
</del>
<ins class="diff-chg">data
about
employee
performance
would
</ins>
be
<del class="diff-old">used
in
Thing
Model
definitions
and
are
removed
or
replaced
when
Thing
Descriptions
are
generated
(also
see
11.4
Derivation
of
Thing
Description
Instances
).
A
Thing
Model
MAY
NOT
contain
instance
specific
Protocol
Binding
</del>
<ins class="diff-chg">captured
</ins>
and
<del class="diff-old">security
information
such
as
endpoint
addresses.
Consequently,
Thing
Model
definitions
will
also
</del>
<ins class="diff-chg">would
have
to
</ins>
be
<del class="diff-old">valid
if
there
are
no
JSON
members
like
forms
,
base
,
securityDefinitions
,
and
security
.
Thing
Models
are
also
valid
even
if
these
JSON
members
are
used
(e.g.,
as
template),
however,
the
nested
mandatory
members
like
href
are
omitted.
Example
3
shows
a
valid
sample
lamp
Thing
Model
without
any
protocol
and
security
information.
</del>
<ins class="diff-chg">managed
appropriately.
</ins>
</p>
<del class="diff-old">11.3
Modeling
Tools
</del>
<p>
In
the
<del class="diff-old">context
of
Thing
Model
definitions
specific
features
are
introduced
that
can
be
used
for
Thing
modelling.
11.3.1
Versioning
Over
time,
Thing
Model
definitions
may
change
</del>
<ins class="diff-chg">following
we
make
frequent
reference
to
"tracking".
This
term
covers
multiple
privacy
risks,
including
location
tracking
</ins>
and
<del class="diff-old">must
be
made
identifiable
through
versioning.
</del>
<ins class="diff-chg">behavioral
profiling.
</ins>
In
<del class="diff-old">that
case
</del>
<ins class="diff-chg">general,
</ins>
the
<del class="diff-old">string-based
term
model
can
be
used
within
</del>
<ins class="diff-chg">definition
of
"profiling"
given
in
Article
4
of
</ins>
the
<del class="diff-old">version
container
to
provide
a
version
pattern
like
</del>
<ins class="diff-chg">GDPR
</ins>
[
<cite>
<del class="diff-old">SEMVER
</del>
<a class="bibref" data-link-type="biblio" href="#bib-gdpr-defs" title= "General Data Protection Regulation (GDPR) Article 4 - Definitions">
<ins class="diff-chg">GDPR-Defs
</ins>
</a>
</cite>
<del class="diff-old">].
The
following
snippet
shows
the
usage
of
model
in
a
Thing
Model
instance.
Example
51
:
Thing
Model
versioning
{
    ...
    "" : &lt;span class=
"hljs-string"&gt;"tm:ThingModel",
    : &lt;span class=
"hljs-string"&gt;"Lamp Thing Model",
    : &lt;span class=
"hljs-string"&gt;"Lamp Thing Description Model",
    &lt;span class=
"hljs-string"&gt;"version" : {"model" : &lt;span class=
"hljs-string"&gt;"1.0.0" },
    ...
}
Due
</del>
<ins class="diff-chg">]
is
</ins>
to
<del class="diff-old">the
definition
of
Thing
Model
the
term
instance
can
</del>
be
<del class="diff-old">omitted
within
the
version
container.
</del>
<ins class="diff-chg">considered
equivalent
to
"tracking"
as
used
in
this
document.
</ins>
</p>
<p>
<del class="diff-old">When
Thing
Models
are
updated
and
have
a
new
version,
this
may
affect
other
Thing
Models
that
use
the
extension
and
import
features
(see
Section
11.3.2
Extension
</del>
<ins class="diff-chg">With
these
definitions
</ins>
and
<del class="diff-old">Import
).
In
</del>
<ins class="diff-chg">categories
established,
we
will
now
discuss
</ins>
some
<del class="diff-old">cases
it
is
also
useful
to
reflect
a
new
version
in
the
file
name
and/or
in
a
corresponding
URL
to
identify
the
version.
</del>
<ins class="diff-chg">specific
privacy
risks
and
potential
mitigations.
</ins>
</p>
<section id="privacy-consideration-location-tracking">
<div class="header-wrapper">
<h3 id="x9-1-location-tracking-and-profiling">
<bdi class= "secno">
<del class="diff-old">11.3.2
</del>
<ins class="diff-chg">9.1
</ins>
</bdi>
<del class="diff-old">Extension
</del>
<ins class="diff-chg">Location
Tracking
</ins>
and
<del class="diff-old">Import
</del>
<ins class="diff-chg">Profiling
</ins></h3><a class="self-link" href= "#privacy-consideration-location-tracking" aria-label= "Permalink for Section 9.1">
</a>
</div>
<p>
A
<del class="diff-old">Thing
Model
can
extend
an
existing
Thing
Model
by
using
the
tm:extends
mechanism
announced
in
</del>
<ins class="diff-chg">discovery
service
may
potentially
allow
</ins>
the
<del class="diff-old">links
definition:
A
Thing
Model
MUST
use
at
least
one
links
entry
with
"rel":"tm:extends"
that
targets
</del>
<ins class="diff-chg">approximate
location
of
</ins>
a
<del class="diff-old">Thing
Model
that
is
</del>
<ins class="diff-chg">person
to
</ins>
be
<del class="diff-old">extended.
The
Thing
Model
will
inherit
all
definitions
from
the
extended
Thing
Model
.
There
</del>
<ins class="diff-chg">determined
without
their
consent.
This
risk
occurs
in
some
specific
circumstances
which
can
be
avoided
or
mitigated.
It
</ins>
is
<del class="diff-old">the
opportunity
</del>
<ins class="diff-chg">also
similar
</ins>
to
<del class="diff-old">extend
</del>
the
<del class="diff-old">existing
definition
with
further
metadata
</del>
<ins class="diff-chg">risk
posed
</ins>
by
<del class="diff-old">providing
further
JSON
name-value
pairs
from
the
existing
TD
information
model
(
5.
TD
Information
Model
)
or
using
the
context
extension
concept
(
7.
TD
Context
Extensions
).
A
Thing
Model
can
also
overwrite
existing
definitions
</del>
<ins class="diff-chg">other
network
services
</ins>
such
as
<del class="diff-old">title(s)
</del>
<ins class="diff-chg">DHCP
</ins>
and
<del class="diff-old">maximum
etc..
</del>
<ins class="diff-chg">DNS.
</ins></p><p>
For
this
<ins class="diff-new">risk
to
occur,
</ins>
there
<del class="diff-old">exist
two
limitations:
A
Thing
Model
SHOULD
NOT
overwrite
the
JSON
names
defined
within
the
properties
,
actions
,
and/or
events
Map
of
the
extended
Thing
Model
.
Definitions
SHOULD
NOT
</del>
<ins class="diff-chg">first
has
to
</ins>
be
<del class="diff-old">overwritten
in
</del>
<ins class="diff-chg">an
IoT
device
that
can
be
reliably
associated
with
a
person's
location,
</ins>
such
<ins class="diff-new">as
</ins>
a
<del class="diff-old">way
</del>
<ins class="diff-chg">necessary
medical
device
or
a
vehicle.
Note
</ins>
that
<del class="diff-old">possible
instance
values
are
no
longer
valid
compared
to
the
origin
extended
definitions.
Those
assertions
preserve
</del>
the
<del class="diff-old">semantics
throughout
of
the
extended
Thing
Model
.
E.g.,
it
is
</del>
<ins class="diff-chg">risk
only
applies
to
personal
use
cases,
</ins>
not
<del class="diff-old">allowed
that
a
"minimum":2
from
a
extended
Thing
Model
can
</del>
<ins class="diff-chg">institutional
ones.
Secondly,
the
device
has
to
</ins>
be
<del class="diff-old">overwritten
with
"minimum":0
.
Meanwhile,
overwriting
</del>
<ins class="diff-chg">configured
to
register
automatically
</ins>
with
<del class="diff-old">"minimum":5
would
work
since
all
instances
values
will
always
fulfill
</del>
the
<del class="diff-old">restrictions
of
</del>
<ins class="diff-chg">nearest
directory
service.
In
this
case,
</ins>
the
<del class="diff-old">extended
Thing
Model
(also
see
Figure
Figure
6
for
further
explanation).
Lets
assume
we
have
a
basic
model
description
as
provided
in
</del>
<ins class="diff-chg">location
of
</ins>
the
<del class="diff-old">following
example:
Example
52
:
Basic
On/Off
Thing
Model
Definition
{
    : [&lt;span class=
"hljs-string"&gt;"https://www.w3.org/2022/wot/td/v1.1"], 
     : &lt;span class=
"hljs-string"&gt;"tm:ThingModel",
    : &lt;span class=
"hljs-string"&gt;"Basic On/Off Thing Model",
    : {
        : {
            : &lt;span class=
"hljs-string"&gt;"boolean"
        }
    }
}
Now
it
is
designed
a
new
</del>
device
<del class="diff-old">class
model
called
'Smart
Lamp
Control'
that
should
</del>
<ins class="diff-chg">can
</ins>
be
<del class="diff-old">used
as
template
for
creating
TD
instances.
This
model
will
reuse
</del>
<ins class="diff-chg">inferred
from
</ins>
the
<del class="diff-old">existing
definition
</del>
<ins class="diff-chg">network
range
</ins>
of
the
<del class="diff-old">'Basic
On/Off
Thing
Model'
</del>
<ins class="diff-chg">directory
service
</ins>
and
<del class="diff-old">extend
it
with
a
dim
property:
Example
53
:
Smart
Lamp
Control
Thing
Model
Definition
{
    : [&lt;span class=
"hljs-string"&gt;"https://www.w3.org/2022/wot/td/v1.1"], 
     : &lt;span class=
"hljs-string"&gt;"tm:ThingModel",
    : &lt;span class=
"hljs-string"&gt;"Smart Lamp Control with Dimming",
     : [{
        : &lt;span class=
"hljs-string"&gt;"tm:extends",
        : &lt;span class=
"hljs-string"&gt;"http://example.com/BasicOnOffTM",
        : &lt;span class=
"hljs-string"&gt;"application/td+json"
     }],
     : {
         : {
            : &lt;span class=
"hljs-string"&gt;"Dimming level"
            : &lt;span class=
"hljs-string"&gt;"integer",
            : &lt;span class=
"hljs-number"&gt;0,
            : &lt;span class=
"hljs-number"&gt;100
        }
   }
}
Please
note
that
</del>
the
<del class="diff-old">title
is
overwritten
and
will
be
used
when
TD
instances
are
created
(also
see
in
the
next
subsection
11.4
Derivation
of
Thing
Description
Instances
).
The
tm:extends
feature
only
permits
inheriting
all
definitions
of
one
Thing
Model
.
In
many
use
cases,
however,
it
is
desired
only
to
import
pieces
of
definitions
</del>
<ins class="diff-chg">location
</ins>
of
<del class="diff-old">one
or
more
existing
Thing
Models
.
For
doing
this,
</del>
the
<del class="diff-old">tm:ref
term
is
introduced
that
provides
</del>
<ins class="diff-chg">person
inferred
from
</ins>
the
location
of
<del class="diff-old">an
existing
(sub-)definition
that
should
be
reused.
The
tm:ref
value
MUST
follow
</del>
the
<del class="diff-old">pattern
</del>
<ins class="diff-chg">device.
</ins></p><p><ins class="diff-chg">
There
are
a
few
variants
of
this:
</ins>
</p>
<ul>
<li>
<del class="diff-old">file
</del>
<ins class="diff-chg">The
TD
or
Thing
could
report
actual
</ins>
location
<del class="diff-old">as
URI
[
RFC3986
](Section
4.1)),
followed
</del>
<ins class="diff-chg">information
so
no
inferencing
</ins>
by
<ins class="diff-new">network
range
is
needed;
</ins>
</li>
<li>
<del class="diff-old">#
character,
and
followed
</del>
<ins class="diff-chg">A
directory
could
support
actual
search
</ins>
by
<ins class="diff-new">location;
</ins>
</li>
<li>
<del class="diff-old">JSON
Pointer
[
RFC6901
]
definition.
Every
time
tm:ref
is
used,
the
referenced
pre-definition
</del>
<ins class="diff-chg">Absence
of
a
TD
in
a
directory
could
reveal
negative
location
information.
For
example,
if
a
TD
times
out
</ins>
and
<del class="diff-old">its
dependencies
(e.g.,
by
context
extension)
MUST
be
assumed
at
the
new
defined
definition.
The
following
example
shows
</del>
<ins class="diff-chg">is
removed
from
</ins>
a
<del class="diff-old">new
TM
definition
</del>
<ins class="diff-chg">directory,
</ins>
that
<del class="diff-old">imports
the
existing
definition
of
the
property
onOff
from
Example
52
into
the
new
property
definition
switch
.
Example
54
:
Smart
Lamp
Control
imports
existing
definition
{
    : [&lt;span class=
"hljs-string"&gt;"https://www.w3.org/2022/wot/td/v1.1"], 
     : &lt;span class=
"hljs-string"&gt;"tm:ThingModel",
    : &lt;span class=
"hljs-string"&gt;"Smart Lamp Control",
     : {
         : {
             :&lt;span class=
"hljs-string"&gt;"http://example.com/BasicOnOffTM.tm.jsonld#/properties/onOff"
        }
   }
}
At
the
place
</del>
<ins class="diff-chg">means
</ins>
the
<del class="diff-old">"tm:ref"
is
defined,
additional
name-value
pairs
can
</del>
<ins class="diff-chg">device
has
not
been
present
for
a
while,
which
could
</ins>
be
<del class="diff-old">added.
It
is
also
permitted
</del>
<ins class="diff-chg">used
</ins>
to
<del class="diff-old">override
name-value
pairs
from
the
referenced
definition.
If
the
intention
</del>
<ins class="diff-chg">infer
that
a
person
</ins>
is
<del class="diff-old">to
override
an
existing
JSON
name-value
pair
definition
from
tm:ref
,
the
same
JSON
name
MUST
be
used
</del>
<ins class="diff-chg">NOT
in
a
particular
location,
e.g.
not
</ins>
at
<ins class="diff-new">home.
</ins></li></ul><p><ins class="diff-new">
Location
tracking
is
not
</ins>
the
<del class="diff-old">same
level
of
the
tm:ref
declaration
that
provides
</del>
<ins class="diff-chg">only
profiling
risk.
In
general,
"profiling"
includes
any
mechanism
used
to
evaluate
information
about
</ins>
a
<del class="diff-old">new
value.
This
process
MUST
follow
</del>
<ins class="diff-chg">person,
including
economic
status,
health,
preferences,
interests,
reliability,
and
behavior.
Some
of
</ins>
the
<del class="diff-old">JSON
Merge
Patch
algorithm
as
defined
</del>
<ins class="diff-chg">metadata
</ins>
in
<del class="diff-old">[RFC7396]
where
the
content
</del>
<ins class="diff-chg">a
TD
can
be
used
to
infer
information
</ins>
of
<ins class="diff-new">this
kind
if
</ins>
the
<del class="diff-old">referenced
definition
is
patched
with
the
new
provided
JSON
name-value
pairs.
It
is
noted
that
the
values
</del>
<ins class="diff-chg">described
Thing
</ins>
can
<del class="diff-old">also
be
based
on
a
JSON
object
or
array
,
or
simply
</del>
be
<ins class="diff-new">associated
with
</ins>
a
<del class="diff-old">null
value.
null
would
result
to
a
removal
</del>
<ins class="diff-chg">person.
Some
</ins>
of
<del class="diff-old">existing
JSON
name-value
pair
in
</del>
the
<del class="diff-old">target.
</del>
<ins class="diff-chg">mitigations
below
are
also
applicable
to
this
more
general
definition
of
profiling.
</ins>
</p>
<p>
<del class="diff-old">Similar
</del>
<ins class="diff-chg">Some
of
these
risks
are
shared
by
similar
services.
For
example,
DCHP
automatically
responds
</ins>
to
<del class="diff-old">tm:extends
</del>
<ins class="diff-chg">requests
for
IP
addresses
on
a
local
network,
and
devices
typically
provide
an
identifier
(a
MAC
address)
as
part
of
this
process,
</ins>
and
<del class="diff-old">to
keep
</del>
the
<del class="diff-old">semantic
meaning,
definitions
SHOULD
NOT
be
overwritten
in
such
</del>
<ins class="diff-chg">DHCP
server
maintains
</ins>
a
<del class="diff-old">way
that
possible
instance
values
are
no
longer
valid
compared
</del>
<ins class="diff-chg">registry.
In
theory,
someone
with
access
</ins>
to
the
<del class="diff-old">origin
referenced
definition.
The
following
example
shows
</del>
<ins class="diff-chg">DHCP
server
in,
say,
</ins>
a
<del class="diff-old">new
TM
definition
that
overwrites
(
maximum
),
enhances
(
unit
),
</del>
<ins class="diff-chg">cafe,
could
use
this
information
to
track
someone's
phone
</ins>
and
<del class="diff-old">removes
(
title
)
existing
definitions
from
Example
53
.
</del>
<ins class="diff-chg">infer
their
location.
</ins>
</p>
<del class="diff-old">Example
55
</del>
<dl>
<dt>
<ins class="diff-chg">Mitigations:
</ins></dt><dd><ins class="diff-chg">
There
are
a
few
options
to
mitigate
these
risks:
</ins><ul><li>
<del class="diff-old">:
Smart
Lamp
Control
extend
</del>
<span class="rfc2119-assertion" id= "priv-loc-disable-public-directories">
<ins class="diff-chg">To
avoid
location
tracking
</ins>
and
<del class="diff-old">overwrite
existing
definitions
</del>
<ins class="diff-chg">other
forms
of
profiling,
a
WoT
Thing
associated
with
a
person
</ins><em class="rfc2119"><ins class="diff-chg">
MAY
</ins></em><ins class="diff-chg">
disable
registration
with
public
directories.
</ins>
</span>
<del class="diff-old">{
    : [&lt;span class=
"hljs-string"&gt;"https://www.w3.org/2022/wot/td/v1.1"], 
     : &lt;span class=
"hljs-string"&gt;"tm:ThingModel",
    : &lt;span class=
"hljs-string"&gt;"Smart Lamp Control",
     : {
         : {
             :&lt;span class=
"hljs-string"&gt;"http://example.com/SmartLampControlwithDimming.tm.jsonld#/properties/dim",
            : &lt;span class=
"hljs-literal"&gt;null,
            : &lt;span class=
"hljs-number"&gt;80,
             : &lt;span class=
"hljs-string"&gt;"%"
        }
   }
}
Based
on
the
JSON
Merge
Patch
algorithm
the
{"title":
null,"maximum":
80,"unit"
:
"%"}
</del>
<ins class="diff-chg">Registration
</ins>
would
<del class="diff-old">act
as
a
patch
for
the
referenced
origin
content
{"title":
"Dimming
level",
"type":
"integer",
"minimum":
0,
"maximum":
100}
.
The
tm:extends
and
the
import
mechanism
based
on
tm:ref
can
also
</del>
<ins class="diff-chg">still
</ins>
be
<del class="diff-old">used
</del>
<ins class="diff-chg">possible
with
personal
directories,
for
example,
a
home
gateway,
but
a
user
could
disable
registration
</ins>
at
<ins class="diff-new">other
locations.
This
has
</ins>
the
<del class="diff-old">same
time
</del>
<ins class="diff-chg">disadvantage
that
functionality
is
lost:
personal
devices
cannot
be
discovered
</ins>
in
<del class="diff-old">a
TM
definition.
The
following
example
extends
the
TM
from
Example
52
and
imports
</del>
<ins class="diff-chg">public
locations.
This
could
be
addressed
by
having
internet-accessible
private
discovery
services.
For
example,
</ins>
the
<del class="diff-old">status
and
dim
definitions
from
Example
3
and
Example
53
respectively.
Example
56
:
Smart
Lamp
Control
Thing
Model
</del>
<ins class="diff-chg">user's
home
gateway
could
provide
an
internet-accessible
service,
but
</ins>
with
<del class="diff-old">extend
and
import
mechanism
{
    : [&lt;span class=
"hljs-string"&gt;"https://www.w3.org/2022/wot/td/v1.1"], 
     : &lt;span class=
"hljs-string"&gt;"tm:ThingModel",
    : &lt;span class=
"hljs-string"&gt;"Smart Lamp Control",
     : [{
        : &lt;span class=
"hljs-string"&gt;"extends",
        : &lt;span class=
"hljs-string"&gt;"http://example.com/BasicOnOffTM",
        : &lt;span class=
"hljs-string"&gt;"application/td+json"
     }],
     : {
         : {
             :&lt;span class=
"hljs-string"&gt;"http://example.com/LampTM.tm.jsonld#/properties/status"
        },
         : {
             :&lt;span class=
"hljs-string"&gt;"http://example.com/LampWithDimmingTM.tm.jsonld#/properties/dim"
        }
   }
}
The
following
figure
summarizes
the
allowable
override
behaviour
of
the
extension
and
imports
TM
functions
presented
in
this
section.
Three
Thing
Models
</del>
<ins class="diff-chg">access
control
limiting
</ins>
use
<del class="diff-old">the
tm:ref
or
tm:extends
feature
</del>
to
<del class="diff-old">reuse
TM
definitions
</del>
<ins class="diff-chg">authorized
users.
</ins></li><li><span class="rfc2119-assertion" id="priv-loc-anonymous-tds"><ins class="diff-chg">
To
avoid
location
tracking
and
other
forms
</ins>
of
<del class="diff-old">the
Smart
Lamp
Control
Thing
Model
.
The
first
</del>
<ins class="diff-chg">profiling,
a
WoT
</ins>
Thing
<del class="diff-old">Model
imports
and
overwrites
the
maximum
value
to
120
within
the
dimmer
property.
However,
this
results
in
possible
instance
values
(at
runtime)
that
</del>
<ins class="diff-chg">associated
with
a
person
</ins><em class="rfc2119"><ins class="diff-chg">
SHOULD
</ins></em><ins class="diff-chg">
use
anonymous
TDs
when
registering
with
a
public
directories.
</ins></span><ins class="diff-chg">
In
some
cases,
it
</ins>
may
<del class="diff-old">not
</del>
be
<del class="diff-old">in
the
range
of
the
original
dim
definition
between
0
</del>
<ins class="diff-chg">possible
to
use
anonymous
TDs
</ins>
and
<del class="diff-old">100
of
the
dim
definition
of
the
Smart
Lamp
Control
Thing
Model.
Thus,
such
</del>
<ins class="diff-chg">omit
explicit
IDs
from
TDs
submitted
to
</ins>
a
<del class="diff-old">Thing
Model
definition
is
not
allowed.
The
second
model
overwrites
the
property
type
value
by
number
.
Again,
</del>
<ins class="diff-chg">TDD.
In
</ins>
this
<ins class="diff-new">case
the
TDD
</ins>
will
<del class="diff-old">potentially
result
</del>
<ins class="diff-chg">generate
a
local
ID
valid
only
</ins>
in
<del class="diff-old">numeric
dim
values
</del>
that
<del class="diff-old">are
not
accepted
by
</del>
<ins class="diff-chg">TDD.
This
does,
however,
complicate
update
since
</ins>
the
<del class="diff-old">definition
of
</del>
<ins class="diff-chg">client
needs
to
remember
</ins>
the
<del class="diff-old">origin
dim
type
definition
(integer)
of
</del>
<ins class="diff-chg">local
ID
assigned
by
</ins>
the
<del class="diff-old">Smart
Lamp
Control
Thing
Model
.
The
last
model
is
defined
in
a
correct
way.
The
new
ranges
of
dim
produce
potential
instance
values
that
are
</del>
<ins class="diff-chg">TDD.
Anonymous
TDs
</ins>
also
<del class="diff-old">fulfilled
</del>
<ins class="diff-chg">do
not
prevent
tracking
</ins>
by
<del class="diff-old">the
original
dim
definition.
</del>
<ins class="diff-chg">other
means,
such
as
fingerprinting.
</ins></li><li>
<del class="diff-old">Figure
6
Overwriting
behavior
</del>
<span class="rfc2119-assertion" id="priv-loc-gen-ids">
<ins class="diff-chg">To
avoid
location
tracking
and
other
forms
</ins>
of
<ins class="diff-chg">profiling,
a
WoT
</ins>
Thing
<del class="diff-old">Models
.
</del>
<ins class="diff-chg">associated
with
a
person
</ins><em class="rfc2119"><ins class="diff-chg">
MAY
</ins></em><ins class="diff-chg">
periodically
generate
new
IDs.
</ins>
</span>
<del class="diff-old">11.3.3
Composition
In
some
applications,
</del>
<ins class="diff-chg">Using
fixed
IDs
makes
</ins>
it
<del class="diff-old">is
beneficial
</del>
<ins class="diff-chg">exceptionally
easy
</ins>
to
<del class="diff-old">reuse
existing
Thing
Model
definitions
</del>
<ins class="diff-chg">track
devices.
This
problem
also
occurs
in
DHCP
with
MAC
address
</ins>
and
<del class="diff-old">compose
them
into
</del>
<ins class="diff-chg">there
is
</ins>
a
<ins class="diff-new">similar
partial
mitigation:
generate
</ins>
new
<del class="diff-old">IoT
system.
An
example
would
be
that
</del>
<ins class="diff-chg">random
IDs
periodically.
There
are
however,
</ins>
a
<del class="diff-old">new
Smart
Ventilator
is
designed
to
consist
</del>
<ins class="diff-chg">few
issues.
First
</ins>
of
<del class="diff-old">two
sub/child
Thing
Model
definitions
such
as
a
Ventilation
Thing
Model
that
provides
on/off
and
adjustRpm
capabilities,
and
an
LED
Thing
Model
that
provides
dimmable
and
RGB
capabilities.
Example
57
Top
level/parent
Smart
Ventilator
Thing
Model
Smart
Ventilator
TM
Ventilation
TM
LED
TM
&lt;pre class="SmartVentilator exampleTab1 selected" aria-busy=
"false"&gt;{
    "@context": "https://www.w3.org/2022/wot/td/v1.1",
    "@type": "tm:ThingModel",
    "title": "Smart Ventilator Thing Model",
    "version" : { "model" : "1.0.0" },
    "links": [
      {
        "rel": "tm:submodel",
        "href": "./Ventilation.tm.jsonld",
        "type": "application/tm+json",
        "instanceName": "ventilation"
      },
      {
        "rel": "tm:submodel",
        "href": "./LED.tm.jsonld",
        "type": "application/tm+json",
        "instanceName": "led"
      }
    ],
    "properties" : {
        "status" : {"type": "string", "enum": ["On", "Off", "Error"]}
    }
}
&lt;code class=
"hljs"&gt;{
    "@context": "https://www.w3.org/2022/wot/td/v1.1",
    "@type": "tm:ThingModel",
    "title": "Ventilator Thing Model",
    "version": {
        "model": "1.0.0"
    },
    "properties": {
        "switch": {
            "type": "boolean",
            "description": "True=On; False=Off"
        },
        "adjustRpm": {
            "type": "number",
            "minimum": 200,
            "maximum": 1200
        }
    }
}
{
    "@context": "https://www.w3.org/2022/wot/td/v1.1",
    "@type": "tm:ThingModel",
    "title": "LED Thing Model",
    "version": {
        "model": "1.0.0"
    },
    "properties": {
        "R": {
            "type": "number",
            "description": "Red color"
        },
        "G": {
            "type": "number",
            "description": "Green color"
        },
        "B": {
            "type": "number",
            "description": "Blue color"
        }
    },
    "actions": {
        "fadeIn": {
            "title": "fadeIn",
            "input": {
                "type": "number",
                "description": "fadeIn in ms"
            }
        },
        "fadeOut": {
            "title": "fadeIn",
            "input": {
                "type": "number",
                "description": "fadeOut in ms"
            }
        }
    }
}
Such
composition
can
</del>
<ins class="diff-chg">all,
other
identification
information
in
the
TD
needs
to
</ins>
be
<del class="diff-old">introduced
</del>
<ins class="diff-chg">hidden.
For
example,
client
IDs
issued
</ins>
by
<ins class="diff-new">CSPs
for
API
security
should
be
omitted
from
TDs
if
they
cannot
be
easily
changed.
Second,
if
</ins>
the
<del class="diff-old">usage
of
the
links
container.
If
it
is
desired
to
provide
information
that
</del>
<ins class="diff-chg">device
generates
</ins>
a
<del class="diff-old">Thing
Model
consists
of
one
or
more
(sub-)
Thing
Models
,
the
links
entries
MUST
use
</del>
<ins class="diff-chg">new
ID,
</ins>
the
<del class="diff-old">"rel":"tm:submodel"
that
targets
</del>
<ins class="diff-chg">user
may
still
need
</ins>
to
<ins class="diff-new">know
</ins>
the
<del class="diff-old">(sub-)
Thing
Models
.
Optionally
an
instanceName
can
be
provided
to
associate
an
individual
name
</del>
<ins class="diff-chg">current
ID
</ins>
to
<ins class="diff-new">find
</ins>
the
<del class="diff-old">composed
(sub-)
Thing
Model
.
</del>
<ins class="diff-chg">device
via
discovery.
</ins>
This
<del class="diff-old">is
useful
when
multiple
similar
Thing
Model
definitions
are
composed
and
needs
to
be
distinguished.
Different
strategies
can
be
followed
to
generate
Thing
Descriptions
from
composed
Thing
Model
definitions.
The
default
recommendation
is
to
generate
from
each
parent
and
sub/child
Thing
Model
a
corresponding
Thing
Descriptions
(also
see
11.4
Derivation
of
Thing
Description
Instances
).
The
composition
relation
</del>
can
be
<del class="diff-old">reflected
</del>
<ins class="diff-chg">accomplished
however
</ins>
by
<del class="diff-old">the
collection
and
item
relation
types
in
the
links
container
of
the
Thing
Descriptions
.
An
example
based
on
Smart
Ventilation
</del>
<ins class="diff-chg">generating
new
IDs
using
a
deterministic
cryptographic
generator
that
</ins>
is
<del class="diff-old">given
here:
Example
58
Thing
Descriptions
</del>
<ins class="diff-chg">a
function
</ins>
of
the
<del class="diff-old">Smart
Ventilator
Top
level
Smart
Ventilator
TD
Ventilation
TD
LED
TD
&lt;pre class="SmartVentilator exampleTab1 selected" aria-busy=
"false"&gt;{
    "@context": "https://www.w3.org/2022/wot/td/v1.1",
    "title": "Smart Ventilator",
    "securityDefinitions": {
        "basic_sc": {
            "scheme": "basic",
            "in": "header"
        }
    },
    "security": "basic_sc",
    "links": [
        {
            "rel": "item",
            "href": "./Ventilation.td.jsonld",
            "type": "application/td+json"
        },
        {
            "rel": "item",
            "href": "./LED.td.jsonld",
            "type": "application/td+json"
        },
        {
            "rel": "type",
            "href": "./SmartVentilator.tm.jsonld",
            "type": "application/tm+json"
        }
    ],
    "properties": {
        "status": {
            "type": "string",
            "enum": [
                "On",
                "Off",
                "Error"
            ],
            "forms": [
                {
                    "href": "http://127.0.13.232:4563/status"
                }
            ]
        }
    }
}
&lt;code class=
"hljs"&gt;{
    "@context": "https://www.w3.org/2022/wot/td/v1.1",
    "title": "Ventilator",
    "securityDefinitions": {
        "basic_sc": {
            "scheme": "basic",
            "in": "header"
        }
    },
    "security": "basic_sc",
    "links": [
        {
            "rel": "collection",
            "href": "./SmartVentilation.td.jsonld",
            "type": "application/td+json"
        },
        {
            "rel": "type",
            "href": "./Ventilation.tm.jsonld",
            "type": "application/tm+json"
        }
    ],
    "security": "basic_sc",
    "properties": {
        "switch": {
            "type": "boolean",
            "description": "True=On; False=Off",
            "forms": [
                {
                    "href": "http://127.0.13.212:4563/switch"
                }
            ]
        },
        "adjustRpm": {
            "type": "number",
            "minimum": 200,
            "maximum": 1200,
            "forms": [
                {
                    "href": "http://127.0.13.212:4563/adjustRpm"
                }
            ]
        }
    }
}
{
    "@context": "https://www.w3.org/2022/wot/td/v1.1",
    "title": "LED Thing Model",
    "securityDefinitions": {
        "basic_sc": {
            "scheme": "basic",
            "in": "header"
        }
    },
    "security": "basic_sc",
    "links": [
        {
            "rel": "collection",
            "href": "./SmartVentilation.td.jsonld",
            "type": "application/td+json"
        },
        {
            "rel": "type",
            "href": "./LED.tm.jsonld",
            "type": "application/tm+json"
        }
    ],
    "properties": {
        "R": {
            "type": "number",
            "description": "Red color",
            "forms": [
                {
                    "href": "http://127.0.13.211:4563/R"
                }
            ]
        },
        "G": {
            "type": "number",
            "description": "Green color",
            "forms": [
                {
                    "href": "http://127.0.13.211:4563/G"
                }
            ]
        },
        "B": {
            "type": "number",
            "description": "Blue color",
            "forms": [
                {
                    "href": "http://127.0.13.211:4563/B"
                }
            ]
        }
    },
    "actions": {
        "fadeIn": {
            "title": "fadeIn",
            "input": {
                "type": "number",
                "description": "fadeIn in ms"
            },
            "forms": [
                {
                    "href": "http://127.0.13.211:4563/fadeIn"
                }
            ]
        },
        "fadeOut": {
            "title": "fadeOut",
            "input": {
                "type": "number",
                "description": "fadeOut in ms"
            },
            "forms": [
                {
                    "href": "http://127.0.13.211:4563/fadeOut"
                }
            ]
        }
    }
}
A
single
</del>
<ins class="diff-chg">current
time.
However,
note
that
regenerating
IDs
alone
does
not
make
tracking
impossible
since
a
</ins>
TD
<del class="diff-old">can
also
</del>
<ins class="diff-chg">might
</ins>
be
<del class="diff-old">generated
which
contains
</del>
<ins class="diff-chg">fingerprinted.
Also,
updating
an
ID
might
be
observable
to
</ins>
the
<del class="diff-old">interaction
definitions
</del>
<ins class="diff-chg">owner
</ins>
of
the
<del class="diff-old">top
level/parent
Thing
Model
</del>
<ins class="diff-chg">directory
service,
who
could
track
</ins>
and
<del class="diff-old">all
interaction
definitions
of
all
sub/child
Thing
Models
.
To
avoid
name
collisions
of
</del>
<ins class="diff-chg">record
</ins>
the
<del class="diff-old">sub/child
interaction
names
it
</del>
<ins class="diff-chg">updated
ID.
Even
if
the
TD
</ins>
is
<del class="diff-old">recommended
to
rename
</del>
<ins class="diff-chg">deleted
and
reinserted
</ins>
the
<del class="diff-old">JSON
name
</del>
<ins class="diff-chg">association
could
be
inferred.
This
is
however
exactly
parallel
</ins>
to
the
<del class="diff-old">instanceName
followed
</del>
<ins class="diff-chg">situation
</ins>
with
<del class="diff-old">'_'
</del>
<ins class="diff-chg">DHCP
</ins>
and
<del class="diff-old">the
interaction
name
</del>
<ins class="diff-chg">rotation
</ins>
of
<del class="diff-old">the
sub/child
Thing
Model
.
The
following
example
shows
</del>
<ins class="diff-chg">MAC
addresses.
In
general,
however,
generating
new
IDs
at
least
for
each
service
or
person
to
which
</ins>
a
<del class="diff-old">generated
(self-contained)
Thing
Description
of
the
Smart
Ventilator
Thing
Model.
Example
59
:
Self-contained
</del>
TD
<del class="diff-old">of
the
Smart
Ventilator
TM
{
    : &lt;span class=
"hljs-string"&gt;"https://www.w3.org/2022/wot/td/v1.1",
    : &lt;span class=
"hljs-string"&gt;"Smart Ventilator",
    : {
        : {
            : &lt;span class=
"hljs-string"&gt;"basic",
            : &lt;span class=
"hljs-string"&gt;"header"
        }
    },
    : &lt;span class=
"hljs-string"&gt;"basic_sc",
    : [
        {
            : &lt;span class=
"hljs-string"&gt;"type",
            : &lt;span class=
"hljs-string"&gt;"./SmartVentilator.tm.jsonld",
            : &lt;span class=
"hljs-string"&gt;"application/tm+json"
        }
    ],
    : {
        : {
            : &lt;span class=
"hljs-string"&gt;"string",
            : [
                ,
                ,
                
            ],
            : [
                {
                    &lt;span class=
"hljs-attr"&gt;"href": &lt;span class=
"hljs-string"&gt;"http://127.0.13.232:4563/status"
                }
            ]
        },
        : {
            : &lt;span class=
"hljs-string"&gt;"boolean",
            &lt;span class=
"hljs-attr"&gt;"description": &lt;span class=
"hljs-string"&gt;"True=On; False=Off",
            : [
                {
                    &lt;span class=
"hljs-attr"&gt;"href": &lt;span class=
"hljs-string"&gt;"http://127.0.13.212:4563/switch"
                }
            ]
        },
        : {
            : &lt;span class=
"hljs-string"&gt;"number",
            : &lt;span class=
"hljs-number"&gt;200,
            : &lt;span class=
"hljs-number"&gt;1200,
            : [
                {
                    &lt;span class=
"hljs-attr"&gt;"href": &lt;span class=
"hljs-string"&gt;"http://127.0.13.212:4563/adjustRpm"
                }
            ]
        },
        : {
            : &lt;span class=
"hljs-string"&gt;"number",
            &lt;span class=
"hljs-attr"&gt;"description": &lt;span class=
"hljs-string"&gt;"Red color",
            : [
                {
                    &lt;span class=
"hljs-attr"&gt;"href": &lt;span class=
"hljs-string"&gt;"http://127.0.13.211:4563/R"
                }
            ]
        },
        : {
            : &lt;span class=
"hljs-string"&gt;"number",
            &lt;span class=
"hljs-attr"&gt;"description": &lt;span class=
"hljs-string"&gt;"Green color",
            : [
                {
                    &lt;span class=
"hljs-attr"&gt;"href": &lt;span class=
"hljs-string"&gt;"http://127.0.13.211:4563/G"
                }
            ]
        },
        : {
            : &lt;span class=
"hljs-string"&gt;"number",
            &lt;span class=
"hljs-attr"&gt;"description": &lt;span class=
"hljs-string"&gt;"Blue color",
            : [
                {
                    &lt;span class=
"hljs-attr"&gt;"href": &lt;span class=
"hljs-string"&gt;"http://127.0.13.211:4563/B"
                }
            ]
        }
    },
    : {
        : {
            : &lt;span class=
"hljs-string"&gt;"fadeIn",
            : {
                : &lt;span class=
"hljs-string"&gt;"number",
                &lt;span class=
"hljs-attr"&gt;"description": &lt;span class=
"hljs-string"&gt;"fadeIn in ms"
            },
            : [
                {
                    &lt;span class=
"hljs-attr"&gt;"href": &lt;span class=
"hljs-string"&gt;"http://127.0.13.211:4563/fadeIn"
                }
            ]
        },
        : {
            : &lt;span class=
"hljs-string"&gt;"fadeOut",
            : {
                : &lt;span class=
"hljs-string"&gt;"number",
                &lt;span class=
"hljs-attr"&gt;"description": &lt;span class=
"hljs-string"&gt;"fadeOut in ms"
            },
            : [
                {
                    &lt;span class=
"hljs-attr"&gt;"href": &lt;span class=
"hljs-string"&gt;"http://127.0.13.211:4563/fadeOut"
                }
            ]
        }
    }
}
11.3.4
Required
In
some
cases
it
</del>
is
<del class="diff-old">desirable
</del>
<ins class="diff-chg">supplied
makes
it
harder
</ins>
to
<del class="diff-old">enforce
which
interaction
affordances
are
mandatory
</del>
<ins class="diff-chg">connect
registration
events
at
different
locations
</ins>
and
<del class="diff-old">have
</del>
<ins class="diff-chg">times.
It
is
also
prudent
</ins>
to
<del class="diff-old">be
implemented
</del>
<ins class="diff-chg">generate
new
identifiers
upon
major
changes
</ins>
in
<ins class="diff-new">configuration,
such
as
unregistering
from
</ins>
a
<del class="diff-old">Thing
Description
instance
</del>
<ins class="diff-chg">local
network
</ins>
or
<del class="diff-old">can
be
always
expected
by
the
Thing
Model
.
To
guarantee
the
implementation
of
particular
kinds
of
interaction
models,
Thing
Model
definitions
MUST
use
the
JSON
member
name
tm:required
.
tm:required
MUST
be
</del>
<ins class="diff-chg">hub
and
registering
with
</ins>
a
<del class="diff-old">JSON
array
at
</del>
<ins class="diff-chg">new
one
(which
typically
indicates
a
change
in
ownership).
There
is
a
related
issue
with
long-lived
IP
addresses
which
might
need
to
be
updated
periodically
to
mitigate
tracking.
In
</ins>
the
<del class="diff-old">top
level.
The
value
</del>
<ins class="diff-chg">context
</ins>
of
<del class="diff-old">tm:required
MUST
provide
JSON
Pointer
</del>
<ins class="diff-chg">ipv6
</ins>
[
<cite>
<del class="diff-old">RFC6901
</del>
<a class="bibref" data-link-type="biblio" href="#bib-rfc8981" title= "Temporary Address Extensions for Stateless Address Autoconfiguration in IPv6">
<ins class="diff-chg">RFC8981
</ins>
</a>
</cite>
]
<del class="diff-old">references
to
the
required
interaction
model
definitions.
The
JSON
Pointers
of
tm:required
MUST
resolve
to
an
entire
interaction
affordance
Map
definition.
The
following
sample
shows
the
usage
of
tm:required
for
the
Property
interaction
status
and
Action
interaction
toggle
.
Example
60
:
Thing
Model
</del>
<ins class="diff-chg">discusses
this.
Finally,
there
is
a
problem
</ins>
with
<del class="diff-old">the
tm:required
term
for
interaction
affordances.
{
    : [&lt;span class=
"hljs-string"&gt;"https://www.w3.org/2022/wot/td/v1.1"], 
     : &lt;span class=
"hljs-string"&gt;"tm:ThingModel",
    : &lt;span class=
"hljs-string"&gt;"Lamp Thing Model",
    : &lt;span class=
"hljs-string"&gt;"Lamp Thing Description Model",
    : [
        ,
        
    ],
    : {
        : {
            &lt;span class=
"hljs-attr"&gt;"description": &lt;span class=
"hljs-string"&gt;"current status of the lamp (on|off)",
            : &lt;span class=
"hljs-string"&gt;"string",
            : &lt;span class=
"hljs-literal"&gt;true
        }
    },
    : {
        : {
            &lt;span class=
"hljs-attr"&gt;"description": &lt;span class=
"hljs-string"&gt;"Turn the lamp on or off"
        }
    },
    : {
        : {
            &lt;span class=
"hljs-attr"&gt;"description": &lt;span class=
"hljs-string"&gt;"Lamp reaches a critical temperature (overheating)",
            : {&lt;span class=
"hljs-attr"&gt;"type": &lt;span class=
"hljs-string"&gt;"string"}
        }
    }
}
Since
the
Event
overheating
</del>
<ins class="diff-chg">devices
that
require
immutable
identifiers,
e.g.
medical
devices
in
such
jurisdictions.
This
</ins>
is
<del class="diff-old">not
mandatory
it
may
not
be
available
</del>
<ins class="diff-chg">discussed
</ins>
in
<del class="diff-old">a
Thing
Description
instance.
11.3.5
Placeholder
</del>
<ins class="diff-chg">[
</ins><cite>
<a class="bibref" data-link-type="biblio" href="#bib-wot-thing-description11" title= "Web of Things (WoT) Thing Description 1.1">
<ins class="diff-new">wot-thing-description11
</ins>
</a>
<del class="diff-old">A
Thing
Model
</del>
</cite>
<ins class="diff-chg">],
but
in
summary
the
problem
</ins>
can
<del class="diff-old">specify
which
terms
should
</del>
be
<del class="diff-old">used
in
a
TD
instance,
but
their
values
</del>
<ins class="diff-chg">avoided
if
such
immutable
identifiers
</ins>
are
<del class="diff-old">unspecific
</del>
<ins class="diff-chg">made
available
only
as
protected
properties,
e.g.
via
affordances
requiring
authentication,
not
in
the
TD,
</ins>
and
<del class="diff-old">are
first
known
during
TD
instantiation.
In
such
a
case
</del>
the
<del class="diff-old">placeholder
labeling
MAY
be
used
in
Thing
Model
that
MUST
be
substituted
with
a
concrete
value
when
</del>
TD
<del class="diff-old">instance
</del>
<ins class="diff-chg">identifier
itself
(if
used)
</ins>
is
<del class="diff-old">created
from
the
Thing
Model.
The
string-based
pattern
</del>
<ins class="diff-chg">independent
</ins>
of
the
<del class="diff-old">placeholder
MUST
follow
a
valid
pattern
based
on
the
regular
expression
{{2}[
-~]+}{2}
(e.g.,
{{
PLACEHOLDER_IDENTIFIER
}}
).
The
characters
between
{{
</del>
<ins class="diff-chg">immutable
identifier,
</ins>
and
<del class="diff-old">}}
are
used
as
identifier
name
of
the
placeholder.
The
identifier
name
can
be
used
to
identify
the
placeholder
for
the
substitution
process.
A
placeholder
</del>
<ins class="diff-chg">so
</ins>
can
<del class="diff-old">only
</del>
be
<del class="diff-old">applied
within
</del>
<ins class="diff-chg">made
mutable.
</ins></li><li><span class="rfc2119-assertion" id= "priv-loc-priv-dir-access"><ins class="diff-chg">
To
reduce
</ins>
the
<del class="diff-old">value
</del>
<ins class="diff-chg">risk
</ins>
of
<del class="diff-old">the
JSON
name-value
pair
and
the
value
has
</del>
<ins class="diff-chg">negative
location
inferencing,
access
</ins>
to
<ins class="diff-new">private
directories
</ins><em class= "rfc2119"><ins class="diff-new">
SHOULD
</ins></em>
be
<del class="diff-old">a
JSON
string.
</del>
<ins class="diff-chg">limited
by
using
access
controls.
</ins>
</span>
<del class="diff-old">In
the
case
that
a
non
string-based
value
of
a
JSON
name-value
pair
should
have
a
placeholder,
the
value
must
be
(temporarily)
typed
as
string.
After
replacing
the
placeholder,
e.g.
when
creating
a
Thing
Description
instance,
the
original
type
can
be
applied
with
</del>
<ins class="diff-chg">If
an
attacker
cannot
access
</ins>
the
<del class="diff-old">corresponding
replaced
value.
The
following
Thing
Model
example
defines
different
placeholders.
The
placeholder
map
is
used
</del>
<ins class="diff-chg">service,
they
cannot
retrieve
information
</ins>
to
<del class="diff-old">apply
the
replacement
and
</del>
<ins class="diff-chg">infer
location.
Access
rights
provided
</ins>
to
<del class="diff-old">transform
the
intended
value
type.
Example
61
Thing
Description
generation
from
Thing
Model
Thing
Model
Placeholder
Map
Thing
Description
&lt;pre class="thingmodel exampleTab1 selected" aria-busy=
"false"&gt;{
        "@context": ["https://www.w3.org/2022/wot/td/v1.1"], 
        "@type" : "tm:ThingModel",
        "title": "Thermostate No. {{THERMOSTATE_NUMBER}}",
        "base": "mqtt://{{MQTT_BROKER_ADDRESS}}",
        "properties": {
                "temperature": {
                        "description": "Shows the current temperature value",
                        "type": "number",
                        "minimum": -20,
                        "maximum": "{{THERMOSTATE_TEMPERATURE_MAXIMUM}}",
                        "observable" : "{{THERMOSTATE_TEMPERATURE_OBSERVABLE}}"
                }
        }
        ...
}
&lt;code class=
"hljs"&gt;{
        "THERMOSTATE_NUMBER": 4, 
        "MQTT_BROKER_ADDRESS" : "192.168.178.72:1883",
        "THERMOSTATE_TEMPERATURE_MAXIMUM": 47.7, 
        "THERMOSTATE_TEMPERATURE_OBSERVABLE" : true
}
&lt;pre class="thingdescription exampleTab1" aria-busy=
"false"&gt;{
        "@context": ["https://www.w3.org/2022/wot/td/v1.1"], 
        "@type" : "Thing",
        "title": "Thermostate No. 4",
        "base": "mqtt://192.168.178.72:1883",
        "properties": {
                "temperature": {
                        "description": "Shows the current temperature value",
                        "type": "number",
                        "minimum": -20.0,
                        "maximum": 47.7,
                        "observable" : true
                }
        }
        ...
}
11.4
Derivation
</del>
<ins class="diff-chg">guests
(e.g.
for
Peer-to-Peer
Personal
scenarios)
should
be
appropriately
time-limited.
Use
</ins>
of
<del class="diff-old">Thing
Description
Instances
Thing
Models
can
</del>
<ins class="diff-chg">long
time-to-live
values
may
</ins>
be
<del class="diff-old">used
as
templates
to
generate
a
Thing
Description
based
on
the
restrictions
defined
</del>
<ins class="diff-chg">appropriate
</ins>
in
<del class="diff-old">Sections
5.
TD
Information
Model
and
6.
TD
Representation
Format
.
During
this
process
missing
data
such
as
communication
and
security
metadata
have
to
be
complemented
to
create
valid
Thing
Description
instances.
A
Thing
Model
MUST
</del>
<ins class="diff-chg">other
cases.
In
addition,
TDs
should
</ins>
be
<del class="diff-old">defined
in
such
a
way
that
there
are
no
inconsistencies
that
would
result
</del>
<ins class="diff-chg">updated
</ins>
in
a
<del class="diff-old">Thing
Description
not
being
able
to
meet
</del>
<ins class="diff-chg">directory
only
when
they
change.
For
example,
</ins>
the
<del class="diff-old">requirements
as
described
in
Section
5.
</del>
TD
<del class="diff-old">Information
Model
and
6.
TD
Representation
Format
.
A
TM-to-TD
generator
to
derive
a
Thing
Description
instance
from
a
Thing
Model
transforms
it
to
</del>
<ins class="diff-chg">for
</ins>
a
<del class="diff-old">Partial
TD
using
the
following
steps:
Copy
all
definitions
from
the
input
Thing
Model
to
the
resulting
Partial
TD
instance.
If
used,
the
extension
and
imports
feature
MUST
</del>
<ins class="diff-chg">car
may
only
</ins>
be
<del class="diff-old">resolved
</del>
<ins class="diff-chg">updated
when
new
car
firmware
is
available
providing
new
services,
</ins>
and
<del class="diff-old">represented
in
</del>
the
<del class="diff-old">Partial
TD
instance
according
to
11.3.2
Extension
and
Import
.
If
used,
links
element
entry
with
"rel":"tm:extends"
MUST
</del>
<ins class="diff-chg">time-to-live
might
</ins>
be
<del class="diff-old">removed
from
the
current
Partial
TD
</del>
<ins class="diff-chg">set
at
one
month
(covering
most
absences).
</ins>
</li>
<del class="diff-old">The
tm:ThingModel
value
of
the
top-level
@type
MUST
to
be
replaced
by
the
value
Thing
</del>
<li>
<span class="rfc2119-assertion" id= "priv-loc-explicit-care">
<ins class="diff-chg">When
explicit
location
information
is
available,
whether
stored
</ins>
in
<del class="diff-old">the
Partial
</del>
<ins class="diff-chg">a
</ins>
TD
<del class="diff-old">instance.
If
the
tm:required
feature
is
used
based
on
Section
11.3.4
Required
,
the
required
interactions
</del>
<ins class="diff-chg">or
available
in
a
property,
additional
care
</ins>
<em class="rfc2119">
<del class="diff-old">MUST
</del>
<ins class="diff-chg">SHOULD
</ins>
</em>
be
taken
<del class="diff-old">over
</del>
to
<ins class="diff-new">only
share
</ins>
the
<del class="diff-old">Partial
</del>
TD
<del class="diff-old">instance.
If
used,
all
placeholders
(see
Section
11.3.5
Placeholder
)
in
</del>
<ins class="diff-chg">and/or
access
to
</ins>
the
<del class="diff-old">Thing
Model
MUST
be
replaced
</del>
<ins class="diff-chg">device
</ins>
with
<del class="diff-old">a
valid
corresponding
value
in
</del>
<ins class="diff-chg">trusted
partners,
including
directories.
</ins></span><span class="rfc2119-assertion" id= "priv-loc-explicit-strip"><ins class="diff-chg">
If
</ins>
the
<del class="diff-old">Partial
</del>
TD
<del class="diff-old">.
Finally,
</del>
<ins class="diff-chg">must
be
shared
with
</ins>
a
<del class="diff-old">TM-to-TD
generator
will
take
</del>
<ins class="diff-chg">public
directory,
</ins>
the
<del class="diff-old">resulting
Partial
TD
and
transform
it
into
a
Thing
Description
with
this
last
step
Missing
communication
and/or
security
metadata
details
</del>
<ins class="diff-chg">location
information
</ins>
<em class="rfc2119">
<del class="diff-old">MUST
</del>
<ins class="diff-chg">MAY
</ins>
</em>
be
<del class="diff-old">completed
in
the
Thing
Description
instance
based
on
Section
6.3.4
securityDefinitions
and
security
and/or
6.3.9
forms
</del>
<ins class="diff-chg">stripped.
</ins></span>
<del class="diff-old">.
</del>
</li>
</ul>
<del class="diff-old">Thing
description
instances
that
follow
a
Thing
Model
can
carry
the
information
regarding
which
type
of
Thing
Model
is
derived.
In
this
context,
the
linking
concept
can
be
used
with
"rel"
:
"type"
(also
see
Section
5.3.4.1
Link
),
as
shown
in
the
following
example:
Example
62
Linking
Thing
Description
to
a
Thing
Model
Definition
Thing
Model
Thing
Description
&lt;pre class="selected exampleTab2 thingmodel" aria-busy=
"false"&gt;{
        ...
        "@type": "tm:ThingModel",
        "title": "Smart Pump",
        "description": "Smart Pump live plant and simulator",
        "id": "urn:smart:device:wot:pump",
        "version" : {"model" : "1.0.0" },
        ...
}
&lt;pre class="exampleTab2 thingdescription" aria-busy=
"false"&gt;{
        ...
        "@type": "Thing",
        "title": "Smart Pump",
        "description": "Smart Pump live plant and simulator",
        "id": "urn:smart:device:wot:pump:instance:1",
        "version" : {"instance": "1.0.0",
                                 "model" : "1.0.0" },
        "links" : [{
                "rel" : "type",
                "href" : "http://example.com/ThingModelPool/Pump",
                "type": "application/td+json"
        }],
        ...
}
Please
note
that
a
TD
can
only
be
an
instance
of
one
TM
at
a
time.
That
means
for
Thing
Descriptions:
The
links
array
can
use
the
entry
with
"rel"
:
"type"
a
maximum
of
once.
</del>
</dd>
</dl>
</section>
<section id="privacy-consideration-query-tracking">
<div class="header-wrapper">
<h3 id="x9-2-query-tracking">
<bdi class="secno">
<del class="diff-old">11.5
</del>
<ins class="diff-chg">9.2
</ins>
</bdi>
<del class="diff-old">Examples
</del>
<ins class="diff-chg">Query
Tracking
</ins>
</h3>
<a class="self-link" href="#privacy-consideration-query-tracking" aria-label="Permalink for Section 9.2">
</a>
</div>
<p>
<del class="diff-old">The
following
Thing
Model
extends
the
model
as
shown
in
Example
53
</del>
<ins class="diff-chg">A
directory
service
could
potentially
record
</ins>
and
<del class="diff-old">overwrites
</del>
<ins class="diff-chg">track
queries
by
an
individual,
identifying
that
individual
by
their
authenticated
identity
provided.
Then
</ins>
the
<del class="diff-old">maximum
value
</del>
<ins class="diff-chg">set
</ins>
of
<del class="diff-old">the
dim
property
Example
63
:
Extending
Smart
Control
Lamp
</del>
<ins class="diff-chg">queries
associated
</ins>
with
<del class="diff-old">a
modified
dim
constrained
{
    : [&lt;span class=
"hljs-string"&gt;"https://www.w3.org/2022/wot/td/v1.1"], 
     : &lt;span class=
"hljs-string"&gt;"tm:ThingModel",
     : [{
        : &lt;span class=
"hljs-string"&gt;"tm:extends",
        : &lt;span class=
"hljs-string"&gt;"http://example.com/SmartControlLampTM",
        : &lt;span class=
"hljs-string"&gt;"application/td+json"
     }],
     : {
         : {
            : &lt;span class=
"hljs-number"&gt;200
        }
   }
}
The
expected
Thing
Description
that
is
derived
from
this
Thing
Model
would
</del>
<ins class="diff-chg">an
individual
could
</ins>
be
<del class="diff-old">(with
HTTP
Binding
</del>
<ins class="diff-chg">used
to
profile
that
individual,
</ins>
and
<del class="diff-old">basic
security
applied):
</del>
<ins class="diff-chg">specific
queries
may
also
reveal
personal
information
about
an
individual.
</ins>
</p>
<del class="diff-old">Example
64
:
Thing
Description
{
    "@context": ["https://www.w3.org/2022/wot/td/v1.1"], 
    "@type" : "Thing",
    "title": "Smart Lamp Control",
    "securityDefinitions": {
        "basic_sc": {"scheme": "basic", "in": "header"}
    },
    "security": "basic_sc",
    "links" : [{
        "rel": "type",
        "href": "url/to/SmartLampControlModifiedDimTM",
        "type": "application/td+json"
     }
   ],
   "properties" : {
        "onOff : {
            "type: "boolean",
            "forms": [{"href": "https://smartlamp.example.com/onoff"}]
        },
        "dim" : {
            "type": "integer",
            "minimum": 0,
            "maximum": 200,
            "forms": [{"href": "https://smartlamp.example.com/dim"}]
        }
   }
}
12.
IANA
Considerations
12.1
application/td+json
Media
Type
Registration
</del>
<dl>
<dt>
<del class="diff-old">Type
name:
application
Subtype
name:
td+json
Required
parameters:
None
Optional
parameters:
None
Encoding
considerations:
See
RFC&nbsp;6839,
section
3.1
.
Security
considerations:
</del>
<ins class="diff-chg">Mitigations:
</ins>
</dt>
<dd>
<del class="diff-old">See
RFC&nbsp;8259,
section
12
.
</del>
<p>
<del class="diff-old">Since
WoT
Thing
Description
is
intended
to
be
a
pure
data
exchange
format
for
Thing
metadata,
the
serialization
SHOULD
NOT
be
passed
through
a
code
execution
mechanism
such
as
JavaScript's
eval()
function
to
be
parsed.
An
(invalid)
document
may
contain
code
that,
when
executed,
could
lead
to
unexpected
side
effects
compromising
the
security
of
a
system.
WoT
Thing
Descriptions
can
be
evaluated
with
</del>
<span class="rfc2119-assertion" id="priv-query-anon">
<ins class="diff-chg">When
accessing
</ins>
a
<del class="diff-old">JSON-LD
1.1
processor,
which
typically
follows
links
to
remote
contexts
(i.e.,
TD
context
extensions,
see
W3C
WoT
Thing
Description,
section
7
)
automatically,
resulting
in
the
transfer
of
files
without
the
explicit
request
of
the
Consumer
for
each
one.
If
remote
contexts
are
served
by
third
parties,
it
may
allow
them
to
gather
usage
patterns
or
similar
information
leading
to
privacy
concerns.
While
implementations
on
resource-constrained
devices
are
expected
to
perform
raw
JSON
processing
(as
opposed
to
JSON-LD
processing),
</del>
<ins class="diff-chg">public
directory,
like
any
other
public
web
service,
users
and
</ins>
implementations
<del class="diff-old">in
general
</del>
<em class="rfc2119">
SHOULD
</em>
<del class="diff-old">statically
cache
vetted
versions
of
their
supported
context
extensions
and
not
to
follow
links
to
remote
contexts.
</del>
<ins class="diff-chg">use
an
anonymous
identity
provider.
</ins>
</span>
<del class="diff-old">Supported
context
extensions
</del>
<ins class="diff-chg">In
particular,
OAuth2
</ins>
can
<del class="diff-old">be
managed
through
a
secure
software
update
mechanism
instead.
Context
Extensions
(see
W3C
WoT
Thing
Description,
section
7
)
that
are
loaded
from
the
Web
over
non-secure
connections,
such
as
HTTP,
run
the
risk
of
being
altered
by
an
attacker
such
that
</del>
<ins class="diff-chg">provide
tokens
which
don't
identify
specific
individuals,
</ins>
they
<del class="diff-old">may
modify
the
TD
Information
Model
in
a
way
that
could
compromise
security.
For
this
reason,
Consumer
again
SHOULD
vet
and
cache
remote
contexts
before
allowing
the
system
to
use
it.
Given
that
JSON-LD
processing
usually
includes
the
substitution
of
long
IRIs
[
RFC3987
]
with
short
terms,
WoT
Thing
Descriptions
may
expand
considerably
when
processed
using
a
JSON-LD
1.1
processor
and,
in
the
worst
case,
the
resulting
data
might
consume
all
of
the
recipient's
resources.
Consumers
SHOULD
treat
any
TD
metadata
with
due
skepticism.
Interoperability
considerations:
See
RFC&nbsp;8259
.
Rules
for
processing
both
conforming
and
non-conforming
content
are
defined
in
this
specification.
Published
specification:
https://w3c.github.io/wot-thing-description/
Applications
that
use
this
media
type:
All
participating
entities
in
the
W3C
Web
of
Things,
that
is,
Things
,
Consumers
,
and
Intermediaries
as
defined
in
the
Web
of
Things
(WoT)
Architecture
.
Fragment
identifier
considerations:
See
RFC&nbsp;6839,
section
3.1
.
Additional
information:
Magic
number(s):
Not
Applicable
File
extension(s):
.jsontd
Macintosh
file
type
code(s):
TEXT
Person
&amp;
email
address
to
contact
for
further
information:
Matthias
Kovatsch
&lt;w3c@kovatsch.net&gt;
Intended
usage:
COMMON
Restrictions
on
usage:
None
Author(s):
The
WoT
Thing
Description
specification
is
a
product
of
the
Web
of
Things
Working
Group.
Change
controller:
W3C
12.2
CoAP
Content-Format
Registration
IANA
assigns
compact
CoAP
Content-Format
IDs
for
media
types
in
the
CoAP
Content-Formats
subregistry
within
the
Constrained
RESTful
Environments
(CoRE)
Parameters
registry
[
RFC7252
].
The
Content-Format
ID
for
WoT
Thing
Description
is
432.
</del>
<ins class="diff-chg">just
assert
access
rights
proven
elsewhere.
</ins>
</p>
<del class="diff-old">Media
Type:
application/td+json
Encoding:
-
ID:
432
Reference:
[
"Web
of
Things
(WoT)
Thing
Description",
May
2019
]
</del>
</dd>
</dl>
</section>
</section>
<section id="performance-considerations" class="informative">
<div class="header-wrapper">
<h2 id="x10-performance-considerations">
<bdi class= "secno">
<del class="diff-old">A.
</del>
<ins class="diff-chg">10.
</ins>
</bdi>
<del class="diff-old">Example
Thing
Description
Instances
</del>
<ins class="diff-chg">Performance
Considerations
</ins>
</h2>
<a class="self-link" href="#performance-considerations" aria-label= "Permalink for Section 10.">
</a>
</div>
<p>
<em>
This
section
is
non-normative.
</em>
</p>
<section id="perf-incremental-transfer">
<div class="header-wrapper">
<h3 id="x10-1-incremental-transfer">
<bdi class="secno">
<del class="diff-old">A.1
</del>
<ins class="diff-chg">10.1
</ins>
</bdi>
<del class="diff-old">MyLampThing
Example
with
CoAP
Protocol
Binding
</del>
<ins class="diff-chg">Incremental
Transfer
</ins>
</h3>
<a class="self-link" href="#perf-incremental-transfer" aria-label= "Permalink for Section 10.1">
</a>
</div>
<p>
<del class="diff-old">Feature
</del>
<a href="#dfn-td" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-td-43">
<ins class="diff-chg">TD
</ins></a><ins class="diff-chg">
objects
are
not
constrained
in
size.
They
may
become
expensive
to
process
and
transfer
individually
or
collectively.
A
single
TD
or
a
</ins>
list
of
<del class="diff-old">the
Thing
:
</del>
<ins class="diff-chg">TDs
could
be
too
large
for
a
constrained
device,
serving
its
own
TD
to
consumers,
submitting
it
to
a
directory,
or
consuming
other
TDs.
To
meet
such
requirements,
servers
should
support
incremental
transfer
of
payloads
using
protocol-specific
mechanisms:
</ins>
</p>
<ul>
<li>
<del class="diff-old">Title:
MyLampThing
Context
Extensions:
none
Offered
affordances:
1
Property,
1
Action,
1
Event
Security:
PSKSecurityScheme
Protocol
Binding:
CoAP
</del>
<ins class="diff-chg">HTTP/1.1
servers
should
support
</ins><code><ins class="diff-chg">
chunked
</ins></code><a href= "https://tools.ietf.org/html/rfc7230#section-3.3.1"><ins class="diff-chg">
Transfer-Encoding
</ins></a>
[
<cite>
<del class="diff-old">RFC7252
</del>
<a class="bibref" data-link-type="biblio" href= "#bib-rfc7230" title= "Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing">
<ins class="diff-chg">RFC7230
</ins>
</a>
</cite>
]
<del class="diff-old">over
TLS
</del>
<ins class="diff-chg">to
receive
and
server
data
incrementally.
</ins>
</li>
<li>
<del class="diff-old">Comment:
Also
see
7.2
Adding
Protocol
Bindings
.
Example
65
</del>
<ins class="diff-chg">HTTP/2
servers
should
handle
the
data
incrementally
using
</ins><a href="https://tools.ietf.org/html/rfc7540#section-4"><ins class="diff-chg">
HTTP
Frames
</ins>
</a>
<ins class="diff-new">[
</ins><cite>
<del class="diff-old">:
MyLampThing
with
CoAP
Protocol
Binding
{
   : [
      &lt;span class=
"hljs-string"&gt;"https://www.w3.org/2022/wot/td/v1.1",
      {
      : &lt;span class=
"hljs-string"&gt;"http://www.example.org/coap-binding#"
      }
    ],
    : &lt;span class=
"hljs-string"&gt;"urn:dev:ops:32473-WoTLamp-1234",
    : &lt;span class=
"hljs-string"&gt;"MyLampThing",
    : &lt;span class=
"hljs-string"&gt;"MyLampThing uses JSON serialization",
    &lt;span class=
"hljs-attr"&gt;"securityDefinitions": {&lt;span class=
"hljs-attr"&gt;"psk_sc":{&lt;span class=
"hljs-attr"&gt;"scheme": &lt;span class=
"hljs-string"&gt;"psk"}},
    : [&lt;span class=
"hljs-string"&gt;"psk_sc"],
    : {
        : {
            &lt;span class=
"hljs-attr"&gt;"description": &lt;span class=
"hljs-string"&gt;"Shows the current status of the lamp",
            : &lt;span class=
"hljs-string"&gt;"string",
            : [{
                : &lt;span class=
"hljs-string"&gt;"readproperty",
                : &lt;span class=
"hljs-string"&gt;"coaps://mylamp.example.com/status",
                &lt;span class=
"hljs-attr"&gt;"cov:methodName": &lt;span class=
"hljs-string"&gt;"GET" 
            }]
        }
    },
    : {
        : {
            &lt;span class=
"hljs-attr"&gt;"description": &lt;span class=
"hljs-string"&gt;"Turn on or off the lamp",
            : [{
                : &lt;span class=
"hljs-string"&gt;"coaps://mylamp.example.com/toggle",
                &lt;span class=
"hljs-attr"&gt;"cov:methodName": &lt;span class=
"hljs-string"&gt;"POST" 
            }]
        }
    },
    : {
        : {
            &lt;span class=
"hljs-attr"&gt;"description": &lt;span class=
"hljs-string"&gt;"Lamp reaches a critical temperature (overheating)",
            : {&lt;span class=
"hljs-attr"&gt;"type": &lt;span class=
"hljs-string"&gt;"string"},
            : [{
                : &lt;span class=
"hljs-string"&gt;"coaps://mylamp.example.com/oh",
                &lt;span class=
"hljs-attr"&gt;"cov:methodName": &lt;span class=
"hljs-string"&gt;"GET",
                &lt;span class=
"hljs-attr"&gt;"subprotocol": &lt;span class=
"hljs-string"&gt;"cov:observe" 
            }]
        }
    }
}
A.2
MyIlluminanceSensor
Example
with
MQTT
Protocol
Binding
</del>
<a class="bibref" data-link-type="biblio" href= "#bib-rfc7540" title= "Hypertext Transfer Protocol Version 2 (HTTP/2)">
<ins class="diff-chg">RFC7540
</ins>
</a>
<del class="diff-old">Feature
list
of
the
Thing
:
Title:
MyIlluminanceSensor
Context
Extensions:
none
Offered
affordances:
1
Event
Security:
none
</del>
</cite>
<ins class="diff-chg">].
The
HTTP/1.1
chunked
transfer
encoding
is
not
supported
in
HTTP/2.
</ins>
</li>
<li>
<del class="diff-old">Protocol
Binding:
MQTT
</del>
<ins class="diff-chg">CoAP
servers
must
suppoert
block-wise
transfer
</ins>
[
<cite>
<del class="diff-old">MQTT
</del>
<a class= "bibref" data-link-type="biblio" href="#bib-rfc7959" title= "Block-Wise Transfers in the Constrained Application Protocol (CoAP)">
<ins class="diff-chg">RFC7959
</ins>
</a>
</cite>
]
<ins class="diff-new">when
relying
on
an
unreliable
transport
protocol
like
UDP
and
should
support
it
when
using
a
reliable
transport
protocol
like
TCP
or
WebSockets
[
</ins><cite><a class="bibref" data-link-type="biblio" href="#bib-rfc8323" title= "CoAP (Constrained Application Protocol) over TCP, TLS, and WebSockets"><ins class="diff-new">
RFC8323
</ins></a></cite><ins class="diff-new">
].
</ins>
</li>
<del class="diff-old">Comment:
An
MQTT
client
frequently
publishes
</del>
</ul>
<p>
<ins class="diff-chg">Most
HTTP
servers
and
clients
automatically
process
</ins>
the
<del class="diff-old">illuminance
</del>
data
<del class="diff-old">(number
</del>
<ins class="diff-chg">that
</ins>
is
<del class="diff-old">serialized
</del>
<ins class="diff-chg">transferred
</ins>
in
<del class="diff-old">text
format)
to
the
topic
/illuminance
by
the
MQTT
broker
running
behind
</del>
<ins class="diff-chg">chunks.
Memory-constrained
clients
should
consider
consuming
</ins>
the
<del class="diff-old">address
192.168.1.187:1883.
</del>
<ins class="diff-chg">received
data
incrementally,
instead
of
trying
to
load
a
whole
object
in
memory
for
de-serialization.
</ins></p></section></section><section id="iana-considerations" class="normative"><div class="header-wrapper"><h2 id="x11-iana-considerations">
<del class="diff-old">Example
66
</del>
<bdi class="secno">
<ins class="diff-chg">11.
</ins>
</bdi>
<ins class="diff-new">IANA
Considerations
</ins></h2><a class="self-link" href="#iana-considerations" aria-label= "Permalink for Section 11.">
</a>
<del class="diff-old">:
MyIlluminanceSensor
with
MQTT
Protocol
Binding
{   
    : &lt;span class=
"hljs-string"&gt;"https://www.w3.org/2022/wot/td/v1.1",
    : &lt;span class=
"hljs-string"&gt;"MyIlluminanceSensor",
    : &lt;span class=
"hljs-string"&gt;"urn:dev:ops:32473-WoTIlluminanceSensor-1234",
    &lt;span class=
"hljs-attr"&gt;"securityDefinitions": {&lt;span class=
"hljs-attr"&gt;"nosec_sc": {&lt;span class=
"hljs-attr"&gt;"scheme": &lt;span class=
"hljs-string"&gt;"nosec"}},
    : [&lt;span class=
"hljs-string"&gt;"nosec_sc"],
    : {
        : {
            :{&lt;span class=
"hljs-attr"&gt;"type": &lt;span class=
"hljs-string"&gt;"integer"},
            : [
                {
                    &lt;span class=
"hljs-attr"&gt;"href": &lt;span class=
"hljs-string"&gt;"mqtt://192.168.1.187:1883/illuminance",
                    &lt;span class=
"hljs-attr"&gt;"contentType": &lt;span class=
"hljs-string"&gt;"text/plain",
                    &lt;span class=
"hljs-attr"&gt;"op": &lt;span class=
"hljs-string"&gt;"subscribeevent"
                }
            ]
        }
    } 
}
</del>
</div>
<section id="well-known-uri-suffix">
<div class="header-wrapper">
<h3 id="x11-1-well-known-uri-registration">
<del class="diff-old">A.3
</del>
<bdi class= "secno">
<ins class="diff-chg">11.1
</ins>
</bdi>
<del class="diff-old">Webhook
Event
Example
</del>
<ins class="diff-chg">Well-Known
URI
Registration
</ins>
</h3>
<a class="self-link" href="#well-known-uri-suffix" aria-label= "Permalink for Section 11.1">
</a>
</div>
<p>
<del class="diff-old">Feature
list
of
the
Thing
:
Title:
WebhookThing
Context
Extensions:
use
HTTP
Protocol
Binding
supplements
(htv
prefix
already
included
in
TD
context)
Offered
affordances:
1
Event
Security:
none
Protocol
Binding:
HTTP
Comment:
WebhookThing
provides
an
Event
affordance
temperature
which
periodically
pushes
the
latest
temperature
value
to
the
Consumer
using
a
Webhook
mechanism,
where
the
Thing
sends
POST
requests
to
a
callback
URI
provided
by
the
Consumer
.
To
describe
this,
the
subscription
member
defines
a
write-only
parameter
callbackURL
,
which
must
be
submitted
through
the
subscribeevent
form.
The
read-only
parameter
subscriptionID
is
returned
by
the
subscription.
The
WebhookThing
</del>
<ins class="diff-chg">IANA
</ins>
will
<del class="diff-old">then
periodically
POST
to
this
callback
URI
with
a
payload
defined
by
data
.
To
unsubscribe,
the
Consumer
has
to
submit
the
unsubscribeevent
form
with
the
subscriptionID
as
described
in
cancellation
.
Alternatively,
uriVariables
approache
can
</del>
be
<del class="diff-old">used
that
informs
the
Consumer
</del>
<ins class="diff-chg">asked
</ins>
to
<del class="diff-old">include
</del>
<ins class="diff-chg">allocate
</ins>
the
<del class="diff-old">subscriptionID
string
</del>
<ins class="diff-chg">following
value
</ins>
into
the
<ins class="diff-new">Well-Known
</ins>
URI
<del class="diff-old">that
have
to
be
called
with
the
delete
method
(see
tab
'With
uriVariables').
In
such
setup,
the
cancellation
container
can
be
obmitted.
In
general,
this
example
can
be
further
automated
by
using
a
TD
Context
Extension
to
include
proper
semantic
annotations.
Example
67
</del>
<ins class="diff-chg">defined
in
[
</ins><cite>
<a class="bibref" data-link-type= "biblio" href="#bib-rfc8615" title= "Well-Known Uniform Resource Identifiers (URIs)">
<ins class="diff-new">RFC8615
</ins>
</a>
<del class="diff-old">Temperature
Event
with
subscription
and
cancellation
Without
uriVariables
With
uriVariables
&lt;pre class="without exampleTab1 selected" aria-busy=
"false"&gt;{
    "@context": "http://www.w3.org/ns/td",
    "id": "urn:dev:ops:32473-Thing-1234",
    "title": "WebhookThing",
    "description": "Webhook-based Event with subscription and unsubscribe form.",
    "securityDefinitions": {"nosec_sc": {"scheme": "nosec"}},
    "security": ["nosec_sc"],
    "events": {
        "temperature": {
            "description": "Provides periodic temperature value updates.",
            "subscription": {
                "type": "object",
                "properties": {
                    "callbackURL": {
                        "type": "string",
                        "format": "uri",
                        "description": "Callback URL provided by subscriber for Webhook notifications.",
                        "writeOnly": true
                    },
                    "subscriptionID": {
                        "type": "string",
                        "description": "Unique subscription ID for cancellation provided by WebhookThing.",
                        "readOnly": true
                    }
                }
            },
            "data": {
                "type": "number",
                "description": "Latest temperature value that is sent to the callback URL."
            },
            "cancellation": {
                "type": "object",
                "properties": {
                    "subscriptionID": {
                        "type": "integer",
                        "description": "Required subscription ID to cancel subscription.",
                        "writeOnly": true
                    }
                }
            },
            "forms": [
                {
                    "op": "subscribeevent",
                    "href": "http://192.168.0.124:8080/events/temp/subscribe",
                    "contentType": "application/json",
                    "htv:methodName": "POST"
                },
                {
                    "op": "unsubscribeevent",
                    "href": "http://192.168.0.124:8080/events/temp/cancel",
                    "htv:methodName": "POST"
                }
            ]
        }
    }
}
&lt;code class=
"hljs"&gt;{
    "@context": "http://www.w3.org/ns/td",
    "id": "urn:dev:ops:32473-Thing-1234",
    "title": "WebhookThing",
    "description": "Webhook-based Event with subscription and unsubscribe form.",
    "securityDefinitions": {"nosec_sc": {"scheme": "nosec"}},
    "security": ["nosec_sc"],
    "events": {
        "temperature": {
            "description": "Provides periodic temperature value updates.",
            "subscription": {
                "type": "object",
                "properties": {
                    "callbackURL": {
                        "type": "string",
                        "format": "uri",
                        "description": "Callback URL provided by subscriber for Webhook notifications.",
                        "writeOnly": true
                    },
                    "subscriptionID": {
                        "type": "string",
                        "description": "Unique subscription ID for cancellation provided by WebhookThing.",
                        "readOnly": true
                    }
                }
            },
            "data": {
                "type": "number",
                "description": "Latest temperature value that is sent to the callback URL."
            },
            "uriVariables": {
                "subscriptionID": { "type": "string" }
            },
            "forms": [
                {
                    "op": "subscribeevent",
                    "href": "http://192.168.0.124:8080/events/temp/subscribe",
                    "contentType": "application/json",
                    "htv:methodName": "POST"
                },
                {
                    "op": "unsubscribeevent",
                    "href": "http://192.168.0.124:8080/events/temp/{subscriptionID}",
                    "htv:methodName": "DELETE"
                }
            ]
        }
    }
}
</del>
</cite>
<ins class="diff-chg">].
</ins></p><ul><li><ins class="diff-chg">
URI
suffix:
</ins><code><ins class="diff-chg">
wot
</ins>
</code>
<del class="diff-old">Editor's
note
Instead
of
a
periodically
POST
call
of
the
Thing
the
consumer
may
provide
a
response
data
with
information
when
the
next
POST
should
be
provided
by
the
Thing.
The
WoT
WG
is
currently
working
on
a
definition
that
covers
this
scenario
for
the
next
update
of
the
TD
document
(
W3C
TD
1.1
CR).
</del>
</li>
</ul>
</section>
<section id="service-name">
<div class="header-wrapper">
<h3 id="x11-2-service-name-registration">
<bdi class= "secno">
<del class="diff-old">B.
</del>
<ins class="diff-chg">11.2
</ins>
</bdi>
<del class="diff-old">JSON
Schema
for
TD
Instance
Validation
</del>
<ins class="diff-chg">Service
Name
Registration
</ins></h3><a class="self-link" href="#service-name" aria-label= "Permalink for Section 11.2">
</a>
</div>
<p>
<del class="diff-old">This
section
is
non-normative.
Below
is
a
JSON
Schema
</del>
<ins class="diff-chg">IANA
will
be
asked
to
allocate
the
following
value
into
Service
Name
and
Transport
Protocol
Port
Number
Registry
defined
in
</ins>
[
<cite>
<del class="diff-old">JSON-SCHEMA
</del>
<a class="bibref" data-link-type="biblio" href= "#bib-rfc6335" title= "Internet Assigned Numbers Authority (IANA) Procedures for the Management of the Service Name and Transport Protocol Port Number Registry">
<ins class="diff-chg">RFC6335
</ins>
</a>
</cite>
<del class="diff-old">]
document
for
syntactically
validating
Thing
Description
instances
serialized
in
JSON
based
format.
</del>
<ins class="diff-chg">].
</ins>
</p>
<del class="diff-old">Note
The
Thing
Description
defined
by
this
document
allows
for
adding
external
vocabularies
by
using
</del>
<ul>
<li>
<ins class="diff-chg">Service
Name:
</ins>
<code>
<del class="diff-old">@context
</del>
<ins class="diff-chg">wot
</ins>
</code>
<del class="diff-old">mechanism
known
from
JSON-LD
[
json-ld11
</del>
<del class="diff-old">],
and
the
terms
in
those
external
vocabularies
can
be
used
in
addition
to
the
terms
defined
in
5.
TD
Information
Model
.
For
this
reason,
the
below
JSON
schema
is
intentionally
non-strict
in
that
regard.
You
can
replace
the
value
of
additionalProperties
schema
property
true
with
false
in
different
scopes/levels
in
order
</del>
</li>
<li>
<ins class="diff-chg">Transport
Protocol:
TCP,
UDP
</ins></li><li><ins class="diff-chg">
Description:
Service
name
</ins>
to
<del class="diff-old">perform
</del>
<ins class="diff-chg">search
</ins>
a
<del class="diff-old">stricter
validation
in
case
no
external
vocabularies
are
used.
Note
Please
note
that
some
JSON
Schema
validation
tools
do
not
support
the
iri-reference
string
format.
It
can
be
replaced
with
uri-reference
</del>
<ins class="diff-chg">Thing
</ins>
or
<del class="diff-old">the
term
format
can
removed
from
the
definition
of
anyUri
.
Note
The
$id
field
in
the
JSON
Schemas
need
to
be
updated
to
</del>
a
<del class="diff-old">static
URL
before
publication.
The
following
JSON
Schema
for
validating
TD
instances
does
not
require
the
terms
with
Default
Values
to
be
present.
Thus
the
terms
with
Default
Values
</del>
<ins class="diff-chg">Thing
Description
Directory
of
</ins><abbr title= "World Wide Web Consortium"><ins class="diff-chg">
W3C
</ins></abbr><ins class="diff-chg">
Web
of
Things
</ins></li><li><ins class="diff-chg">
Port
Number:
N/A
</ins></li><li><ins class="diff-chg">
Assignment
notes:
PTR,
SRV,
TXT
RR
types
</ins>
are
<del class="diff-old">optional.
(see
also
5.4
Default
Value
Definitions
)
{
    "title": "Thing Description",
    "version": "1.1-28-January-2022",
    "description": "JSON Schema for validating TD instances against the TD information model. TD instances can be with or without terms that have default values",
    "$schema ": "http://json-schema.org/draft-07/schema#",
    "$id":"https://raw.githubusercontent.com/w3c/wot-thing-description/main/validation/td-json-schema-validation.json",
    "definitions": {
      "anyUri": {
        "type": "string",
        "format": "iri-reference"
      },
      "description": {
        "type": "string"
      },
      "descriptions": {
        "type": "object",
        "additionalProperties": {
          "type": "string"
        }
      },
      "title": {
        "type": "string"
      },
      "titles": {
        "type": "object",
        "additionalProperties": {
          "type": "string"
        }
      },
      "security": {
        "oneOf": [
          {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          {
            "type": "string"
          }
        ]
      },
      "scopes": {
        "oneOf": [
          {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          {
            "type": "string"
          }
        ]
      },
      "subprotocol": {
        "type": "string",
        "examples": [
          "longpoll",
          "websub",
          "sse"
        ]
      },
      "thing-context-w3c-uri": {
        "type": "string",
        "enum": [
          "https://www.w3.org/2019/wot/td/v1",
          "http://www.w3.org/ns/td",
          "https://www.w3.org/2022/wot/td/v1.1"
        ]
      },
      "thing-context": {
        "oneOf": [
          {
            "type": "array",
            "items": [
              {
                "$ref": "#/definitions/thing-context-w3c-uri"
              }
            ],
            "additionalItems": {
              "anyOf": [
                {
                  "$ref": "#/definitions/anyUri"
                },
                {
                  "type": "object"
                }
              ]
            }
          },
          {
            "$ref": "#/definitions/thing-context-w3c-uri"
          }
        ]
      },
      "type_declaration": {
        "oneOf": [
          {
            "type": "string",
            "not": {
              "const": "tm:ThingModel"
            }
          },
          {
            "type": "array",
            "items": {
              "type": "string",
              "not": {
                "const": "tm:ThingModel"
              }
            }
          }
        ]
      },
      "dataSchema-type": {
        "type": "string",
        "enum": [
          "boolean",
          "integer",
          "number",
          "string",
          "object",
          "array",
          "null"
        ]
      },
      "dataSchema": {
        "type": "object",
        "properties": {
          "@type": {
            "$ref": "#/definitions/type_declaration"
          },
          "description": {
            "$ref": "#/definitions/description"
          },
          "title": {
            "$ref": "#/definitions/title"
          },
          "descriptions": {
            "$ref": "#/definitions/descriptions"
          },
          "titles": {
            "$ref": "#/definitions/titles"
          },
          "writeOnly": {
            "type": "boolean"
          },
          "readOnly": {
            "type": "boolean"
          },
          "oneOf": {
            "type": "array",
            "items": {
              "$ref": "#/definitions/dataSchema"
            }
          },
          "unit": {
            "type": "string"
          },
          "enum": {
            "type": "array",
            "minItems": 1,
            "uniqueItems": true
          },
          "format": {
            "type": "string"
          },
          "const": {},
          "default": {},
          "contentEncoding": {
            "type": "string"
          },
          "contentMediaType": {
            "type": "string"
          },
          "type": {
            "$ref": "#/definitions/dataSchema-type"
          },
          "items": {
            "oneOf": [
              {
                "$ref": "#/definitions/dataSchema"
              },
              {
                "type": "array",
                "items": {
                  "$ref": "#/definitions/dataSchema"
                }
              }
            ]
          },
          "maxItems": {
            "type": "integer",
            "minimum": 0
          },
          "minItems": {
            "type": "integer",
            "minimum": 0
          },
          "minimum": {
            "type": "number"
          },
          "maximum": {
            "type": "number"
          },
          "exclusiveMinimum": {
            "type": "number"
          },
          "exclusiveMaximum": {
            "type": "number"
          },
          "minLength": {
            "type": "integer",
            "minimum": 0
          },
          "maxLength": {
            "type": "integer",
            "minimum": 0
          },
          "multipleOf": {
            "$ref": "#/definitions/multipleOfDefinition"
          },
          "properties": {
            "additionalProperties": {
              "$ref": "#/definitions/dataSchema"
            }
          },
          "required": {
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        }
      },
      "additionalResponsesDefinition": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "contentType": {
              "type": "string"
            },
            "schema": {
              "type": "string"
            },
            "success": {
              "type": "boolean"
            }
          }
        }
      },
      "multipleOfDefinition": {
        "type": [
          "integer",
          "number"
        ],
        "exclusiveMinimum": 0
      },
      "expectedResponse": {
        "type": "object",
        "properties": {
          "contentType": {
            "type": "string"
          }
        }
      },
      "form_element_base": {
        "type": "object",
        "properties": {
          "op": {
            "oneOf": [
              {
                "type": "string"
              },
              {
                "type": "array",
                "items": {
                  "type": "string"
                }
              }
            ]
          },
          "href": {
            "$ref": "#/definitions/anyUri"
          },
          "contentType": {
            "type": "string"
          },
          "contentCoding": {
            "type": "string"
          },
          "subprotocol": {
            "$ref": "#/definitions/subprotocol"
          },
          "security": {
            "$ref": "#/definitions/security"
          },
          "scopes": {
            "$ref": "#/definitions/scopes"
          },
          "response": {
            "$ref": "#/definitions/expectedResponse"
          },
          "additionalResponses": {
            "$ref": "#/definitions/additionalResponsesDefinition"
          }
        },
        "required": [
          "href"
        ],
        "additionalProperties": true
      },
      "form_element_property": {
        "allOf":[{"$ref":"#/definitions/form_element_base"}],
        "type": "object",
        "properties": {
          "op": {
            "oneOf": [
              {
                "type": "string",
                "enum": [
                  "readproperty",
                  "writeproperty",
                  "observeproperty",
                  "unobserveproperty"
                ]
              },
              {
                "type": "array",
                "items": {
                  "type": "string",
                  "enum": [
                    "readproperty",
                    "writeproperty",
                    "observeproperty",
                    "unobserveproperty"
                  ]
                }
              }
            ]
          }
        },
        "additionalProperties": true
      },
      "form_element_action": {
        "allOf":[{"$ref":"#/definitions/form_element_base"}],
        "type": "object",
        "properties": {
          "op": {
            "oneOf": [
              {
                "type": "string",
                "enum": [
                  "invokeaction",
                  "queryaction",
                  "cancelaction"
                ]
              },
              {
                "type": "array",
                "items": {
                  "type": "string",
                  "enum": [
                    "invokeaction",
                    "queryaction",
                    "cancelaction"
                  ]
                }
              }
            ]
          }
        },
        "additionalProperties": true
      },
      "form_element_event": {
        "allOf":[{"$ref":"#/definitions/form_element_base"}],
        "type": "object",
        "properties": {
          "op": {
            "oneOf": [
              {
                "type": "string",
                "enum": [
                  "subscribeevent",
                  "unsubscribeevent"
                ]
              },
              {
                "type": "array",
                "items": {
                  "type": "string",
                  "enum": [
                    "subscribeevent",
                    "unsubscribeevent"
                  ]
                }
              }
            ]
          }
        },
        "additionalProperties": true
      },
      "form_element_root": {
        "allOf":[{"$ref":"#/definitions/form_element_base"}],
        "type": "object",
        "properties": {
          "op": {
            "oneOf": [
              {
                "type": "string",
                "enum": [
                  "readallproperties",
                  "writeallproperties",
                  "readmultipleproperties",
                  "writemultipleproperties",
                  "observeallproperties",
                  "unobserveallproperties",
                  "queryallactions",
                  "subscribeallevents",
                  "unsubscribeallevents"
                ]
              },
              {
                "type": "array",
                "items": {
                  "type": "string",
                  "enum": [
                    "readallproperties",
                    "writeallproperties",
                    "readmultipleproperties",
                    "writemultipleproperties",
                    "observeallproperties",
                    "unobserveallproperties",
                    "queryallactions",
                    "subscribeallevents",
                    "unsubscribeallevents"
                  ]
                }
              }
            ]
          }
        },
        "additionalProperties": true
      },
      "form" : {
        "$comment":"This is NOT for validation purposes but for automatic generation of TS types. For more info, please see: https://github.com/w3c/wot-thing-description/pull/1319#issuecomment-994950057",
        "oneOf": [
             {  "$ref" : "#/definitions/form_element_property" },
             {  "$ref" : "#/definitions/form_element_action" },
             {  "$ref" : "#/definitions/form_element_event" },
             {  "$ref" : "#/definitions/form_element_root" }
         ]
      },
      "property_element": {
        "type": "object",
        "properties": {
          "@type": {
            "$ref": "#/definitions/type_declaration"
          },
          "description": {
            "$ref": "#/definitions/description"
          },
          "descriptions": {
            "$ref": "#/definitions/descriptions"
          },
          "title": {
            "$ref": "#/definitions/title"
          },
          "titles": {
            "$ref": "#/definitions/titles"
          },
          "forms": {
            "type": "array",
            "minItems": 1,
            "items": {
              "$ref": "#/definitions/form_element_property"
            }
          },
          "uriVariables": {
            "type": "object",
            "additionalProperties": {
              "$ref": "#/definitions/dataSchema"
            }
          },
          "observable": {
            "type": "boolean"
          },
          "writeOnly": {
            "type": "boolean"
          },
          "readOnly": {
            "type": "boolean"
          },
          "oneOf": {
            "type": "array",
            "items": {
              "$ref": "#/definitions/dataSchema"
            }
          },
          "unit": {
            "type": "string"
          },
          "enum": {
            "type": "array",
            "minItems": 1,
            "uniqueItems": true
          },
          "format": {
            "type": "string"
          },
          "const": {},
          "default": {},
          "type": {
            "$ref": "#/definitions/dataSchema-type"
          },
          "items": {
            "oneOf": [
              {
                "$ref": "#/definitions/dataSchema"
              },
              {
                "type": "array",
                "items": {
                  "$ref": "#/definitions/dataSchema"
                }
              }
            ]
          },
          "maxItems": {
            "type": "integer",
            "minimum": 0
          },
          "minItems": {
            "type": "integer",
            "minimum": 0
          },
          "minimum": {
            "type": "number"
          },
          "maximum": {
            "type": "number"
          },
          "exclusiveMinimum": {
            "type": "number"
          },
          "exclusiveMaximum": {
            "type": "number"
          },
          "minLength": {
            "type": "integer",
            "minimum": 0
          },
          "maxLength": {
            "type": "integer",
            "minimum": 0
          },
          "multipleOf": {
            "$ref": "#/definitions/multipleOfDefinition"
          },
          "properties": {
            "additionalProperties": {
              "$ref": "#/definitions/dataSchema"
            }
          },
          "required": {
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        },
        "required": [
          "forms"
        ],
        "additionalProperties": true
      },
      "action_element": {
        "type": "object",
        "properties": {
          "@type": {
            "$ref": "#/definitions/type_declaration"
          },
          "description": {
            "$ref": "#/definitions/description"
          },
          "descriptions": {
            "$ref": "#/definitions/descriptions"
          },
          "title": {
            "$ref": "#/definitions/title"
          },
          "titles": {
            "$ref": "#/definitions/titles"
          },
          "forms": {
            "type": "array",
            "minItems": 1,
            "items": {
              "$ref": "#/definitions/form_element_action"
            }
          },
          "uriVariables": {
            "type": "object",
            "additionalProperties": {
              "$ref": "#/definitions/dataSchema"
            }
          },
          "input": {
            "$ref": "#/definitions/dataSchema"
          },
          "output": {
            "$ref": "#/definitions/dataSchema"
          },
          "safe": {
            "type": "boolean"
          },
          "idempotent": {
            "type": "boolean"
          }
        },
        "required": [
          "forms"
        ],
        "additionalProperties": true
      },
      "event_element": {
        "type": "object",
        "properties": {
          "@type": {
            "$ref": "#/definitions/type_declaration"
          },
          "description": {
            "$ref": "#/definitions/description"
          },
          "descriptions": {
            "$ref": "#/definitions/descriptions"
          },
          "title": {
            "$ref": "#/definitions/title"
          },
          "titles": {
            "$ref": "#/definitions/titles"
          },
          "forms": {
            "type": "array",
            "minItems": 1,
            "items": {
              "$ref": "#/definitions/form_element_event"
            }
          },
          "uriVariables": {
            "type": "object",
            "additionalProperties": {
              "$ref": "#/definitions/dataSchema"
            }
          },
          "subscription": {
            "$ref": "#/definitions/dataSchema"
          },
          "data": {
            "$ref": "#/definitions/dataSchema"
          },
          "dataResponse": {
            "$ref": "#/definitions/dataSchema"
          },
          "cancellation": {
            "$ref": "#/definitions/dataSchema"
          }
        },
        "required": [
          "forms"
        ],
        "additionalProperties": true
      },
      "base_link_element": {
        "type": "object",
        "properties": {
          "href": {
            "$ref": "#/definitions/anyUri"
          },
          "type": {
            "type": "string"
          },
          "rel": {
            "type": "string"
          },
          "anchor": {
            "$ref": "#/definitions/anyUri"
          }
        },
        "required": [
          "href"
        ],
        "additionalProperties": true
      },
      "link_element": {
        "allOf": [
          {
            "$ref": "#/definitions/base_link_element"
          },
          {
            "not": {
              "description": "A basic link element should not contain sizes",
              "type": "object",
              "properties": {
                "sizes": {}
              },
              "required": [
                "sizes"
              ]
            }
          },
          {
            "not": {
              "description": "A basic link element should not contain icon or tm:extends",
              "properties": {
                "rel": {
                  "enum": [
                    "icon",
                    "tm:extends"
                  ]
                }
              },
              "required": [
                "rel"
              ]
            }
          }
        ]
      },
      "icon_link_element": {
        "allOf": [
          {
            "$ref": "#/definitions/base_link_element"
          },
          {
            "properties": {
              "rel": {
                "const": "icon"
              },
              "sizes": {
                "type": "string",
                "pattern": "[0-9]*x[0-9]+"
              }
            },
            "required": [
              "rel"
            ]
          }
        ]
      },
      "noSecurityScheme": {
        "type": "object",
        "properties": {
          "@type": {
            "$ref": "#/definitions/type_declaration"
          },
          "description": {
            "$ref": "#/definitions/description"
          },
          "descriptions": {
            "$ref": "#/definitions/descriptions"
          },
          "proxy": {
            "$ref": "#/definitions/anyUri"
          },
          "scheme": {
            "type": "string",
            "enum": [
              "nosec"
            ]
          }
        },
        "required": [
          "scheme"
        ]
      },
      "comboSecurityScheme": {
        "oneOf": [
          {
            "type": "object",
            "properties": {
              "@type": {
                "$ref": "#/definitions/type_declaration"
              },
              "description": {
                "$ref": "#/definitions/description"
              },
              "descriptions": {
                "$ref": "#/definitions/descriptions"
              },
              "proxy": {
                "$ref": "#/definitions/anyUri"
              },
              "scheme": {
                "type": "string",
                "enum": [
                  "combo"
                ]
              },
              "oneOf": {
                "type": "array",
                "minItems": 2,
                "items": {
                  "type": "string"
                }
              }
            },
            "required": [
              "scheme",
              "oneOf"
            ]
          },
          {
            "type": "object",
            "properties": {
              "@type": {
                "$ref": "#/definitions/type_declaration"
              },
              "description": {
                "$ref": "#/definitions/description"
              },
              "descriptions": {
                "$ref": "#/definitions/descriptions"
              },
              "proxy": {
                "$ref": "#/definitions/anyUri"
              },
              "scheme": {
                "type": "string",
                "enum": [
                  "combo"
                ]
              },
              "allOf": {
                "type": "array",
                "minItems": 2,
                "items": {
                  "type": "string"
                }
              }
            },
            "required": [
              "scheme",
              "allOf"
            ]
          }
        ]
      },
      "basicSecurityScheme": {
        "type": "object",
        "properties": {
          "@type": {
            "$ref": "#/definitions/type_declaration"
          },
          "description": {
            "$ref": "#/definitions/description"
          },
          "descriptions": {
            "$ref": "#/definitions/descriptions"
          },
          "proxy": {
            "$ref": "#/definitions/anyUri"
          },
          "scheme": {
            "type": "string",
            "enum": [
              "basic"
            ]
          },
          "in": {
            "type": "string",
            "enum": [
              "header",
              "query",
              "body",
              "cookie"
            ]
          },
          "name": {
            "type": "string"
          }
        },
        "required": [
          "scheme"
        ]
      },
      "digestSecurityScheme": {
        "type": "object",
        "properties": {
          "@type": {
            "$ref": "#/definitions/type_declaration"
          },
          "description": {
            "$ref": "#/definitions/description"
          },
          "descriptions": {
            "$ref": "#/definitions/descriptions"
          },
          "proxy": {
            "$ref": "#/definitions/anyUri"
          },
          "scheme": {
            "type": "string",
            "enum": [
              "digest"
            ]
          },
          "qop": {
            "type": "string",
            "enum": [
              "auth",
              "auth-int"
            ]
          },
          "in": {
            "type": "string",
            "enum": [
              "header",
              "query",
              "body",
              "cookie"
            ]
          },
          "name": {
            "type": "string"
          }
        },
        "required": [
          "scheme"
        ]
      },
      "apiKeySecurityScheme": {
        "type": "object",
        "properties": {
          "@type": {
            "$ref": "#/definitions/type_declaration"
          },
          "description": {
            "$ref": "#/definitions/description"
          },
          "descriptions": {
            "$ref": "#/definitions/descriptions"
          },
          "proxy": {
            "$ref": "#/definitions/anyUri"
          },
          "scheme": {
            "type": "string",
            "enum": [
              "apikey"
            ]
          },
          "in": {
            "type": "string",
            "enum": [
              "header",
              "query",
              "body",
              "cookie"
            ]
          },
          "name": {
            "type": "string"
          }
        },
        "required": [
          "scheme"
        ]
      },
      "bearerSecurityScheme": {
        "type": "object",
        "properties": {
          "@type": {
            "$ref": "#/definitions/type_declaration"
          },
          "description": {
            "$ref": "#/definitions/description"
          },
          "descriptions": {
            "$ref": "#/definitions/descriptions"
          },
          "proxy": {
            "$ref": "#/definitions/anyUri"
          },
          "scheme": {
            "type": "string",
            "enum": [
              "bearer"
            ]
          },
          "authorization": {
            "$ref": "#/definitions/anyUri"
          },
          "alg": {
            "type": "string"
          },
          "format": {
            "type": "string"
          },
          "in": {
            "type": "string",
            "enum": [
              "header",
              "query",
              "body",
              "cookie"
            ]
          },
          "name": {
            "type": "string"
          }
        },
        "required": [
          "scheme"
        ]
      },
      "pskSecurityScheme": {
        "type": "object",
        "properties": {
          "@type": {
            "$ref": "#/definitions/type_declaration"
          },
          "description": {
            "$ref": "#/definitions/description"
          },
          "descriptions": {
            "$ref": "#/definitions/descriptions"
          },
          "proxy": {
            "$ref": "#/definitions/anyUri"
          },
          "scheme": {
            "type": "string",
            "enum": [
              "psk"
            ]
          },
          "identity": {
            "type": "string"
          }
        },
        "required": [
          "scheme"
        ]
      },
      "oAuth2SecurityScheme": {
        "type": "object",
        "properties": {
          "@type": {
            "$ref": "#/definitions/type_declaration"
          },
          "description": {
            "$ref": "#/definitions/description"
          },
          "descriptions": {
            "$ref": "#/definitions/descriptions"
          },
          "proxy": {
            "$ref": "#/definitions/anyUri"
          },
          "scheme": {
            "type": "string",
            "enum": [
              "oauth2"
            ]
          },
          "authorization": {
            "$ref": "#/definitions/anyUri"
          },
          "token": {
            "$ref": "#/definitions/anyUri"
          },
          "refresh": {
            "$ref": "#/definitions/anyUri"
          },
          "scopes": {
            "oneOf": [
              {
                "type": "array",
                "items": {
                  "type": "string"
                }
              },
              {
                "type": "string"
              }
            ]
          },
          "flow": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "string",
                "enum": [
                  "code",
                  "client",
                  "device"
                ]
              }
            ]
          }
        },
        "required": [
          "scheme"
        ]
      },
      "securityScheme": {
        "oneOf": [
          {
            "$ref": "#/definitions/noSecurityScheme"
          },
          {
            "$ref": "#/definitions/comboSecurityScheme"
          },
          {
            "$ref": "#/definitions/basicSecurityScheme"
          },
          {
            "$ref": "#/definitions/digestSecurityScheme"
          },
          {
            "$ref": "#/definitions/apiKeySecurityScheme"
          },
          {
            "$ref": "#/definitions/bearerSecurityScheme"
          },
          {
            "$ref": "#/definitions/pskSecurityScheme"
          },
          {
            "$ref": "#/definitions/oAuth2SecurityScheme"
          }
        ]
      }
    },
    "type": "object",
    "properties": {
      "id": {
        "type": "string",
        "format": "uri"
      },
      "title": {
        "$ref": "#/definitions/title"
      },
      "titles": {
        "$ref": "#/definitions/titles"
      },
      "properties": {
        "type": "object",
        "additionalProperties": {
          "$ref": "#/definitions/property_element"
        }
      },
      "actions": {
        "type": "object",
        "additionalProperties": {
          "$ref": "#/definitions/action_element"
        }
      },
      "events": {
        "type": "object",
        "additionalProperties": {
          "$ref": "#/definitions/event_element"
        }
      },
      "description": {
        "$ref": "#/definitions/description"
      },
      "descriptions": {
        "$ref": "#/definitions/descriptions"
      },
      "version": {
        "type": "object",
        "properties": {
          "instance": {
            "type": "string"
          }
        },
        "required": [
          "instance"
        ]
      },
      "links": {
        "type": "array",
        "items": {
          "oneOf": [
            {
              "$ref": "#/definitions/link_element"
            },
            {
              "$ref": "#/definitions/icon_link_element"
            }
          ]
        }
      },
          "forms": {
            "type": "array",
            "minItems": 1,
            "items": {
              "$ref": "#/definitions/form_element_root"
            }
          },
      "base": {
        "$ref": "#/definitions/anyUri"
      },
      "securityDefinitions": {
        "type": "object",
        "minProperties": 1,
        "additionalProperties": {
          "$ref": "#/definitions/securityScheme"
        }
      },
      "schemaDefinitions": {
        "type": "object",
        "minProperties": 1,
        "additionalProperties": {
          "$ref": "#/definitions/dataSchema"
        }
      },
      "support": {
        "$ref": "#/definitions/anyUri"
      },
      "created": {
        "type": "string",
        "format": "date-time"
      },
      "modified": {
        "type": "string",
        "format": "date-time"
      },
      "profile": {
        "oneOf": [
          {
            "$ref": "#/definitions/anyUri"
          },
          {
            "type": "array",
            "minItems": 1,
            "items": {
              "$ref": "#/definitions/anyUri"
            }
          }
        ]
      },
      "security": {
        "oneOf": [
          {
            "type": "string"
          },
          {
            "type": "array",
            "minItems": 1,
            "items": {
              "type": "string"
            }
          }
        ]
      },
      "uriVariables": {
        "type": "object",
        "additionalProperties": {
          "$ref": "#/definitions/dataSchema"
        }
      },
      "@type": {
        "$ref": "#/definitions/type_declaration"
      },
      "@context": {
        "$ref": "#/definitions/thing-context"
      }
    },
    "required": [
      "title",
      "security",
      "securityDefinitions",
      "@context"
    ],
    "additionalProperties": true
}
</del>
<ins class="diff-chg">used
</ins></li></ul>
</section>
<section id="core-resource-type">
<div class="header-wrapper">
<h3 id="x11-3-core-resource-types-registration">
<del class="diff-old">C.
</del>
<bdi class= "secno">
<ins class="diff-chg">11.3
</ins>
</bdi>
<del class="diff-old">JSON-LD
Context
Usage
</del>
<ins class="diff-chg">CoRE
Resource
Types
Registration
</ins></h3><a class="self-link" href="#core-resource-type" aria-label= "Permalink for Section 11.3">
</a>
</div>
<p>
<del class="diff-old">This
section
is
non-normative.
The
present
specification
introduces
the
TD
Information
Model
as
a
set
of
constraints
over
different
Vocabularies
,
i.e.
sets
of
Vocabulary
Terms
.
This
section
briefly
explains
how
a
machine-readable
definition
of
these
constraints
can
</del>
<ins class="diff-chg">IANA
will
</ins>
be
<del class="diff-old">integrated
</del>
<ins class="diff-chg">asked
to
allocate
the
following
values
</ins>
into
<del class="diff-old">client
applications,
by
making
use
of
</del>
the
<del class="diff-old">mandatory
</del>
<ins class="diff-chg">Resource
Type
(
</ins>
<code>
<del class="diff-old">@context
</del>
<ins class="diff-chg">rt=
</ins>
</code>
<ins class="diff-new">)
Link
Target
Attribute
Values
sub-registry
</ins>
of
<del class="diff-old">a
TD
document.
Accessing
</del>
the
<del class="diff-old">TD
Information
Model
from
a
TD
document
is
done
in
two
steps.
First,
clients
must
retrieve
a
mapping
from
JSON
strings
to
IRIs.
This
mapping
is
defined
as
a
JSON-LD
context,
as
explained
later.
Second,
clients
can
access
the
constraints
defined
on
these
IRIs
by
dereferencing
them.
Constraints
are
</del>
<ins class="diff-chg">Constrained
Restful
Environments
(CoRE)
Parameters
registry
</ins>
defined
<del class="diff-old">as
logical
axioms
</del>
in
<del class="diff-old">the
RDF
format,
readily
interpretable
by
client
programs.
All
Vocabulary
Terms
referenced
in
5.
TD
Information
Model
are
serialized
as
(compact)
JSON
strings
in
a
TD
document.
However,
each
of
these
terms
is
unambiguously
identified
by
a
full
IRI,
as
per
the
first
Linked
Data
principle
</del>
[
<cite>
<del class="diff-old">LINKED-DATA
</del>
<a class="bibref" data-link-type="biblio" href="#bib-rfc6690" title= "Constrained RESTful Environments (CoRE) Link Format">
<ins class="diff-chg">RFC6690
</ins>
</a>
</cite>
].
<del class="diff-old">The
mappings
from
JSON
keys
to
IRIs
is
what
the
@context
value
of
a
TD
points
to.
For
instance,
the
file
at
https://www.w3.org/2022/wot/td/v1.1
</del>
</p>
<del class="diff-old">includes
the
following
mappings
(among
others):
</del>
<table class="def">
<thead>
<tr>
<th>
<ins class="diff-chg">Value
</ins></th><th><ins class="diff-chg">
Description
</ins></th><th><ins class="diff-chg">
Reference
</ins></th></tr></thead>
<tbody>
<tr>
<td>
<code>
<del class="diff-old">properties
</del>
<ins class="diff-chg">wot.thing
</ins>
</code>
</td>
<td>
<del class="diff-old">→
https://www.w3.org/2019/wot/td#hasPropertyAffordance
</del>
<ins class="diff-chg">Thing
Description
of
a
Thing
</ins>
</td>
<td>
<del class="diff-old">object
</del>
<a href="#introduction-core-rd-sec" data-matched-text= "[[[#introduction-core-rd-sec]]]" class="sec-ref">
<del class="diff-old">→
https://www.w3.org/2019/wot/json-schema#ObjectSchema
</del>
<bdi class= "secno">
<ins class="diff-chg">6.4
</ins></bdi><ins class="diff-chg">
CoRE
Link
Format
and
CoRE
Resource
Directory
</ins></a>
</td>
</tr>
<tr>
<td>
<code>
<del class="diff-old">basic
</del>
<ins class="diff-chg">wot.directory
</ins>
</code>
</td>
<td>
<del class="diff-old">→
https://www.w3.org/2019/wot/security#BasicSecurityScheme
</del>
<ins class="diff-chg">Directory
Description
of
a
</ins><a href= "#dfn-wot-thing-description-directory" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-wot-thing-description-directory-25"><ins class="diff-chg">
Thing
Description
Directory
</ins></a>
</td>
<td>
<del class="diff-old">href
</del>
<a href="#introduction-core-rd-sec" data-matched-text= "[[[#introduction-core-rd-sec]]]" class="sec-ref">
<del class="diff-old">→
https://www.w3.org/2019/wot/hypermedia#hasTarget
</del>
<bdi class= "secno">
<ins class="diff-chg">6.4
</ins></bdi><ins class="diff-chg">
CoRE
Link
Format
and
CoRE
Resource
Directory
</ins></a>
</td>
</tr>
<del class="diff-old">...
</del>
</tbody>
</table>
<del class="diff-old">This
</del>
</section>
</section>
<section id="tdd-extensions-jsonschema" class="appendix">
<div class="header-wrapper">
<h2 id="a-json-schema-for-wot-discovery-td-extensions">
<bdi class= "secno">
<ins class="diff-chg">A.
</ins></bdi>
JSON
<del class="diff-old">file
follows
the
JSON-LD
1.1
syntax
[
</del>
<ins class="diff-chg">Schema
for
WoT
Discovery
TD-extensions
</ins></h2><a class="self-link" href="#tdd-extensions-jsonschema" aria-label= "Permalink for Appendix A.">
<del class="diff-old">JSON-LD11
</del>
</a>
<del class="diff-old">].
Numerous
JSON-LD
libraries
can
automatically
process
the
@context
of
a
TD
and
expand
all
the
</del>
</div>
<ins class="diff-chg">The
following
</ins>
JSON
<del class="diff-old">strings
it
includes.
Once
every
Vocabulary
Term
of
a
TD
is
expanded
to
a
IRI,
</del>
<ins class="diff-chg">Schema
specifies
</ins>
the
<del class="diff-old">second
step
consists
</del>
<ins class="diff-chg">extensions
used
</ins>
in
<del class="diff-old">dereferencing
this
IRI
to
get
fragments
of
the
TD
Information
Model
that
refer
to
that
Vocabulary
Term
</del>
<a href= "#dfn-wot-enriched-thing-description" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-wot-enriched-thing-description-7">
<ins class="diff-chg">Enriched
TDs
</ins>
</a>.
<del class="diff-old">For
instance,
dereferencing
the
IRI
https://www.w3.org/2019/wot/json-schema#ObjectSchema
results
in
an
RDF
document
stating
that
the
term
ObjectSchema
is
a
Class
</del>
<ins class="diff-chg">It
can
be
used
for
validating
</ins><a href="#dfn-td" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-td-44"><ins class="diff-chg">
TDs
</ins>
</a>
<del class="diff-old">and
more
precisely,
</del>
<ins class="diff-chg">by
</ins>
a
<del class="diff-old">sub-class
of
DataSchema
.
Such
logical
axioms
are
represented
in
RDF
using
formalisms
of
various
complexity:
here,
sub-class
relations
are
expressed
as
RDF
Schema
axioms
[
RDF-SCHEMA
</del>
<a href= "#dfn-wot-tdd" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-wot-tdd-1">
<ins class="diff-chg">TDD
</ins>
</a>
<del class="diff-old">].
Moreover,
these
axioms
may
be
serialized
in
various
formats.
Here,
they
are
serialized
</del>
<ins class="diff-chg">as
prescribed
</ins>
in
<del class="diff-old">the
Turtle
format
[
TURTLE
</del>
<a href= "#exploration-directory-api-things-validation" data-matched-text= "[[[#exploration-directory-api-things-validation]]]" class= "sec-ref">
<del class="diff-old">]:
&lt;pre class=
"nohighlight"&gt;&lt;https://www.w3.org/2019/wot/json-schema#ObjectSchema&gt;
    a rdfs:Class .
&lt;https://www.w3.org/2019/wot/json-schema#ObjectSchema&gt;
rdfs:subClassOf
&lt;https://www.w3.org/2019/wot/json-schema#DataSchema&gt;
.
</del>
<bdi class="secno">
<ins class="diff-chg">7.3.2.1.6
</ins></bdi><ins class="diff-chg">
Validation
</ins></a>.<pre class="advisement" aria-busy="false"><code class="hljs json">{  <span class="hljs-attr">"title"</span>: <span class=<ins class="diff-chg">
"hljs-string">"WoT Discovery TD-extensions Schema - 21 May 2021"</span>,
</ins>  <span class="hljs-attr">"description"</span>: <span class=<ins class="diff-chg">
"hljs-string">"JSON Schema for validating TD instances with WoT Discovery extensions"</span>,
</ins>  <span class="hljs-attr">"$schema "</span>: <span class=<ins class="diff-chg">
"hljs-string">"http://json-schema.org/draft/2019-09/schema#"</span>,
</ins>  <span class="hljs-attr">"type"</span>: <span class=<ins class="diff-chg">
"hljs-string">"object"</span>,
</ins>  <span class="hljs-attr">"properties"</span>: {    <span class="hljs-attr">"registration"</span>: {      <span class="hljs-attr">"type"</span>: <span class=<ins class="diff-chg">
"hljs-string">"object"</span>,
</ins>      <span class="hljs-attr">"properties"</span>: {        <span class="hljs-attr">"created"</span>: {          <span class="hljs-attr">"type"</span>: <span class=<ins class="diff-chg">
"hljs-string">"string"</span>,
</ins>          <span class="hljs-attr">"format"</span>: <span class=<ins class="diff-chg">
"hljs-string">"date-time"</span>
        },
</ins>        <span class="hljs-attr">"expires"</span>: {          <span class="hljs-attr">"type"</span>: <span class=<ins class="diff-chg">
"hljs-string">"string"</span>,
</ins>          <span class="hljs-attr">"format"</span>: <span class=<ins class="diff-chg">
"hljs-string">"date-time"</span>
        },
</ins>        <span class="hljs-attr">"retrieved"</span>: {          <span class="hljs-attr">"type"</span>: <span class=<ins class="diff-chg">
"hljs-string">"string"</span>,
</ins>          <span class="hljs-attr">"format"</span>: <span class=<ins class="diff-chg">
"hljs-string">"date-time"</span>
        },
</ins>        <span class="hljs-attr">"modified"</span>: {          <span class="hljs-attr">"type"</span>: <span class=<ins class="diff-chg">
"hljs-string">"string"</span>,
</ins>          <span class="hljs-attr">"format"</span>: <span class=<ins class="diff-chg">
"hljs-string">"date-time"</span>
        },
</ins>        <span class="hljs-attr">"ttl"</span>: {          <span class="hljs-attr">"type"</span>: <span class=<ins class="diff-chg">
"hljs-string">"number"</span>
        }
      }
    }
  }
}
</ins>
</code>
</pre>
<del class="diff-old">By
default,
if
a
user
agent
does
not
perform
any
content
negotiation,
a
human-readable
HTML
documentation
is
returned
instead
of
the
RDF
document.
To
negotiate
content,
clients
must
include
the
HTTP
header
Accept:
text/turtle
in
their
request.
</del>
</section>
<section id="changes" class="appendix">
<div class="header-wrapper">
<h2 id="b-recent-specification-changes">
<bdi class="secno">
<del class="diff-old">D.
</del>
<ins class="diff-chg">B.
</ins>
</bdi>
Recent
Specification
Changes
</h2>
<a class="self-link" href="#changes" aria-label= "Permalink for Appendix B.">
</a>
</div>
<section id="changes-from-2-june-2021-working-draft">
<div class="header-wrapper">
<h3 id="changes-from-second-draft">
<bdi class="secno">
<del class="diff-old">D.1
</del>
<ins class="diff-chg">B.1
</ins>
</bdi>
Changes
from
<del class="diff-old">Second
Public
Working
Draft
7
</del>
<ins class="diff-chg">2
</ins>
June
2021
<ins class="diff-new">Working
Draft
</ins>
</h3>
<a class="self-link" href="#changes-from-second-draft" aria-label= "Permalink for Appendix B.1">
</a>
</div>
<ul>
<li>
<del class="diff-old">In
section
4.
Namespaces
,
new
namespace
IRI
is
provided
</del>
<ins class="diff-chg">Use
</ins><code><ins class="diff-chg">
wot
</ins></code>
for
<del class="diff-old">Thing
Description
1.1.
</del>
<ins class="diff-chg">well-known
URI
service
name.
</ins>
</li>
<li>
<del class="diff-old">In
section
5.3
Class
Definitions
:
The
type
definition
of
titles
and
descriptions
members
that
appear
in
sub-sections
5.3.1.1
Thing
,
5.3.1.2
InteractionAffordance
,
5.3.2.1
DataSchema
</del>
<ins class="diff-chg">Refer
to
TD
</ins>
and
<del class="diff-old">5.3.3.1
SecurityScheme
were
clarified.
</del>
<ins class="diff-chg">Architecture
specs
for
general
constraints
on
secure
transport.
</ins>
</li>
<li>
<del class="diff-old">In
section
5.3.1
Core
Vocabulary
Definitions
:
In
section
5.3.1.1
Thing
:
The
allowed
values
</del>
<ins class="diff-chg">Define
requirements
</ins>
for
<del class="diff-old">the
op
member
of
a
Form
were
expanded.
</del>
<ins class="diff-chg">CoAP-based
TD
Servers.
</ins>
</li>
<li>
<del class="diff-old">The
description
</del>
<ins class="diff-chg">Introduction
</ins>
of
<del class="diff-old">the
forms
term
was
clarified.
The
value
used
for
@context
has
changed
in
Thing
Description
1.1.
</del>
<ins class="diff-chg">TD
Server
exploration,
with
self-description
as
a
special
case.
</ins>
</li>
<li>
<del class="diff-old">The
rule
in
the
use
</del>
<ins class="diff-chg">Elaboration
</ins>
of
<del class="diff-old">@context
for
Thing
Description
1.1
</del>
<ins class="diff-chg">class
diagram
</ins>
to
<del class="diff-old">be
able
</del>
<ins class="diff-chg">clarify
that
not
all
Directories
need
</ins>
to
be
<del class="diff-old">consumed
by
TD
1.0
consumers
are
specified.
</del>
<ins class="diff-chg">self-describing.
</ins>
</li>
<li>
<del class="diff-old">In
section
5.3.1.3
PropertyAffordance
:
Clarifed
that
property
can
be
retrieved
and/or
updated.
</del>
<ins class="diff-chg">Clarify
and
consolidate
error
codes
and
ontology.
</ins>
</li>
<li>
<del class="diff-old">An
additional
note
was
appended
</del>
<ins class="diff-chg">Add
assertions
</ins>
for
<del class="diff-old">clarification.
</del>
<ins class="diff-chg">UTF-8
supporting
internationalization.
</ins>
</li>
<li>
<ins class="diff-chg">Update
overview
figure
showing
introduction
and
exploration
mechanisms.
</ins>
</li>
<li>
<del class="diff-old">In
</del>
<ins class="diff-chg">Add
Discoverer
</ins>
section
<del class="diff-old">5.3.1.4
ActionAffordance
:
</del>
<ins class="diff-chg">defining
requirements
for
discovery
clients.
</ins></li>
<li>
<del class="diff-old">The
allowed
values
of
the
op
member
</del>
<ins class="diff-chg">Use
Thing
Model
instead
</ins>
of
a
<del class="diff-old">Form
were
expanded.
</del>
<ins class="diff-chg">Thing
Description
example
for
Directory
API.
</ins>
</li>
<li>
<ins class="diff-chg">Refactor
Directory
Service
API
(td-&gt;thing,
split
anonymous
create
action,
retrieve
one
and
search
as
actions,
listing
as
things
property,
split
events)
</ins>
</li>
<li>
<ins class="diff-chg">Add
amplification
DDOS
security
consideration.
</ins>
</li>
<li>
<del class="diff-old">In
section
5.3.2.1
DataSchema
:
</del>
<ins class="diff-chg">Split
Security
and
Privacy
Considerations
into
separate
sections.
</ins></li>
<li>
<del class="diff-old">The
description
</del>
<ins class="diff-chg">Define
status
</ins>
of
<del class="diff-old">the
unit
term
was
clarified.
</del>
<ins class="diff-chg">search
mechanisms:
JSON
Path,
XPath,
and
SPARQL.
</ins>
</li>
<li>
<del class="diff-old">The
vocabulary
terms
contentEncoding
</del>
<ins class="diff-chg">Pagination
as
array
</ins>
and
<del class="diff-old">contentMediaType
were
moved
</del>
<ins class="diff-chg">pagination
as
collection.
</ins></li><li><ins class="diff-chg">
Updates
</ins>
to
<del class="diff-old">section
5.3.2.7
StringSchema
.
</del>
<ins class="diff-chg">events
API.
</ins>
</li>
<li>
<ins class="diff-chg">TD
expiry
management.
</ins>
</li>
<li>
<del class="diff-old">In
section
</del>
<ins class="diff-chg">HEAD
method
support.
</ins></li></ul></section><section id= "changes-from-24-november-2020-first-public-working-draft"><div class="header-wrapper"><h3 id="changes-from-first-draft">
<bdi class="secno">
<del class="diff-old">5.3.3
</del>
<ins class="diff-chg">B.2
</ins>
</bdi>
<del class="diff-old">Security
Vocabulary
Definitions
:
In
section
</del>
<ins class="diff-chg">Changes
from
24
November
2020
First
Public
Working
Draft
</ins></h3><a class="self-link" href="#changes-from-first-draft" aria-label= "Permalink for Appendix B.2">
<del class="diff-old">5.3.3.4
BasicSecurityScheme
</del>
</a>
<del class="diff-old">,
the
assignment
of
the
in
member
was
clarified.
</del>
</div>
<ul>
<li>
<del class="diff-old">In
section
5.3.3.5
DigestSecurityScheme
,
the
assignment
</del>
<ins class="diff-chg">Update
name
</ins>
of
<ins class="diff-new">directory
service
to
"Thing
Description
Directory"
with
acronym
TDD,
to
avoid
confusion
with
</ins>
the
<del class="diff-old">in
and
qop
member
was
clarified.
</del>
<ins class="diff-chg">acronym
TD
used
for
Thing
Descriptions.
</ins>
</li>
<li>
<del class="diff-old">In
section
5.3.3.6
APIKeySecurityScheme
,
the
assignment
</del>
<ins class="diff-chg">Elaboration
</ins>
of
<del class="diff-old">the
in
member
was
clarified.
In
section
5.3.3.7
BearerSecurityScheme
,
the
assignment
</del>
<ins class="diff-chg">complete
API
for
registration
</ins>
of
<del class="diff-old">the
alg
,
format
</del>
<ins class="diff-chg">a
Thing
Description
with
a
Thing
Description
Directory,
including
support
for
creation,
update,
retrieval,
deletion,
</ins>
and
<del class="diff-old">in
member
was
clarified.
</del>
<ins class="diff-chg">listing.
</ins>
</li>
<li>
<del class="diff-old">In
section
5.3.4.1
Link
,
</del>
<ins class="diff-chg">Add
recommendation
that
TDs
be
validated
before
storage
in
</ins>
a
<del class="diff-old">new
value
tm:submodel
was
added
</del>
<ins class="diff-chg">directory.
Note:
this
corresponds
</ins>
to
<ins class="diff-new">work
under
way
in
</ins>
the
<del class="diff-old">table
describing
the
values
used
</del>
<ins class="diff-chg">TD
spec
to
precisely
define
appropriate
levels
of
automatic
validation
</ins>
for
<del class="diff-old">relation
types.
</del>
<ins class="diff-chg">different
contexts,
including
directory
registration.
</ins>
</li>
<li>
<del class="diff-old">In
section
5.3.4.2
Form
:
The
assignment
</del>
<ins class="diff-chg">Addition
</ins>
of
<del class="diff-old">the
op
term
was
clarified.
Values
subscribeallevents
,
unsubscribeallevents
,
queryallactions
,
queryaction
</del>
<ins class="diff-chg">Security
</ins>
and
<del class="diff-old">cancelaction
were
added
to
the
type
definition
</del>
<ins class="diff-chg">Privacy
Considerations
regarding
Denial
</ins>
of
<del class="diff-old">op
term.
</del>
<ins class="diff-chg">Service
and
Location
Tracking.
</ins>
</li>
<li>
<del class="diff-old">A
table
was
added
to
describe
the
values
</del>
<ins class="diff-chg">Addition
</ins>
of
<del class="diff-old">op
term.
</del>
<ins class="diff-chg">IANA
Considerations
regarding
CoRE
Resource
Types.
</ins>
</li>
<li>
<del class="diff-old">In
section
5.4
Default
Value
Definitions
,
default
assignments
were
added
</del>
<ins class="diff-chg">Definition
of
Enriched
TD
</ins>
to
<del class="diff-old">PropertyAffordance
class's
observable
member
and
AdditionalExpectedResponse
class's
contentType
member.
</del>
<ins class="diff-chg">support
embedded
metadata
in
TDs
returned
by
a
TDD.
</ins>
</li>
<li>
<del class="diff-old">In
section
6.
TD
Representation
Format
:
In
section
6.3.1
Thing
Root
Object
,
</del>
<ins class="diff-chg">Updates
to
description
of
exploration
to
avoid
unnecessary
dependence
on
HTTP
(in
</ins>
the
<del class="diff-old">value
used
for
@context
has
changed
</del>
<ins class="diff-chg">future,
other
protocols
may
be
supported).
</ins></li><li><ins class="diff-chg">
Use
of
"resource
type"
instead
of
"endpoint
type"
when
describing
entry
</ins>
in
<del class="diff-old">Thing
Description
1.1.
</del>
<ins class="diff-chg">CoRE
RD.
</ins>
</li>
<li>
<del class="diff-old">In
section
6.3.4
</del>
<ins class="diff-chg">Addition
of
ontology
for
TDDs
that
include
the
type
</ins>
<code>
<del class="diff-old">securityDefinitions
</del>
<ins class="diff-chg">DirectoryDescription
</ins>
</code>
<ins class="diff-new">identifying
TDs
of
directories
</ins>
and
<ins class="diff-new">a
type
</ins>
<code>
<del class="diff-old">security
</del>
<ins class="diff-chg">LinkDescription
</ins>
</code>
<del class="diff-old">:
Examples
were
reordered,
then
the
section
was
partitioned
into
sub-sections
</del>
to
<del class="diff-old">make
the
section
easier
</del>
<ins class="diff-chg">identify
a
TD
that
is
just
a
link
</ins>
to
<del class="diff-old">read.
</del>
<ins class="diff-chg">another
TD
(useful
for
referring
to
remote
directories
in
order
to
support
federation).
</ins>
</li>
<li>
<del class="diff-old">In
</del>
<ins class="diff-chg">Add
</ins>
section
<del class="diff-old">6.3.4.4
OAuth
2.0
usage
,
</del>
<ins class="diff-chg">for
self-description
exploration
mechanism.
This
supports
</ins>
the
<del class="diff-old">flow
that
appears
in
Example
18
now
uses
client
as
</del>
<ins class="diff-chg">use
case
where
</ins>
a
<del class="diff-old">value.
In
section
6.3.9.1
uriVariables
,
more
examples
were
added.
A
sub-section
describing
canonicalization
was
removed.
</del>
<ins class="diff-chg">Thing
hosts
its
own
TD
and
peer-to-peer
Thing
communication.
</ins>
</li>
<li>
<del class="diff-old">In
section
7.1.1
Example
I:
Additional
Basic
Metadata
,
additional
terms
are
used
in
</del>
<ins class="diff-chg">Addition
of
diagram
showing
</ins>
the
<del class="diff-old">example.
</del>
<ins class="diff-chg">directory
information
model.
</ins>
</li>
<li>
<del class="diff-old">In
section
8.3
Protocol
Bindings
:
Added
a
</del>
<ins class="diff-chg">Removal
of
</ins>
reference
to
<del class="diff-old">the
Binding
Templates
specification
to
clarify
href
semantics.
A
note
was
appended
for
clarification.
</del>
<ins class="diff-chg">Issue
16,
citing
CRUD
interface
requirements.
Replaced
with
CRUDL
(CRUD
+
Listing)
interface
requirement.
</ins>
</li>
<li>
<del class="diff-old">In
section
</del>
<del class="diff-old">11.3
Modeling
Tools
:
In
section
11.3.1
Versioning
,
a
paragraph
was
</del>
<em class="rfc2119">
<ins class="diff-chg">MAY
</ins></em><ins class="diff-chg">
assertion
</ins>
added
to
<del class="diff-old">describe
</del>
<ins class="diff-chg">explicitly
permit
implementation
of
SPARQL
federation,
and
</ins>
a
<del class="diff-old">consideration
in
</del>
<ins class="diff-chg">requirement
that
if
implemented,
it
needs
to
follow
</ins>
the
<del class="diff-old">use
of
versioning.
</del>
<ins class="diff-chg">SPARQL
1.1
specification.
</ins>
</li>
<li>
<del class="diff-old">In
section
11.3.2
Extension
and
Import
:
The
syntax
and
processing
rule
</del>
<ins class="diff-chg">Updates
to
references:
more
recent
versions
</ins>
of
<del class="diff-old">tm:ref
was
clarified.
Figure
6
was
added.
Section
11.3.3
Composition
was
added.
Section
11.3.5
Placeholder
is
now
after
section
11.3.4
Required
.
(order
reversed)
In
appendix
A.3
Webhook
Event
Example
,
the
example
</del>
<ins class="diff-chg">CoRE
RD,
DID
Core,
Eventsource,
JSON-LD,
</ins>
and
<del class="diff-old">its
description
were
updated.
In
appendix
B.
</del>
JSON
<del class="diff-old">Schema
for
TD
Instance
Validation
,
the
text
</del>
<ins class="diff-chg">Path
specifications.
Use
</ins>
of
<del class="diff-old">the
second
note
was
updated
for
clarification.
</del>
<ins class="diff-chg">datatracker
service
(and
URLs)
to
reference
IETF
RFCs.
Addition
of
normative
references
to
RFC7396
and
RFC7540.
</ins>
</li>
</ul>
</section>
<del class="diff-old">D.2
Changes
from
First
Public
Working
Draft
24
November
2020
Changes
from
First
Public
Working
Draft
24
November
2020
are
described
in
the
Second
Public
Working
Draft
.
</del>
</section>
<section id="acknowledgements" class="appendix normative">
<div class="header-wrapper">
<h2 id="c-acknowledgments">
<bdi class="secno">
<del class="diff-old">E.
</del>
<ins class="diff-chg">C.
</ins>
</bdi>
<del class="diff-old">Acknowledgements
</del>
<ins class="diff-chg">Acknowledgments
</ins>
</h2>
<a class="self-link" href="#acknowledgements" aria-label= "Permalink for Appendix C.">
</a>
</div>
<p>
<del class="diff-old">The
editors
would
like
to
special
thank
Matthias
Kovatsch
(co-editor
of
TD
1.0),
Michael
Koster,
Michael
Lagally,
Kazuyuki
Ashimura,
Ege
Korkan,
Daniel
Peintner,
Toru
Kawaguchi,
María
Poveda,
Dave
Raggett,
Kunihiko
Toumura,
Takeshi
Yamada,
Ben
Francis,
Manu
Sporny,
Klaus
Hartke,
Addison
Phillips,
Jose
M.
Cantera,
Tomoaki
Mizushima,
Soumya
Kanti
Datta
and
Benjamin
Klotz
for
providing
contributions,
guidance
and
expertise.
Also,
many
</del>
<ins class="diff-chg">Many
</ins>
thanks
to
the
<abbr title= "World Wide Web Consortium">
W3C
</abbr>
staff
and
all
other
<del class="diff-old">current
and
former
</del>
active
Participants
of
the
<abbr title= "World Wide Web Consortium">
W3C
</abbr>
Web
of
Things
Interest
Group
(WoT
IG)
and
Working
Group
(WoT
WG)
for
their
support,
technical
input
and
suggestions
that
led
to
improvements
to
this
document.
</p>
<del class="diff-old">Finally,
special
thanks
to
Joerg
Heuer
for
leading
the
WoT
IG
for
2
years
from
its
inception
and
guiding
the
group
to
come
up
with
the
concept
of
WoT
building
blocks
including
the
Thing
Description.
</del>
</section>
<del class="diff-old">Note
Temporary
ReSpec
fix
regarding
non-listed
references:
[
RFC6068
],
[
RFC3966
],
[
html
],
[
RFC6750
],
[
RFC7519
],
[
RFC7797
],
[
RFC8392
],
[
RFC7516
],
[
LDML
],
[
SEMVER
],
[
RFC7617
],
[
RFC7616
]
</del>
<section id="references" class="appendix">
<div class="header-wrapper">
<h2 id="d-references">
<bdi class="secno">
<del class="diff-old">F.
</del>
<ins class="diff-chg">D.
</ins>
</bdi>
References
</h2>
<a class="self-link" href="#references" aria-label= "Permalink for Appendix D.">
</a>
</div>
<section id="normative-references">
<div class="header-wrapper">
<h3 id="d-1-normative-references">
<bdi class="secno">
<del class="diff-old">F.1
</del>
<ins class="diff-chg">D.1
</ins>
</bdi>
Normative
references
</h3>
<a class="self-link" href="#normative-references" aria-label= "Permalink for Appendix D.1">
</a>
</div>
<dl class="bibliography">
<del class="diff-old">[APPMANIFEST]
</del>
<dt id="bib-core-rd">
<ins class="diff-chg">[CoRE-RD]
</ins>
</dt>
<dd>
<a href= "https://tools.ietf.org/html/draft-ietf-core-resource-directory-26">
<cite>
<ins class="diff-chg">CoRE
Resource
Directory
</ins></cite></a>.<ins class="diff-chg">
Christian
Amsüss;
Zach
Shelby;
Michael
Koster;
Carsten
Bormann;
Peter
van
der
Stok.
IETF.
2
November
2020.
URL:
</ins><a href= "https://tools.ietf.org/html/draft-ietf-core-resource-directory-26"><ins class="diff-chg">
https://tools.ietf.org/html/draft-ietf-core-resource-directory-26
</ins></a></dd><dt id="bib-did-core"><ins class="diff-chg">
[DID-CORE]
</ins></dt><dd><a href="https://www.w3.org/TR/did-core/">
<cite>
<del class="diff-old">Web
Application
Manifest
</del>
<ins class="diff-chg">Decentralized
Identifiers
(DIDs)
v1.0
</ins>
</cite>
</a>.
<del class="diff-old">Marcos
Caceres;
Kenneth
Christiansen;
Matt
Giuca;
Aaron
Gustafson;
Daniel
Murphy;
Anssi
Kostiainen.
</del>
<ins class="diff-chg">Manu
Sporny;
Amy
Guy;
Markus
Sabadello;
Drummond
Reed.
</ins>
W3C.
<del class="diff-old">17
February
2022.
</del>
<ins class="diff-chg">3
August
2021.
</ins>
W3C
<del class="diff-old">Working
Draft.
</del>
<ins class="diff-chg">Proposed
Recommendation.
</ins>
URL:
<del class="diff-old">https://www.w3.org/TR/appmanifest/
</del>
<a href= "https://www.w3.org/TR/did-core/">
<ins class="diff-chg">https://www.w3.org/TR/did-core/
</ins>
</a>
</dd>
<del class="diff-old">[BCP47]
</del>
<dt id="bib-eventsource">
<ins class="diff-chg">[EVENTSOURCE]
</ins>
</dt>
<dd>
<a href="https://www.w3.org/TR/eventsource/">
<cite>
<del class="diff-old">Tags
for
Identifying
Languages
</del>
<ins class="diff-chg">Server-Sent
Events
</ins>
</cite>
</a>.
<del class="diff-old">A.
Phillips,
Ed.;
M.
Davis,
Ed..
IETF.
September
2009.
Best
Current
Practice.
</del>
<ins class="diff-chg">Ian
Hickson.
W3C.
28
January
2021.
W3C
Recommendation.
</ins>
URL:
<del class="diff-old">https://www.rfc-editor.org/rfc/rfc5646
</del>
<a href= "https://www.w3.org/TR/eventsource/">
<ins class="diff-chg">https://www.w3.org/TR/eventsource/
</ins>
</a>
</dd>
<del class="diff-old">[ECMA-262]
</del>
<dt id="bib-gdpr-defs">
<ins class="diff-chg">[GDPR-Defs]
</ins>
</dt>
<dd>
<a href="https://gdpr-info.eu/art-4-gdpr/">
<cite>
<del class="diff-old">ECMAScript
Language
Specification
</del>
<ins class="diff-chg">General
Data
Protection
Regulation
(GDPR)
Article
4
-
Definitions
</ins>
</cite>
</a>.
<del class="diff-old">Ecma
International.
</del>
<ins class="diff-chg">European
Union
(EU)
and
the
European
Economic
Area
(EEA).
</ins>
URL:
<del class="diff-old">https://tc39.es/ecma262/multipage/
</del>
<a href= "https://gdpr-info.eu/art-4-gdpr/">
<ins class="diff-chg">https://gdpr-info.eu/art-4-gdpr/
</ins>
</a>
</dd>
<del class="diff-old">[RFC2046]
</del>
<dt id="bib-json-ld11">
<ins class="diff-chg">[JSON-LD11]
</ins>
</dt>
<dd>
<a href="https://www.w3.org/TR/json-ld11/">
<cite>
<del class="diff-old">Multipurpose
Internet
Mail
Extensions
(MIME)
Part
Two:
Media
Types
</del>
<ins class="diff-chg">JSON-LD
1.1
</ins>
</cite>
</a>.
<del class="diff-old">N.
Freed;
N.
Borenstein.
IETF.
November
1996.
Draft
Standard.
</del>
<ins class="diff-chg">Gregg
Kellogg;
Pierre-Antoine
Champin;
Dave
Longley.
W3C.
16
July
2020.
W3C
Recommendation.
</ins>
URL:
<del class="diff-old">https://www.rfc-editor.org/rfc/rfc2046
</del>
<a href= "https://www.w3.org/TR/json-ld11/">
<ins class="diff-chg">https://www.w3.org/TR/json-ld11/
</ins></a></dd><dt id="bib-owasp-top-10"><ins class="diff-chg">
[OWASP-Top-10]
</ins></dt><dd><a href="https://owasp.org/www-project-top-ten/"><cite><ins class="diff-chg">
OWASP
Top
Ten
</ins></cite></a>.<ins class="diff-chg">
OWASP.
URL:
</ins><a href= "https://owasp.org/www-project-top-ten/"><ins class="diff-chg">
https://owasp.org/www-project-top-ten/
</ins>
</a>
</dd>
<dt id="bib-rfc2119">
[RFC2119]
</dt>
<dd>
<a href="https://www.rfc-editor.org/rfc/rfc2119">
<cite>
Key
words
for
use
in
RFCs
to
Indicate
Requirement
Levels
</cite>
</a>.
S.
Bradner.
IETF.
March
1997.
Best
Current
Practice.
URL:
<a href= "https://www.rfc-editor.org/rfc/rfc2119">
https://www.rfc-editor.org/rfc/rfc2119
</a>
</dd>
<del class="diff-old">[RFC3339]
</del>
<dt id="bib-rfc2782">
<ins class="diff-chg">[RFC2782]
</ins>
</dt>
<dd>
<a href="https://www.rfc-editor.org/rfc/rfc2782">
<cite>
<del class="diff-old">Date
and
Time
on
</del>
<ins class="diff-chg">A
DNS
RR
for
specifying
</ins>
the
<del class="diff-old">Internet:
Timestamps
.
G.
Klyne;
C.
Newman.
IETF.
July
2002.
Proposed
Standard.
URL:
https://www.rfc-editor.org/rfc/rfc3339
[RFC3629]
UTF-8,
a
transformation
format
</del>
<ins class="diff-chg">location
</ins>
of
<del class="diff-old">ISO
10646
.
F.
Yergeau.
IETF.
November
2003.
Internet
Standard.
URL:
https://www.rfc-editor.org/rfc/rfc3629
[RFC3986]
Uniform
Resource
Identifier
(URI):
Generic
Syntax
</del>
<ins class="diff-chg">services
(DNS
SRV)
</ins>
</cite>
</a>.
<del class="diff-old">T.
Berners-Lee;
R.
Fielding;
</del>
<ins class="diff-chg">A.
Gulbrandsen;
P.
Vixie;
</ins>
L.
<del class="diff-old">Masinter.
</del>
<ins class="diff-chg">Esibov.
</ins>
IETF.
<del class="diff-old">January
2005.
Internet
</del>
<ins class="diff-chg">February
2000.
Proposed
</ins>
Standard.
URL:
<del class="diff-old">https://www.rfc-editor.org/rfc/rfc3986
</del>
<a href= "https://www.rfc-editor.org/rfc/rfc2782">
<ins class="diff-chg">https://www.rfc-editor.org/rfc/rfc2782
</ins>
</a>
</dd>
<del class="diff-old">[RFC3987]
</del>
<dt id="bib-rfc4122">
<ins class="diff-chg">[RFC4122]
</ins>
</dt>
<dd>
<a href="https://www.rfc-editor.org/rfc/rfc4122">
<cite>
<del class="diff-old">Internationalized
Resource
Identifiers
(IRIs)
</del>
<ins class="diff-chg">A
Universally
Unique
IDentifier
(UUID)
URN
Namespace
</ins>
</cite>
</a>.
<ins class="diff-new">P.
Leach;
</ins>
M.
<del class="diff-old">Duerst;
M.
Suignard.
</del>
<ins class="diff-chg">Mealling;
R.
Salz.
</ins>
IETF.
<del class="diff-old">January
</del>
<ins class="diff-chg">July
</ins>
2005.
Proposed
Standard.
URL:
<del class="diff-old">https://www.rfc-editor.org/rfc/rfc3987
</del>
<a href= "https://www.rfc-editor.org/rfc/rfc4122">
<ins class="diff-chg">https://www.rfc-editor.org/rfc/rfc4122
</ins>
</a>
</dd>
<dt id="bib-rfc4279">
[RFC4279]
</dt>
<dd>
<a href= "https://www.rfc-editor.org/rfc/rfc4279">
<cite>
Pre-Shared
Key
Ciphersuites
for
Transport
Layer
Security
(TLS)
</cite>
</a>.
P.
Eronen,
Ed.;
H.
Tschofenig,
Ed..
IETF.
December
2005.
Proposed
Standard.
URL:
<a href= "https://www.rfc-editor.org/rfc/rfc4279">
https://www.rfc-editor.org/rfc/rfc4279
</a>
</dd>
<del class="diff-old">[RFC6570]
</del>
<dt id="bib-rfc6335">
<ins class="diff-chg">[RFC6335]
</ins>
</dt>
<dd>
<a href="https://www.rfc-editor.org/rfc/rfc6335">
<cite>
<del class="diff-old">URI
Template
</del>
<ins class="diff-chg">Internet
Assigned
Numbers
Authority
(IANA)
Procedures
for
the
Management
of
the
Service
Name
and
Transport
Protocol
Port
Number
Registry
</ins>
</cite>
</a>.
<del class="diff-old">J.
Gregorio;
R.
Fielding;
</del>
M.
<del class="diff-old">Hadley;
</del>
<ins class="diff-chg">Cotton;
L.
Eggert;
J.
Touch;
</ins>
M.
<del class="diff-old">Nottingham;
D.
Orchard.
</del>
<ins class="diff-chg">Westerlund;
S.
Cheshire.
</ins>
IETF.
<del class="diff-old">March
2012.
Proposed
Standard.
</del>
<ins class="diff-chg">August
2011.
Best
Current
Practice.
</ins>
URL:
<del class="diff-old">https://www.rfc-editor.org/rfc/rfc6570
</del>
<a href="https://www.rfc-editor.org/rfc/rfc6335">
<ins class="diff-chg">https://www.rfc-editor.org/rfc/rfc6335
</ins>
</a>
</dd>
<del class="diff-old">[RFC6749]
</del>
<dt id="bib-rfc6690">
<ins class="diff-chg">[RFC6690]
</ins>
</dt>
<dd>
<a href= "https://www.rfc-editor.org/rfc/rfc6690">
<cite>
<del class="diff-old">The
OAuth
2.0
Authorization
Framework
</del>
<ins class="diff-chg">Constrained
RESTful
Environments
(CoRE)
Link
Format
</ins>
</cite>
</a>.
<del class="diff-old">D.
Hardt,
Ed..
</del>
<ins class="diff-chg">Z.
Shelby.
</ins>
IETF.
<del class="diff-old">October
</del>
<ins class="diff-chg">August
</ins>
2012.
Proposed
Standard.
URL:
<del class="diff-old">https://www.rfc-editor.org/rfc/rfc6749
</del>
<a href= "https://www.rfc-editor.org/rfc/rfc6690">
<ins class="diff-chg">https://www.rfc-editor.org/rfc/rfc6690
</ins>
</a>
</dd>
<del class="diff-old">[RFC6901]
</del>
<dt id="bib-rfc6762">
<ins class="diff-chg">[RFC6762]
</ins>
</dt>
<dd>
<a href= "https://www.rfc-editor.org/rfc/rfc6762">
<cite>
<del class="diff-old">JavaScript
Object
Notation
(JSON)
Pointer
</del>
<ins class="diff-chg">Multicast
DNS
</ins>
</cite>
</a>.
<del class="diff-old">P.
Bryan,
Ed.;
K.
Zyp;
</del>
<ins class="diff-chg">S.
Cheshire;
</ins>
M.
<del class="diff-old">Nottingham,
Ed..
</del>
<ins class="diff-chg">Krochmal.
</ins>
IETF.
<del class="diff-old">April
</del>
<ins class="diff-chg">February
</ins>
2013.
Proposed
Standard.
URL:
<del class="diff-old">https://www.rfc-editor.org/rfc/rfc6901
</del>
<a href= "https://www.rfc-editor.org/rfc/rfc6762">
<ins class="diff-chg">https://www.rfc-editor.org/rfc/rfc6762
</ins>
</a>
</dd>
<del class="diff-old">[RFC7252]
</del>
<dt id="bib-rfc6763">
<ins class="diff-chg">[RFC6763]
</ins>
</dt>
<dd>
<a href= "https://www.rfc-editor.org/rfc/rfc6763">
<cite>
<del class="diff-old">The
Constrained
Application
Protocol
(CoAP)
</del>
<ins class="diff-chg">DNS-Based
Service
Discovery
</ins>
</cite>
</a>.
<del class="diff-old">Z.
Shelby;
K.
Hartke;
C.
Bormann.
</del>
<ins class="diff-chg">S.
Cheshire;
M.
Krochmal.
</ins>
IETF.
<del class="diff-old">June
2014.
</del>
<ins class="diff-chg">February
2013.
</ins>
Proposed
Standard.
URL:
<del class="diff-old">https://www.rfc-editor.org/rfc/rfc7252
</del>
<a href= "https://www.rfc-editor.org/rfc/rfc6763">
<ins class="diff-chg">https://www.rfc-editor.org/rfc/rfc6763
</ins>
</a>
</dd>
<del class="diff-old">[RFC8174]
</del>
<dt id="bib-rfc7231">
<ins class="diff-chg">[RFC7231]
</ins>
</dt>
<dd>
<a href="https://httpwg.org/specs/rfc7231.html">
<cite>
<del class="diff-old">Ambiguity
of
Uppercase
vs
Lowercase
in
RFC
2119
Key
Words
</del>
<ins class="diff-chg">Hypertext
Transfer
Protocol
(HTTP/1.1):
Semantics
and
Content
</ins>
</cite>
</a>.
<del class="diff-old">B.
Leiba.
</del>
<ins class="diff-chg">R.
Fielding,
Ed.;
J.
Reschke,
Ed..
</ins>
IETF.
<del class="diff-old">May
2017.
Best
Current
Practice.
</del>
<ins class="diff-chg">June
2014.
Proposed
Standard.
</ins>
URL:
<del class="diff-old">https://www.rfc-editor.org/rfc/rfc8174
</del>
<a href= "https://httpwg.org/specs/rfc7231.html">
<ins class="diff-chg">https://httpwg.org/specs/rfc7231.html
</ins>
</a>
</dd>
<del class="diff-old">[RFC8252]
</del>
<dt id="bib-rfc7396">
<ins class="diff-chg">[RFC7396]
</ins>
</dt>
<dd>
<a href="https://www.rfc-editor.org/rfc/rfc7396">
<cite>
<del class="diff-old">OAuth
2.0
for
Native
Apps
</del>
<ins class="diff-chg">JSON
Merge
Patch
</ins>
</cite>
</a>.
<del class="diff-old">W.
Denniss;
</del>
<ins class="diff-chg">P.
Hoffman;
</ins>
J.
<del class="diff-old">Bradley.
</del>
<ins class="diff-chg">Snell.
</ins>
IETF.
October
<del class="diff-old">2017.
Best
Current
Practice.
URL:
https://www.rfc-editor.org/rfc/rfc8252
[RFC8259]
The
JavaScript
Object
Notation
(JSON)
Data
Interchange
Format
.
T.
Bray,
Ed..
IETF.
December
2017.
Internet
</del>
<ins class="diff-chg">2014.
Proposed
</ins>
Standard.
URL:
<del class="diff-old">https://www.rfc-editor.org/rfc/rfc8259
</del>
<a href= "https://www.rfc-editor.org/rfc/rfc7396">
<ins class="diff-chg">https://www.rfc-editor.org/rfc/rfc7396
</ins>
</a>
</dd>
<del class="diff-old">[RFC8288]
</del>
<dt id="bib-rfc7807">
<ins class="diff-chg">[RFC7807]
</ins>
</dt>
<dd>
<a href="https://www.rfc-editor.org/rfc/rfc7807">
<cite>
<del class="diff-old">Web
Linking
</del>
<ins class="diff-chg">Problem
Details
for
HTTP
APIs
</ins>
</cite>
</a>.
M.
<del class="diff-old">Nottingham.
</del>
<ins class="diff-chg">Nottingham;
E.
Wilde.
</ins>
IETF.
<del class="diff-old">October
2017.
</del>
<ins class="diff-chg">March
2016.
</ins>
Proposed
Standard.
URL:
<del class="diff-old">https://httpwg.org/specs/rfc8288.html
</del>
<a href= "https://www.rfc-editor.org/rfc/rfc7807">
<ins class="diff-chg">https://www.rfc-editor.org/rfc/rfc7807
</ins>
</a>
</dd>
<del class="diff-old">[RFC8628]
</del>
<dt id="bib-rfc7959">
<ins class="diff-chg">[RFC7959]
</ins>
</dt>
<dd>
<a href= "https://www.rfc-editor.org/rfc/rfc7959">
<cite>
<del class="diff-old">OAuth
2.0
Device
Authorization
Grant
</del>
<ins class="diff-chg">Block-Wise
Transfers
in
the
Constrained
Application
Protocol
(CoAP)
</ins>
</cite>
</a>.
<del class="diff-old">W.
Denniss;
J.
Bradley;
M.
Jones;
H.
Tschofenig.
</del>
<ins class="diff-chg">C.
Bormann;
Z.
Shelby,
Ed..
</ins>
IETF.
August
<del class="diff-old">2019.
</del>
<ins class="diff-chg">2016.
</ins>
Proposed
Standard.
URL:
<del class="diff-old">https://www.rfc-editor.org/rfc/rfc8628
</del>
<a href= "https://www.rfc-editor.org/rfc/rfc7959">
<ins class="diff-chg">https://www.rfc-editor.org/rfc/rfc7959
</ins>
</a>
</dd>
<del class="diff-old">[SEMVER]
</del>
<dt id="bib-rfc8174">
<ins class="diff-chg">[RFC8174]
</ins>
</dt>
<dd>
<a href= "https://www.rfc-editor.org/rfc/rfc8174">
<cite>
<del class="diff-old">Semantic
Versioning
2.0.0
</del>
<ins class="diff-chg">Ambiguity
of
Uppercase
vs
Lowercase
in
RFC
2119
Key
Words
</ins>
</cite>
</a>.
<del class="diff-old">Tom
Preston-Werner.
26
December
</del>
<ins class="diff-chg">B.
Leiba.
IETF.
May
</ins>
2017.
<ins class="diff-new">Best
Current
Practice.
</ins>
URL:
<del class="diff-old">https://semver.org/
</del>
<a href= "https://www.rfc-editor.org/rfc/rfc8174">
<ins class="diff-chg">https://www.rfc-editor.org/rfc/rfc8174
</ins>
</a>
</dd>
<del class="diff-old">[websub]
</del>
<dt id="bib-rfc8288">
<ins class="diff-chg">[RFC8288]
</ins>
</dt>
<dd>
<a href="https://httpwg.org/specs/rfc8288.html">
<cite>
<del class="diff-old">WebSub
</del>
<ins class="diff-chg">Web
Linking
</ins>
</cite>
</a>.
<del class="diff-old">Julien
Genestoux;
Aaron
Parecki.
W3C.
23
January
2018.
W3C
Recommendation.
</del>
<ins class="diff-chg">M.
Nottingham.
IETF.
October
2017.
Proposed
Standard.
</ins>
URL:
<del class="diff-old">https://www.w3.org/TR/websub/
</del>
<a href= "https://httpwg.org/specs/rfc8288.html">
<ins class="diff-chg">https://httpwg.org/specs/rfc8288.html
</ins>
</a>
</dd>
<del class="diff-old">[XMLSCHEMA11-2-20120405]
</del>
<dt id="bib-rfc8615">
<ins class="diff-chg">[RFC8615]
</ins>
</dt>
<dd>
<del class="diff-old">W3C
XML
Schema
Definition
Language
(XSD)
1.1
Part
2:
Datatypes
.
David
Peterson;
Sandy
Gao;
Ashok
Malhotra;
Michael
Sperberg-McQueen;
Henry
Thompson;
Paul
V.
Biron
et
al.
W3C.
5
April
2012.
W3C
Recommendation.
URL:
https://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/
F.2
Informative
references
[ACE]
</del>
<a href= "https://www.rfc-editor.org/rfc/rfc8615">
<cite>
<del class="diff-old">Authentication
and
Authorization
for
Constrained
Environments
(ACE)
using
the
OAuth
2.0
Framework
(ACE-OAuth)
</del>
<ins class="diff-chg">Well-Known
Uniform
Resource
Identifiers
(URIs)
</ins>
</cite>
</a>.
<del class="diff-old">L.
Seitz;
G.
Selander;
E.
Wahlstroem;
S.
Erdtman;
H.
Tschofenig.
</del>
<ins class="diff-chg">M.
Nottingham.
</ins>
IETF.
<del class="diff-old">27
March
</del>
<ins class="diff-chg">May
</ins>
2019.
<del class="diff-old">Internet-Draft.
URL:
https://datatracker.ietf.org/doc/html/draft-ietf-ace-oauth-authz-24
[html]
HTML
Standard
.
Anne
van
Kesteren;
Domenic
Denicola;
Ian
Hickson;
Philip
Jägenstedt;
Simon
Pieters.
WHATWG.
Living
</del>
<ins class="diff-chg">Proposed
</ins>
Standard.
URL:
<del class="diff-old">https://html.spec.whatwg.org/multipage/
</del>
<a href= "https://www.rfc-editor.org/rfc/rfc8615">
<ins class="diff-chg">https://www.rfc-editor.org/rfc/rfc8615
</ins>
</a>
</dd>
<del class="diff-old">[HTTP-in-RDF10]
</del>
<dt id="bib-rfc8981">
<ins class="diff-chg">[RFC8981]
</ins>
</dt>
<dd>
<a href= "https://www.rfc-editor.org/rfc/rfc8981">
<cite>
<del class="diff-old">HTTP
Vocabulary
</del>
<ins class="diff-chg">Temporary
Address
Extensions
for
Stateless
Address
Autoconfiguration
</ins>
in
<del class="diff-old">RDF
1.0
</del>
<ins class="diff-chg">IPv6
</ins>
</cite>
</a>.
<del class="diff-old">Johannes
Koch;
Carlos
A.
Velasco;
Philip
Ackermann.
W3C.
2
</del>
<ins class="diff-chg">F.
Gont;
S.
Krishnan;
T.
Narten;
R.
Draves.
IETF.
</ins>
February
<del class="diff-old">2017.
W3C
Working
Group
Note.
</del>
<ins class="diff-chg">2021.
Proposed
Standard.
</ins>
URL:
<del class="diff-old">https://www.w3.org/TR/HTTP-in-RDF10/
</del>
<a href= "https://www.rfc-editor.org/rfc/rfc8981">
<ins class="diff-chg">https://www.rfc-editor.org/rfc/rfc8981
</ins>
</a>
</dd>
<del class="diff-old">[IANA-MEDIA-TYPES]
</del>
<dt id="bib-rfc9000">
<ins class="diff-chg">[RFC9000]
</ins>
</dt>
<dd>
<a href="https://www.rfc-editor.org/rfc/rfc9000">
<cite>
<del class="diff-old">Media
Types
</del>
<ins class="diff-chg">QUIC:
A
UDP-Based
Multiplexed
and
Secure
Transport
</ins>
</cite>
</a>.
<del class="diff-old">IANA.
</del>
<ins class="diff-chg">J.
Iyengar,
Ed.;
M.
Thomson,
Ed..
IETF.
May
2021.
Proposed
Standard.
</ins>
URL:
<del class="diff-old">https://www.iana.org/assignments/media-types/
</del>
<a href= "https://www.rfc-editor.org/rfc/rfc9000">
<ins class="diff-chg">https://www.rfc-editor.org/rfc/rfc9000
</ins>
</a>
</dd>
<del class="diff-old">[IANA-URI-SCHEMES]
</del>
<dt id="bib-rfc9175">
<ins class="diff-chg">[RFC9175]
</ins>
</dt>
<dd>
<a href= "https://www.rfc-editor.org/rfc/rfc9175">
<cite>
<del class="diff-old">Uniform
Resource
Identifier
(URI)
Schemes
</del>
<ins class="diff-chg">Constrained
Application
Protocol
(CoAP):
Echo,
Request-Tag,
and
Token
Processing
</ins>
</cite>
</a>.
<del class="diff-old">IANA.
</del>
<ins class="diff-chg">C.
Amsüss;
J.
Preuß
Mattsson;
G.
Selander.
IETF.
February
2022.
Proposed
Standard.
</ins>
URL:
<del class="diff-old">https://www.iana.org/assignments/uri-schemes/uri-schemes.xhtml
</del>
<a href= "https://www.rfc-editor.org/rfc/rfc9175">
<ins class="diff-chg">https://www.rfc-editor.org/rfc/rfc9175
</ins>
</a>
</dd>
<del class="diff-old">[JSON-LD11]
</del>
<dt id="bib-sparql11-overview">
<ins class="diff-chg">[SPARQL11-OVERVIEW]
</ins>
</dt>
<dd>
<a href="https://www.w3.org/TR/sparql11-overview/">
<cite>
<del class="diff-old">JSON-LD
</del>
<ins class="diff-chg">SPARQL
</ins>
1.1
<ins class="diff-new">Overview
</ins>
</cite>
</a>.
<del class="diff-old">Gregg
Kellogg;
Pierre-Antoine
Champin;
Dave
Longley.
</del>
<ins class="diff-chg">The
W3C
SPARQL
Working
Group.
</ins>
W3C.
<del class="diff-old">16
July
2020.
</del>
<ins class="diff-chg">21
March
2013.
</ins>
W3C
Recommendation.
URL:
<del class="diff-old">https://www.w3.org/TR/json-ld11/
</del>
<a href= "https://www.w3.org/TR/sparql11-overview/">
<ins class="diff-chg">https://www.w3.org/TR/sparql11-overview/
</ins>
</a>
</dd>
<del class="diff-old">[JSON-SCHEMA]
</del>
<dt id="bib-wot-architecture11">
<ins class="diff-chg">[wot-architecture11]
</ins>
</dt>
<dd>
<a href="https://www.w3.org/TR/wot-architecture11/">
<cite>
<del class="diff-old">JSON
Schema
Validation:
A
Vocabulary
for
Structural
Validation
</del>
<ins class="diff-chg">Web
</ins>
of
<del class="diff-old">JSON
</del>
<ins class="diff-chg">Things
(WoT)
Architecture
1.1
</ins>
</cite>
</a>.
<del class="diff-old">Austin
Wright;
Henry
Andrews;
Geraint
Luff.
IETF.
19
March
2018.
Internet-Draft.
</del>
<ins class="diff-chg">Michael
Lagally;
Ryuichi
Matsukura;
Toru
Kawaguchi;
Kunihiko
Toumura;
Kazuo
Kajimoto.
W3C.
24
November
2020.
W3C
Working
Draft.
</ins>
URL:
<del class="diff-old">https://datatracker.ietf.org/doc/html/draft-handrews-json-schema-validation-01
</del>
<a href= "https://www.w3.org/TR/wot-architecture11/">
<ins class="diff-chg">https://www.w3.org/TR/wot-architecture11/
</ins>
</a>
</dd>
<del class="diff-old">[JSON-SCHEMA-ONTOLOGY]
</del>
<dt id="bib-wot-thing-description11">
<ins class="diff-chg">[wot-thing-description11]
</ins>
</dt>
<dd>
<a href= "https://www.w3.org/TR/wot-thing-description11/">
<cite>
<del class="diff-old">JSON
Schema
in
RDF
</del>
<ins class="diff-chg">Web
of
Things
(WoT)
Thing
Description
1.1
</ins>
</cite>
</a>.
<ins class="diff-new">Sebastian
Käbisch;
Takuki
Kamiya;
Michael
McCool;
</ins>
Victor
<del class="diff-old">Charpenay;
Maxime
Lefrançois;
María
Poveda
Villalón.
</del>
<ins class="diff-chg">Charpenay.
</ins>
W3C.
<ins class="diff-new">11
March
2022.
W3C
Working
Draft.
</ins>
URL:
<del class="diff-old">https://www.w3.org/2019/wot/json-schema
[LDML]
Unicode
Technical
Standard
#35:
Unicode
Locale
Data
Markup
Language
(LDML)
.
Mark
Davis;
CLDR
Contributors.
URL:
https://unicode.org/reports/tr35/
</del>
<a href= "https://www.w3.org/TR/wot-thing-description11/">
<ins class="diff-chg">https://www.w3.org/TR/wot-thing-description11/
</ins>
</a>
</dd>
<del class="diff-old">[LINKED-DATA]
</del>
<dt id="bib-wot-usecases">
<ins class="diff-chg">[wot-usecases]
</ins>
</dt>
<dd>
<a href="https://w3c.github.io/wot-usecases/">
<cite>
<del class="diff-old">Linked
Data
Design
Issues
</del>
<ins class="diff-chg">Web
of
Things
(WoT):
Use
Cases
</ins>
</cite>
</a>.
<del class="diff-old">Tim
Berners-Lee.
</del>
<ins class="diff-chg">Michael
Lagally;
Michael
McCool;
Ryuichi
Matsukura;
Tomoaki
Mizushima.
</ins>
W3C.
<del class="diff-old">27
July
2006.
W3C-Internal
Document.
URL:
https://www.w3.org/DesignIssues/LinkedData.html
[MQTT]
MQTT
Version
3.1.1
.
Andrew
Banks;
Rahul
Gupta.
OASIS.
10
December
2015.
OASIS
Standard
Incorporating
Approved
Errata
01.
</del>
<ins class="diff-chg">15
October
2020.
Editor's
Draft.
</ins>
URL:
<del class="diff-old">http://docs.oasis-open.org/mqtt/mqtt/v3.1.1/mqtt-v3.1.1.html
</del>
<a href= "https://w3c.github.io/wot-usecases/">
<ins class="diff-chg">https://w3c.github.io/wot-usecases/
</ins>
</a>
</dd>
<del class="diff-old">[OPENAPI]
</del>
<dt id="bib-xpath-31">
<ins class="diff-chg">[xpath-31]
</ins>
</dt>
<dd>
<a href="https://www.w3.org/TR/xpath-31/">
<cite>
<del class="diff-old">OpenAPI
Specification:
Version
3.0.1
</del>
<ins class="diff-chg">XML
Path
Language
(XPath)
3.1
</ins>
</cite>
</a>.
<del class="diff-old">Darrel
Miller;
Jason
Harmon;
Jeremy
Whitlock;
Kris
Hahn;
Marsh
Gardiner;
Mike
Ralphson;
Rob
Dolin;
Ron
Ratovsky;
Tony
Tam.
OpenAPI
Initiative,
Linux
Foundation.
7
December
</del>
<ins class="diff-chg">Jonathan
Robie;
Michael
Dyck;
Josh
Spiegel.
W3C.
21
March
</ins>
2017.
<ins class="diff-new">W3C
Recommendation.
</ins>
URL:
<del class="diff-old">https://swagger.io/specification/
</del>
<a href= "https://www.w3.org/TR/xpath-31/">
<ins class="diff-chg">https://www.w3.org/TR/xpath-31/
</ins>
</a>
</dd>
<del class="diff-old">[RDF-SCHEMA]
</del>
</dl>
</section>
<section id="informative-references">
<div class="header-wrapper">
<h3 id="d-2-informative-references">
<del class="diff-old">RDF
Schema
1.1
</del>
<bdi class="secno">
<ins class="diff-chg">D.2
</ins></bdi><ins class="diff-chg">
Informative
references
</ins></h3><a class="self-link" href="#informative-references" aria-label= "Permalink for Appendix D.2">
<del class="diff-old">.
Dan
Brickley;
Ramanathan
Guha.
W3C.
25
February
2014.
W3C
Recommendation.
URL:
https://www.w3.org/TR/rdf-schema/
</del>
</a>
<del class="diff-old">[RFC3966]
</del>
</div>
<dl class="bibliography">
<dt id="bib-jsonpath">
<ins class="diff-chg">[JSONPATH]
</ins>
</dt>
<dd>
<a href= "https://datatracker.ietf.org/doc/html/draft-ietf-jsonpath-base">
<cite>
<del class="diff-old">The
tel
URI
</del>
<ins class="diff-chg">JSONPath:
Query
expressions
</ins>
for
<del class="diff-old">Telephone
Numbers
</del>
<ins class="diff-chg">JSON
</ins>
</cite>
</a>.
<del class="diff-old">H.
Schulzrinne.
</del>
<ins class="diff-chg">Stefan
Gössner;
Glyn
Normington;
Carsten
Bormann.
</ins>
IETF.
<del class="diff-old">December
2004.
Proposed
Standard.
</del>
<ins class="diff-chg">DRAFT.
</ins>
URL:
<del class="diff-old">https://www.rfc-editor.org/rfc/rfc3966
</del>
<a href= "https://datatracker.ietf.org/doc/html/draft-ietf-jsonpath-base">
<ins class="diff-chg">https://datatracker.ietf.org/doc/html/draft-ietf-jsonpath-base
</ins>
</a>
</dd>
<del class="diff-old">[RFC6068]
</del>
<dt id="bib-ldp-paging">
<ins class="diff-chg">[LDP-Paging]
</ins>
</dt>
<dd>
<a href="https://www.w3.org/TR/ldp-paging/">
<cite>
<del class="diff-old">The
'mailto'
URI
Scheme
</del>
<ins class="diff-chg">Linked
Data
Platform
Paging
1.0
</ins>
</cite>
</a>.
<del class="diff-old">M.
Duerst;
L.
Masinter;
J.
Zawinski.
IETF.
October
2010.
Proposed
Standard.
</del>
<ins class="diff-chg">Steve
Speicher;
John
Arwe;
Ashok
Malhotra.
W3C.
30
June
2015.
W3C
Working
Group
Note.
</ins>
URL:
<del class="diff-old">https://www.rfc-editor.org/rfc/rfc6068
</del>
<a href= "https://www.w3.org/TR/ldp-paging/">
<ins class="diff-chg">https://www.w3.org/TR/ldp-paging/
</ins>
</a>
</dd>
<del class="diff-old">[RFC6750]
</del>
<dt id="bib-rest-iot">
<ins class="diff-chg">[REST-IOT]
</ins>
</dt>
<dd>
<a href= "https://tools.ietf.org/html/draft-irtf-t2trg-rest-iot-06">
<cite>
<del class="diff-old">The
OAuth
2.0
Authorization
Framework:
Bearer
Token
Usage
</del>
<ins class="diff-chg">RESTful
Design
for
Internet
of
Things
Systems
</ins>
</cite>
</a>.
<del class="diff-old">M.
Jones;
D.
Hardt.
</del>
<ins class="diff-chg">Ari
Keranen;
Matthias
Kovatsch;
Klaus
Hartke.
</ins>
IETF.
<del class="diff-old">October
2012.
Proposed
Standard.
</del>
<ins class="diff-chg">11
May
2020.
</ins>
URL:
<del class="diff-old">https://www.rfc-editor.org/rfc/rfc6750
</del>
<a href= "https://tools.ietf.org/html/draft-irtf-t2trg-rest-iot-06">
<ins class="diff-chg">https://tools.ietf.org/html/draft-irtf-t2trg-rest-iot-06
</ins>
</a>
</dd>
<del class="diff-old">[RFC7231]
</del>
<dt id="bib-rfc7230">
<ins class="diff-chg">[RFC7230]
</ins>
</dt>
<dd>
<a href="https://httpwg.org/specs/rfc7230.html">
<cite>
Hypertext
Transfer
Protocol
(HTTP/1.1):
<del class="diff-old">Semantics
</del>
<ins class="diff-chg">Message
Syntax
</ins>
and
<del class="diff-old">Content
</del>
<ins class="diff-chg">Routing
</ins>
</cite>
</a>.
R.
Fielding,
Ed.;
J.
Reschke,
Ed..
IETF.
June
2014.
Proposed
Standard.
URL:
<del class="diff-old">https://httpwg.org/specs/rfc7231.html
</del>
<a href= "https://httpwg.org/specs/rfc7230.html">
<ins class="diff-chg">https://httpwg.org/specs/rfc7230.html
</ins>
</a>
</dd>
<del class="diff-old">[RFC7516]
</del>
<dt id="bib-rfc7540">
<ins class="diff-chg">[RFC7540]
</ins>
</dt>
<dd>
<a href="https://httpwg.org/specs/rfc7540.html">
<cite>
<del class="diff-old">JSON
Web
Encryption
(JWE)
</del>
<ins class="diff-chg">Hypertext
Transfer
Protocol
Version
2
(HTTP/2)
</ins>
</cite>
</a>.
M.
<del class="diff-old">Jones;
J.
Hildebrand.
IETF.
May
2015.
Proposed
Standard.
URL:
https://www.rfc-editor.org/rfc/rfc7516
[RFC7519]
JSON
Web
Token
(JWT)
.
</del>
<ins class="diff-chg">Belshe;
R.
Peon;
</ins>
M.
<del class="diff-old">Jones;
J.
Bradley;
N.
Sakimura.
</del>
<ins class="diff-chg">Thomson,
Ed..
</ins>
IETF.
May
2015.
Proposed
Standard.
URL:
<del class="diff-old">https://www.rfc-editor.org/rfc/rfc7519
[RFC7616]
HTTP
Digest
Access
Authentication
.
R.
Shekh-Yusef,
Ed.;
D.
Ahrens;
S.
Bremer.
IETF.
September
2015.
Proposed
Standard.
URL:
https://httpwg.org/specs/rfc7616.html
[RFC7617]
The
'Basic'
HTTP
Authentication
Scheme
.
J.
Reschke.
IETF.
September
2015.
Proposed
Standard.
URL:
https://httpwg.org/specs/rfc7617.html
[RFC7797]
JSON
Web
Signature
(JWS)
Unencoded
Payload
Option
.
M.
Jones.
IETF.
February
2016.
Proposed
Standard.
URL:
https://www.rfc-editor.org/rfc/rfc7797
</del>
<a href= "https://httpwg.org/specs/rfc7540.html">
<ins class="diff-chg">https://httpwg.org/specs/rfc7540.html
</ins>
</a>
</dd>
<del class="diff-old">[RFC8392]
</del>
<dt id="bib-rfc8323">
<ins class="diff-chg">[RFC8323]
</ins>
</dt>
<dd>
<a href="https://www.rfc-editor.org/rfc/rfc8323">
<cite>
<del class="diff-old">CBOR
Web
Token
(CWT)
</del>
<ins class="diff-chg">CoAP
(Constrained
Application
Protocol)
over
TCP,
TLS,
and
WebSockets
</ins>
</cite>
</a>.
<del class="diff-old">M.
Jones;
E.
Wahlstroem;
</del>
<ins class="diff-chg">C.
Bormann;
</ins>
S.
<del class="diff-old">Erdtman;
</del>
<ins class="diff-chg">Lemay;
</ins>
H.
<del class="diff-old">Tschofenig.
</del>
<ins class="diff-chg">Tschofenig;
K.
Hartke;
B.
Silverajan;
B.
Raymor,
Ed..
</ins>
IETF.
<del class="diff-old">May
</del>
<ins class="diff-chg">February
</ins>
2018.
Proposed
Standard.
URL:
<del class="diff-old">https://www.rfc-editor.org/rfc/rfc8392
[sdw-bp]
Spatial
Data
on
the
Web
Best
Practices
.
Jeremy
Tandy;
Linda
van
den
Brink;
Payam
Barnaghi.
W3C.
28
September
2017.
W3C
Working
Group
Note.
URL:
https://www.w3.org/TR/sdw-bp/
[SMARTM2M]
ETSI
TS
103
264
V2.1.1
(2017-03):
SmartM2M;
Smart
Appliances;
Reference
Ontology
and
oneM2M
Mapping
.
ETSI.
March
2017.
Published.
URL:
http://www.etsi.org/deliver/etsi_ts/103200_103299/103264/02.01.01_60/ts_103264v020101p.pdf
[STRING-META]
Strings
on
the
Web:
Language
and
Direction
Metadata
.
Addison
Phillips;
Richard
Ishida.
W3C.
7
March
2022.
W3C
Working
Group
Note.
URL:
https://www.w3.org/TR/string-meta/
[TURTLE]
RDF
1.1
Turtle
.
Eric
Prud'hommeaux;
Gavin
Carothers.
W3C.
25
February
2014.
W3C
Recommendation.
URL:
https://www.w3.org/TR/turtle/
[VOCAB-SSN]
Semantic
Sensor
Network
Ontology
.
Armin
Haller;
Krzysztof
Janowicz;
Simon
Cox;
Danh
Le
Phuoc;
Kerry
Taylor;
Maxime
Lefrançois.
W3C.
19
October
2017.
W3C
Recommendation.
URL:
https://www.w3.org/TR/vocab-ssn/
[w3c-basic-geo]
Basic
Geo
(WGS84
lat/long)
Vocabulary
.
Dan
Brickley.
W3C
Semantic
Web
Interest
Group.
1
February
2006.
URL:
https://www.w3.org/2003/01/geo/
</del>
<a href= "https://www.rfc-editor.org/rfc/rfc8323">
<ins class="diff-chg">https://www.rfc-editor.org/rfc/rfc8323
</ins>
</a>
</dd>
<del class="diff-old">[WOT-ARCHITECTURE]
</del>
<dt id="bib-rfc8552">
<ins class="diff-chg">[RFC8552]
</ins>
</dt>
<dd>
<a href="https://www.rfc-editor.org/rfc/rfc8552">
<cite>
<del class="diff-old">Web
</del>
<ins class="diff-chg">Scoped
Interpretation
</ins>
of
<del class="diff-old">Things
(WoT)
Architecture
1.1
.
Michael
Lagally;
Ryuichi
Matsukura;
Toru
Kawaguchi;
Kunihiko
Toumura;
Kazuo
Kajimoto.
W3C.
November
2020.
URL:
https://www.w3.org/TR/wot-architecture11/
[WOT-BINDING-TEMPLATES]
Web
</del>
<ins class="diff-chg">DNS
Resource
Records
through
"Underscored"
Naming
</ins>
of
<del class="diff-old">Things
(WoT)
Binding
Templates
</del>
<ins class="diff-chg">Attribute
Leaves
</ins>
</cite>
</a>.
<del class="diff-old">Michael
Koster;
Ege
Korkan.
W3C.
30
January
2020.
W3C
Working
Group
Note.
</del>
<ins class="diff-chg">D.
Crocker.
IETF.
March
2019.
Best
Current
Practice.
</ins>
URL:
<del class="diff-old">https://www.w3.org/TR/wot-binding-templates/
</del>
<a href= "https://www.rfc-editor.org/rfc/rfc8552">
<ins class="diff-chg">https://www.rfc-editor.org/rfc/rfc8552
</ins>
</a>
</dd>
<del class="diff-old">[WOT-SECURITY-GUIDELINES]
</del>
<dt id="bib-wot-security">
<ins class="diff-chg">[WOT-SECURITY]
</ins>
</dt>
<dd>
<a href="https://www.w3.org/TR/wot-security/">
<cite>
Web
of
Things
(WoT)
Security
and
Privacy
Guidelines
</cite>
</a>.
<del class="diff-old">;
Michael
McCool;
</del>
Elena
<del class="diff-old">Reshetova.
W3C.
March
2019.
URL:
https://w3c.github.io/wot-security/
[WOT-THING-DESCRIPTION]
Web
of
Things
(WoT)
Thing
Description
.
Sebastian
Käbisch;
Takuki
Kamiya;
Michael
McCool;
Victor
Charpenay;
Matthias
Kovatsch.
W3C.
9
April
2020.
W3C
Recommendation.
URL:
https://www.w3.org/TR/wot-thing-description/
[xml]
Extensible
Markup
Language
(XML)
1.0
(Fifth
Edition)
.
Tim
Bray;
Jean
Paoli;
</del>
<ins class="diff-chg">Reshetova;
</ins>
Michael
<del class="diff-old">Sperberg-McQueen;
Eve
Maler;
François
Yergeau
et
al.
</del>
<ins class="diff-chg">McCool.
</ins>
W3C.
<del class="diff-old">26
</del>
<ins class="diff-chg">6
</ins>
November
<del class="diff-old">2008.
</del>
<ins class="diff-chg">2019.
</ins>
W3C
<del class="diff-old">Recommendation.
</del>
<ins class="diff-chg">Working
Group
Note.
</ins>
URL:
<del class="diff-old">https://www.w3.org/TR/xml/
</del>
<a href= "https://www.w3.org/TR/wot-security/">
<ins class="diff-chg">https://www.w3.org/TR/wot-security/
</ins>
</a>
</dd>
</dl>
</section>
</section>
<p role="navigation" id="back-to-top">
<a href="#title">
<abbr title= "Back to Top">
↑
</abbr>
</a>
</p>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-thing" aria-label= "Links in this document to definition: Thing">
<div>
<a class="self-link" href="#dfn-thing" aria-label= "Permalink for definition: Thing. Activate to close this dialog.">
Permalink
</a>
</div>
<p>
<b>
Referenced
in:
</b>
</p>
<ul>
<li>
<del class="diff-old">§
Abstract
(2)
(3)
(4)
(5)
</del>
<a href="#ref-for-dfn-thing-1" title= "§ 7.2 Thing Description Server">
§
<del class="diff-old">1.1
</del>
<ins class="diff-chg">7.2
</ins>
Thing
Description
<del class="diff-old">(2)
(3)
(4)
(5)
(6)
(7)
(8)
§
1.2
Thing
Model
(2)
(3)
§
5.1
Overview
§
5.2
Preliminaries
§
5.3.1.1
Thing
(2)
§
5.3.4
Hypermedia
Controls
Vocabulary
Definitions
(2)
(3)
§
5.3.4.1
Link
(2)
(3)
(4)
(5)
(6)
(7)
(8)
§
6.
TD
Representation
Format
§
6.3.4
securityDefinitions
and
security
(2)
§
6.3.4.1
Multiple
Security
Definitions
(2)
§
6.3.8
links
(2)
§
6.3.9.5
Top
level
forms
(2)
(3)
(4)
(5)
§
6.3.10
Data
Schemas
(2)
§
7.1
Semantic
Annotations
§
7.1.1
Example
I:
Additional
Basic
Metadata
(2)
§
7.1.2
Example
II:
State
Annotations
(2)
§
8.1
Security
Configurations
(2)
(3)
§
8.2
Data
Schemas
(2)
(3)
(4)
(5)
(6)
(7)
(8)
(9)
(10)
(11)
(12)
(13)
(14)
(15)
(16)
(17)
§
8.3
Protocol
Bindings
(2)
(3)
§
8.3.1
Protocol
Binding
based
on
HTTP
(2)
§
8.3.2
Other
Protocol
Bindings
§
10.2
Immutable
Identifiers
(2)
(3)
(4)
(5)
§
10.3
Fingerprinting
§
10.5
Inferencing
of
Personally
Identifiable
Information
(2)
(3)
(4)
§
11.1
Basic
Concept
(2)
§
11.3
Modeling
Tools
§
12.1
application/td+json
Media
Type
Registration
(2)
§
A.1
MyLampThing
Example
with
CoAP
Protocol
Binding
§
A.2
MyIlluminanceSensor
Example
with
MQTT
Protocol
Binding
§
A.3
Webhook
Event
Example
(2)
Permalink
Referenced
in:
§
1.2
Thing
Model
</del>
<ins class="diff-chg">Server
</ins>
</a>
</li>
<li>
<a href="#ref-for-dfn-thing-2" title= "§ 7.3 Thing Description Directory">
§
<del class="diff-old">5.3.1.1
</del>
<ins class="diff-chg">7.3
</ins>
Thing
<ins class="diff-new">Description
Directory
</ins>
</a>
</li>
<li>
<del class="diff-old">§
5.3.1.2
InteractionAffordance
(2)
§
5.3.1.5
EventAffordance
§
5.3.4.2
Form
(2)
(3)
§
6.3.4.1
Multiple
Security
Definitions
§
6.3.4.4
OAuth
2.0
usage
§
6.3.9.5
Top
level
forms
(2)
(3)
(4)
§
7.2
Adding
Protocol
Bindings
§
8.2
Data
Schemas
(2)
(3)
(4)
(5)
(6)
§
8.3
Protocol
Bindings
§
8.3.1
Protocol
Binding
based
on
HTTP
§
9.1
TD
Interception
and
Tampering
Risk
§
12.1
application/td+json
Media
Type
Registration
(2)
(3)
(4)
</del>
<a href="#ref-for-dfn-thing-3" title="§ 7.3.2.1.1 Creation">
§
<del class="diff-old">A.3
Webhook
Event
Example
</del>
<ins class="diff-chg">7.3.2.1.1
Creation
</ins>
</a>
<a href="#ref-for-dfn-thing-4" title= "Reference 2">
(2)
</a>
<del class="diff-old">(3)
(4)
</del>
</li>
</ul>
</div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-thing-description" aria-label= "Links in this document to definition: Thing Description">
<div>
<a class="self-link" href="#dfn-thing-description" aria-label= "Permalink for definition: Thing Description. Activate to close this dialog.">
Permalink
</a>
</div>
<p>
<b>
Referenced
in:
</b>
</p>
<ul>
<li>
<del class="diff-old">§
1.2
Thing
Model
(2)
(3)
(4)
(5)
§
3.
Terminology
(2)
(3)
(4)
(5)
(6)
(7)
§
5.3.3.1
SecurityScheme
§
5.3.4.1
Link
(2)
§
5.3.4.2
Form
§
6.
TD
Representation
Format
(2)
§
11.1
Basic
Concept
(2)
(3)
§
11.2
Thing
Model
Declaration
(2)
§
11.3.3
Composition
(2)
(3)
(4)
§
11.3.4
Required
(2)
§
11.4
Derivation
of
Thing
Description
Instances
(2)
(3)
(4)
(5)
(6)
</del>
<a href="#ref-for-dfn-thing-description-1" title= "§ 4. Architecture">
§
<del class="diff-old">11.5
Examples
</del>
<ins class="diff-chg">4.
Architecture
</ins>
</a>
</li>
</ul>
</div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-td" aria-label= "Links in this document to definition: TD">
<div>
<a class="self-link" href="#dfn-td" aria-label= "Permalink for definition: TD. Activate to close this dialog.">
Permalink
</a>
</div>
<p>
<b>
Referenced
in:
</b>
</p>
<ul>
<li>
<del class="diff-old">Not
referenced
in
this
document.
Permalink
Referenced
in:
§
11.4
Derivation
of
Thing
Description
Instances
(2)
(3)
(4)
(5)
(6)
(7)
(8)
Permalink
Referenced
in:
</del>
<del class="diff-old">§
1.2
Thing
Model
(2)
(3)
(4)
(5)
§
4.
Namespaces
§
5.3.4.1
Link
(2)
(3)
(4)
(5)
</del>
<a href="#ref-for-dfn-td-1" title="§ 7.1 Overview">
§
<del class="diff-old">11.
Thing
Model
</del>
<ins class="diff-chg">7.1
Overview
</ins>
</a>
<a href="#ref-for-dfn-td-2" title= "Reference 2">
(2)
</a>
</li>
<li>
<a href="#ref-for-dfn-td-3" title="§ 7.1.1.2 ThingLink">
§
<del class="diff-old">11.1
Basic
Concept
</del>
<ins class="diff-chg">7.1.1.2
ThingLink
</ins>
</a>
<a href="#ref-for-dfn-td-4" title= "Reference 2">
(2)
</a>
<a href="#ref-for-dfn-td-5" title= "Reference 3">
(3)
</a>
<del class="diff-old">(4)
(5)
(6)
</del>
</li>
<li>
<a href="#ref-for-dfn-td-6" title= "§ 7.2 Thing Description Server">
§
<del class="diff-old">11.2
</del>
<ins class="diff-chg">7.2
</ins>
Thing
<del class="diff-old">Model
Declaration
(2)
(3)
(4)
(5)
(6)
(7)
(8)
§
11.3
Modeling
Tools
§
11.3.1
Versioning
(2)
(3)
(4)
§
11.3.2
Extension
and
Import
</del>
<ins class="diff-chg">Description
Server
</ins>
</a>
<a href="#ref-for-dfn-td-7" title="Reference 2">
(2)
</a>
<a href= "#ref-for-dfn-td-8" title="Reference 3">
(3)
</a>
<a href= "#ref-for-dfn-td-9" title="Reference 4">
(4)
</a>
<a href= "#ref-for-dfn-td-10" title="Reference 5">
(5)
</a>
<a href= "#ref-for-dfn-td-11" title="Reference 6">
(6)
</a>
<a href= "#ref-for-dfn-td-12" title="Reference 7">
(7)
</a>
<a href= "#ref-for-dfn-td-13" title="Reference 8">
(8)
</a>
<a href= "#ref-for-dfn-td-14" title="Reference 9">
(9)
</a>
<a href= "#ref-for-dfn-td-15" title="Reference 10">
(10)
</a>
<a href= "#ref-for-dfn-td-16" title="Reference 11">
(11)
</a>
<a href= "#ref-for-dfn-td-17" title="Reference 12">
(12)
</a>
<a href= "#ref-for-dfn-td-18" title="Reference 13">
(13)
</a>
<a href= "#ref-for-dfn-td-19" title="Reference 14">
(14)
</a>
<a href= "#ref-for-dfn-td-20" title="Reference 15">
(15)
</a>
<a href= "#ref-for-dfn-td-21" title="Reference 16">
(16)
</a>
<a href= "#ref-for-dfn-td-22" title="Reference 17">
(17)
</a>
<a href= "#ref-for-dfn-td-23" title="Reference 18">
(18)
</a>
<a href= "#ref-for-dfn-td-24" title="Reference 19">
(19)
</a>
<del class="diff-old">(20)
</del>
</li>
<li>
<a href="#ref-for-dfn-td-25" title= "§ 7.3.1 Information Model">
§
<del class="diff-old">11.3.3
Composition
</del>
<ins class="diff-chg">7.3.1
Information
Model
</ins>
</a>
<a href= "#ref-for-dfn-td-26" title="Reference 2">
(2)
</a>
<del class="diff-old">(3)
(4)
(5)
(6)
(7)
(8)
(9)
(10)
(11)
(12)
(13)
(14)
</del>
</li>
<li>
<del class="diff-old">§
11.3.4
Required
§
11.3.5
Placeholder
</del>
<a href="#ref-for-dfn-td-27" title= "§ 7.3.1.1 Registration Information">
§
<del class="diff-old">11.4
Derivation
of
Thing
Description
Instances
</del>
<ins class="diff-chg">7.3.1.1
Registration
Information
</ins>
</a>
<a href="#ref-for-dfn-td-28" title= "Reference 2">
(2)
</a>
<a href="#ref-for-dfn-td-29" title= "Reference 3">
(3)
</a>
<a href="#ref-for-dfn-td-30" title= "Reference 4">
(4)
</a>
<del class="diff-old">(5)
§
11.5
Examples
(2)
Permalink
Referenced
in:
Not
referenced
in
this
document.
Permalink
Referenced
in:
§
1.1
Thing
Description
(2)
</del>
</li>
<li>
<del class="diff-old">§
5.1
Overview
Permalink
Referenced
in:
§
1.1
Thing
Description
(2)
§
5.1
Overview
(2)
</del>
<a href="#ref-for-dfn-td-31" title= "§ 7.3.1.2 Registration Expiry">
§
<del class="diff-old">5.3.1.1
Thing
</del>
<ins class="diff-chg">7.3.1.2
Registration
Expiry
</ins>
</a>
<a href="#ref-for-dfn-td-32" title="Reference 2">
(2)
</a>
<a href= "#ref-for-dfn-td-33" title="Reference 3">
(3)
</a>
<a href= "#ref-for-dfn-td-34" title="Reference 4">
(4)
</a>
</li>
<li>
<del class="diff-old">§
6.3.4.1
Multiple
Security
Definitions
§
6.3.4.2
security
in
Forms
(2)
§
6.3.4.4
OAuth
2.0
usage
§
6.3.9.3
response
§
7.1.2
Example
II:
State
Annotations
§
8.3
Protocol
Bindings
(2)
Permalink
Referenced
in:
§
1.1
Thing
Description
§
1.2
Thing
Model
§
5.1
Overview
</del>
<a href="#ref-for-dfn-td-35" title="§ 7.3.2.1 Things API">
§
<del class="diff-old">5.3.1.3
PropertyAffordance
</del>
<ins class="diff-chg">7.3.2.1
Things
API
</ins>
</a>
<a href="#ref-for-dfn-td-36" title= "Reference 2">
(2)
</a>
</li>
<li>
<del class="diff-old">§
6.3.5
properties
</del>
<a href="#ref-for-dfn-td-37" title="§ 7.3.2.1.1 Creation">
§
<del class="diff-old">7.1.2
Example
II:
State
Annotations
</del>
<ins class="diff-chg">7.3.2.1.1
Creation
</ins>
</a>
<a href="#ref-for-dfn-td-38" title= "Reference 2">
(2)
</a>
</li>
<li>
<a href="#ref-for-dfn-td-39" title="§ 7.3.2.1.3 Update">
§
<del class="diff-old">7.1.3
Example
III:
Geolocation
Annotations
</del>
<ins class="diff-chg">7.3.2.1.3
Update
</ins>
</a>
</li>
<li>
<a href="#ref-for-dfn-td-40" title="§ 7.3.2.2 Events API">
§
<del class="diff-old">11.1
Basic
Concept
</del>
<ins class="diff-chg">7.3.2.2
Events
API
</ins>
</a>
<a href="#ref-for-dfn-td-41" title= "Reference 2">
(2)
</a>
</li>
<li>
<del class="diff-old">§
11.3.4
Required
Permalink
Referenced
in:
§
1.1
Thing
Description
§
1.2
Thing
Model
</del>
<a href="#ref-for-dfn-td-42" title="§ 7.3.2.3 Search API">
§
<del class="diff-old">5.1
Overview
</del>
<ins class="diff-chg">7.3.2.3
Search
API
</ins>
</a>
</li>
<li>
<a href="#ref-for-dfn-td-43" title= "§ 10.1 Incremental Transfer">
§
<del class="diff-old">11.1
Basic
Concept
(2)
</del>
<ins class="diff-chg">10.1
Incremental
Transfer
</ins>
</a>
</li>
<li>
<a href="#ref-for-dfn-td-44" title= "§ A. JSON Schema for WoT Discovery TD-extensions">
§
<del class="diff-old">11.3.4
Required
</del>
<ins class="diff-chg">A.
JSON
Schema
for
WoT
Discovery
TD-extensions
</ins>
</a>
</li>
</ul>
</div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-thing-model" aria-label= "Links in this document to definition: Thing Model">
<div>
<a class="self-link" href="#dfn-thing-model" aria-label= "Permalink for definition: Thing Model. Activate to close this dialog.">
Permalink
</a>
</div>
<p>
<b>
Referenced
in:
</b>
</p>
<ul>
<li>
<del class="diff-old">§
1.2
Thing
Model
§
5.1
Overview
§
11.1
Basic
Concept
(2)
</del>
<a href="#ref-for-dfn-thing-model-1" title= "§ 7.3.2.4 API Specification (Thing Model)">
§
<del class="diff-old">11.3.4
Required
</del>
<ins class="diff-chg">7.3.2.4
API
Specification
(Thing
Model)
</ins>
</a>
</li>
</ul>
</div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-tm" aria-label= "Links in this document to definition: TM">
<div>
<a class="self-link" href="#dfn-tm" aria-label= "Permalink for definition: TM. Activate to close this dialog.">
Permalink
</a>
</div>
<p>
<b>
Referenced
in:
</b>
</p>
<ul>
<li>
<del class="diff-old">§
1.1
Thing
Description
§
5.3.3
Security
Vocabulary
Definitions
§
6.2
Omitting
Default
Values
§
7.
TD
Context
Extensions
§
7.2
Adding
Protocol
Bindings
(2)
(3)
§
8.3
Protocol
Bindings
(2)
(3)
(4)
(5)
(6)
(7)
§
8.3.1
Protocol
Binding
based
on
HTTP
(2)
(3)
(4)
(5)
§
8.3.2
Other
Protocol
Bindings
(2)
§
11.2
Thing
Model
Declaration
§
A.3
Webhook
Event
Example
</del>
<ins class="diff-chg">Not
referenced
in
this
document.
</ins>
</li>
</ul>
</div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-property" aria-label= "Links in this document to definition: Property">
<div>
<a class="self-link" href="#dfn-property" aria-label= "Permalink for definition: Property. Activate to close this dialog.">
Permalink
</a>
</div>
<p>
<b>
Referenced
in:
</b>
</p>
<ul>
<li>
<del class="diff-old">§
3.
Terminology
</del>
<ins class="diff-chg">Not
referenced
in
this
document.
</ins>
</li>
</ul>
</div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-action" aria-label= "Links in this document to definition: Action">
<div>
<a class="self-link" href="#dfn-action" aria-label= "Permalink for definition: Action. Activate to close this dialog.">
Permalink
</a>
</div>
<p>
<b>
Referenced
in:
</b>
</p>
<ul>
<li>
<del class="diff-old">§
3.
Terminology
(2)
§
4.
Namespaces
(2)
(3)
(4)
(5)
§
5.1
Overview
(2)
(3)
(4)
(5)
(6)
(7)
§
5.2
Preliminaries
(2)
§
5.3.3
Security
Vocabulary
Definitions
§
6.3.10
Data
Schemas
§
7.
TD
Context
Extensions
§
7.1.1
Example
I:
Additional
Basic
Metadata
§
8.3.2
Other
Protocol
Bindings
§
C.
JSON-LD
Context
Usage
</del>
<ins class="diff-chg">Not
referenced
in
this
document.
</ins>
</li>
</ul>
</div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-event" aria-label= "Links in this document to definition: Event">
<div>
<a class="self-link" href="#dfn-event" aria-label= "Permalink for definition: Event. Activate to close this dialog.">
Permalink
</a>
</div>
<p>
<b>
Referenced
in:
</b>
</p>
<ul>
<li>
<del class="diff-old">§
4.
Namespaces
§
5.1
Overview
§
5.2
Preliminaries
(2)
(3)
(4)
(5)
§
5.3.1.1
Thing
(2)
</del>
<ins class="diff-chg">Not
referenced
in
this
document.
</ins>
</li>
</ul>
</div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-wot-anonymous-thing-description" aria-label= "Links in this document to definition: Anonymous TD">
<div>
<a class="self-link" href= "#dfn-wot-anonymous-thing-description" aria-label= "Permalink for definition: Anonymous TD. Activate to close this dialog.">
Permalink
</a>
</div>
<p>
<b>
Referenced
in:
</b>
</p>
<ul>
<li>
<del class="diff-old">§
3.
Terminology
(2)
§
4.
Namespaces
(2)
§
5.2
Preliminaries
(2)
(3)
(4)
(5)
(6)
(7)
(8)
(9)
(10)
(11)
(12)
(13)
(14)
(15)
§
5.3.1.1
Thing
§
5.3.1.2
InteractionAffordance
§
5.3.1.3
PropertyAffordance
§
5.3.1.4
ActionAffordance
§
5.3.1.5
EventAffordance
§
5.3.1.6
VersionInfo
§
5.3.2.1
DataSchema
§
5.3.2.2
ArraySchema
§
5.3.2.4
NumberSchema
§
5.3.2.5
IntegerSchema
§
5.3.2.6
ObjectSchema
§
5.3.2.7
StringSchema
§
5.3.3.1
SecurityScheme
(2)
(3)
§
5.3.3.2
NoSecurityScheme
§
5.3.3.3
ComboSecurityScheme
(2)
§
5.3.3.4
BasicSecurityScheme
(2)
§
5.3.3.5
DigestSecurityScheme
(2)
§
5.3.3.6
APIKeySecurityScheme
(2)
§
5.3.3.7
BearerSecurityScheme
(2)
§
5.3.3.8
PSKSecurityScheme
(2)
§
5.3.3.9
OAuth2SecurityScheme
(2)
§
5.3.4.1
Link
§
5.3.4.2
Form
§
5.3.4.3
ExpectedResponse
§
5.3.4.4
AdditionalExpectedResponse
§
5.4
Default
Value
Definitions
§
6.2
Omitting
Default
Values
(2)
§
6.3.1
Thing
Root
Object
§
6.3.3
version
(2)
§
6.3.4
securityDefinitions
and
security
(2)
§
6.3.5
properties
(2)
§
6.3.6
actions
(2)
§
6.3.7
events
(2)
§
6.3.8
links
(2)
§
6.3.9
forms
(2)
(3)
§
6.3.10
Data
Schemas
(2)
§
7.1
Semantic
Annotations
(2)
§
7.1.2
Example
II:
State
Annotations
§
7.2
Adding
Protocol
Bindings
</del>
<a href="#ref-for-dfn-wot-anonymous-thing-description-1" title= "§ 7.3.1.3 Anonymous TD Identifiers">
§
<del class="diff-old">8.3.1
Protocol
Binding
based
on
HTTP
</del>
<ins class="diff-chg">7.3.1.3
Anonymous
TD
Identifiers
</ins>
</a>
</li>
<li>
<a href="#ref-for-dfn-wot-anonymous-thing-description-2" title= "§ 7.3.2.1.1 Creation">
§
<del class="diff-old">C.
JSON-LD
Context
Usage
</del>
<ins class="diff-chg">7.3.2.1.1
Creation
</ins>
</a>
<a href= "#ref-for-dfn-wot-anonymous-thing-description-3" title= "Reference 2">
(2)
</a>
<a href= "#ref-for-dfn-wot-anonymous-thing-description-4" title= "Reference 3">
(3)
</a>
<a href= "#ref-for-dfn-wot-anonymous-thing-description-5" title= "Reference 4">
(4)
</a>
</li>
<del class="diff-old">Permalink
Referenced
in:
</del>
<li>
<del class="diff-old">§
8.2
Data
Schemas
Permalink
Referenced
in:
§
3.
Terminology
Permalink
Referenced
in:
§
5.3.1.1
Thing
§
5.3.1.6
VersionInfo
§
5.3.2
Data
Schema
Vocabulary
Definitions
§
5.3.3.1
SecurityScheme
§
6.3.1
Thing
Root
Object
§
6.3.3
version
§
7.
TD
Context
Extensions
(2)
(3)
§
7.1
Semantic
Annotations
(2)
§
7.1.2
Example
II:
State
Annotations
§
7.2
Adding
Protocol
Bindings
(2)
§
7.3
Adding
Security
Schemes
(2)
§
8.3.2
Other
Protocol
Bindings
</del>
<a href="#ref-for-dfn-wot-anonymous-thing-description-6" title= "§ 7.3.2.1.2 Retrieval">
§
<del class="diff-old">A.3
Webhook
Event
Example
</del>
<ins class="diff-chg">7.3.2.1.2
Retrieval
</ins>
</a>
</li>
</ul>
</div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-wot-discoverer" aria-label= "Links in this document to definition: Discoverer">
<div>
<a class="self-link" href="#dfn-wot-discoverer" aria-label= "Permalink for definition: Discoverer. Activate to close this dialog.">
Permalink
</a>
</div>
<p>
<b>
Referenced
in:
</b>
</p>
<ul>
<li>
<del class="diff-old">§
3.
Terminology
§
4.
Namespaces
(2)
(3)
</del>
<a href="#ref-for-dfn-wot-discoverer-1" title= "§ 5. Discoverer Process">
§
5.
<del class="diff-old">TD
Information
Model
(2)
§
5.1
Overview
(2)
(3)
§
5.2
Preliminaries
(2)
(3)
(4)
(5)
(6)
(7)
§
5.4
Default
Value
Definitions
§
6.
TD
Representation
Format
(2)
§
6.1
Mapping
to
JSON
Types
(2)
§
6.3.1
Thing
Root
Object
§
12.1
application/td+json
Media
Type
Registration
</del>
<ins class="diff-chg">Discoverer
Process
</ins>
</a>
</li>
<li>
<a href="#ref-for-dfn-wot-discoverer-2" title= "§ 7.3.2.1.1 Creation">
§
<del class="diff-old">C.
JSON-LD
Context
Usage
(2)
(3)
</del>
<ins class="diff-chg">7.3.2.1.1
Creation
</ins>
</a>
</li>
</ul>
</div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-wot-discovery" aria-label= "Links in this document to definition: Discovery">
<div>
<a class="self-link" href="#dfn-wot-discovery" aria-label= "Permalink for definition: Discovery. Activate to close this dialog.">
Permalink
</a>
</div>
<p>
<b>
Referenced
in:
</b>
</p>
<ul>
<li>
<del class="diff-old">§
3.
Terminology
(2)
(3)
§
4.
Namespaces
§
5.3
Class
Definitions
§
5.3.1.1
Thing
§
5.3.2
Data
Schema
Vocabulary
Definitions
§
5.4
Default
Value
Definitions
§
6.
TD
Representation
Format
(2)
§
6.2
Omitting
Default
Values
§
6.3.2
Human-Readable
Metadata
§
8.3.1
Protocol
Binding
based
on
HTTP
</del>
<ins class="diff-chg">Not
referenced
in
this
document.
</ins>
</li>
</ul>
</div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-wot-exploration" aria-label= "Links in this document to definition: Exploration">
<div>
<a class="self-link" href="#dfn-wot-exploration" aria-label= "Permalink for definition: Exploration. Activate to close this dialog.">
Permalink
</a>
</div>
<p>
<b>
Referenced
in:
</b>
</p>
<ul>
<li>
<del class="diff-old">§
3.
Terminology
§
6.3.1
Thing
Root
Object
</del>
<ins class="diff-chg">Not
referenced
in
this
document.
</ins>
</li>
</ul>
</div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-wot-introduction" aria-label= "Links in this document to definition: Introduction">
<div>
<a class="self-link" href="#dfn-wot-introduction" aria-label= "Permalink for definition: Introduction. Activate to close this dialog.">
Permalink
</a>
</div>
<p>
<b>
Referenced
in:
</b>
</p>
<ul>
<li>
<del class="diff-old">§
4.
Namespaces
(2)
§
7.1.2
Example
II:
State
Annotations
</del>
<ins class="diff-chg">Not
referenced
in
this
document.
</ins>
</li>
</ul>
</div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-wot-thing-description-server" aria-label= "Links in this document to definition: Thing Description Server">
<div>
<a class="self-link" href="#dfn-wot-thing-description-server" aria-label= "Permalink for definition: Thing Description Server. Activate to close this dialog.">
Permalink
</a>
</div>
<p>
<b>
Referenced
in:
</b>
</p>
<ul>
<li>
<del class="diff-old">§
5.2
Preliminaries
(2)
(3)
(4)
(5)
(6)
(7)
(8)
(9)
(10)
(11)
(12)
(13)
(14)
(15)
(16)
(17)
(18)
§
5.3.2.6
ObjectSchema
§
6.1
Mapping
to
JSON
Types
§
6.3.1
Thing
Root
Object
</del>
<ins class="diff-chg">Not
referenced
in
this
document.
</ins>
</li>
</ul>
</div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-wot-td-server" aria-label= "Links in this document to definition: TD Server">
<div>
<a class="self-link" href="#dfn-wot-td-server" aria-label= "Permalink for definition: TD Server. Activate to close this dialog.">
Permalink
</a>
</div>
<p>
<b>
Referenced
in:
</b>
</p>
<ul>
<li>
<del class="diff-old">§
5.2
Preliminaries
(2)
§
5.3.1.1
Thing
(2)
(3)
(4)
(5)
(6)
(7)
(8)
(9)
(10)
(11)
(12)
(13)
(14)
§
5.3.1.2
InteractionAffordance
(2)
§
5.3.1.3
PropertyAffordance
§
5.3.1.4
ActionAffordance
§
5.3.1.5
EventAffordance
§
5.3.2.1
DataSchema
(2)
(3)
§
5.3.2.2
ArraySchema
(2)
§
5.3.2.6
ObjectSchema
§
5.3.3.1
SecurityScheme
§
5.3.3.3
ComboSecurityScheme
(2)
§
5.3.3.9
OAuth2SecurityScheme
§
5.3.4.2
Form
(2)
(3)
(4)
§
5.4
Default
Value
Definitions
(2)
(3)
(4)
§
6.1
Mapping
to
JSON
Types
(2)
</del>
<a href="#ref-for-dfn-wot-td-server-1" title="§ 7.1 Overview">
§
7.1
<del class="diff-old">Semantic
Annotations
</del>
<ins class="diff-chg">Overview
</ins>
</a>
</li>
</ul>
</div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-wot-thing-description-directory" aria-label= "Links in this document to definition: Thing Description Directory">
<div>
<a class="self-link" href= "#dfn-wot-thing-description-directory" aria-label= "Permalink for definition: Thing Description Directory. Activate to close this dialog.">
Permalink
</a>
</div>
<p>
<b>
Referenced
in:
</b>
</p>
<ul>
<li>
<del class="diff-old">§
5.2
Preliminaries
(2)
(3)
(4)
(5)
(6)
§
5.3.1.1
Thing
(2)
(3)
(4)
(5)
(6)
(7)
(8)
(9)
(10)
(11)
(12)
(13)
(14)
(15)
(16)
(17)
§
5.3.1.2
InteractionAffordance
(2)
(3)
§
5.3.1.7
MultiLanguage
(2)
(3)
</del>
<a href="#ref-for-dfn-wot-thing-description-directory-1" title= "§ 6. Introduction Mechanisms">
§
<del class="diff-old">5.3.2.1
DataSchema
</del>
<ins class="diff-chg">6.
Introduction
Mechanisms
</ins>
</a>
<a href="#ref-for-dfn-wot-thing-description-directory-2" title= "Reference 2">
(2)
</a>
</li>
<li>
<del class="diff-old">§
5.3.2.6
ObjectSchema
§
5.3.3.1
SecurityScheme
</del>
<a href="#ref-for-dfn-wot-thing-description-directory-3" title= "§ 6.1 Direct">
§
6.1
<del class="diff-old">Mapping
to
JSON
Types
(2)
§
6.3.2
Human-Readable
Metadata
§
6.3.4
securityDefinitions
and
security
(2)
(3)
§
6.3.5
properties
(2)
(3)
§
6.3.6
actions
(2)
(3)
§
6.3.7
events
</del>
<ins class="diff-chg">Direct
</ins>
</a>
<a href= "#ref-for-dfn-wot-thing-description-directory-4" title= "Reference 2">
(2)
</a>
</li>
<li>
<del class="diff-old">§
7.
TD
Context
Extensions
§
11.3.2
Extension
and
Import
Permalink
Referenced
in:
</del>
<a href="#ref-for-dfn-wot-thing-description-directory-5" title= "§ 6.2 Well-Known URIs">
§
<del class="diff-old">3.
Terminology
</del>
<ins class="diff-chg">6.2
Well-Known
URIs
</ins>
</a>
<a href= "#ref-for-dfn-wot-thing-description-directory-6" title= "Reference 2">
(2)
</a>
</li>
<li>
<a href="#ref-for-dfn-wot-thing-description-directory-7" title= "§ 6.3 DNS-Based Service Discovery">
§
<del class="diff-old">5.2
Preliminaries
</del>
<ins class="diff-chg">6.3
DNS-Based
Service
Discovery
</ins>
</a>
<a href= "#ref-for-dfn-wot-thing-description-directory-8" title= "Reference 2">
(2)
</a>
<a href= "#ref-for-dfn-wot-thing-description-directory-9" title= "Reference 3">
(3)
</a>
<a href= "#ref-for-dfn-wot-thing-description-directory-10" title= "Reference 4">
(4)
</a>
<a href= "#ref-for-dfn-wot-thing-description-directory-11" title= "Reference 5">
(5)
</a>
<a href= "#ref-for-dfn-wot-thing-description-directory-12" title= "Reference 6">
(6)
</a>
<a href= "#ref-for-dfn-wot-thing-description-directory-13" title= "Reference 7">
(7)
</a>
<del class="diff-old">(8)
(9)
(10)
(11)
(12)
(13)
(14)
(15)
(16)
(17)
(18)
(19)
(20)
(21)
(22)
(23)
(24)
(25)
(26)
(27)
(28)
(29)
(30)
§
5.3
Class
Definitions
(2)
§
5.3.1.3
PropertyAffordance
(2)
</del>
</li>
<li>
<del class="diff-old">§
5.3.1.4
ActionAffordance
§
5.3.1.5
EventAffordance
§
5.3.1.6
VersionInfo
§
5.3.4.2
Form
§
5.4
Default
Value
Definitions
</del>
<a href="#ref-for-dfn-wot-thing-description-directory-14" title="§ 6.4 CoRE Link Format and CoRE Resource Directory">
§
<del class="diff-old">6.
TD
Representation
</del>
<ins class="diff-chg">6.4
CoRE
Link
</ins>
Format
<ins class="diff-new">and
CoRE
Resource
Directory
</ins>
</a>
<del class="diff-old">§
6.1
Mapping
to
JSON
Types
</del>
<a href= "#ref-for-dfn-wot-thing-description-directory-15" title= "Reference 2">
(2)
</a>
<a href= "#ref-for-dfn-wot-thing-description-directory-16" title= "Reference 3">
(3)
</a>
<del class="diff-old">(4)
</del>
</li>
<li>
<a href="#ref-for-dfn-wot-thing-description-directory-17" title="§ 6.5 DID Documents">
§
<del class="diff-old">6.3.1
Thing
Root
Object
</del>
<ins class="diff-chg">6.5
DID
Documents
</ins>
</a>
<a href= "#ref-for-dfn-wot-thing-description-directory-18" title= "Reference 2">
(2)
</a>
<a href= "#ref-for-dfn-wot-thing-description-directory-19" title= "Reference 3">
(3)
</a>
</li>
<li>
<del class="diff-old">§
6.3.6
actions
§
6.3.7
events
§
6.3.9.1
uriVariables
§
6.3.9.3
response
§
6.3.10
Data
Schemas
§
7.
TD
Context
Extensions
</del>
<a href="#ref-for-dfn-wot-thing-description-directory-20" title="§ 7.1 Overview">
§
7.1
<del class="diff-old">Semantic
Annotations
</del>
<ins class="diff-chg">Overview
</ins>
</a>
<a href= "#ref-for-dfn-wot-thing-description-directory-21" title= "Reference 2">
(2)
</a>
<del class="diff-old">(3)
(4)
(5)
(6)
</del>
</li>
<li>
<a href="#ref-for-dfn-wot-thing-description-directory-22" title="§ 7.3 Thing Description Directory">
§
7.3
<del class="diff-old">Adding
Security
Schemes
§
C.
JSON-LD
Context
Usage
Permalink
Referenced
in:
§
3.
Terminology
(2)
§
5.2
Preliminaries
(2)
(3)
(4)
(5)
(6)
(7)
(8)
§
6.3.1
</del>
Thing
<del class="diff-old">Root
Object
§
6.3.3
version
§
6.3.4
securityDefinitions
and
security
(2)
§
6.3.5
properties
§
6.3.6
actions
§
6.3.7
events
§
6.3.8
links
§
6.3.9
forms
</del>
<ins class="diff-chg">Description
Directory
</ins>
</a>
</li>
<li>
<a href="#ref-for-dfn-wot-thing-description-directory-23" title="§ 7.3.1 Information Model">
§
<del class="diff-old">6.3.10
Data
Schemas
(2)
</del>
<ins class="diff-chg">7.3.1
Information
Model
</ins>
</a>
</li>
<del class="diff-old">Permalink
Referenced
in:
</del>
<li>
<a href="#ref-for-dfn-wot-thing-description-directory-24" title="§ 7.3.1.1 Registration Information">
§
<del class="diff-old">5.2
Preliminaries
(2)
(3)
(4)
(5)
</del>
<ins class="diff-chg">7.3.1.1
Registration
Information
</ins>
</a>
</li>
<li>
<a href="#ref-for-dfn-wot-thing-description-directory-25" title="§ 11.3 CoRE Resource Types Registration">
§
<del class="diff-old">6.1
Mapping
to
JSON
</del>
<ins class="diff-chg">11.3
CoRE
Resource
</ins>
Types
<ins class="diff-new">Registration
</ins>
</a>
</li>
</ul>
</div>
<del class="diff-old">Permalink
Referenced
in:
§
5.2
Preliminaries
(2)
(3)
(4)
(5)
(6)
Permalink
Referenced
in:
§
5.2
Preliminaries
(2)
(3)
</del>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-wot-tdd" aria-label= "Links in this document to definition: TDD">
<div>
<a class="self-link" href="#dfn-wot-tdd" aria-label= "Permalink for definition: TDD. Activate to close this dialog.">
Permalink
</a>
</div>
<p>
<b>
Referenced
in:
</b>
</p>
<ul>
<li>
<del class="diff-old">§
3.
Terminology
</del>
<a href="#ref-for-dfn-wot-tdd-1" title= "§ A. JSON Schema for WoT Discovery TD-extensions">
§
<del class="diff-old">5.2
Preliminaries
Permalink
</del>
<ins class="diff-chg">A.
JSON
Schema
for
WoT
Discovery
TD-extensions
</ins>
</a>
<del class="diff-old">Referenced
in:
Not
referenced
in
this
document.
</del>
</li>
</ul>
</div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-wot-partial-thing-description" aria-label= "Links in this document to definition: Partial TD">
<div>
<a class="self-link" href="#dfn-wot-partial-thing-description" aria-label= "Permalink for definition: Partial TD. Activate to close this dialog.">
Permalink
</a>
</div>
<p>
<b>
Referenced
in:
</b>
</p>
<ul>
<li>
<del class="diff-old">§
5.3.1.3
PropertyAffordance
§
5.3.1.4
ActionAffordance
§
5.3.1.5
EventAffordance
§
5.3.2.2
ArraySchema
§
5.3.2.3
BooleanSchema
§
5.3.2.4
NumberSchema
§
5.3.2.5
IntegerSchema
§
5.3.2.6
ObjectSchema
§
5.3.2.7
StringSchema
§
5.3.2.8
NullSchema
</del>
<a href="#ref-for-dfn-wot-partial-thing-description-1" title= "§ 7.3.2.1.3 Update">
§
<del class="diff-old">6.3.4
securityDefinitions
and
security
(2)
(3)
</del>
<ins class="diff-chg">7.3.2.1.3
Update
</ins>
</a>
</li>
<li>
<a href="#ref-for-dfn-wot-partial-thing-description-2" title= "§ 7.3.2.2 Events API">
§
<del class="diff-old">6.3.10
Data
Schemas
</del>
<ins class="diff-chg">7.3.2.2
Events
API
</ins>
</a>
<a href= "#ref-for-dfn-wot-partial-thing-description-3" title= "Reference 2">
(2)
</a>
<del class="diff-old">(3)
(4)
§
7.3
Adding
Security
Schemes
</del>
</li>
</ul>
</div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-wot-enriched-thing-description" aria-label= "Links in this document to definition: Enriched TD">
<div>
<a class="self-link" href= "#dfn-wot-enriched-thing-description" aria-label= "Permalink for definition: Enriched TD. Activate to close this dialog.">
Permalink
</a>
</div>
<p>
<b>
Referenced
in:
</b>
</p>
<ul>
<li>
<del class="diff-old">§
3.
Terminology
(2)
§
5.1
Overview
§
5.2
Preliminaries
(2)
(3)
</del>
<a href="#ref-for-dfn-wot-enriched-thing-description-1" title= "§ 7.3.1 Information Model">
§
<del class="diff-old">5.3.4.2
Form
</del>
<ins class="diff-chg">7.3.1
Information
Model
</ins>
</a>
</li>
<li>
<a href="#ref-for-dfn-wot-enriched-thing-description-2" title= "§ 7.3.1.1 Registration Information">
§
<del class="diff-old">5.4
Default
Value
Definitions
</del>
<ins class="diff-chg">7.3.1.1
Registration
Information
</ins>
</a>
<a href= "#ref-for-dfn-wot-enriched-thing-description-3" title= "Reference 2">
(2)
</a>
<del class="diff-old">(3)
</del>
</li>
<li>
<del class="diff-old">§
6.2
Omitting
Default
Values
(2)
(3)
(4)
§
6.3.4
securityDefinitions
and
security
§
6.3.4.1
Multiple
Security
Definitions
</del>
<a href="#ref-for-dfn-wot-enriched-thing-description-4" title= "§ 7.3.2.1.2 Retrieval">
§
<del class="diff-old">8.3.1
Protocol
Binding
based
on
HTTP
</del>
<ins class="diff-chg">7.3.2.1.2
Retrieval
</ins>
</a>
<a href= "#ref-for-dfn-wot-enriched-thing-description-5" title= "Reference 2">
(2)
</a>
<del class="diff-old">(3)
</del>
</li>
<li>
<a href="#ref-for-dfn-wot-enriched-thing-description-6" title= "§ 7.3.2.1.6 Validation">
§
<del class="diff-old">8.3.2
Other
Protocol
Bindings
</del>
<ins class="diff-chg">7.3.2.1.6
Validation
</ins>
</a>
</li>
<li>
<a href="#ref-for-dfn-wot-enriched-thing-description-7" title= "§ A. JSON Schema for WoT Discovery TD-extensions">
§
<del class="diff-old">B.
</del>
<ins class="diff-chg">A.
</ins>
JSON
Schema
for
<del class="diff-old">TD
Instance
Validation
(2)
</del>
<ins class="diff-chg">WoT
Discovery
TD-extensions
</ins>
</a>
</li>
</ul>
</div>
<script id="respec-dfn-panel">
<![CDATA[ (() =>
{
//
@ts-check
if
(document.respec)
{
document.respec.ready.then(setupPanel);
}
else
{
setupPanel();
}
function
setupPanel()
{
const
listener
=
panelListener();
document.body.addEventListener("keydown",
listener);
document.body.addEventListener("click",
listener);
}
function
panelListener()
{
/**
@type
{HTMLElement}
*/
let
panel
=
null;
return
event
=>
{
const
{
target,
type
}
=
event;
if
(!(target
instanceof
HTMLElement))
return;
//
For
keys,
we
only
care
about
Enter
key
to
activate
the
panel
//
otherwise
it's
activated
via
a
click.
if
(type
===
"keydown"
&&
event.key
!==
"Enter")
return;
const
action
=
deriveAction(event);
switch
(action)
{
case
"show":
{
hidePanel(panel);
/**
@type
{HTMLElement}
*/
const
dfn
=
target.closest("dfn,
.index-term");
panel
=
document.getElementById(`dfn-panel-for-${dfn.id}`);
const
coords
=
deriveCoordinates(event);
displayPanel(dfn,
panel,
coords);
break;
}
case
"dock":
{
panel.style.left
=
null;
panel.style.top
=
null;
panel.classList.add("docked");
break;
}
case
"hide":
{
hidePanel(panel);
panel
=
null;
break;
}
}
};
}
/**
*
@param
{MouseEvent|KeyboardEvent}
event
*/
function
deriveCoordinates(event)
{
const
target
=
/**
@type
HTMLElement
*/
(event.target);
//
We
prevent
synthetic
AT
clicks
from
putting
//
the
dialog
in
a
weird
place.
The
AT
events
sometimes
//
lack
coordinates,
so
they
have
clientX/Y
=
0
const
rect
=
target.getBoundingClientRect();
if
(
event
instanceof
MouseEvent
&&
event.clientX
>
=
rect.left
&&
event.clientY
>
=
rect.top
)
{
//
The
event
probably
happened
inside
the
bounding
rect...
return
{
x:
event.clientX,
y:
event.clientY
};
}
//
Offset
to
the
middle
of
the
element
const
x
=
rect.x
+
rect.width
/
2;
//
Placed
at
the
bottom
of
the
element
const
y
=
rect.y
+
rect.height;
return
{
x,
y
};
}
/**
*
@param
{Event}
event
*/
function
deriveAction(event)
{
const
target
=
/**
@type
{HTMLElement}
*/
(event.target);
const
hitALink
=
!!target.closest("a");
if
(target.closest("dfn:not([data-cite]),
.index-term"))
{
return
hitALink
?
"none"
:
"show";
}
if
(target.closest(".dfn-panel"))
{
if
(hitALink)
{
return
target.classList.contains("self-link")
?
"hide"
:
"dock";
}
const
panel
=
target.closest(".dfn-panel");
return
panel.classList.contains("docked")
?
"hide"
:
"none";
}
if
(document.querySelector(".dfn-panel:not([hidden])"))
{
return
"hide";
}
return
"none";
}
/**
*
@param
{HTMLElement}
dfn
*
@param
{HTMLElement}
panel
*
@param
{{
x:
number,
y:
number
}}
clickPosition
*/
function
displayPanel(dfn,
panel,
{
x,
y
})
{
panel.hidden
=
false;
//
distance
(px)
between
edge
of
panel
and
the
pointing
triangle
(caret)
const
MARGIN
=
20;
const
dfnRects
=
dfn.getClientRects();
//
Find
the
`top`
offset
when
the
`dfn`
can
be
spread
across
multiple
lines
let
closestTop
=
0;
let
minDiff
=
Infinity;
for
(const
rect
of
dfnRects)
{
const
{
top,
bottom
}
=
rect;
const
diffFromClickY
=
Math.abs((top
+
bottom)
/
2
-
y);
if
(diffFromClickY
< minDiff) { minDiff = diffFromClickY; closestTop = top; } } const top = window.scrollY + closestTop + dfnRects[0].height; const left = x - MARGIN; panel.style.left = `${left}px`; panel.style.top = `${top}px`; // Find if the panel is flowing out of the window const panelRect = panel.getBoundingClientRect(); const SCREEN_WIDTH = Math.min(window.innerWidth, window.screen.width); if (panelRect.right >
SCREEN_WIDTH)
{
const
newLeft
=
Math.max(MARGIN,
x
+
MARGIN
-
panelRect.width);
const
newCaretOffset
=
left
-
newLeft;
panel.style.left
=
`${newLeft}px`;
/**
@type
{HTMLElement}
*/
const
caret
=
panel.querySelector(".caret");
caret.style.left
=
`${newCaretOffset}px`;
}
//
As
it's
a
dialog,
we
trap
focus.
//
TODO:
when
<dialog>
becomes
a
implemented,
we
should
really
//
use
that.
trapFocus(panel,
dfn);
}
/**
*
@param
{HTMLElement}
panel
*
@param
{HTMLElement}
dfn
*
@returns
*/
function
trapFocus(panel,
dfn)
{
/**
@type
NodeListOf
<HTMLAnchorElement>
elements
*/
const
anchors
=
panel.querySelectorAll("a[href]");
//
No
need
to
trap
focus
if
(!anchors.length)
return;
//
Move
focus
to
first
anchor
element
const
first
=
anchors.item(0);
first.focus();
const
trapListener
=
createTrapListener(anchors,
panel,
dfn);
panel.addEventListener("keydown",
trapListener);
//
Hiding
the
panel
releases
the
trap
const
mo
=
new
MutationObserver(records
=>
{
const
[record]
=
records;
const
target
=
/**
@type
HTMLElement
*/
(record.target);
if
(target.hidden)
{
panel.removeEventListener("keydown",
trapListener);
mo.disconnect();
}
});
mo.observe(panel,
{
attributes:
true,
attributeFilter:
["hidden"]
});
}
/**
*
*
@param
{NodeListOf
<HTMLAnchorElement>
}
anchors
*
@param
{HTMLElement}
panel
*
@param
{HTMLElement}
dfn
*
@returns
*/
function
createTrapListener(anchors,
panel,
dfn)
{
const
lastIndex
=
anchors.length
-
1;
let
currentIndex
=
0;
return
event
=>
{
switch
(event.key)
{
//
Hitting
"Tab"
traps
us
in
a
nice
loop
around
elements.
case
"Tab":
{
event.preventDefault();
currentIndex
+=
event.shiftKey
?
-1
:
+1;
if
(currentIndex
< 0) { currentIndex = lastIndex; } else if (currentIndex >
lastIndex)
{
currentIndex
=
0;
}
anchors.item(currentIndex).focus();
break;
}
//
Hitting
"Enter"
on
an
anchor
releases
the
trap.
case
"Enter":
hidePanel(panel);
break;
//
Hitting
"Escape"
returns
focus
to
dfn.
case
"Escape":
hidePanel(panel);
dfn.focus();
return;
}
};
}
/**
@param
{HTMLElement}
panel
*/
function
hidePanel(panel)
{
if
(!panel)
return;
panel.hidden
=
true;
panel.classList.remove("docked");
}
})()
]]>
</script>
<script src="https://www.w3.org/scripts/TR/2021/fixup.js">
</script>
</body>
</html>
