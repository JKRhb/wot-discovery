<!DOCTYPE html>
<html lang="en-US" xmlns="http://www.w3.org/1999/xhtml" xml:lang=
"en-US">
<head>
<meta name="generator" content=
"HTML Tidy for HTML5 for Linux version 5.7.27" />
<meta charset="utf-8" />
<meta name="generator" content="ReSpec 34.1.4" />
<meta name="viewport" content=
"width=device-width, initial-scale=1, shrink-to-fit=no" />
<style>
<![CDATA[
  span.example-title{text-transform:none}
  :is(aside,div).example,div.illegal-example{padding:.5em;margin:1em 0;position:relative;clear:both}
  div.illegal-example{color:red}
  div.illegal-example p{color:#000}
  :is(aside,div).example{border-left-width:.5em;border-left-style:solid;border-color:#e0cb52;background:#fcfaee}
  aside.example div.example{border-left-width:.1em;border-color:#999;background:#fff}
  .example pre{background-color:rgba(0,0,0,.03)}
]]>
</style>

<style>
<![CDATA[
  .issue-label{text-transform:initial}
  .warning>p:first-child{margin-top:0}
  .warning{padding:.5em;border-left-width:.5em;border-left-style:solid}
  span.warning{padding:.1em .5em .15em}
  .issue.closed span.issue-number{text-decoration:line-through}
  .issue.closed span.issue-number::after{content:" (Closed)";font-size:smaller}
  .warning{border-color:#f11;border-width:.2em;border-style:solid;background:#fbe9e9}
  .warning-title:before{content:"⚠";font-size:1.3em;float:left;padding-right:.3em;margin-top:-.3em}
  li.task-list-item{list-style:none}
  input.task-list-item-checkbox{margin:0 .35em .25em -1.6em;vertical-align:middle}
  .issue a.respec-gh-label{padding:5px;margin:0 2px 0 2px;font-size:10px;text-transform:none;text-decoration:none;font-weight:700;border-radius:4px;position:relative;bottom:2px;border:none;display:inline-block}
]]>
</style>

<style>
<![CDATA[
  dfn{cursor:pointer}
  .dfn-panel{position:absolute;z-index:35;min-width:300px;max-width:500px;padding:.5em .75em;margin-top:.6em;font-family:"Helvetica Neue",sans-serif;font-size:small;background:#fff;color:#000;box-shadow:0 1em 3em -.4em rgba(0,0,0,.3),0 0 1px 1px rgba(0,0,0,.05);border-radius:2px}
  .dfn-panel:not(.docked)>.caret{position:absolute;top:-9px}
  .dfn-panel:not(.docked)>.caret::after,.dfn-panel:not(.docked)>.caret::before{content:"";position:absolute;border:10px solid transparent;border-top:0;border-bottom:10px solid #fff;top:0}
  .dfn-panel:not(.docked)>.caret::before{border-bottom:9px solid #a2a9b1}
  .dfn-panel *{margin:0}
  .dfn-panel b{display:block;color:#000;margin-top:.25em}
  .dfn-panel ul a[href]{color:#333}
  .dfn-panel>div{display:flex}
  .dfn-panel a.self-link{font-weight:700;margin-right:auto}
  .dfn-panel .marker{padding:.1em;margin-left:.5em;border-radius:.2em;text-align:center;white-space:nowrap;font-size:90%;color:#040b1c}
  .dfn-panel .marker.dfn-exported{background:#d1edfd;box-shadow:0 0 0 .125em #1ca5f940}
  .dfn-panel .marker.idl-block{background:#8ccbf2;box-shadow:0 0 0 .125em #0670b161}
  .dfn-panel a:not(:hover){text-decoration:none!important;border-bottom:none!important}
  .dfn-panel a[href]:hover{border-bottom-width:1px}
  .dfn-panel ul{padding:0}
  .dfn-panel li{margin-left:1em}
  .dfn-panel.docked{position:fixed;left:.5em;top:unset;bottom:2em;margin:0 auto;max-width:calc(100vw - .75em * 2 - .5em - .2em * 2);max-height:30vh;overflow:auto}
]]>
</style>
<title>Web of Things (WoT) Discovery</title>

<style type="text/css">
/*<![CDATA[*/

  a[href].internalDFN {
        color: inherit;
        border-bottom: 1px solid #99c;
        text-decoration: none;
  }
  img.wot-diagram {
    max-width: 90%;
    height: auto;
  }
  .rfc2119-assertion {
  background-color: rgb(230,230,230)
  }

/*]]>*/
</style>

<style id="respec-mainstyle">
<![CDATA[
  @keyframes pop{
  0%{transform:scale(1,1)}
  25%{transform:scale(1.25,1.25);opacity:.75}
  100%{transform:scale(1,1)}
  }
  :is(h1,h2,h3,h4,h5,h6,a) abbr{border:none}
  dfn{font-weight:700}
  a.internalDFN{color:inherit;border-bottom:1px solid #99c;text-decoration:none}
  a.externalDFN{color:inherit;border-bottom:1px dotted #ccc;text-decoration:none}
  a.bibref{text-decoration:none}
  .respec-offending-element:target{animation:pop .25s ease-in-out 0s 1}
  .respec-offending-element,a[href].respec-offending-element{text-decoration:red wavy underline}
  @supports not (text-decoration:red wavy underline){
  .respec-offending-element:not(pre){display:inline-block}
  .respec-offending-element{background:url(data:image/gif;base64,R0lGODdhBAADAPEAANv///8AAP///wAAACwAAAAABAADAEACBZQjmIAFADs=) bottom repeat-x}
  }
  #references :target{background:#eaf3ff;animation:pop .4s ease-in-out 0s 1}
  cite .bibref{font-style:normal}
  a[href].orcid{padding-left:4px;padding-right:4px}
  a[href].orcid>svg{margin-bottom:-2px}
  .toc a,.tof a{text-decoration:none}
  a .figno,a .secno{color:#000}
  ol.tof,ul.tof{list-style:none outside none}
  .caption{margin-top:.5em;font-style:italic}
  table.simple{border-spacing:0;border-collapse:collapse;border-bottom:3px solid #005a9c}
  .simple th{background:#005a9c;color:#fff;padding:3px 5px;text-align:left}
  .simple th a{color:#fff;padding:3px 5px;text-align:left}
  .simple th[scope=row]{background:inherit;color:inherit;border-top:1px solid #ddd}
  .simple td{padding:3px 10px;border-top:1px solid #ddd}
  .simple tr:nth-child(even){background:#f0f6ff}
  .section dd>p:first-child{margin-top:0}
  .section dd>p:last-child{margin-bottom:0}
  .section dd{margin-bottom:1em}
  .section dl.attrs dd,.section dl.eldef dd{margin-bottom:0}
  #issue-summary>ul{column-count:2}
  #issue-summary li{list-style:none;display:inline-block}
  details.respec-tests-details{margin-left:1em;display:inline-block;vertical-align:top}
  details.respec-tests-details>*{padding-right:2em}
  details.respec-tests-details[open]{z-index:999999;position:absolute;border:thin solid #cad3e2;border-radius:.3em;background-color:#fff;padding-bottom:.5em}
  details.respec-tests-details[open]>summary{border-bottom:thin solid #cad3e2;padding-left:1em;margin-bottom:1em;line-height:2em}
  details.respec-tests-details>ul{width:100%;margin-top:-.3em}
  details.respec-tests-details>li{padding-left:1em}
  .self-link:hover{opacity:1;text-decoration:none;background-color:transparent}
  aside.example .marker>a.self-link{color:inherit}
  .header-wrapper{display:flex;align-items:baseline}
  :is(h2,h3,h4,h5,h6):not(#toc>h2,#abstract>h2,#sotd>h2,.head>h2){position:relative;left:-.5em}
  :is(h2,h3,h4,h5,h6):not(#toch2)+a.self-link{color:inherit;order:-1;position:relative;left:-1.1em;font-size:1rem;opacity:.5}
  :is(h2,h3,h4,h5,h6)+a.self-link::before{content:"§";text-decoration:none;color:var(--heading-text)}
  :is(h2,h3)+a.self-link{top:-.2em}
  :is(h4,h5,h6)+a.self-link::before{color:#000}
  @media (max-width:767px){
  dd{margin-left:0}
  }
  @media print{
  .removeOnSave{display:none}
  }
]]>
</style>
<meta name="description" content=
"The W3C Web of Things (WoT) is intended to enable interoperability across IoT platforms and application domains. One key mechanism for accomplishing this goal is the definition and use of metadata describing the interactions an IoT device or service makes available over the network at a suitable level of abstraction. The WoT Thing Description specification satisfies this objective." />
<link rel="canonical" href=
"https://www.w3.org/TR/wot-discovery/" />
<script type="application/ld+json">
<![CDATA[
  {
  "@context": [
    "http://schema.org",
    {
      "@vocab": "http://schema.org/",
      "@language": "en-US",
      "w3p": "http://www.w3.org/2001/02pd/rec54#",
      "foaf": "http://xmlns.com/foaf/0.1/",
      "datePublished": {
        "@type": "http://www.w3.org/2001/XMLSchema#date"
      },
      "inLanguage": {
        "@language": null
      },
      "isBasedOn": {
        "@type": "@id"
      },
      "license": {
        "@type": "@id"
      }
    }
  ],
  "id": "https://www.w3.org/TR/wot-discovery/",
  "type": [
    "TechArticle",
    "w3p:PR"
  ],
  "name": "Web of Things (WoT) Discovery",
  "inLanguage": "en-US",
  "license": "https://www.w3.org/Consortium/Legal/2023/software-license",
  "datePublished": "2023-07-11",
  "copyrightHolder": {
    "name": "World Wide Web Consortium",
    "url": "https://www.w3.org/"
  },
  "discussionUrl": "https://github.com/w3c/wot-discovery/issues/",
  "alternativeHeadline": "",
  "isBasedOn": "https://www.w3.org/TR/2023/CR-wot-discovery-20230119/",
  "description": "The W3C Web of Things (WoT) is intended to enable\n           interoperability across IoT platforms and application\n           domains.  One key mechanism for accomplishing this goal\n           is the definition and use of metadata describing the\n           interactions an IoT device or service makes available\n           over the network at a suitable level of abstraction.  \n           The WoT Thing Description specification satisfies this objective.",
  "editor": [
    {
      "type": "Person",
      "name": "Andrea Cimmino",
      "worksFor": {
        "name": "Universidad Politécnica de Madrid",
        "url": "https://www.upm.es/"
      }
    },
    {
      "type": "Person",
      "name": "Michael McCool",
      "worksFor": {
        "name": "Intel Corp.",
        "url": "https://www.intel.com/"
      }
    },
    {
      "type": "Person",
      "name": "Farshid Tavakolizadeh",
      "worksFor": {
        "name": "Invited Expert"
      }
    },
    {
      "type": "Person",
      "name": "Kunihiko Toumura",
      "worksFor": {
        "name": "Hitachi, Ltd.",
        "url": "https://www.hitachi.com/"
      }
    }
  ],
  "contributor": [],
  "citation": [
    {
      "id": "https://www.w3.org/TR/wot-architecture11/",
      "type": "TechArticle",
      "name": "Web of Things (WoT) Architecture 1.1",
      "url": "https://www.w3.org/TR/wot-architecture11/",
      "creator": [
        {
          "name": "Michael Lagally"
        },
        {
          "name": "Ryuichi Matsukura"
        },
        {
          "name": "Michael McCool"
        },
        {
          "name": "Kunihiko Toumura"
        }
      ],
      "publisher": {
        "name": "W3C"
      }
    },
    {
      "id": "https://www.w3.org/TR/wot-thing-description11/",
      "type": "TechArticle",
      "name": "Web of Things (WoT) Thing Description 1.1",
      "url": "https://www.w3.org/TR/wot-thing-description11/",
      "creator": [
        {
          "name": "Sebastian Käbisch"
        },
        {
          "name": "Michael McCool"
        },
        {
          "name": "Ege Korkan"
        }
      ],
      "publisher": {
        "name": "W3C"
      }
    },
    {
      "id": "https://dl.acm.org/doi/10.1145/2991561.2991570",
      "type": "TechArticle",
      "name": "A Categorization of Discovery Technologies for the Internet of Things",
      "url": "https://dl.acm.org/doi/10.1145/2991561.2991570",
      "creator": [
        {
          "name": "Arne Broering"
        },
        {
          "name": "Soumya Kanti Datta"
        },
        {
          "name": "Christian Bonnet"
        }
      ],
      "publisher": {
        "name": "Association of Computing Machinery (ACM): IoT'16 Proceedings"
      }
    },
    {
      "id": "https://www.w3.org/TR/sparql11-overview/",
      "type": "TechArticle",
      "name": "SPARQL 1.1 Overview",
      "url": "https://www.w3.org/TR/sparql11-overview/",
      "creator": [
        {
          "name": "The W3C SPARQL Working Group"
        }
      ],
      "publisher": {
        "name": "W3C"
      }
    },
    {
      "id": "https://w3c.github.io/wot-usecases/",
      "type": "TechArticle",
      "name": "Web of Things (WoT): Use Cases",
      "url": "https://w3c.github.io/wot-usecases/",
      "creator": [
        {
          "name": "Michael Lagally"
        },
        {
          "name": "Michael McCool"
        },
        {
          "name": "Ryuichi Matsukura"
        },
        {
          "name": "Tomoaki Mizushima"
        }
      ],
      "publisher": {
        "name": "W3C"
      }
    },
    {
      "id": "https://www.rfc-editor.org/rfc/rfc8615",
      "type": "TechArticle",
      "name": "Well-Known Uniform Resource Identifiers (URIs)",
      "url": "https://www.rfc-editor.org/rfc/rfc8615",
      "creator": [
        {
          "name": "M. Nottingham"
        }
      ],
      "publisher": {
        "name": "IETF"
      }
    },
    {
      "id": "https://www.rfc-editor.org/rfc/rfc6763",
      "type": "TechArticle",
      "name": "DNS-Based Service Discovery",
      "url": "https://www.rfc-editor.org/rfc/rfc6763",
      "creator": [
        {
          "name": "S. Cheshire"
        },
        {
          "name": "M. Krochmal"
        }
      ],
      "publisher": {
        "name": "IETF"
      }
    },
    {
      "id": "https://www.rfc-editor.org/rfc/rfc6762",
      "type": "TechArticle",
      "name": "Multicast DNS",
      "url": "https://www.rfc-editor.org/rfc/rfc6762",
      "creator": [
        {
          "name": "S. Cheshire"
        },
        {
          "name": "M. Krochmal"
        }
      ],
      "publisher": {
        "name": "IETF"
      }
    },
    {
      "id": "https://www.rfc-editor.org/rfc/rfc7595",
      "type": "TechArticle",
      "name": "Guidelines and Registration Procedures for URI Schemes",
      "url": "https://www.rfc-editor.org/rfc/rfc7595",
      "creator": [
        {
          "name": "D. Thaler, Ed."
        },
        {
          "name": "T. Hansen"
        },
        {
          "name": "T. Hardie"
        }
      ],
      "publisher": {
        "name": "IETF"
      }
    },
    {
      "id": "https://www.rfc-editor.org/rfc/rfc6690",
      "type": "TechArticle",
      "name": "Constrained RESTful Environments (CoRE) Link Format",
      "url": "https://www.rfc-editor.org/rfc/rfc6690",
      "creator": [
        {
          "name": "Z. Shelby"
        }
      ],
      "publisher": {
        "name": "IETF"
      }
    },
    {
      "id": "https://www.rfc-editor.org/rfc/rfc9176",
      "type": "TechArticle",
      "name": "Constrained RESTful Environments (CoRE) Resource Directory",
      "url": "https://www.rfc-editor.org/rfc/rfc9176",
      "creator": [
        {
          "name": "C. Amsüss, Ed."
        },
        {
          "name": "Z. Shelby"
        },
        {
          "name": "M. Koster"
        },
        {
          "name": "C. Bormann"
        },
        {
          "name": "P. van der Stok"
        }
      ],
      "publisher": {
        "name": "IETF"
      }
    },
    {
      "id": "https://www.w3.org/TR/did-core/",
      "type": "TechArticle",
      "name": "Decentralized Identifiers (DIDs) v1.0",
      "url": "https://www.w3.org/TR/did-core/",
      "creator": [
        {
          "name": "Manu Sporny"
        },
        {
          "name": "Amy Guy"
        },
        {
          "name": "Markus Sabadello"
        },
        {
          "name": "Drummond Reed"
        }
      ],
      "publisher": {
        "name": "W3C"
      }
    },
    {
      "id": "https://www.w3.org/TR/did-spec-registries/",
      "type": "TechArticle",
      "name": "DID Specification Registries",
      "url": "https://www.w3.org/TR/did-spec-registries/",
      "creator": [
        {
          "name": "Orie Steele"
        },
        {
          "name": "Manu Sporny"
        },
        {
          "name": "Michael Prorock"
        }
      ],
      "publisher": {
        "name": "W3C"
      }
    },
    {
      "id": "https://www.w3.org/TR/json-ld11/",
      "type": "TechArticle",
      "name": "JSON-LD 1.1",
      "url": "https://www.w3.org/TR/json-ld11/",
      "creator": [
        {
          "name": "Gregg Kellogg"
        },
        {
          "name": "Pierre-Antoine Champin"
        },
        {
          "name": "Dave Longley"
        }
      ],
      "publisher": {
        "name": "W3C"
      }
    },
    {
      "id": "https://www.rfc-editor.org/rfc/rfc7959",
      "type": "TechArticle",
      "name": "Block-Wise Transfers in the Constrained Application Protocol (CoAP)",
      "url": "https://www.rfc-editor.org/rfc/rfc7959",
      "creator": [
        {
          "name": "C. Bormann"
        },
        {
          "name": "Z. Shelby, Ed."
        }
      ],
      "publisher": {
        "name": "IETF"
      }
    },
    {
      "id": "https://www.rfc-editor.org/rfc/rfc3339",
      "type": "TechArticle",
      "name": "Date and Time on the Internet: Timestamps",
      "url": "https://www.rfc-editor.org/rfc/rfc3339",
      "creator": [
        {
          "name": "G. Klyne"
        },
        {
          "name": "C. Newman"
        }
      ],
      "publisher": {
        "name": "IETF"
      }
    },
    {
      "id": "https://www.rfc-editor.org/rfc/rfc4122",
      "type": "TechArticle",
      "name": "A Universally Unique IDentifier (UUID) URN Namespace",
      "url": "https://www.rfc-editor.org/rfc/rfc4122",
      "creator": [
        {
          "name": "P. Leach"
        },
        {
          "name": "M. Mealling"
        },
        {
          "name": "R. Salz"
        }
      ],
      "publisher": {
        "name": "IETF"
      }
    },
    {
      "id": "https://www.rfc-editor.org/rfc/rfc7807",
      "type": "TechArticle",
      "name": "Problem Details for HTTP APIs",
      "url": "https://www.rfc-editor.org/rfc/rfc7807",
      "creator": [
        {
          "name": "M. Nottingham"
        },
        {
          "name": "E. Wilde"
        }
      ],
      "publisher": {
        "name": "IETF"
      }
    },
    {
      "id": "https://httpwg.org/specs/rfc7231.html",
      "type": "TechArticle",
      "name": "Hypertext Transfer Protocol (HTTP/1.1): Semantics and Content",
      "url": "https://httpwg.org/specs/rfc7231.html",
      "creator": [
        {
          "name": "R. Fielding, Ed."
        },
        {
          "name": "J. Reschke, Ed."
        }
      ],
      "publisher": {
        "name": "IETF"
      }
    },
    {
      "id": "https://www.rfc-editor.org/rfc/rfc1738",
      "type": "TechArticle",
      "name": "Uniform Resource Locators (URL)",
      "url": "https://www.rfc-editor.org/rfc/rfc1738",
      "creator": [
        {
          "name": "T. Berners-Lee"
        },
        {
          "name": "L. Masinter"
        },
        {
          "name": "M. McCahill"
        }
      ],
      "publisher": {
        "name": "IETF"
      }
    },
    {
      "id": "https://www.rfc-editor.org/rfc/rfc7396",
      "type": "TechArticle",
      "name": "JSON Merge Patch",
      "url": "https://www.rfc-editor.org/rfc/rfc7396",
      "creator": [
        {
          "name": "P. Hoffman"
        },
        {
          "name": "J. Snell"
        }
      ],
      "publisher": {
        "name": "IETF"
      }
    },
    {
      "id": "https://httpwg.org/specs/rfc8288.html",
      "type": "TechArticle",
      "name": "Web Linking",
      "url": "https://httpwg.org/specs/rfc8288.html",
      "creator": [
        {
          "name": "M. Nottingham"
        }
      ],
      "publisher": {
        "name": "IETF"
      }
    },
    {
      "id": "https://html.spec.whatwg.org/multipage/",
      "type": "TechArticle",
      "name": "HTML Standard",
      "url": "https://html.spec.whatwg.org/multipage/",
      "creator": [
        {
          "name": "Anne van Kesteren"
        },
        {
          "name": "Domenic Denicola"
        },
        {
          "name": "Ian Hickson"
        },
        {
          "name": "Philip Jägenstedt"
        },
        {
          "name": "Simon Pieters"
        }
      ],
      "publisher": {
        "name": "WHATWG"
      }
    },
    {
      "id": "https://www.w3.org/TR/xpath-31/",
      "type": "TechArticle",
      "name": "XML Path Language (XPath) 3.1",
      "url": "https://www.w3.org/TR/xpath-31/",
      "creator": [
        {
          "name": "Jonathan Robie"
        },
        {
          "name": "Michael Dyck"
        },
        {
          "name": "Josh Spiegel"
        }
      ],
      "publisher": {
        "name": "W3C"
      }
    },
    {
      "id": "https://owasp.org/www-project-top-ten/",
      "type": "TechArticle",
      "name": "OWASP Top Ten",
      "url": "https://owasp.org/www-project-top-ten/",
      "publisher": {
        "name": "OWASP"
      }
    },
    {
      "id": "https://datatracker.ietf.org/doc/html/draft-irtf-t2trg-amplification-attacks",
      "type": "TechArticle",
      "name": "Amplification Attacks Using the Constrained Application Protocol (CoAP)",
      "url": "https://datatracker.ietf.org/doc/html/draft-irtf-t2trg-amplification-attacks",
      "creator": [
        {
          "name": "John Preuß Mattsson"
        },
        {
          "name": "Göran Selander"
        },
        {
          "name": "Christian Amsüss"
        }
      ],
      "publisher": {
        "name": "IETF"
      }
    },
    {
      "id": "https://www.rfc-editor.org/rfc/rfc9000",
      "type": "TechArticle",
      "name": "QUIC: A UDP-Based Multiplexed and Secure Transport",
      "url": "https://www.rfc-editor.org/rfc/rfc9000",
      "creator": [
        {
          "name": "J. Iyengar, Ed."
        },
        {
          "name": "M. Thomson, Ed."
        }
      ],
      "publisher": {
        "name": "IETF"
      }
    },
    {
      "id": "https://www.rfc-editor.org/rfc/rfc4279",
      "type": "TechArticle",
      "name": "Pre-Shared Key Ciphersuites for Transport Layer Security (TLS)",
      "url": "https://www.rfc-editor.org/rfc/rfc4279",
      "creator": [
        {
          "name": "P. Eronen, Ed."
        },
        {
          "name": "H. Tschofenig, Ed."
        }
      ],
      "publisher": {
        "name": "IETF"
      }
    },
    {
      "id": "https://gdpr-info.eu/art-4-gdpr/",
      "type": "TechArticle",
      "name": "General Data Protection Regulation (GDPR) Article 4 - Definitions",
      "url": "https://gdpr-info.eu/art-4-gdpr/",
      "publisher": {
        "name": "European Union (EU) and the European Economic Area (EEA)"
      }
    },
    {
      "id": "https://www.rfc-editor.org/rfc/rfc8981",
      "type": "TechArticle",
      "name": "Temporary Address Extensions for Stateless Address Autoconfiguration in IPv6",
      "url": "https://www.rfc-editor.org/rfc/rfc8981",
      "creator": [
        {
          "name": "F. Gont"
        },
        {
          "name": "S. Krishnan"
        },
        {
          "name": "T. Narten"
        },
        {
          "name": "R. Draves"
        }
      ],
      "publisher": {
        "name": "IETF"
      }
    },
    {
      "id": "https://www.rfc-editor.org/rfc/rfc6335",
      "type": "TechArticle",
      "name": "Internet Assigned Numbers Authority (IANA) Procedures for the Management of the Service Name and Transport Protocol Port Number Registry",
      "url": "https://www.rfc-editor.org/rfc/rfc6335",
      "creator": [
        {
          "name": "M. Cotton"
        },
        {
          "name": "L. Eggert"
        },
        {
          "name": "J. Touch"
        },
        {
          "name": "M. Westerlund"
        },
        {
          "name": "S. Cheshire"
        }
      ],
      "publisher": {
        "name": "IETF"
      }
    },
    {
      "id": "https://www.rfc-editor.org/rfc/rfc2119",
      "type": "TechArticle",
      "name": "Key words for use in RFCs to Indicate Requirement Levels",
      "url": "https://www.rfc-editor.org/rfc/rfc2119",
      "creator": [
        {
          "name": "S. Bradner"
        }
      ],
      "publisher": {
        "name": "IETF"
      }
    },
    {
      "id": "https://www.rfc-editor.org/rfc/rfc8174",
      "type": "TechArticle",
      "name": "Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words",
      "url": "https://www.rfc-editor.org/rfc/rfc8174",
      "creator": [
        {
          "name": "B. Leiba"
        }
      ],
      "publisher": {
        "name": "IETF"
      }
    },
    {
      "id": "https://datatracker.ietf.org/doc/html/draft-irtf-t2trg-rest-iot-06",
      "type": "TechArticle",
      "name": "RESTful Design for Internet of Things Systems",
      "url": "https://datatracker.ietf.org/doc/html/draft-irtf-t2trg-rest-iot-06",
      "creator": [
        {
          "name": "Ari Keranen"
        },
        {
          "name": "Matthias Kovatsch"
        },
        {
          "name": "Klaus Hartke"
        }
      ],
      "publisher": {
        "name": "IETF"
      }
    },
    {
      "id": "https://www.w3.org/TR/ldp-paging/",
      "type": "TechArticle",
      "name": "Linked Data Platform Paging 1.0",
      "url": "https://www.w3.org/TR/ldp-paging/",
      "creator": [
        {
          "name": "Steve Speicher"
        },
        {
          "name": "John Arwe"
        },
        {
          "name": "Ashok Malhotra"
        }
      ],
      "publisher": {
        "name": "W3C"
      }
    },
    {
      "id": "https://datatracker.ietf.org/doc/html/draft-ietf-jsonpath-base",
      "type": "TechArticle",
      "name": "JSONPath: Query expressions for JSON",
      "url": "https://datatracker.ietf.org/doc/html/draft-ietf-jsonpath-base",
      "creator": [
        {
          "name": "Stefan Gössner"
        },
        {
          "name": "Glyn Normington"
        },
        {
          "name": "Carsten Bormann"
        }
      ],
      "publisher": {
        "name": "IETF"
      }
    },
    {
      "id": "https://www.w3.org/TR/wot-security/",
      "type": "TechArticle",
      "name": "Web of Things (WoT) Security and Privacy Guidelines",
      "url": "https://www.w3.org/TR/wot-security/",
      "creator": [
        {
          "name": "Elena Reshetova"
        },
        {
          "name": "Michael McCool"
        }
      ],
      "publisher": {
        "name": "W3C"
      }
    },
    {
      "id": "https://httpwg.org/specs/rfc7230.html",
      "type": "TechArticle",
      "name": "Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing",
      "url": "https://httpwg.org/specs/rfc7230.html",
      "creator": [
        {
          "name": "R. Fielding, Ed."
        },
        {
          "name": "J. Reschke, Ed."
        }
      ],
      "publisher": {
        "name": "IETF"
      }
    },
    {
      "id": "https://httpwg.org/specs/rfc7540.html",
      "type": "TechArticle",
      "name": "Hypertext Transfer Protocol Version 2 (HTTP/2)",
      "url": "https://httpwg.org/specs/rfc7540.html",
      "creator": [
        {
          "name": "M. Belshe"
        },
        {
          "name": "R. Peon"
        },
        {
          "name": "M. Thomson, Ed."
        }
      ],
      "publisher": {
        "name": "IETF"
      }
    },
    {
      "id": "https://www.rfc-editor.org/rfc/rfc8323",
      "type": "TechArticle",
      "name": "CoAP (Constrained Application Protocol) over TCP, TLS, and WebSockets",
      "url": "https://www.rfc-editor.org/rfc/rfc8323",
      "creator": [
        {
          "name": "C. Bormann"
        },
        {
          "name": "S. Lemay"
        },
        {
          "name": "H. Tschofenig"
        },
        {
          "name": "K. Hartke"
        },
        {
          "name": "B. Silverajan"
        },
        {
          "name": "B. Raymor, Ed."
        }
      ],
      "publisher": {
        "name": "IETF"
      }
    }
  ]
  }
]]>
</script>
<style>
<![CDATA[
  .hljs{display:block;overflow-x:auto;padding:.5em;color:#383a42;background:#fafafa}
  .hljs-comment,.hljs-quote{color:#717277;font-style:italic}
  .hljs-doctag,.hljs-formula,.hljs-keyword{color:#a626a4}
  .hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#ca4706;font-weight:700}
  .hljs-literal{color:#0b76c5}
  .hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#42803c}
  .hljs-built_in,.hljs-class .hljs-title{color:#9a6a01}
  .hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#986801}
  .hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#336ae3}
  .hljs-emphasis{font-style:italic}
  .hljs-strong{font-weight:700}
  .hljs-link{text-decoration:underline}
]]>
</style>

<style>
<![CDATA[
  var{position:relative;cursor:pointer}
  var[data-type]::after,var[data-type]::before{position:absolute;left:50%;top:-6px;opacity:0;transition:opacity .4s;pointer-events:none}
  var[data-type]::before{content:"";transform:translateX(-50%);border-width:4px 6px 0 6px;border-style:solid;border-color:transparent;border-top-color:#000}
  var[data-type]::after{content:attr(data-type);transform:translateX(-50%) translateY(-100%);background:#000;text-align:center;font-family:"Dank Mono","Fira Code",monospace;font-style:normal;padding:6px;border-radius:3px;color:#daca88;text-indent:0;font-weight:400}
  var[data-type]:hover::after,var[data-type]:hover::before{opacity:1}
]]>
</style>

<script id="initialUserConfig" type="application/json">
<![CDATA[
  {
  "lint": {
    "check-punctuation": true,
    "local-refs-exist": true,
    "no-http-props": true,
    "no-headingless-sections": true,
    "no-unused-dfns": false
  },
  "doJsonLd": true,
  "noLegacyStyle": true,
  "inlineCSS": true,
  "noIDLIn": true,
  "specStatus": "PR",
  "crEnd": "2023-06-07",
  "implementationReportURI": "https://w3c.github.io/wot-discovery/testing/report.html",
  "shortName": "wot-discovery",
  "copyrightStart": 2017,
  "group": "wg/wot",
  "wgPublicList": "public-wot-wg",
  "github": {
    "repoURL": "https://github.com/w3c/wot-discovery",
    "branch": "main"
  },
  "publishDate": "2023-07-11",
  "previousPublishDate": "2023-01-19",
  "previousMaturity": "CR",
  "editors": [
    {
      "name": "Andrea Cimmino",
      "w3cid": "115672",
      "company": "Universidad Politécnica de Madrid",
      "companyURL": "https://www.upm.es/"
    },
    {
      "name": "Michael McCool",
      "w3cid": "93137",
      "company": "Intel Corp.",
      "companyURL": "https://www.intel.com/"
    },
    {
      "name": "Farshid Tavakolizadeh",
      "w3cid": "122520",
      "company": "Invited Expert"
    },
    {
      "name": "Kunihiko Toumura",
      "w3cid": "83488",
      "company": "Hitachi, Ltd.",
      "companyURL": "https://www.hitachi.com/"
    }
  ],
  "formerEditors": [
    {
      "name": "Farshid Tavakolizadeh",
      "w3cid": "122520",
      "company": "Fraunhofer-Gesellschaft",
      "companyURL": "https://www.fraunhofer.de/",
      "retiredDate": "2021-09-30"
    }
  ],
  "otherLinks": [
    {
      "key": "Contributors",
      "data": [
        {
          "value": "In the GitHub repository",
          "href": "https://github.com/w3c/wot-discovery/graphs/contributors"
        }
      ]
    },
    {
      "key": "Repository",
      "data": [
        {
          "value": "We are on GitHub",
          "href": "https://github.com/w3c/wot-discovery/"
        },
        {
          "value": "File a bug",
          "href": "https://github.com/w3c/wot-discovery/issues"
        }
      ]
    }
  ],
  "localBiblio": {
    "Discovery-Categorization-IoT": {
      "title": "A Categorization of Discovery Technologies for the Internet of Things",
      "href": "https://dl.acm.org/doi/10.1145/2991561.2991570",
      "authors": [
        "Arne Broering",
        "Soumya Kanti Datta",
        "Christian Bonnet"
      ],
      "date": "7-9 November 2016",
      "publisher": "Association of Computing Machinery (ACM): IoT'16 Proceedings",
      "id": "discovery-categorization-iot"
    },
    "GDPR-Defs": {
      "title": "General Data Protection Regulation (GDPR) Article 4 - Definitions",
      "href": "https://gdpr-info.eu/art-4-gdpr/",
      "publisher": "European Union (EU) and the European Economic Area (EEA)",
      "id": "gdpr-defs"
    },
    "OWASP-Top-10": {
      "title": "OWASP Top Ten",
      "href": "https://owasp.org/www-project-top-ten/",
      "publisher": "OWASP",
      "id": "owasp-top-10"
    },
    "REST-IOT": {
      "title": "RESTful Design for Internet of Things Systems",
      "href": "https://datatracker.ietf.org/doc/html/draft-irtf-t2trg-rest-iot-06",
      "authors": [
        "Ari Keranen",
        "Matthias Kovatsch",
        "Klaus Hartke"
      ],
      "publisher": "IETF",
      "date": "11 May 2020",
      "id": "rest-iot"
    },
    "JSONPATH": {
      "title": "JSONPath: Query expressions for JSON",
      "href": "https://datatracker.ietf.org/doc/html/draft-ietf-jsonpath-base",
      "authors": [
        "Stefan Gössner",
        "Glyn Normington",
        "Carsten Bormann"
      ],
      "publisher": "IETF",
      "status": "DRAFT",
      "id": "jsonpath"
    },
    "wot-usecases": {
      "title": "Web of Things (WoT): Use Cases",
      "href": "https://w3c.github.io/wot-usecases/",
      "authors": [
        "Michael Lagally",
        "Michael McCool",
        "Ryuichi Matsukura",
        "Tomoaki Mizushima"
      ],
      "publisher": "W3C",
      "date": "15 October 2020",
      "status": "Editor's Draft",
      "id": "wot-usecases"
    },
    "AMPLIFICATION-ATTACKS": {
      "title": "Amplification Attacks Using the Constrained Application Protocol (CoAP)",
      "href": "https://datatracker.ietf.org/doc/html/draft-irtf-t2trg-amplification-attacks",
      "authors": [
        "John Preuß Mattsson",
        "Göran Selander",
        "Christian Amsüss"
      ],
      "publisher": "IETF",
      "status": "DRAFT",
      "id": "amplification-attacks"
    }
  },
  "publishISODate": "2023-07-11T00:00:00.000Z",
  "generatedSubtitle": "W3C Proposed Recommendation 11 July 2023"
  }
]]>
</script>
<link rel="stylesheet" href=
"https://www.w3.org/StyleSheets/TR/2021/W3C-PR" />
<style type='text/css'>
.diff-old-a {
  font-size: smaller;
  color: red;
}

.diff-new { background-color: yellow; }
.diff-chg { background-color: lime; }
.diff-new:before,
.diff-new:after
    { content: "\2191" }
.diff-chg:before, .diff-chg:after
    { content: "\2195" }
.diff-old { text-decoration: line-through; background-color: #FBB; }
.diff-old:before,
.diff-old:after
    { content: "\2193" }
:focus { border: thin red solid}
</style>
</head>
<body class="h-entry toc-inline">
<div class="head">
<p class="logos">
<a class="logo" href= "https://www.w3.org/">
<img crossorigin="" alt="W3C" height="48" src="https://www.w3.org/StyleSheets/TR/2021/logos/W3C" width= "72" />
</a>
</p>
<h1 id="title" class="title">
<ins class="diff-new">Web
of
Things
(WoT)
Discovery
</ins></h1><p id="w3c-state"><a href= "https://www.w3.org/standards/types#PR"><ins class="diff-new">
W3C
Proposed
Recommendation
</ins></a><time class="dt-published" datetime= "2023-07-11"><ins class="diff-new">
11
July
2023
</ins></time></p><details open=""><summary><ins class="diff-new">
More
details
about
this
document
</ins></summary><dl><dt><ins class="diff-new">
This
version:
</ins></dt><dd><a class="u-url" href= "https://www.w3.org/TR/2023/PR-wot-discovery-20230711/"><ins class="diff-new">
https://www.w3.org/TR/2023/PR-wot-discovery-20230711/
</ins></a></dd><dt><ins class="diff-new">
Latest
published
version:
</ins></dt><dd><a href= "https://www.w3.org/TR/wot-discovery/"><ins class="diff-new">
https://www.w3.org/TR/wot-discovery/
</ins></a></dd><dt><ins class="diff-new">
Latest
editor's
draft:
</ins></dt><dd><a href= "https://w3c.github.io/wot-discovery/"><ins class="diff-new">
https://w3c.github.io/wot-discovery/
</ins></a></dd><dt><ins class="diff-new">
History:
</ins></dt><dd><a href= "https://www.w3.org/standards/history/wot-discovery/"><ins class="diff-new">
https://www.w3.org/standards/history/wot-discovery/
</ins></a></dd><dd><a href= "https://github.com/w3c/wot-discovery/commits/main"><ins class="diff-new">
Commit
history
</ins></a></dd><dt><ins class="diff-new">
Implementation
report:
</ins></dt><dd><a href= "https://w3c.github.io/wot-discovery/testing/report.html"><ins class="diff-new">
https://w3c.github.io/wot-discovery/testing/report.html
</ins></a></dd><dt><ins class="diff-new">
Editors:
</ins></dt><dd class="editor p-author h-card vcard" data-editor-id="115672"><span class="p-name fn"><ins class="diff-new">
Andrea
Cimmino
</ins></span><ins class="diff-new">
(
</ins><a class= "p-org org h-org" href="https://www.upm.es/"><ins class="diff-new">
Universidad
Politécnica
de
Madrid
</ins></a><ins class="diff-new">
)
</ins></dd><dd class="editor p-author h-card vcard" data-editor-id="93137"><span class="p-name fn"><ins class="diff-new">
Michael
McCool
</ins></span><ins class="diff-new">
(
</ins><a class= "p-org org h-org" href="https://www.intel.com/"><ins class="diff-new">
Intel
Corp.
</ins></a><ins class="diff-new">
)
</ins></dd><dd class="editor p-author h-card vcard" data-editor-id="122520"><span class="p-name fn"><ins class="diff-new">
Farshid
Tavakolizadeh
</ins></span><ins class="diff-new">
(
</ins><span class= "p-org org h-org"><ins class="diff-new">
Invited
Expert
</ins></span><ins class="diff-new">
)
</ins></dd><dd class="editor p-author h-card vcard" data-editor-id="83488"><span class="p-name fn"><ins class="diff-new">
Kunihiko
Toumura
</ins></span><ins class="diff-new">
(
</ins><a class= "p-org org h-org" href="https://www.hitachi.com/"><ins class="diff-new">
Hitachi,
Ltd.
</ins></a><ins class="diff-new">
)
</ins></dd><dt><ins class="diff-new">
Former
editor:
</ins></dt><dd class="editor p-author h-card vcard" data-editor-id="122520"><span class="p-name fn"><ins class="diff-new">
Farshid
Tavakolizadeh
</ins></span><ins class="diff-new">
(
</ins><a class= "p-org org h-org" href= "https://www.fraunhofer.de/"><ins class="diff-new">
Fraunhofer-Gesellschaft
</ins></a><ins class="diff-new">
)
-
Until
</ins><time datetime="2021-09-30"><ins class="diff-new">
30
September
2021
</ins></time></dd><dt><ins class="diff-new">
Feedback:
</ins></dt><dd><a href="https://github.com/w3c/wot-discovery/"><ins class="diff-new">
GitHub
w3c/wot-discovery
</ins></a><ins class="diff-new">
(
</ins><a href= "https://github.com/w3c/wot-discovery/pulls/"><ins class="diff-new">
pull
requests
</ins></a>,<a href= "https://github.com/w3c/wot-discovery/issues/new/choose"><ins class="diff-new">
new
issue
</ins></a>,<a href= "https://github.com/w3c/wot-discovery/issues/"><ins class="diff-new">
open
issues
</ins></a><ins class="diff-new">
)
</ins></dd><dd><a href= "mailto:public-wot-wg@w3.org?subject=%5Bwot-discovery%5D%20YOUR%20TOPIC%20HERE"><ins class="diff-new">
public-wot-wg@w3.org
</ins></a><ins class="diff-new">
with
subject
line
</ins><kbd><ins class="diff-new">
[wot-discovery]
</ins><em><ins class="diff-new">
…
message
topic
…
</ins></em></kbd><ins class="diff-new">
(
</ins><a rel="discussion" href= "https://lists.w3.org/Archives/Public/public-wot-wg"><ins class="diff-new">
archives
</ins></a><ins class="diff-new">
)
</ins></dd><dt><ins class="diff-new">
Contributors
</ins></dt><dd><a href= "https://github.com/w3c/wot-discovery/graphs/contributors"><ins class="diff-new">
In
the
GitHub
repository
</ins></a></dd><dt><ins class="diff-new">
Repository
</ins></dt><dd><a href="https://github.com/w3c/wot-discovery/"><ins class="diff-new">
We
are
on
GitHub
</ins></a></dd><dd><a href="https://github.com/w3c/wot-discovery/issues"><ins class="diff-new">
File
a
bug
</ins></a></dd></dl></details><p class="copyright"><a href= "https://www.w3.org/Consortium/Legal/ipr-notice#Copyright"><ins class="diff-new">
Copyright
</ins></a><ins class="diff-new">
©
2017-2023
</ins><a href="https://www.w3.org/"><ins class="diff-new">
World
Wide
Web
Consortium
</ins></a>.<abbr title= "World Wide Web Consortium"><ins class="diff-new">
W3C
</ins></abbr><sup><ins class="diff-new">
®
</ins></sup><a href= "https://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer"><ins class="diff-new">
liability
</ins></a>,<a href= "https://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks"><ins class="diff-new">
trademark
</ins></a><ins class="diff-new">
and
</ins><a rel="license" href= "https://www.w3.org/Consortium/Legal/2023/software-license" title= "W3C Software and Document Notice and License"><ins class="diff-new">
permissive
document
license
</ins></a><ins class="diff-new">
rules
apply.
</ins></p><hr title="Separator for header" /></div><section id="abstract" class="introductory"><h2><ins class="diff-new">
Abstract
</ins></h2><p><ins class="diff-new">
The
</ins><abbr title="World Wide Web Consortium"><ins class="diff-new">
W3C
</ins></abbr><ins class="diff-new">
Web
of
Things
(WoT)
is
intended
to
enable
interoperability
across
IoT
platforms
and
application
domains.
One
key
mechanism
for
accomplishing
this
goal
is
the
definition
and
use
of
metadata
describing
the
interactions
an
IoT
device
or
service
makes
available
over
the
network
at
a
suitable
level
of
abstraction.
The
WoT
Thing
Description
specification
satisfies
this
objective.
</ins></p><p><ins class="diff-new">
However,
in
order
to
use
a
Thing
its
Thing
Description
first
has
to
be
obtained.
The
</ins><em><ins class="diff-new">
WoT
Discovery
</ins></em><ins class="diff-new">
process
described
in
this
document
addresses
this
problem.
WoT
Discovery
needs
to
support
the
distribution
of
WoT
Thing
Descriptions
in
a
variety
of
use
cases.
This
includes
ad-hoc
and
engineered
systems;
during
development
and
at
runtime;
and
on
both
local
and
global
networks.
The
process
also
needs
to
work
with
existing
discovery
mechanisms,
be
secure,
protect
private
information,
and
be
able
to
efficiently
handle
updates
to
WoT
Thing
Descriptions
and
the
dynamic
and
diverse
nature
of
the
IoT
ecosystem.
</ins></p><p><ins class="diff-new">
The
WoT
Discovery
process
is
divided
into
two
phases,
Introduction,
and
Exploration.
The
Introduction
phase
leverages
existing
discovery
mechanisms
but
does
not
directly
expose
metadata;
they
are
simply
used
to
discover
Exploration
services,
which
provide
metadata
but
only
after
secure
authentication
and
authorization.
This
document
normatively
defines
two
Exploration
services:
for
distributing
a
single
WoT
Thing
Description
from
a
regular
web
service,
including
as
a
special
case
self-description;
and
a
searchable
WoT
Thing
Description
Directory
service
for
collections
of
Thing
Descriptions.
A
variety
of
Introduction
services
are
also
described
and
where
necessary
normative
definitions
are
given
to
support
them.
</ins></p></section><section id="sotd" class="introductory"><h2><ins class="diff-new">
Status
of
This
Document
</ins></h2><p><em><ins class="diff-new">
This
section
describes
the
status
of
this
document
at
the
time
of
its
publication.
A
list
of
current
</ins><abbr title= "World Wide Web Consortium"><ins class="diff-new">
W3C
</ins></abbr><ins class="diff-new">
publications
and
the
latest
revision
of
this
technical
report
can
be
found
in
the
</ins><a href= "https://www.w3.org/TR/"><abbr title= "World Wide Web Consortium"><ins class="diff-new">
W3C
</ins></abbr><ins class="diff-new">
technical
reports
index
</ins></a><ins class="diff-new">
at
https://www.w3.org/TR/.
</ins></em></p><p><ins class="diff-new">
Future
updates
to
this
specification
may
incorporate
</ins><a href= "https://www.w3.org/2021/Process-20211102/#allow-new-features"><ins class="diff-new">
new
features
</ins></a>.</p><p><ins class="diff-new">
This
document
was
published
by
the
</ins><a href= "https://www.w3.org/groups/wg/wot"><ins class="diff-new">
Web
of
Things
Working
Group
</ins></a><ins class="diff-new">
as
a
Proposed
Recommendation
using
the
</ins><a href= "https://www.w3.org/2021/Process-20211102/#recs-and-notes"><ins class="diff-new">
Recommendation
track
</ins></a>.</p><p><ins class="diff-new">
Publication
as
a
Proposed
Recommendation
does
not
imply
endorsement
by
</ins><abbr title="World Wide Web Consortium"><ins class="diff-new">
W3C
</ins></abbr><ins class="diff-new">
and
its
Members.
</ins></p><p><ins class="diff-new">
This
is
a
draft
document
and
may
be
updated,
replaced
or
obsoleted
by
other
documents
at
any
time.
It
is
inappropriate
to
cite
this
document
as
other
than
work
in
progress.
</ins></p><p><ins class="diff-new">
The
</ins><abbr title="World Wide Web Consortium"><ins class="diff-new">
W3C
</ins></abbr><ins class="diff-new">
Membership
and
other
interested
parties
are
invited
to
review
the
document
and
send
comments
through
10
July
2023.
Advisory
Committee
Representatives
should
consult
their
</ins><a href= "https://www.w3.org/2002/09/wbs/myQuestionnaires"><ins class="diff-new">
WBS
questionnaires
</ins></a>.<ins class="diff-new">
Note
that
substantive
technical
comments
were
expected
during
the
Candidate
Recommendation
review
period
that
ended
07
June
2023.
</ins></p><p><ins class="diff-new">
This
document
was
produced
by
a
group
operating
under
the
</ins><a href="https://www.w3.org/Consortium/Patent-Policy/"><abbr title= "World Wide Web Consortium"><ins class="diff-new">
W3C
</ins></abbr><ins class="diff-new">
Patent
Policy
</ins></a>.<abbr title="World Wide Web Consortium"><ins class="diff-new">
W3C
</ins></abbr><ins class="diff-new">
maintains
a
</ins><a rel="disclosure" href= "https://www.w3.org/groups/wg/wot/ipr"><ins class="diff-new">
public
list
of
any
patent
disclosures
</ins></a><ins class="diff-new">
made
in
connection
with
the
deliverables
of
the
group;
that
page
also
includes
instructions
for
disclosing
a
patent.
An
individual
who
has
actual
knowledge
of
a
patent
which
the
individual
believes
contains
</ins><a href= "https://www.w3.org/Consortium/Patent-Policy/#def-essential"><ins class="diff-new">
Essential
Claim(s)
</ins></a><ins class="diff-new">
must
disclose
the
information
in
accordance
with
</ins><a href= "https://www.w3.org/Consortium/Patent-Policy/#sec-Disclosure"><ins class="diff-new">
section
6
of
the
</ins><abbr title="World Wide Web Consortium"><ins class="diff-new">
W3C
</ins></abbr><ins class="diff-new">
Patent
Policy
</ins></a>.</p><p><ins class="diff-new">
This
document
is
governed
by
the
</ins><a id="w3c_process_revision" href="https://www.w3.org/2021/Process-20211102/"><ins class="diff-new">
2
November
2021
</ins><abbr title="World Wide Web Consortium"><ins class="diff-new">
W3C
</ins></abbr><ins class="diff-new">
Process
Document
</ins></a>.</p></section><nav id="toc"><h2 class="introductory" id="table-of-contents"><ins class="diff-new">
Table
of
Contents
</ins></h2><ol class="toc"><li class="tocline"><a class="tocxref" href= "#abstract"><ins class="diff-new">
Abstract
</ins></a></li><li class="tocline"><a class="tocxref" href="#sotd"><ins class="diff-new">
Status
of
This
Document
</ins></a></li><li class="tocline"><a class="tocxref" href= "#introduction"><bdi class="secno"><ins class="diff-new">
1.
</ins></bdi><ins class="diff-new">
Introduction
</ins></a></li><li class="tocline"><a class="tocxref" href= "#conformance"><bdi class="secno"><ins class="diff-new">
2.
</ins></bdi><ins class="diff-new">
Conformance
</ins></a></li><li class="tocline"><a class="tocxref" href= "#terminology"><bdi class="secno"><ins class="diff-new">
3.
</ins></bdi><ins class="diff-new">
Terminology
</ins></a></li><li class="tocline"><a class="tocxref" href= "#architecture"><bdi class="secno"><ins class="diff-new">
4.
</ins></bdi><ins class="diff-new">
Architecture
</ins></a></li><li class="tocline"><a class="tocxref" href= "#discoverer-process"><bdi class="secno"><ins class="diff-new">
5.
</ins></bdi><ins class="diff-new">
Discoverer
Process
</ins></a></li><li class="tocline"><a class="tocxref" href= "#introduction-mech"><bdi class="secno"><ins class="diff-new">
6.
</ins></bdi><ins class="diff-new">
Introduction
Mechanisms
</ins></a><ol class="toc"><li class="tocline"><a class="tocxref" href= "#introduction-direct"><bdi class="secno"><ins class="diff-new">
6.1
</ins></bdi><ins class="diff-new">
Direct
</ins></a></li><li class="tocline"><a class="tocxref" href= "#introduction-well-known"><bdi class="secno"><ins class="diff-new">
6.2
</ins></bdi><ins class="diff-new">
Well-Known
URIs
</ins></a></li><li class="tocline"><a class="tocxref" href= "#introduction-dns-sd-sec"><bdi class="secno"><ins class="diff-new">
6.3
</ins></bdi><ins class="diff-new">
DNS-Based
Service
Discovery
</ins></a></li><li class="tocline"><a class="tocxref" href= "#introduction-core-rd-sec"><bdi class="secno"><ins class="diff-new">
6.4
</ins></bdi><ins class="diff-new">
CoRE
Link
Format
and
CoRE
Resource
Directory
</ins></a></li><li class="tocline"><a class="tocxref" href= "#introduction-did-sec"><bdi class="secno"><ins class="diff-new">
6.5
</ins></bdi><ins class="diff-new">
DID
Documents
</ins></a></li></ol></li><li class="tocline"><a class="tocxref" href= "#exploration-mech"><bdi class="secno"><ins class="diff-new">
7.
</ins></bdi><ins class="diff-new">
Exploration
Mechanisms
</ins></a><ol class="toc"><li class="tocline"><a class="tocxref" href= "#exploration-overview"><bdi class="secno"><ins class="diff-new">
7.1
</ins></bdi><ins class="diff-new">
Overview
</ins></a><ol class="toc"><li class="tocline"><a class="tocxref" href= "#exploration-ontology"><bdi class="secno"><ins class="diff-new">
7.1.1
</ins></bdi><ins class="diff-new">
Ontology
</ins></a><ol class="toc"><li class="tocline"><a class="tocxref" href= "#exploration-td-type-thingdirectory"><bdi class= "secno"><ins class="diff-new">
7.1.1.1
</ins></bdi><code><ins class="diff-new">
ThingDirectory
</ins></code></a></li><li class="tocline"><a class="tocxref" href= "#exploration-td-type-thinglink"><bdi class="secno"><ins class="diff-new">
7.1.1.2
</ins></bdi><code><ins class="diff-new">
ThingLink
</ins></code></a></li></ol></li><li class="tocline"><a class="tocxref" href= "#exploration-secboot"><bdi class="secno"><ins class="diff-new">
7.1.2
</ins></bdi><ins class="diff-new">
Security
Bootstrapping
</ins></a></li></ol></li><li class="tocline"><a class="tocxref" href= "#exploration-server"><bdi class="secno"><ins class="diff-new">
7.2
</ins></bdi><ins class="diff-new">
Thing
Description
Server
</ins></a></li><li class="tocline"><a class="tocxref" href= "#exploration-directory"><bdi class="secno"><ins class="diff-new">
7.3
</ins></bdi><ins class="diff-new">
Thing
Description
Directory
</ins></a><ol class="toc"><li class="tocline"><a class="tocxref" href= "#exploration-directory-info"><bdi class="secno"><ins class="diff-new">
7.3.1
</ins></bdi><ins class="diff-new">
Information
Model
</ins></a><ol class="toc"><li class="tocline"><a class="tocxref" href= "#exploration-directory-registration-info"><bdi class= "secno"><ins class="diff-new">
7.3.1.1
</ins></bdi><ins class="diff-new">
Registration
Information
</ins></a></li><li class="tocline"><a class="tocxref" href= "#exploration-directory-registration-expiry"><bdi class= "secno"><ins class="diff-new">
7.3.1.2
</ins></bdi><ins class="diff-new">
Registration
Expiry
</ins></a></li><li class="tocline"><a class="tocxref" href= "#exploration-directory-anonymous-td"><bdi class= "secno"><ins class="diff-new">
7.3.1.3
</ins></bdi><ins class="diff-new">
Anonymous
TD
Identifiers
</ins></a></li></ol></li><li class="tocline"><a class="tocxref" href= "#exploration-directory-api"><bdi class="secno"><ins class="diff-new">
7.3.2
</ins></bdi><ins class="diff-new">
Directory
Service
API
</ins></a><ol class="toc"><li class="tocline"><a class="tocxref" href= "#exploration-directory-api-things"><bdi class= "secno"><ins class="diff-new">
7.3.2.1
</ins></bdi><ins class="diff-new">
Things
API
</ins></a><ol class="toc"><li class="tocline"><a class="tocxref" href= "#exploration-directory-api-things-creation"><bdi class= "secno"><ins class="diff-new">
7.3.2.1.1
</ins></bdi><ins class="diff-new">
Creation
</ins></a></li><li class="tocline"><a class="tocxref" href= "#exploration-directory-api-things-retrieval"><bdi class= "secno"><ins class="diff-new">
7.3.2.1.2
</ins></bdi><ins class="diff-new">
Retrieval
</ins></a></li><li class="tocline"><a class="tocxref" href= "#exploration-directory-api-things-update"><bdi class= "secno"><ins class="diff-new">
7.3.2.1.3
</ins></bdi><ins class="diff-new">
Update
</ins></a></li><li class="tocline"><a class="tocxref" href= "#exploration-directory-api-things-deletion"><bdi class= "secno"><ins class="diff-new">
7.3.2.1.4
</ins></bdi><ins class="diff-new">
Deletion
</ins></a></li><li class="tocline"><a class="tocxref" href= "#exploration-directory-api-things-listing"><bdi class= "secno"><ins class="diff-new">
7.3.2.1.5
</ins></bdi><ins class="diff-new">
Listing
</ins></a></li><li class="tocline"><a class="tocxref" href= "#exploration-directory-api-things-validation"><bdi class= "secno"><ins class="diff-new">
7.3.2.1.6
</ins></bdi><ins class="diff-new">
Validation
</ins></a></li></ol></li><li class="tocline"><a class="tocxref" href= "#exploration-directory-api-notification"><bdi class= "secno"><ins class="diff-new">
7.3.2.2
</ins></bdi><ins class="diff-new">
Events
API
</ins></a></li><li class="tocline"><a class="tocxref" href= "#exploration-directory-api-search"><bdi class= "secno"><ins class="diff-new">
7.3.2.3
</ins></bdi><ins class="diff-new">
Search
API
</ins></a><ol class="toc"><li class="tocline"><a class="tocxref" href= "#jsonpath-semantic"><bdi class="secno"><ins class="diff-new">
7.3.2.3.1
</ins></bdi><ins class="diff-new">
Syntactic
search:
JSONPath
</ins></a></li><li class="tocline"><a class="tocxref" href= "#xpath-semantic"><bdi class="secno"><ins class="diff-new">
7.3.2.3.2
</ins></bdi><ins class="diff-new">
Syntactic
search:
XPath
</ins></a></li><li class="tocline"><a class="tocxref" href= "#search-semantic"><bdi class="secno"><ins class="diff-new">
7.3.2.3.3
</ins></bdi><ins class="diff-new">
Semantic
search:
SPARQL
</ins></a></li></ol></li><li class="tocline"><a class="tocxref" href= "#directory-api-spec"><bdi class="secno"><ins class="diff-new">
7.3.2.4
</ins></bdi><ins class="diff-new">
API
Specification
(Thing
Model)
</ins></a></li></ol></li></ol></li></ol></li><li class="tocline"><a class="tocxref" href= "#security-considerations"><bdi class="secno"><ins class="diff-new">
8.
</ins></bdi><ins class="diff-new">
Security
Considerations
</ins></a><ol class="toc"><li class="tocline"><a class="tocxref" href= "#security-consideration-dos"><bdi class="secno"><ins class="diff-new">
8.1
</ins></bdi><ins class="diff-new">
Denial
of
Service
</ins></a></li><li class="tocline"><a class="tocxref" href= "#security-consideration-amp-ddos"><bdi class="secno"><ins class="diff-new">
8.2
</ins></bdi><ins class="diff-new">
Amplification
and
Distributed
Denial
of
Service
</ins></a></li><li class="tocline"><a class="tocxref" href= "#security-consideration-lan-self-discovery"><bdi class= "secno"><ins class="diff-new">
8.3
</ins></bdi><ins class="diff-new">
Self-Discovery
on
LANs
</ins></a></li></ol></li><li class="tocline"><a class="tocxref" href= "#privacy-considerations"><bdi class="secno"><ins class="diff-new">
9.
</ins></bdi><ins class="diff-new">
Privacy
Considerations
</ins></a><ol class="toc"><li class="tocline"><a class="tocxref" href= "#privacy-consideration-location-tracking"><bdi class= "secno"><ins class="diff-new">
9.1
</ins></bdi><ins class="diff-new">
Location
Tracking
and
Profiling
</ins></a></li><li class="tocline"><a class="tocxref" href= "#privacy-consideration-query-tracking"><bdi class= "secno"><ins class="diff-new">
9.2
</ins></bdi><ins class="diff-new">
Query
Tracking
</ins></a></li></ol></li><li class="tocline"><a class="tocxref" href= "#performance-considerations"><bdi class="secno"><ins class="diff-new">
10.
</ins></bdi><ins class="diff-new">
Performance
Considerations
</ins></a><ol class="toc"><li class="tocline"><a class="tocxref" href= "#perf-incremental-transfer"><bdi class="secno"><ins class="diff-new">
10.1
</ins></bdi><ins class="diff-new">
Incremental
Transfer
</ins></a></li></ol></li><li class="tocline"><a class="tocxref" href= "#iana-considerations"><bdi class="secno"><ins class="diff-new">
11.
</ins></bdi><ins class="diff-new">
IANA
Considerations
</ins></a><ol class="toc"><li class="tocline"><a class="tocxref" href= "#well-known-uri-suffix"><bdi class="secno"><ins class="diff-new">
11.1
</ins></bdi><ins class="diff-new">
Well-Known
URI
Registration
</ins></a></li><li class="tocline"><a class="tocxref" href= "#service-name"><bdi class="secno"><ins class="diff-new">
11.2
</ins></bdi><ins class="diff-new">
Service
Name
Registration
</ins></a></li><li class="tocline"><a class="tocxref" href= "#core-resource-type"><bdi class="secno"><ins class="diff-new">
11.3
</ins></bdi><ins class="diff-new">
CoRE
Resource
Types
Registration
</ins></a></li></ol></li><li class="tocline"><a class="tocxref" href= "#other-name-considerations"><bdi class="secno"><ins class="diff-new">
12.
</ins></bdi><ins class="diff-new">
Other
Name
Registration
Considerations
</ins></a><ol class="toc"><li class="tocline"><a class="tocxref" href= "#did-service-name"><bdi class="secno"><ins class="diff-new">
12.1
</ins></bdi><ins class="diff-new">
DID
Service
Name
Registration
</ins></a></li></ol></li><li class="tocline"><a class="tocxref" href= "#tdd-extensions-jsonschema"><bdi class="secno"><ins class="diff-new">
A.
</ins></bdi><ins class="diff-new">
JSON
Schema
for
WoT
Discovery
TD-extensions
</ins></a></li><li class="tocline"><a class="tocxref" href="#changes"><bdi class= "secno"><ins class="diff-new">
B.
</ins></bdi><ins class="diff-new">
Recent
Specification
Changes
</ins></a><ol class="toc"><li class="tocline"><a class="tocxref" href= "#changes-from-cr"><bdi class="secno"><ins class="diff-new">
B.1
</ins></bdi><ins class="diff-new">
Changes
from
19
January
2023
Candidate
Recommendation
</ins></a></li><li class="tocline"><a class="tocxref" href= "#changes-from-third-draft"><bdi class="secno"><ins class="diff-new">
B.2
</ins></bdi><ins class="diff-new">
Changes
from
10
August
2022
Working
Draft
</ins></a></li><li class="tocline"><a class="tocxref" href= "#changes-from-second-draft"><bdi class="secno"><ins class="diff-new">
B.3
</ins></bdi><ins class="diff-new">
Changes
from
2
June
2021
Working
Draft
</ins></a></li><li class="tocline"><a class="tocxref" href= "#changes-from-first-draft"><bdi class="secno"><ins class="diff-new">
B.4
</ins></bdi><ins class="diff-new">
Changes
from
24
November
2020
First
Public
Working
Draft
</ins></a></li></ol></li><li class="tocline"><a class="tocxref" href= "#acknowledgements"><bdi class="secno"><ins class="diff-new">
C.
</ins></bdi><ins class="diff-new">
Acknowledgments
</ins></a></li><li class="tocline"><a class="tocxref" href= "#references"><bdi class="secno"><ins class="diff-new">
D.
</ins></bdi><ins class="diff-new">
References
</ins></a><ol class="toc"><li class="tocline"><a class="tocxref" href= "#normative-references"><bdi class="secno"><ins class="diff-new">
D.1
</ins></bdi><ins class="diff-new">
Normative
references
</ins></a></li><li class="tocline"><a class="tocxref" href= "#informative-references"><bdi class="secno"><ins class="diff-new">
D.2
</ins></bdi><ins class="diff-new">
Informative
references
</ins></a></li></ol></li></ol></nav><section id="introduction"><div class="header-wrapper"><h2 id="x1-introduction"><bdi class="secno"><ins class="diff-new">
1.
</ins></bdi><ins class="diff-new">
Introduction
</ins></h2><a class="self-link" href="#introduction" aria-label= "Permalink for Section 1."></a></div><p><ins class="diff-new">
The
Web
of
Things
(WoT)
defines
an
architecture
that
supports
the
integration
and
use
of
web
technologies
with
IoT
devices.
The
WoT
Architecture
[
</ins><cite><a class="bibref" data-link-type="biblio" href="#bib-wot-architecture11" title= "Web of Things (WoT) Architecture 1.1"><ins class="diff-new">
wot-architecture11
</ins></a></cite><ins class="diff-new">
]
document
defines
the
basic
concepts
and
patterns
of
usage
supported.
However,
the
WoT
Thing
Description
[
</ins><cite><a class= "bibref" data-link-type="biblio" href= "#bib-wot-thing-description11" title= "Web of Things (WoT) Thing Description 1.1"><ins class="diff-new">
wot-thing-description11
</ins></a></cite><ins class="diff-new">
]
is
a
key
specification
for
WoT
Discovery
since
it
is
the
purpose
of
WoT
Discovery
to
make
WoT
Thing
Descriptions
available.
Specifically,
WoT
Discovery
has
to
allow
authenticated
and
authorized
entities
(and
only
those
entities)
to
find
WoT
Thing
Descriptions
satisfying
a
set
of
criteria,
such
as
having
certain
semantics,
or
containing
certain
interactions.
Conversely,
in
order
to
support
security
and
privacy
objectives,
the
WoT
Discovery
process
must
not
leak
information
to
unauthorized
entities.
This
includes
leaking
information
that
a
given
entity
is
requesting
certain
information,
not
just
the
information
distributed
in
the
Thing
Descriptions
themselves.
</ins></p><p><ins class="diff-new">
There
are
already
a
number
of
discovery
mechanisms
defined
[
</ins><cite><a class="bibref" data-link-type="biblio" href= "#bib-discovery-categorization-iot" title= "A Categorization of Discovery Technologies for the Internet of Things"><ins class="diff-new">
Discovery-Categorization-IoT
</ins></a></cite><ins class="diff-new">
],
so
we
have
to
establish
why
we
are
proposing
a
new
one.
First,
many
existing
discovery
mechanisms
have
relatively
weak
security
and
privacy
protections.
One
of
our
objectives
is
to
establish
a
mechanism
that
not
only
uses
best
practices
to
protect
metadata,
but
that
can
be
upgraded
to
support
future
best
practices
as
needed.
Second,
we
are
using
discovery
in
a
broad
sense
to
include
both
local
and
non-local
mechanisms.
While
a
local
mechanism
might
use
a
broadcast
protocol,
non-local
mechanisms
might
go
beyond
the
current
network
segment
where
broadcast
is
not
scalable,
and
so
a
different
approach,
such
as
a
search
service,
is
needed.
Our
approach
is
to
use
existing
mechanisms
as
needed
to
bootstrap
into
a
more
general
and
secure
metadata
distribution
system.
Third,
the
metadata
we
are
distributing,
the
WoT
Thing
Description,
is
highly
structured
and
includes
rich
data
such
as
data
schemas
and
semantic
annotations.
Existing
discovery
mechanisms
based
on
a
list
of
simple
key-value
pairs
are
not
appropriate.
At
the
same
time,
use
of
existing
standards
for
semantic
data
query,
such
as
SPARQL
[
</ins><cite><a class="bibref" data-link-type="biblio" href= "#bib-sparql11-overview" title= "SPARQL 1.1 Overview"><ins class="diff-new">
SPARQL11-OVERVIEW
</ins></a></cite><ins class="diff-new">
],
while
potentially
suitable
for
some
advanced
use
cases,
might
require
too
much
effort
for
many
anticipated
IoT
applications.
Therefore
in
order
to
address
more
basic
applications,
we
also
define
some
simpler
query
mechanisms.
</ins></p><p><ins class="diff-new">
After
defining
some
basic
terminology,
we
will
summarize
the
basic
use
cases
and
requirements
for
WoT
Discovery.
These
are
a
subset
of
the
more
detailed
and
exhaustive
use
cases
and
requirements
presented
in
the
WoT
Use
Cases
[
</ins><cite><a class= "bibref" data-link-type="biblio" href="#bib-wot-usecases" title= "Web of Things (WoT): Use Cases"><ins class="diff-new">
wot-usecases
</ins></a></cite><ins class="diff-new">
]
and
WoT
Architecture
[
</ins><cite><a class="bibref" data-link-type="biblio" href= "#bib-wot-architecture11" title= "Web of Things (WoT) Architecture 1.1"><ins class="diff-new">
wot-architecture11
</ins></a></cite><ins class="diff-new">
]
documents.
Then
we
will
describe
the
basic
architecture
of
the
WoT
Discovery
process,
which
uses
a
two-phase
Introduction/Exploration
approach.
The
basic
goal
of
this
architecture
is
to
be
able
to
use
existing
discovery
standards
to
bootstrap
access
to
protected
discovery
services,
but
to
distribute
detailed
metadata
only
to
authorized
users,
and
to
also
protect
those
making
queries
from
eavesdroppers
as
much
as
possible.
We
then
describe
details
of
specific
Introduction
and
Exploration
mechanisms.
In
particular,
we
define
in
detail
a
normative
API
for
a
WoT
Thing
Description
Directory
(WoT
TDD)
service
that
provides
a
search
mechanism
for
collections
of
WoT
Thing
Descriptions
that
can
be
dynamically
registered
by
Things
or
entities
acting
on
their
behalf.
The
WoT
Discovery
mechanism
however
also
supports
distribution
of
single
TDs
from
regular
web
services,
with
a
special
case
of
this
being
self-description.
Finally,
we
discuss
some
security
and
privacy
considerations,
including
a
set
of
potential
risks
and
mitigations.
</ins></p></section><section id="conformance"><div class="header-wrapper"><h2 id="x2-conformance"><bdi class="secno"><ins class="diff-new">
2.
</ins></bdi><ins class="diff-new">
Conformance
</ins></h2><a class="self-link" href="#conformance" aria-label= "Permalink for Section 2."></a></div><p><ins class="diff-new">
As
well
as
sections
marked
as
non-normative,
all
authoring
guidelines,
diagrams,
examples,
and
notes
in
this
specification
are
non-normative.
Everything
else
in
this
specification
is
normative.
</ins></p><p><ins class="diff-new">
The
key
words
</ins><em class="rfc2119"><ins class="diff-new">
MAY
</ins></em>,<em class= "rfc2119"><ins class="diff-new">
MUST
</ins></em>,<em class="rfc2119"><ins class="diff-new">
OPTIONAL
</ins></em>,<em class= "rfc2119"><ins class="diff-new">
RECOMMENDED
</ins></em>,<em class="rfc2119"><ins class="diff-new">
SHOULD
</ins></em>,<ins class="diff-new">
and
</ins><em class="rfc2119"><ins class="diff-new">
SHOULD
NOT
</ins></em><ins class="diff-new">
in
this
document
are
to
be
interpreted
as
described
in
</ins><a href= "https://datatracker.ietf.org/doc/html/bcp14"><ins class="diff-new">
BCP
14
</ins></a><ins class="diff-new">
[
</ins><cite><a class="bibref" data-link-type="biblio" href= "#bib-rfc2119" title= "Key words for use in RFCs to Indicate Requirement Levels"><ins class="diff-new">
RFC2119
</ins></a></cite><ins class="diff-new">
]
[
</ins><cite><a class="bibref" data-link-type="biblio" href= "#bib-rfc8174" title= "Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"><ins class="diff-new">
RFC8174
</ins></a></cite><ins class="diff-new">
]
when,
and
only
when,
they
appear
in
all
capitals,
as
shown
here.
</ins></p></section><section id="terminology" class="informative"><div class="header-wrapper"><h2 id="x3-terminology"><bdi class="secno"><ins class="diff-new">
3.
</ins></bdi><ins class="diff-new">
Terminology
</ins></h2><a class="self-link" href="#terminology" aria-label= "Permalink for Section 3."></a></div><p><em><ins class="diff-new">
This
section
is
non-normative.
</ins></em></p><p><ins class="diff-new">
The
fundamental
WoT
terminology
such
as
</ins><dfn id="dfn-thing" tabindex="0" aria-haspopup="dialog" data-dfn-type= "dfn"><ins class="diff-new">
Thing
</ins></dfn>,<dfn data-plurals="thing descriptions" id= "dfn-thing-description" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn"><ins class="diff-new">
Thing
Description
</ins></dfn><ins class="diff-new">
(
</ins><dfn data-plurals= "tds" id="dfn-td" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn"><ins class="diff-new">
TD
</ins></dfn><ins class="diff-new">
),
</ins><dfn id="dfn-thing-model" tabindex= "0" aria-haspopup="dialog" data-dfn-type="dfn"><ins class="diff-new">
Thing
Model
</ins></dfn><ins class="diff-new">
(
</ins><dfn id="dfn-tm" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn"><ins class="diff-new">
TM
</ins></dfn><ins class="diff-new">
),
</ins><dfn id="dfn-property" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn"><ins class="diff-new">
Property
</ins></dfn>,<dfn id= "dfn-action" tabindex="0" aria-haspopup="dialog" data-dfn-type= "dfn"><ins class="diff-new">
Action
</ins></dfn>,<dfn id="dfn-event" tabindex="0" aria-haspopup= "dialog" data-dfn-type="dfn"><ins class="diff-new">
Event
</ins></dfn>,<dfn data-lt= "WoT Anonymous Thing Description|Anonymous TD" data-plurals= "anonymous tds" id="dfn-wot-anonymous-thing-description" tabindex= "0" aria-haspopup="dialog" data-dfn-type="dfn"><ins class="diff-new">
Anonymous
TD
</ins></dfn>,<dfn data-lt="WoT Discoverer|Discoverer" id="dfn-wot-discoverer" tabindex="0" aria-haspopup="dialog" data-dfn-type= "dfn"><ins class="diff-new">
Discoverer
</ins></dfn>,<dfn data-lt="WoT Discovery|Discovery" id= "dfn-wot-discovery" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn"><ins class="diff-new">
Discovery
</ins></dfn>,<dfn data-lt= "WoT Exploration|Exploration" id="dfn-wot-exploration" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn"><ins class="diff-new">
Exploration
</ins></dfn>,<dfn data-lt="WoT Introduction|Introduction" id= "dfn-wot-introduction" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn"><ins class="diff-new">
Introduction
</ins></dfn>,<dfn data-lt= "WoT Thing Description Server|Thing Description Server" id= "dfn-wot-thing-description-server" tabindex="0" aria-haspopup= "dialog" data-dfn-type="dfn"><ins class="diff-new">
Thing
Description
Server
</ins></dfn><ins class="diff-new">
(
</ins><dfn data-lt="WoT TD Server|TD Server" data-plurals="td servers" id="dfn-wot-td-server" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn"><ins class="diff-new">
TD
Server
</ins></dfn><ins class="diff-new">
),
</ins><dfn data-lt= "WoT Thing Description Directory|Thing Description Directory" data-plurals="thing description directories" id= "dfn-wot-thing-description-directory" tabindex="0" aria-haspopup= "dialog" data-dfn-type="dfn"><ins class="diff-new">
Thing
Description
Directory
</ins></dfn><ins class="diff-new">
(
</ins><dfn data-lt="WoT TDD|TDD" id="dfn-wot-tdd" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn"><ins class="diff-new">
TDD
</ins></dfn><ins class="diff-new">
),
</ins><dfn data-lt="WoT Partial Thing Description|Partial TD" id= "dfn-wot-partial-thing-description" tabindex="0" aria-haspopup= "dialog" data-dfn-type="dfn"><ins class="diff-new">
Partial
TD
</ins></dfn>,<dfn data-lt= "WoT Enriched Thing Description|Enriched TD" data-plurals= "enriched tds" id="dfn-wot-enriched-thing-description" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn"><ins class="diff-new">
Enriched
TD
</ins></dfn><ins class="diff-new">
are
defined
in
</ins><a href= "https://www.w3.org/TR/wot-architecture11/#terminology"><ins class="diff-new">
Section
3
</ins></a><ins class="diff-new">
of
the
WoT
Architecture
1.1
specification
[
</ins><cite><a class= "bibref" data-link-type="biblio" href="#bib-wot-architecture11" title= "Web of Things (WoT) Architecture 1.1"><ins class="diff-new">
wot-architecture11
</ins></a></cite><ins class="diff-new">
].
</ins></p></section><section id="architecture" class="informative"><div class="header-wrapper"><h2 id="x4-architecture"><bdi class="secno"><ins class="diff-new">
4.
</ins></bdi><ins class="diff-new">
Architecture
</ins></h2><a class="self-link" href="#architecture" aria-label= "Permalink for Section 4."></a></div><p><em><ins class="diff-new">
This
section
is
non-normative.
</ins></em></p><p><a href="#discovery-overview" class="fig-ref" title= "Discovery architecture overview. A set of open Introduction mechanisms provides a set of URLs, which point at Exploration services that only provide metadata (TDs) after suitable authentication. Thing Links and Thing Description Directories provide additional flexibility but retrieving further results from these is at the discretion of the application."><ins class="diff-new">
Figure
</ins><bdi class=""><ins class="diff-new">
1
</ins></bdi></a><ins class="diff-new">
shows
an
overview
of
the
WoT
Discovery
process.
Discovery
uses
a
two-phase
architecture
to
resolve
the
competing
requirements
to
be
both
open
and
to
restrict
access
to
metadata
to
authorized
entities.
In
the
first
phase,
one
or
more
of
a
set
of
relatively
open
"Introduction"
mechanisms
may
be
used
to
generate
a
set
of
candidate
URLs.
These
URLs
do
not
themselves
contain
metadata,
but
are
used
in
the
second
stage
to
reference
"Exploration"
services
that
can
actually
provide
metadata,
after
authentication,
in
the
form
of
</ins><a href= "#dfn-thing-description" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-thing-description-1"><ins class="diff-new">
Thing
Descriptions
</ins></a>.</p><figure id="discovery-overview"><img src="images/overview.png" srcset="images/overview.svg" class="wot-diagram" alt= "Discovery process overview" /><figcaption><a class="self-link" href="#discovery-overview"><ins class="diff-new">
Figure
</ins><bdi class="figno"><ins class="diff-new">
1
</ins></bdi></a><span class="fig-title"><ins class="diff-new">
Discovery
architecture
overview.
A
set
of
open
Introduction
mechanisms
provides
a
set
of
URLs,
which
point
at
Exploration
services
that
only
provide
metadata
(TDs)
after
suitable
authentication.
Thing
Links
and
Thing
Description
Directories
provide
additional
flexibility
but
retrieving
further
results
from
these
is
at
the
discretion
of
the
application.
</ins></span></figcaption></figure><p><ins class="diff-new">
The
intention
is
that
Introduction
mechanisms
are
relatively
open
"first
contact"
mechanisms
to
provide
a
starting
point
for
the
rest
of
the
Discovery
process.
In
this
document
we
specify
details
on
several
Introduction
mechanisms,
suitable
for
different
use
cases,
including
both
local
and
non-local
scenarios,
but
Introductions
can
in
fact
be
provided
by
any
mechanism
that
can
return
a
URL.
Introductions,
however,
do
not
include
any
security
or
privacy
controls
and
so
should
not
provide
metadata
directly.
Instead,
the
URLs
provided
by
Introduction
mechanisms
reference
"Exploration"
services.
Exploration
services
actually
do
provide
metadata,
but
only
after
suitable
authentication
and
access
controls
have
been
applied.
</ins></p><p><ins class="diff-new">
The
Discovery
process
can
produce
a
</ins><em><ins class="diff-new">
set
</ins></em><ins class="diff-new">
of
URLs
as
output
from
its
Introduction
phase,
even
if
only
one
Introduction
mechanism
is
used
(some
Introduction
mechanisms
can
themselves
return
multiple
URLs).
The
final
output
after
the
Exploration
phase
can
also
be
a
</ins><em><ins class="diff-new">
set
</ins></em><ins class="diff-new">
of
Thing
Descriptions.
</ins></p><p><ins class="diff-new">
Each
URL
provided
by
the
Introduction
phase
always
points
at
an
Exploration
service
endpoint
that
will
return
a
single
Thing
Description.
In
the
simplest
case
this
URL
references
an
ordinary
resource
provided
by
a
web
server
which
provides
the
Thing
Description
of
a
Thing
describing
an
IoT
endpoint
device.
As
a
special
case
of
this,
for
self-describing
Things
an
Introduction
URL
might
point
directly
at
an
endpoint
provided
by
a
Thing
serving
its
own
Thing
Description.
</ins></p><p><ins class="diff-new">
In
general
Thing
Descriptions
might
be
provided
in
various
ways
and
in
particular
may
not
be
self-describing.
For
example,
</ins></p><ul><li><ins class="diff-new">
brownfield
devices
not
designed
with
the
WoT
specification
in
mind
will
not
be
capable
of
serving
their
own
Thing
Descriptions;
</ins></li><li><ins class="diff-new">
battery-powered
devices
may
not
be
online
most
of
the
time;
and
</ins></li><li><ins class="diff-new">
some
devices
may
not
be
powerful
enough
to
manage
and
serve
TDs
directly.
</ins></li></ul><p><ins class="diff-new">
The
Thing
Description
for
such
Things
should
be
provided
by
separate
services.
</ins></p><p><ins class="diff-new">
This
document
specifies
two
special
cases
that
allow
for
more
flexibility:
</ins></p><ul><li><ins class="diff-new">
A
Thing
Description
referenced
by
an
Introduction
URL
may
describe
a
</ins><a href="#exploration-td-type-thingdirectory"><ins class="diff-new">
Thing
Description
Directory
</ins></a><ins class="diff-new">
service.
A
Thing
Description
Directory
service
(which
is
still
a
Thing)
maintains
a
(possibly
dynamic)
database
of
Thing
Descriptions.
Thing
Description
Directories
that
maintain
large
numbers
of
Thing
Descriptions
may
also
support
queries
that
can
be
used
to
selectively
retrieve
Thing
Descriptions.
</ins></li><li><ins class="diff-new">
The
second
special
case
is
a
</ins><a href= "#exploration-td-type-thinglink"><ins class="diff-new">
Thing
Link
</ins></a>.<ins class="diff-new">
A
Thing
Link
is
also
a
Thing
Description,
but
rather
than
describing
a
Thing
directly,
it
holds
a
link
to
a
Thing
Description
hosted
elsewhere.
A
Thing
Description
Directory
can
also
store
Thing
Links
which
can
redirect
to
other
Thing
Description
Directories,
allowing
for
a
linked
directory
structure.
</ins></li></ul><p><ins class="diff-new">
It
is
</ins><em><ins class="diff-new">
not
</ins></em><ins class="diff-new">
mandatory
for
the
Discovery
process
to
retrieve
the
contents
of
Thing
Description
Directories
and
return
them
as
part
of
the
results,
because
in
general
this
might
result
in
a
huge
set
of
results.
Instead
the
application
should
scan
the
results
for
Thing
Description
Directory
TDs
and
decide
whether
to
retrieve
TDs
from
them,
possibly
selectively.
Likewise,
it
is
not
required
to
follow
Thing
Links
automatically;
instead
the
application
may
choose
to
follow
them
selectively.
</ins></p></section><section id="discoverer-process" class="normative"><div class="header-wrapper"><h2 id="x5-discoverer-process"><bdi class="secno"><ins class="diff-new">
5.
</ins></bdi><ins class="diff-new">
Discoverer
Process
</ins></h2><a class="self-link" href="#discoverer-process" aria-label= "Permalink for Section 5."></a></div><p><ins class="diff-new">
In
this
section
we
will
describe
the
WoT
Discovery
process
from
the
point
of
view
of
a
client,
and
what
it
means
to
say
that
a
client
supports
WoT
Discovery.
We
will
use
the
term
</ins><a href= "#dfn-wot-discoverer" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-wot-discoverer-1"><ins class="diff-new">
Discoverer
</ins></a><ins class="diff-new">
for
an
entity
that
is
a
client
of
the
WoT
Discovery
process.
A
Discoverer
may
or
may
not
be
a
full
Consumer.
A
Discoverer
does
however
need
to
read
and
extract
information
from
special
TDs
for
Directories
and
Thing
Links
and
use
specific
affordances
and
links
provided
in
them.
Conversely,
a
Consumer
may
not
support
Discovery,
although
it
is
recommended
[
</ins><cite><a class="bibref" data-link-type="biblio" href= "#bib-wot-architecture11" title= "Web of Things (WoT) Architecture 1.1"><ins class="diff-new">
wot-architecture11
</ins></a></cite><ins class="diff-new">
].
</ins></p><p><ins class="diff-new">
The
WoT
Discovery
process
is
designed
so
that
nearly
any
client
that
can
fetch
a
single
TD
given
a
single
URI
can
be
said
to
support
WoT
Discovery.
Of
course,
Discoverers
may
support
more
powerful
Discovery
mechanisms,
but
some
of
these
have
additional
requirements.
Some
Introduction
mechanisms
can
return
multiple
URLs,
each
of
which
can
in
turn
be
used
to
fetch
at
least
one
TD.
So
even
without
a
TDD,
it
is
possible
to
discover
multiple
TDs.
</ins></p><p><ins class="diff-new">
The
following
assertions
describe
the
specific
responsibilities
of
a
Discoverer:
</ins></p><ul><li><span class="rfc2119-assertion" id= "discoverer-must-support-intros"><ins class="diff-new">
A
Discoverer
</ins><em class= "rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
support
at
least
one
Introduction
mechanism.
</ins></span><ins class="diff-new">
The
simplest
Introduction
mechanism,
Direct,
simply
provides
a
single
URL
of
a
target
TD.
This
assertion
results
in
different
minimal
requirements
depending
on
which
Introduction
mechanism
is
selected
out
of
the
several
available.
For
example,
when
Direct
is
used
as
the
sole
Introduction
mechanism,
at
a
minimum
a
Discoverer
must
be
able
to
accept
a
single
URL
pointing
at
a
TD.
Note,
however,
that
this
TD
could
still
be
describing
a
Directory.
Another
option
would
be
for
a
Discoverer
to
implement,
as
its
sole
Introduction
mechanism,
an
"automatic"
Introduction
mechanism
such
as
DNS-SD,
possibly
in
combination
with
mDNS.
In
this
case
the
application
code
running
in
the
Discoverer
would
not
have
to
supply
any
additional
information
to
invoke
Discovery.
</ins></li><li><span class="rfc2119-assertion" id= "discoverer-must-support-fetching"><ins class="diff-new">
A
Discoverer
</ins><em class= "rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
support
fetching
a
TD
from
at
least
one
URL
provided
as
part
of
the
Introduction
process.
</ins></span><ins class="diff-new">
In
other
words,
not
only
must
a
Discoverer
accept
URLs
pointing
at
TDs,
it
must
be
able
to
fetch
that
TD,
for
example
by
using
a
GET
for
an
HTTP
URL.
It
is
permissible
to
split
the
implementation
of
a
Discoverer
into
two
components,
one
that
fetches/reads
a
TD
and
sets
up
a
configuration
during
installation
to
be
used
by
a
run-time
component
that
cannot
itself
read
TDs.
In
this
case,
however,
the
latter
component
is
not
by
itself
a
Discoverer.
</ins></li><li><span class="rfc2119-assertion" id= "discoverer-may-multiple-intro"><ins class="diff-new">
A
Discoverer
</ins><em class= "rfc2119"><ins class="diff-new">
MAY
</ins></em><ins class="diff-new">
support
multiple
invocations
of
the
same
Introduction
mechanism.
</ins></span><ins class="diff-new">
If
multiple
invocations
of
a
single
Introduction
mechanism
is
supported,
or
if
multiple
Introduction
mechanisms
are
used,
then
the
Discoverer
needs
to
manage
a
set
of
Introduction
results.
Some
Introduction
mechanisms
themselves
return
a
set
of
results,
e.g.
CoRE-RD,
DID,
or
DNS-SD.
Some
mechanisms,
such
as
scanning
Bluetooth
beacons,
may
intrinsically
result
in
separate
multiple
"invocations".
However,
this
Discoverer
requirement
is
optional
to
support
an
important
special
case:
it
is
permissible
to
have
a
simple
Discoverer
that
only
supports
a
single
invocation
of
a
Direct
Introduction,
directly
specifying
a
single
TD
via
a
URL.
</ins></li><li><span class="rfc2119-assertion" id="discoverer-merge-intros"><ins class="diff-new">
A
Discoverer
</ins><em class="rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
be
able
to
merge
URLs
resulting
from
multiple
Introduction
mechanisms,
multiple
results
from
a
single
Introduction
mechanism,
and
multiple
Introduction
invocations
into
a
single
set.
</ins></span><ins class="diff-new">
Note
that
even
if
only
one
Introduction
mechanism
is
supported
multiple
results
might
be
produced.
This
assertion
states
that
the
overall
output
of
the
Introduction
phase
is
a
single
set
of
URLs.
The
word
"set"
is
used
here
in
the
mathematical
sense:
the
results
are
unordered
and
unique.
Uniqueness
means
that
if
multiple
Introductions
have
the
same
result,
they
are
merged
into
a
single
result.
If
the
Discoverer
only
supports
one
Introduction
mechanism
and
that
mechanism
can
only
produce
one
URL,
then
the
"merge"
is
trivial.
</ins></li><li><span class="rfc2119-assertion" id="discoverer-td-identify"><ins class="diff-new">
A
Discoverer
</ins><em class="rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
be
able
to
identify
whether
a
TD
fetched
from
an
Introduction
URL
has
</ins><a href= "#exploration-td-type-thingdirectory"><ins class="diff-new">
Thing
Directory
</ins></a><ins class="diff-new">
or
</ins><a href="#exploration-td-type-thingdirectory"><ins class="diff-new">
Thing
Link
</ins></a><ins class="diff-new">
type.
</ins></span><ins class="diff-new">
This
implies
that
the
Discoverer
needs
to
be
able
to
check
the
</ins><code><ins class="diff-new">
@type
</ins></code><ins class="diff-new">
field
and
make
this
distinction.
A
Discoverer
can
decide
whether
or
not
to
follow
links
or
fetch
TDD
contents.
There
are
some
use
cases
where
a
Consumer
may
not
expand
certain
URLs,
for
example
links
pointing
at
external
resources,
or
when
a
TDD
contains
many
TDs
and
fetching
them
all
would
exceed
the
Consumer's
memory
processing
capabilities.
</ins></li><li><span class="rfc2119-assertion" id="discoverer-fetch-tdd"><ins class="diff-new">
A
Discoverer
</ins><em class="rfc2119"><ins class="diff-new">
MAY
</ins></em><ins class="diff-new">
fetch
additional
TDs
from
any
Exploration
mechanism
described
in
its
initial
set
of
TDs
(including,
in
particular,
Thing
Description
Directories)
and
add
them
into
the
set
of
TD
results.
</ins></span><ins class="diff-new">
This
only
adds
the
results
of
fetching
TDs
from
an
Exploration
mechanism
to
the
set
of
results.
These
new
results
do
not
delete
the
original
TD
describing
the
Exploration
mechanism.
A
Discoverer
implementation
can
decide
whether
or
not
to
fetch
TDD
contents.
Implementers
should
consider
the
fact
that
TDDs
may
be
large
and
fetching
the
contents
of
an
entire
TDD
might
be
prohibitively
expensive.
</ins></li><li><span class="rfc2119-assertion" id="discoverer-fetch-links"><ins class="diff-new">
A
Discoverer
</ins><em class="rfc2119"><ins class="diff-new">
MAY
</ins></em><ins class="diff-new">
fetch
source
TDs
from
the
targets
of
the
links
in
a
</ins><a href= "#exploration-td-type-thingdirectory"><ins class="diff-new">
Thing
Link
</ins></a><ins class="diff-new">
described
in
its
initial
set
of
TDs
and
add
them
into
the
set
of
TD
results.
</ins></span><ins class="diff-new">
This
only
adds
the
results
of
fetching
TDs
from
a
Thing
Link
to
the
set
of
results.
These
new
results
do
not
delete
the
original
TD
describing
the
Thing
Link.
A
Discoverer
implementation
can
decide
whether
or
not
to
fetch
the
targets
of
Thing
Links.
</ins></li><li><span class="rfc2119-assertion" id= "discoverer-fetch-iteration"><ins class="diff-new">
A
Discoverer
</ins><em class= "rfc2119"><ins class="diff-new">
MAY
</ins></em><ins class="diff-new">
fetch
additional
TDs
iteratively
from
any
</ins><a href="#exploration-td-type-thingdirectory"><ins class="diff-new">
Thing
Link
</ins></a><ins class="diff-new">
or
Exploration
mechanism
described
in
its
set
of
TDs
and
add
them
into
the
set
of
TD
results.
</ins></span><ins class="diff-new">
This
only
adds
the
results
of
fetching
TDs
from
an
Exploration
mechanism
to
the
set
of
results.
These
new
results
do
not
delete
the
original
TD
describing
the
Exploration
mechanism.
</ins></li><li><span class="rfc2119-assertion" id="discoverer-termination"><ins class="diff-new">
A
Discoverer
</ins><em class="rfc2119"><ins class="diff-new">
MAY
</ins></em><ins class="diff-new">
terminate
fetching
additional
TDs
at
any
point
or
for
any
reason.
</ins></span></li><li><span class="rfc2119-assertion" id="discoverer-any-order"><ins class="diff-new">
A
Discoverer
</ins><em class="rfc2119"><ins class="diff-new">
MAY
</ins></em><ins class="diff-new">
fetch
additional
TDs
by
following
links
or
fetching
additional
TDs
from
Exploration
mechanisms
(e.g.
TDDs)
in
any
order.
</ins></span><ins class="diff-new">
The
Discoverer
can
fetch
additional
TDs
in
any
order
from
any
Exploration
mechanism
and
is
not
required
to
use
all
of
them.
</ins></li><li><span class="rfc2119-assertion" id="discoverer-track"><ins class="diff-new">
A
Discoverer
</ins><em class="rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
track
which
TDs
describing
links
or
Exploration
mechanisms
have
already
been
fetched
and
avoid
fetching
duplicate
results.
</ins></span><ins class="diff-new">
This
is
to
avoid
infinite
loops.
Note
that
Thing
Description
Directories
can
easily
refer
to
each
other,
for
example,
so
fetching
the
TDs
from
a
TDD,
then
fetching
all
those
TDs
will
give
another
copy
of
the
original
TDD's
TD.
This
second
copy
should
NOT
trigger
further
fetches.
Note
that
tracking
cannot
depend
only
on
the
value
of
"id"
fields
in
TDs
since
this
field
is
optional.
</ins></li></ul><p><ins class="diff-new">
The
above
process
supports
a
way
to
let
Directories
reference
other
Directories
without
duplicating
their
TDs:
a
Directory
wanting
to
reference
other
Directories
should
include
a
</ins><a href= "#exploration-td-type-thingdirectory"><ins class="diff-new">
Thing
Link
</ins></a><ins class="diff-new">
with
a
"describedby"
relation
to
the
TD
of
the
other
Directory
service.
Then
the
above
process
would
expand
the
Thing
Link
to
obtain
the
actual
TD
of
the
Directory,
and
then
(optionally)
use
the
appropriate
Directory
affordance
to
access
the
contents
of
the
linked
Directory.
Note
that
such
a
Thing
Link
points
at
the
TD
of
the
Directory,
not
at
the
Directory
itself.
These
may
or
may
not
be
hosted
in
the
same
location.
</ins></p><p><ins class="diff-new">
Recursively
fetching
the
contents
of
such
linked
directories,
especially
without
a
specific
query
or
filter,
could
easily
result
in
downloading
a
large
amount
of
data.
Such
recursive
expansion
should
be
limited
to
use
cases
that
require
it,
such
as
inventory,
auditing,
or
indexing.
</ins></p><p><ins class="diff-new">
URLs
for
Directory
services
can
also
be
used
with
the
federation
capabilities
of
SPARQL
queries,
noted
below,
which
in
most
cases
will
be
a
more
efficient
way
to
collect
specific
information
from
a
set
of
distributed
directory
services.
However,
SPARQL
requires
the
URL
of
a
SPARQL
endpoint
for
such
federation,
which
can
be
found
in
the
TDs
of
Directories
supporting
SPARQL
queries.
This
is
not
the
same
as
the
URL
pointing
at
the
TD
of
a
Directory.
</ins></p></section><section id="introduction-mech" class="normative"><div class="header-wrapper"><h2 id="x6-introduction-mechanisms"><bdi class="secno"><ins class="diff-new">
6.
</ins></bdi><ins class="diff-new">
Introduction
Mechanisms
</ins></h2><a class="self-link" href="#introduction-mech" aria-label= "Permalink for Section 6."></a></div><p><ins class="diff-new">
This
chapter
describes
mechanisms
for
initial
contact
with
Things
or
</ins><a href="#dfn-wot-thing-description-directory" class= "internalDFN" data-link-type="dfn" id= "ref-for-dfn-wot-thing-description-directory-1"><ins class="diff-new">
Thing
Description
Directories
</ins></a>.<ins class="diff-new">
Any
of
the
following
mechanisms
may
be
provided
by
the
Thing
or
the
</ins><a href="#dfn-wot-thing-description-directory" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-wot-thing-description-directory-2"><ins class="diff-new">
Thing
Description
Directory
</ins></a><ins class="diff-new">
to
Consumers.
The
result
of
an
introduction
mechanism
is
always
a
URL
(address)
of
an
exploration
service
which
can
be
used
to
obtain
detailed
metadata
(TDs)
after
suitable
authentication.
It
is
also
possible
for
multiple
introduction
mechanisms
to
be
used
and
the
results
merged.
No
particular
introduction
mechanism
is
mandatory,
as
long
as
the
URL
of
at
least
one
exploration
service
is
somehow
obtained.
</ins></p><section id="introduction-direct" class="normative"><div class="header-wrapper"><h3 id="x6-1-direct"><bdi class="secno"><ins class="diff-new">
6.1
</ins></bdi><ins class="diff-new">
Direct
</ins></h3><a class="self-link" href="#introduction-direct" aria-label= "Permalink for Section 6.1"></a></div><p><span class="rfc2119-assertion" id="introduction-direct-url"><ins class="diff-new">
To
obtain
an
URL
of
an
exploration
service,
any
mechanism
that
results
in
a
single
URL
</ins><em class="rfc2119"><ins class="diff-new">
MAY
</ins></em><ins class="diff-new">
be
used.
</ins></span><ins class="diff-new">
This
includes
Bluetooth
beacons,
QR
codes,
and
written
URLs
to
be
typed
by
a
user.
</ins><span class="rfc2119-assertion" id= "introduction-direct-thing-description"><ins class="diff-new">
A
request
on
all
such
URLs
</ins><em class="rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
result
in
a
TD
as
prescribed
in
</ins><a href="#exploration-mech" data-matched-text= "[[[#exploration-mech]]]" class="sec-ref"><bdi class= "secno"><ins class="diff-new">
7.
</ins></bdi><ins class="diff-new">
Exploration
Mechanisms
</ins></a>.</span><ins class="diff-new">
For
self-describing
Things,
this
can
be
the
TD
of
the
Thing
itself.
</ins><span class="rfc2119-assertion" id= "introduction-direct-directory-description"><ins class="diff-new">
If
the
URL
references
a
</ins><a href="#dfn-wot-thing-description-directory" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-wot-thing-description-directory-3"><ins class="diff-new">
Thing
Description
Directory
</ins></a>,<ins class="diff-new">
this
</ins><em class="rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
be
the
Thing
Description
of
the
</ins><a href="#dfn-wot-thing-description-directory" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-wot-thing-description-directory-4"><ins class="diff-new">
Thing
Description
Directory
</ins></a>.</span></p></section><section id="introduction-well-known" class="normative"><div class="header-wrapper"><h3 id="x6-2-well-known-uris"><bdi class="secno"><ins class="diff-new">
6.2
</ins></bdi><ins class="diff-new">
Well-Known
URIs
</ins></h3><a class="self-link" href="#introduction-well-known" aria-label= "Permalink for Section 6.2"></a></div><p><span class="rfc2119-assertion" id= "introduction-well-known-uri"><ins class="diff-new">
A
Thing
or
</ins><a href= "#dfn-wot-thing-description-directory" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-wot-thing-description-directory-5"><ins class="diff-new">
Thing
Description
Directory
</ins></a><em class="rfc2119"><ins class="diff-new">
MAY
</ins></em><ins class="diff-new">
use
the
Well-Known
Uniform
Resource
Identifier
[
</ins><cite><a class="bibref" data-link-type="biblio" href="#bib-rfc8615" title= "Well-Known Uniform Resource Identifiers (URIs)"><ins class="diff-new">
RFC8615
</ins></a></cite><ins class="diff-new">
]
to
advertise
its
presence.
</ins></span><span class="rfc2119-assertion" id="introduction-well-known-path"><ins class="diff-new">
If
a
Thing
or
</ins><a href= "#dfn-wot-thing-description-directory" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-wot-thing-description-directory-6"><ins class="diff-new">
Thing
Description
Directory
</ins></a><ins class="diff-new">
use
the
Well-Known
Uniform
Resource
Identifier
[
</ins><cite><a class="bibref" data-link-type="biblio" href= "#bib-rfc8615" title= "Well-Known Uniform Resource Identifiers (URIs)"><ins class="diff-new">
RFC8615
</ins></a></cite><ins class="diff-new">
]
to
advertise
its
presence,
it
</ins><em class="rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
register
its
own
Thing
Description
into
the
following
path:
</ins><code><ins class="diff-new">
/.well-known/wot
</ins></code>.</span></p><p><span class="rfc2119-assertion" id= "introduction-well-known-thing-description"><ins class="diff-new">
When
a
request
is
made
at
the
above
Well-Known
URI,
the
server
</ins><em class= "rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
return
a
Thing
Description
as
prescribed
in
</ins><a href="#exploration-mech" data-matched-text= "[[[#exploration-mech]]]" class="sec-ref"><bdi class= "secno"><ins class="diff-new">
7.
</ins></bdi><ins class="diff-new">
Exploration
Mechanisms
</ins></a>.</span></p></section><section id="introduction-dns-sd-sec" class="normative"><div class="header-wrapper"><h3 id="x6-3-dns-based-service-discovery"><bdi class= "secno"><ins class="diff-new">
6.3
</ins></bdi><ins class="diff-new">
DNS-Based
Service
Discovery
</ins></h3><a class="self-link" href="#introduction-dns-sd-sec" aria-label= "Permalink for Section 6.3"></a></div><p><span class="rfc2119-assertion" id="introduction-dns-sd"><ins class="diff-new">
A
Thing
or
</ins><a href="#dfn-wot-thing-description-directory" class= "internalDFN" data-link-type="dfn" id= "ref-for-dfn-wot-thing-description-directory-7"><ins class="diff-new">
Thing
Description
Directory
</ins></a><em class="rfc2119"><ins class="diff-new">
MAY
</ins></em><ins class="diff-new">
use
DNS-Based
Service
Discovery
(DNS-SD)[
</ins><cite><a class="bibref" data-link-type="biblio" href="#bib-rfc6763" title= "DNS-Based Service Discovery"><ins class="diff-new">
RFC6763
</ins></a></cite><ins class="diff-new">
].
</ins></span><ins class="diff-new">
This
can
be
also
be
used
on
the
same
local
network
in
combination
with
Multicast
DNS
(mDNS)[
</ins><cite><a class="bibref" data-link-type= "biblio" href="#bib-rfc6762" title= "Multicast DNS"><ins class="diff-new">
RFC6762
</ins></a></cite><ins class="diff-new">
].
</ins></p><p><ins class="diff-new">
The
following
table
lists
the
service
names
and
protocols
for
advertising
their
presense.
These
are
normative
since
each
has
a
valid
use
with
existing
exploration
mechanisms:
</ins></p><table class="def"><thead><tr><th><ins class="diff-new">
Service
name
</ins></th><th><ins class="diff-new">
Thing
or
TDD
</ins></th><th><ins class="diff-new">
Protocol
</ins></th></tr></thead><tbody><tr class="rfc2119-table-assertion" id= "introduction-dns-sd-service-name"><td><code><ins class="diff-new">
_wot._tcp
</ins></code></td><td><ins class="diff-new">
Thing
</ins></td><td><ins class="diff-new">
HTTP
over
TCP,
HTTP
over
TLS/TCP,
CoAP
over
TCP,
or
CoAP
over
TLS/TCP
</ins></td></tr><tr class="rfc2119-table-assertion" id= "introduction-dns-sd-service-name-directory"><td><code><ins class="diff-new">
_directory._sub._wot._tcp
</ins></code></td><td><ins class="diff-new">
TDD
</ins></td><td><ins class="diff-new">
HTTP
over
TCP,
HTTP
over
TLS/TCP,
CoAP
over
TCP,
or
CoAP
over
TLS/TCP
</ins></td></tr><tr class="rfc2119-table-assertion" id= "introduction-dns-sd-service-name-udp"><td><code><ins class="diff-new">
_wot._udp
</ins></code></td><td><ins class="diff-new">
Thing
</ins></td><td><ins class="diff-new">
CoAP
over
UDP
or
CoAP
over
DTLS/UDP
</ins></td></tr></tbody></table><p><ins class="diff-new">
The
following
additional
service
name
has
been
defined
for
future
use.
This
definition
is
however
informative
since
there
is
currently
no
defined
directory
service
using
CoAP
over
UDP:
</ins></p><table class="def"><thead><tr><th><ins class="diff-new">
Service
name
</ins></th><th><ins class="diff-new">
Thing
or
TDD
</ins></th><th><ins class="diff-new">
Protocol
</ins></th></tr></thead><tbody><tr><td><code><ins class="diff-new">
_directory._sub._wot._udp
</ins></code></td><td><ins class="diff-new">
TDD
</ins></td><td><ins class="diff-new">
CoAP
over
UDP
or
CoAP
over
DTLS/UDP
</ins></td></tr></tbody></table><div class="rfc2119-assertion" id="introduction-dns-sd-txt-record"><p><ins class="diff-new">
For
TCP-based
services,
the
following
information
</ins><em class= "rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
be
included
in
the
</ins><code><ins class="diff-new">
TXT
</ins></code><ins class="diff-new">
record
that
is
pointed
to
by
the
Service
Instance
Name:
</ins></p><dl><dt><code><ins class="diff-new">
td
</ins></code></dt><dd><ins class="diff-new">
Absolute
pathname
of
the
Thing
Description
of
the
Thing
or
Thing
Description
of
the
</ins><a href= "#dfn-wot-thing-description-directory" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-wot-thing-description-directory-8"><ins class="diff-new">
Thing
Description
Directory
</ins></a>.</dd><dt><code><ins class="diff-new">
type
</ins></code></dt><dd><ins class="diff-new">
Type
of
the
Thing
Description,
i.e.
</ins><code><ins class="diff-new">
Thing
</ins></code><ins class="diff-new">
or
</ins><code><ins class="diff-new">
Directory
</ins></code>.<ins class="diff-new">
If
omitted,
the
type
is
assumed
to
be
</ins><code><ins class="diff-new">
Thing
</ins></code>.</dd><dt><code><ins class="diff-new">
scheme
</ins></code></dt><dd><ins class="diff-new">
Scheme
part
of
URL.
One
of
the
following
values
can
be
specified,
with
the
standard
registered
URI
interpretations
[
</ins><cite><a class="bibref" data-link-type="biblio" href= "#bib-rfc7595" title= "Guidelines and Registration Procedures for URI Schemes"><ins class="diff-new">
RFC7595
</ins></a></cite><ins class="diff-new">
]:
</ins><code><ins class="diff-new">
http
</ins></code><ins class="diff-new">
(HTTP
over
TCP),
</ins><code><ins class="diff-new">
https
</ins></code><ins class="diff-new">
(HTTP
over
TLS/TCP),
</ins><code><ins class="diff-new">
coap+tcp
</ins></code><ins class="diff-new">
(CoAP
over
TCP),
or
</ins><code><ins class="diff-new">
coaps+tcp
</ins></code><ins class="diff-new">
(CoAP
over
TLS/TCP).
If
omitted,
the
scheme
is
assumed
to
be
</ins><code><ins class="diff-new">
http
</ins></code>.</dd></dl></div><div class="rfc2119-assertion" id= "introduction-dns-sd-txt-record-udp"><p><ins class="diff-new">
For
UDP-based
services,
the
following
information
</ins><em class= "rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
be
included
in
the
</ins><code><ins class="diff-new">
TXT
</ins></code><ins class="diff-new">
record
that
is
pointed
to
by
the
Service
Instance
Name:
</ins></p><dl><dt><code><ins class="diff-new">
td
</ins></code></dt><dd><ins class="diff-new">
Absolute
pathname
of
the
Thing
Description
of
the
Thing
or
Thing
Description
of
the
</ins><a href= "#dfn-wot-thing-description-directory" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-wot-thing-description-directory-9"><ins class="diff-new">
Thing
Description
Directory
</ins></a>.</dd><dt><code><ins class="diff-new">
type
</ins></code></dt><dd><ins class="diff-new">
Type
of
the
Thing
Description,
i.e.
</ins><code><ins class="diff-new">
Thing
</ins></code><ins class="diff-new">
or
</ins><code><ins class="diff-new">
Directory
</ins></code>.<ins class="diff-new">
If
omitted,
the
type
is
assumed
to
be
</ins><code><ins class="diff-new">
Thing
</ins></code>.</dd><dt><code><ins class="diff-new">
scheme
</ins></code></dt><dd><ins class="diff-new">
Scheme
part
of
URL.
One
of
the
following
values
can
be
specified,
with
the
standard
registered
URI
interpretations
[
</ins><cite><a class="bibref" data-link-type="biblio" href= "#bib-rfc7595" title= "Guidelines and Registration Procedures for URI Schemes"><ins class="diff-new">
RFC7595
</ins></a></cite><ins class="diff-new">
]:
</ins><code><ins class="diff-new">
coap
</ins></code><ins class="diff-new">
(CoAP
over
UDP)
or
</ins><code><ins class="diff-new">
coaps
</ins></code><ins class="diff-new">
(CoAP
over
DTLS/UDP).
If
omitted,
the
scheme
is
assumed
to
be
</ins><code><ins class="diff-new">
coap
</ins></code>.</dd></dl></div><p><a href="#sequence-dnssd-thing" class="fig-ref" title= "Using mDNS for discovery of the Thing Description of a Thing"><ins class="diff-new">
Figure
</ins><bdi class=""><ins class="diff-new">
2
</ins></bdi></a><ins class="diff-new">
and
</ins><a href="#sequence-dnssd-directory" class="fig-ref" title= "Using mDNS for discovery of the Thing Description of a Thing Description Directory (TDD)"><ins class="diff-new">
Figure
</ins><bdi class=""><ins class="diff-new">
3
</ins></bdi></a><ins class="diff-new">
shows
example
sequences
supporting
discovery
of
a
Thing
or
a
</ins><a href= "#dfn-wot-thing-description-directory" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-wot-thing-description-directory-10"><ins class="diff-new">
Thing
Description
Directory
</ins></a><ins class="diff-new">
using
DNS-SD
and
mDNS.
</ins></p><figure id="sequence-dnssd-thing"><img src= "images/sequence-dnssd-thing.png" srcset= "images/sequence-dnssd-thing.svg" class="wot-diagram" alt= "An example sequence of discovery of Thing using DNS-SD and mDNS" /><figcaption><a class="self-link" href= "#sequence-dnssd-thing"><ins class="diff-new">
Figure
</ins><bdi class="figno"><ins class="diff-new">
2
</ins></bdi></a><span class="fig-title"><ins class="diff-new">
Using
mDNS
for
discovery
of
the
Thing
Description
of
a
Thing
</ins></span></figcaption></figure><figure id="sequence-dnssd-directory"><img src= "images/sequence-dnssd-directory.png" srcset= "images/sequence-dnssd-directory.svg" class="wot-diagram" alt= "An example sequence of discovery of directory service using DNS-SD and mDNS" /><figcaption><a class="self-link" href= "#sequence-dnssd-directory"><ins class="diff-new">
Figure
</ins><bdi class="figno"><ins class="diff-new">
3
</ins></bdi></a><span class="fig-title"><ins class="diff-new">
Using
mDNS
for
discovery
of
the
Thing
Description
of
a
Thing
Description
Directory
(TDD)
</ins></span></figcaption></figure></section><section id="introduction-core-rd-sec" class="normative"><div class="header-wrapper"><h3 id="x6-4-core-link-format-and-core-resource-directory"><bdi class="secno"><ins class="diff-new">
6.4
</ins></bdi><ins class="diff-new">
CoRE
Link
Format
and
CoRE
Resource
Directory
</ins></h3><a class="self-link" href="#introduction-core-rd-sec" aria-label= "Permalink for Section 6.4"></a></div><p><span class="rfc2119-assertion" id="introduction-core-rd"><ins class="diff-new">
A
Thing
or
</ins><a href="#dfn-wot-thing-description-directory" class= "internalDFN" data-link-type="dfn" id= "ref-for-dfn-wot-thing-description-directory-11"><ins class="diff-new">
Thing
Description
Directory
</ins></a><em class="rfc2119"><ins class="diff-new">
MAY
</ins></em><ins class="diff-new">
advertise
its
presence
using
the
Constrained
RESTful
Environment
(CoRE)
Link
Format
[
</ins><cite><a class="bibref" data-link-type="biblio" href= "#bib-rfc6690" title= "Constrained RESTful Environments (CoRE) Link Format"><ins class="diff-new">
RFC6690
</ins></a></cite><ins class="diff-new">
].
</ins></span><span class="rfc2119-assertion" id= "introduction-core-rd-directory"><ins class="diff-new">
A
</ins><a href="#dfn-thing" class= "internalDFN" data-link-type="dfn" id= "ref-for-dfn-thing-1"><ins class="diff-new">
Thing
</ins></a><ins class="diff-new">
or
</ins><a href= "#dfn-wot-thing-description-directory" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-wot-thing-description-directory-12"><ins class="diff-new">
Thing
Description
Directory
</ins></a><em class="rfc2119"><ins class="diff-new">
MAY
</ins></em><ins class="diff-new">
use
the
CoRE
Resource
Directory
[
</ins><cite><a class="bibref" data-link-type="biblio" href= "#bib-rfc9176" title= "Constrained RESTful Environments (CoRE) Resource Directory"><ins class="diff-new">
RFC9176
</ins></a></cite><ins class="diff-new">
]
to
register
a
link
to
its
corresponding
Thing
Description.
</ins></span></p><p><span class="rfc2119-assertion" id= "introduction-core-rd-resource-type-thing"><ins class="diff-new">
The
resource
type
(
</ins><code><ins class="diff-new">
rt
</ins></code><ins class="diff-new">
)
of
the
Link
that
targets
the
Thing
Description
of
the
Thing
</ins><em class="rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
be
</ins><code><ins class="diff-new">
wot.thing
</ins></code>.</span><span class="rfc2119-assertion" id= "introduction-core-rd-resource-type-directory"><ins class="diff-new">
The
resource
type
of
the
Link
that
targets
the
Thing
Description
of
the
</ins><a href= "#dfn-wot-thing-description-directory" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-wot-thing-description-directory-13"><ins class="diff-new">
Thing
Description
Directory
</ins></a><em class="rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
be
</ins><code><ins class="diff-new">
wot.directory
</ins></code>.</span></p></section><section id="introduction-did-sec" class="normative"><div class="header-wrapper"><h3 id="x6-5-did-documents"><bdi class="secno"><ins class="diff-new">
6.5
</ins></bdi><ins class="diff-new">
DID
Documents
</ins></h3><a class="self-link" href="#introduction-did-sec" aria-label= "Permalink for Section 6.5"></a></div><p><span class="rfc2119-assertion" id="introduction-did"><ins class="diff-new">
A
</ins><a href= "#dfn-thing" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-thing-2"><ins class="diff-new">
Thing
</ins></a><ins class="diff-new">
or
</ins><a href= "#dfn-wot-thing-description-directory" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-wot-thing-description-directory-14"><ins class="diff-new">
Thing
Description
Directory
</ins></a><ins class="diff-new">
using
a
Decentralized
Identifier
(DID)
[
</ins><cite><a class="bibref" data-link-type="biblio" href= "#bib-did-core" title= "Decentralized Identifiers (DIDs) v1.0"><ins class="diff-new">
DID-CORE
</ins></a></cite><ins class="diff-new">
]
</ins><em class="rfc2119"><ins class="diff-new">
MAY
</ins></em><ins class="diff-new">
advertise
the
location
of
its
</ins><a href= "#dfn-td" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-td-1"><ins class="diff-new">
TD
</ins></a><ins class="diff-new">
by
including
a
DID
Service
Endpoint
of
type
</ins><code><ins class="diff-new">
WotThing
</ins></code><ins class="diff-new">
or
</ins><code><ins class="diff-new">
WotDirectory
</ins></code>,<ins class="diff-new">
respectively,
in
the
DID
Document
that
the
TD's
identifier
resolves
to.
</ins></span></p><p><span class="rfc2119-assertion" id= "introduction-did-service-context"><ins class="diff-new">
In
order
to
define
Service
Endpoints
for
WoT
Discovery,
the
DID
Document
obtained
by
resolving
the
DID
of
a
</ins><a href="#dfn-thing" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-thing-3"><ins class="diff-new">
Thing
</ins></a><ins class="diff-new">
or
</ins><a href= "#dfn-wot-thing-description-directory" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-wot-thing-description-directory-15"><ins class="diff-new">
Thing
Description
Directory
</ins></a><em class="rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
include
the
URL
</ins><code><ins class="diff-new">
https://www.w3.org/2022/wot/discovery-did
</ins></code><ins class="diff-new">
in
its
</ins><code><ins class="diff-new">
@context
</ins></code><ins class="diff-new">
[
</ins><cite><a class="bibref" data-link-type= "biblio" href="#bib-did-spec-registries" title= "DID Specification Registries"><ins class="diff-new">
did-spec-registries
</ins></a></cite><ins class="diff-new">
].
</ins></span></p><p><span class="rfc2119-assertion" id= "introduction-did-service-endpoint"><ins class="diff-new">
If
the
DID
Document
obtained
by
resolving
the
DID
of
a
</ins><a href="#dfn-thing" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-thing-4"><ins class="diff-new">
Thing
</ins></a><ins class="diff-new">
or
</ins><a href= "#dfn-wot-thing-description-directory" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-wot-thing-description-directory-16"><ins class="diff-new">
Thing
Description
Directory
</ins></a><ins class="diff-new">
contains
a
Service
Endpoint
of
type
</ins><code><ins class="diff-new">
WotThing
</ins></code><ins class="diff-new">
or
</ins><code><ins class="diff-new">
WotDirectory
</ins></code>,<ins class="diff-new">
respectively,
then
this
Service
Endpoint
</ins><em class="rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
refer
to
the
</ins><a href="#dfn-td" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-td-2"><ins class="diff-new">
TD
</ins></a><ins class="diff-new">
describing
that
Thing
(when
using
the
</ins><code><ins class="diff-new">
WotThing
</ins></code><ins class="diff-new">
service
name)
or
the
</ins><a href="#dfn-td" class= "internalDFN" data-link-type="dfn" id="ref-for-dfn-td-3"><ins class="diff-new">
TD
</ins></a><ins class="diff-new">
describing
that
</ins><a href="#dfn-wot-thing-description-directory" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-wot-thing-description-directory-17"><ins class="diff-new">
Thing
Description
Directory
</ins></a><ins class="diff-new">
(when
using
the
</ins><code><ins class="diff-new">
WotDirectory
</ins></code><ins class="diff-new">
service
name),
respectively
[
</ins><cite><a class="bibref" data-link-type= "biblio" href="#bib-did-spec-registries" title= "DID Specification Registries"><ins class="diff-new">
did-spec-registries
</ins></a></cite><ins class="diff-new">
].
</ins></span></p><aside class="example" id= "example-a-example-service-endpoint-in-a-did-document-wotthing"><div class="marker"><a class="self-link" href= "#example-a-example-service-endpoint-in-a-did-document-wotthing"><ins class="diff-new">
Example
</ins><bdi><ins class="diff-new">
1
</ins></bdi></a><span class="example-title">:<ins class="diff-new">
A
Example
Service
Endpoint
in
a
DID
Document
-
WotThing
</ins></span></div><pre aria-busy="false"><code class="hljs javascript">{    <span class="hljs-string">"@context"</span>:[        <span class=<ins class="diff-new">
"hljs-string">"https://www.w3.org/ns/did/v1"</span>,
</ins>        <span class=<ins class="diff-new">
"hljs-string">"https://www.w3.org/2022/wot/discovery-did"</span>
    ],
    ...
</ins>    <span class="hljs-string">"service"</span>: [{        <span class="hljs-string">"id"</span>: <span class=<ins class="diff-new">
"hljs-string">"did:example:wotdiscoveryexample#td"</span>,
</ins>        <span class="hljs-string">"type"</span>: <span class=<ins class="diff-new">
"hljs-string">"WotThing"</span>,
</ins>        <span class="hljs-string">"serviceEndpoint"</span>:            <span class=<ins class="diff-new">
"hljs-string">"https://wot.example.com/.well-known/wot"</span>
    }]
    ...
}
</ins></code></pre></aside><aside class="example" id= "example-a-example-service-endpoint-in-a-did-document-wotdirectory"><div class="marker"><a class="self-link" href= "#example-a-example-service-endpoint-in-a-did-document-wotdirectory"><ins class="diff-new">
Example
</ins><bdi><ins class="diff-new">
2
</ins></bdi></a><span class="example-title">:<ins class="diff-new">
A
Example
Service
Endpoint
in
a
DID
Document
-
WotDirectory
</ins></span></div><pre aria-busy="false"><code class="hljs javascript">{    <span class="hljs-string">"@context"</span>:[        <span class=<ins class="diff-new">
"hljs-string">"https://www.w3.org/ns/did/v1"</span>,
</ins>        <span class=<ins class="diff-new">
"hljs-string">"https://www.w3.org/2022/wot/discovery-did"</span>
    ],
    ...
</ins>    <span class="hljs-string">"service"</span>: [{        <span class="hljs-string">"id"</span>: <span class=<ins class="diff-new">
"hljs-string">"did:example:wotdiscoveryexample#tdd"</span>,
</ins>        <span class="hljs-string">"type"</span>: <span class=<ins class="diff-new">
"hljs-string">"WotDirectory"</span>,
</ins>        <span class="hljs-string">"serviceEndpoint"</span>:            <span class=<ins class="diff-new">
"hljs-string">"https://wot.example.com/tdd"</span>
    }]
    ...
}
</ins></code></pre></aside></section></section><section id="exploration-mech" class="normative"><div class="header-wrapper"><h2 id="x7-exploration-mechanisms"><bdi class="secno"><ins class="diff-new">
7.
</ins></bdi><ins class="diff-new">
Exploration
Mechanisms
</ins></h2><a class="self-link" href="#exploration-mech" aria-label= "Permalink for Section 7."></a></div><ins class="diff-new">
This
section
defines
the
supported
exploration
mechanisms
after
providing
some
common
background
material.
</ins><section id="exploration-overview" class="normative"><div class="header-wrapper"><h3 id="x7-1-overview"><bdi class="secno"><ins class="diff-new">
7.1
</ins></bdi><ins class="diff-new">
Overview
</ins></h3><a class="self-link" href="#exploration-overview" aria-label= "Permalink for Section 7.1"></a></div><figure id="exploration-class-diagram"><img src= "images/exploration-class-diagram.svg" class="wot-diagram" alt= "Exploration mechanisms high-level class diagram" /><figcaption><a class="self-link" href= "#exploration-class-diagram"><ins class="diff-new">
Figure
</ins><bdi class="figno"><ins class="diff-new">
4
</ins></bdi></a><span class="fig-title"><ins class="diff-new">
The
high-level
class
diagram
of
the
exploration
mechanisms,
depicting
how
Thing
Description
Servers
and
Thing
Description
Directories
provide
</ins><a href="#dfn-td" class= "internalDFN" data-link-type="dfn" id="ref-for-dfn-td-4"><ins class="diff-new">
TDs
</ins></a>.<ins class="diff-new">
A
Self-describing
Thing
is
a
special
case
of
a
Thing
Description
Server
that
is
also
a
Thing.
A
Thing
Description
Directory
acts
as
a
Thing
Description
Server
for
each
Thing
Description
it
contains.
</ins></span></figcaption></figure><p><a href="#exploration-class-diagram" data-matched-text= "[[[#exploration-class-diagram]]]" class="fig-ref" title= "The high-level class diagram of the exploration mechanisms, depicting how Thing Description Servers and Thing Description Directories provide TDs. A Self-describing Thing is a special case of a Thing Description Server that is also a Thing. A Thing Description Directory acts as a Thing Description Server for each Thing Description it contains."><ins class="diff-new">
Figure
</ins><bdi class=""><ins class="diff-new">
4
</ins></bdi></a><ins class="diff-new">
depicts
the
high-level
information
model
for
</ins><a href="#dfn-wot-td-server" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-wot-td-server-1"><ins class="diff-new">
TD
Servers
</ins></a><ins class="diff-new">
(serving
single
TDs,
including
those
for
self-description)
and
</ins><a href= "#dfn-wot-thing-description-directory" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-wot-thing-description-directory-18"><ins class="diff-new">
Thing
Description
Directory
</ins></a><ins class="diff-new">
services.
A
</ins><a href= "#dfn-wot-thing-description-directory" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-wot-thing-description-directory-19"><ins class="diff-new">
Thing
Description
Directory
</ins></a><ins class="diff-new">
may
contain
</ins><a href="#dfn-td" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-td-5"><ins class="diff-new">
TDs
</ins></a><ins class="diff-new">
and
at
the
same
time
is
also
a
Thing,
which
means
it
has
its
own
TD.
A
directory
also
hosts
web
service
endpoints
for
retrieving
individual
TDs
for
other
Things
and
each
of
these
can
be
used
as
a
TD
Server.
A
Thing
may
in
general
host
its
own
TD
in
which
case
it
is
a
Self-Describing
Thing.
Self-description
is
not
mandatory
for
directories,
but
Self-Describing
Thing
Description
Directories
are
possible
that
are
both
Thing
Description
Directories
and
Self-Describing
Things.
</ins></p><p><ins class="diff-new">
The
two
basic
exploration
mechanisms
are
described
in
</ins><a href= "#exploration-server" data-matched-text="[[[#exploration-server]]]" class="sec-ref"><bdi class="secno"><ins class="diff-new">
7.2
</ins></bdi><ins class="diff-new">
Thing
Description
Server
</ins></a><ins class="diff-new">
and
</ins><a href="#exploration-directory" data-matched-text= "[[[#exploration-directory]]]" class="sec-ref"><bdi class= "secno"><ins class="diff-new">
7.3
</ins></bdi><ins class="diff-new">
Thing
Description
Directory
</ins></a>.</p><section id="exploration-ontology" class="normative"><div class="header-wrapper"><h4 id="x7-1-1-ontology"><bdi class="secno"><ins class="diff-new">
7.1.1
</ins></bdi><ins class="diff-new">
Ontology
</ins></h4><a class="self-link" href="#exploration-ontology" aria-label= "Permalink for Section 7.1.1"></a></div><figure id="discovery-class-diagram-ontology"><img src= "images/discovery-class-diagram-ontology.svg" class="wot-diagram" alt="Ontology of TD in discovery context" /><figcaption><a class="self-link" href= "#discovery-class-diagram-ontology"><ins class="diff-new">
Figure
</ins><bdi class= "figno"><ins class="diff-new">
5
</ins></bdi></a><span class="fig-title"><ins class="diff-new">
The
ontology
of
Thing
Descriptions
in
the
Discovery
context.
</ins></span></figcaption></figure><p><a href="#discovery-class-diagram-ontology" data-matched-text= "[[[#discovery-class-diagram-ontology]]]" class="fig-ref" title= "The ontology of Thing Descriptions in the Discovery context."><ins class="diff-new">
Figure
</ins><bdi class=""><ins class="diff-new">
5
</ins></bdi></a><ins class="diff-new">
illustrates
the
Discovery
ontology
as
an
extension
of
the
Thing
ontology.
</ins></p><p><ins class="diff-new">
The
ontology
includes
a
class
for
metadata
that
are
associated
with
TDs
stored
in
a
directory.
This
class
is
called
</ins><code><ins class="diff-new">
RegistrationInformation
</ins></code><ins class="diff-new">
and
described
as
part
of
the
directory
specification
in
</ins><a href= "#exploration-directory-registration-info" data-matched-text= "[[[#exploration-directory-registration-info]]]" class= "sec-ref"><bdi class="secno"><ins class="diff-new">
7.3.1.1
</ins></bdi><ins class="diff-new">
Registration
Information
</ins></a>.</p><p><ins class="diff-new">
The
Discovery
ontology
also
defines
two
new
Thing
Description
classes,
described
in
the
following
sections,
that
may
be
used
to
model
special
exploratory
metadata:
</ins><a href= "#exploration-td-type-thingdirectory"><ins class="diff-new">
ThingDirectory
</ins></a><ins class="diff-new">
and
</ins><a href="#exploration-td-type-thinglink"><ins class="diff-new">
ThingLink
</ins></a>.</p><section id="exploration-td-type-thingdirectory" class="normative"><div class="header-wrapper"><h5 id="x7-1-1-1-thingdirectory"><bdi class="secno"><ins class="diff-new">
7.1.1.1
</ins></bdi><code><ins class="diff-new">
ThingDirectory
</ins></code></h5><a class="self-link" href="#exploration-td-type-thingdirectory" aria-label="Permalink for Section 7.1.1.1"></a></div><span class="rfc2119-assertion" id= "exploration-directory-description-type"><ins class="diff-new">
A
TD
which
describes
a
Thing
Description
Directory
instance
</ins><em class="rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
use
type
</ins><code><ins class="diff-new">
ThingDirectory
</ins></code><ins class="diff-new">
from
the
discovery
context
or
URI
</ins><code><ins class="diff-new">
https://www.w3.org/2022/wot/discovery#ThingDirectory
</ins></code>.</span><p><ins class="diff-new">
A
TD
of
this
class
can
be
derived
from
Directory's
Thing
Model;
see
</ins><a href="#directory-api-spec" data-matched-text= "[[[#directory-api-spec]]]" class="sec-ref"><bdi class= "secno"><ins class="diff-new">
7.3.2.4
</ins></bdi><ins class="diff-new">
API
Specification
(Thing
Model)
</ins></a>.</p></section><section id="exploration-td-type-thinglink" class="normative"><div class="header-wrapper"><h5 id="x7-1-1-2-thinglink"><bdi class="secno"><ins class="diff-new">
7.1.1.2
</ins></bdi><code><ins class="diff-new">
ThingLink
</ins></code></h5><a class="self-link" href="#exploration-td-type-thinglink" aria-label="Permalink for Section 7.1.1.2"></a></div><span class="rfc2119-assertion" id= "exploration-link-description-type"><ins class="diff-new">
A
TD
which
describes
a
reference
to
another
TD
</ins><em class="rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
use
type
</ins><code><ins class="diff-new">
ThingLink
</ins></code><ins class="diff-new">
from
the
discovery
context
or
URI
</ins><code><ins class="diff-new">
https://www.w3.org/2022/wot/discovery#ThingLink
</ins></code>.</span><span class="rfc2119-assertion" id= "exploration-link-description-link"><ins class="diff-new">
A
Thing
Link
</ins><em class= "rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
define
the
referenced
TD
as
a
Link
with
</ins><code><ins class="diff-new">
describedby
</ins></code><ins class="diff-new">
link
relation
type,
</ins><code><ins class="diff-new">
application/td+json
</ins></code><ins class="diff-new">
media
type
and
</ins><code><ins class="diff-new">
href
</ins></code><ins class="diff-new">
set
to
the
target
URL.
</ins></span><p><a href="#example-td-link-type" data-matched-text= "[[[#example-td-link-type]]]" class="box-ref"><ins class="diff-new">
Example
</ins><bdi><ins class="diff-new">
3
</ins></bdi></a><ins class="diff-new">
is
an
example
Thing
Link.
</ins></p><aside class="example" id="example-td-link-type"><div class="marker"><a class="self-link" href= "#example-td-link-type"><ins class="diff-new">
Example
</ins><bdi><ins class="diff-new">
3
</ins></bdi></a><span class= "example-title">:<ins class="diff-new">
Example
of
a
Thing
Link,
referencing
a
remote
TD
</ins></span></div><pre aria-busy="false"><code class="hljs json">{    <span class="hljs-attr">"@context"</span>: [        <span class=<ins class="diff-new">
"hljs-string">"https://www.w3.org/2022/wot/td/v1.1"</span>,
</ins>        <span class=<ins class="diff-new">
"hljs-string">"https://www.w3.org/2022/wot/discovery"</span>
    ],
</ins>    <span class="hljs-attr">"@type"</span>: <span class=<ins class="diff-new">
"hljs-string">"ThingLink"</span>,
</ins>    <span class="hljs-attr">"id"</span>: <span class=<ins class="diff-new">
"hljs-string">"urn:example:link"</span>,
</ins>    <span class="hljs-attr">"links"</span>: [{        <span class="hljs-attr">"rel"</span>: <span class=<ins class="diff-new">
"hljs-string">"describedby"</span>,
</ins>        <span class="hljs-attr">"href"</span>: <span class=<ins class="diff-new">
"hljs-string">"https://example.com/td.jsonld"</span>,
</ins>        <span class="hljs-attr">"type"</span>: <span class=<ins class="diff-new">
"hljs-string">"application/td+json"</span>
    }],
</ins>    <span class="hljs-attr">"security"</span>: <span class=<ins class="diff-new">
"hljs-string">"nosec_sc"</span>,
</ins>    <span class="hljs-attr">"securityDefinitions"</span>: {        <span class="hljs-attr">"nosec_sc"</span>: {            <span class="hljs-attr">"scheme"</span>: <span class=<ins class="diff-new">
"hljs-string">"nosec"</span>
        }
    },
</ins>    <span class="hljs-attr">"title"</span>: <span class=<ins class="diff-new">
"hljs-string">"Example TD referencing another"</span>
}
</ins></code></pre></aside><p><ins class="diff-new">
A
Thing
Link
can
be
used
in
various
scenarios.
For
example:
</ins></p><ul><li><ins class="diff-new">
A
self-describing
Thing
with
limited
computational
resources
intends
to
describe
itself:
host
a
minimal
</ins><a href="#dfn-td" class= "internalDFN" data-link-type="dfn" id="ref-for-dfn-td-6"><ins class="diff-new">
TD
</ins></a><ins class="diff-new">
(Thing
Link)
locally
and
references
a
larger
one
with
the
full
details
hosted
at
a
different
URL,
perhaps
in
a
directory.
</ins></li><li><ins class="diff-new">
A
self-describing
Thing
or
proxy
has
a
very
large
or
dynamic
description:
registers
a
small
or
static
</ins><a href="#dfn-td" class= "internalDFN" data-link-type="dfn" id="ref-for-dfn-td-7"><ins class="diff-new">
TD
</ins></a><ins class="diff-new">
(Thing
Link)
in
a
directory
which
references
the
actual
</ins><a href= "#dfn-td" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-td-8"><ins class="diff-new">
TD
</ins></a><ins class="diff-new">
hosted
at
the
edge.
</ins></li></ul></section></section><section id="exploration-secboot" class="normative"><div class="header-wrapper"><h4 id="x7-1-2-security-bootstrapping"><bdi class= "secno"><ins class="diff-new">
7.1.2
</ins></bdi><ins class="diff-new">
Security
Bootstrapping
</ins></h4><a class="self-link" href="#exploration-secboot" aria-label= "Permalink for Section 7.1.2"></a></div><p><ins class="diff-new">
The
purpose
of
an
exploration
service
is
to
serve
TDs,
but
only
after
suitable
authentication,
and
only
to
authorized
parties.
However,
in
some
cases
a
Discoverer
may
not
know
what
security
credentials
are
needed
to
access
a
TD
via
an
exploration
service,
particularly
in
ad-hoc
scenarios.
Since
upon
first
access
to
an
exploration
service
a
Discoverer
will
not
yet
have
access
to
the
TD
if
suitable
authentication
credentials
are
not
provided,
the
Discoverer
can't
depend
on
the
security
metadata
held
in
TDs
to
know
what
kind
of
authentication
and
authorization
information
is
needed.
If
the
Discoverer
has
no
prior
knowledge,
it
will
have
to
depend
on
existing
security
negotation
support
to
bootstrap
access,
at
least
to
the
TD
itself.
</ins></p><p><ins class="diff-new">
We
define
the
following
for
the
HTTP
protocol,
for
which
security
negotiation
processes
already
exist.
However,
most
of
the
HTTP
negotiation
processes
assume
there
is
a
human
user
in
the
loop,
but
this
is
also
appropriate
for
WoT
Discovery,
since
this
problem
will
typically
occur
when
a
user
is
trying
to
access
a
public
WoT
service
or
perform
integration
of
a
new
device.
In
this
case
the
purpose
of
negotiation
is
to
provide
guidance
on
what
credentials
are
needed
to
access
the
system.
</ins></p><p><ins class="diff-new">
In
cases
when
exploration
services
are
being
used
to
automate
system
management
it
would
be
best
to
pre-establish
what
credentials
(and
authentication
mechanisms)
are
needed
to
access
the
relevant
exploration
services
and
security
bootstrapping
would
not
be
required.
For
this
reason
security
bootstrapping
is
not
a
mandatory
feature,
and
can
be
omitted
or
disabled
on
devices
that
are
to
be
used
with
pre-established
security
mechanisms.
</ins></p><p><ins class="diff-new">
Security
bootstrapping
may
also
only
be
necessary
on
the
</ins><em><ins class="diff-new">
first
</ins></em><ins class="diff-new">
access
to
a
TD.
Once
a
Discoverer
has
determined
what
credentials
and
authentication
mechanism
are
required
to
access
a
particular
exploration
service,
they
can
retain
this
information
and
attempt
to
use
them
for
future
accesses.
Note
however
that
depending
on
the
security
scheme
used,
credentials
themselves
may
expire
and
may
need
to
be
re-established
periodically.
</ins></p><p><span class="rfc2119-assertion" id= "security-bootstrapping-endpoints"><ins class="diff-new">
Security
bootstrapping
</ins><em class="rfc2119"><ins class="diff-new">
MAY
</ins></em><ins class="diff-new">
be
provided
on
any
HTTP
endpoint
that
serves
a
TD.
</ins></span><ins class="diff-new">
As
mentioned
above,
disabling
or
omitting
security
bootstrapping
is
permissible
if
security
mechanisms
have
been
previously
established.
For
example,
if
an
installation
wants
to
use
the
OAuth2
</ins><code><ins class="diff-new">
client
</ins></code><ins class="diff-new">
flow
and
provide
potential
clients
with
an
address
of
an
authentication
server
to
use
in
advance,
then
security
bootstrapping
can
be
disabled,
since
the
alternative
would
be
to
include
other
(and
potentially
weaker)
forms
of
authentication.
</ins></p><p><ins class="diff-new">
In
the
HTTP
protocol,
the
authentication
and
authorization
mechanisms
to
be
used
can
generally
be
negotiated
by
the
HTTP
server
returning
a
"401
(Unauthorized)"
response
code
in
conjunction
with
a
</ins><code><ins class="diff-new">
WWW-Authenticate
</ins></code><ins class="diff-new">
header
that
specifies
the
information
required.
To
gain
access,
the
client
then
needs
to
make
another
request
with
the
necessary
information.
</ins><a href= "https://www.iana.org/assignments/http-authschemes/http-authschemes.xhtml"><ins class="diff-new">
There
are
several
authentication
schemes
registered
with
IANA.
</ins></a><ins class="diff-new">
However,
not
all
of
these
are
in
wide
use,
some
are
experimental,
and
there
is
only
partial
overlap
with
the
schemes
supported
by
TDs.
Also,
note
that
the
</ins><code><ins class="diff-new">
oauth
</ins></code><ins class="diff-new">
scheme
in
the
IANA
registration
refers
to
OAuth1,
which
is
deprecated,
so
it
should
not
be
used.
The
relevant
OAuth2
flow,
the
</ins><code><ins class="diff-new">
code
</ins></code><ins class="diff-new">
flow,
instead
of
a
401
response
begins
with
a
redirection
to
an
authentication
server,
eventually
resulting
in
credentials
(bearer
tokens
in
the
case
of
WoT)
that
can
be
used
for
access.
</ins></p><p><ins class="diff-new">
Given
these
considerations,
to
enable
security
bootstrapping
on
a
wide
variety
of
devices
as
well
as
on
browsers,
the
following
constraints
should
be
observed:
</ins></p><ul><li><span class="rfc2119-assertion" id="exploration-secboot-401"><ins class="diff-new">
If
security
bootstrapping
is
enabled
on
an
exploration
service,
after
initial
contact
using
the
URL
provided
by
an
introduction
mechanism,
the
exploration
service
</ins><em class="rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
reply
with
an
HTTP
response
code
appropriate
for
one
of
the
Basic,
Bearer,
Digest,
or
OAuth2
security
schemes
if
authentication
information
has
not
been
provided
but
access
can
be
granted
when
it
is.
</ins></span><ins class="diff-new">
Note
that
if
the
exploration
service
does
not
want
to
provide
access
for
some
reason,
or
if
security
bootstrapping
is
disabled,
it
can
ignore
the
request
or
reply
with
another
code
such
as
404
or
403.
Also,
if
no
authentication
is
required,
then
the
system
can
reply
immediately
with
the
requested
TD
as
if
authentication
information
were
provided.
Bypassing
authentication
however
is
only
appropriate
if
the
TD
served
as
a
response
does
not
contain
and
cannot
be
used
to
infer
Personally
Identifiable
Information;
see
</ins><a href="#privacy-considerations" class= "sec-ref"><bdi class="secno"><ins class="diff-new">
9.
</ins></bdi><ins class="diff-new">
Privacy
Considerations
</ins></a>.</li><li><ins class="diff-new">
If
security
bootstrapping
is
enabled
on
an
exploration
service
using
one
of
the
following
IANA-registered
HTTP
Authentication
Schemes:
Basic,
Bearer,
or
Digest,
then
(following
the
standards
for
these
authentication
schemes)
a
401
HTTP
response
at
an
API
endpoint
intended
to
serve
a
TD
must
include
a
</ins><code><ins class="diff-new">
WWW-Authenticate
</ins></code><ins class="diff-new">
header
and
any
other
headers
describing
the
required
authorizations.
For
details
of
the
requirements,
the
IANA
registry
should
be
consulted
for
each
of
the
above
authentication
schemes.
Likewise,
following
the
OAuth2
specifications,
if
the
OAuth2
</ins><code><ins class="diff-new">
code
</ins></code><ins class="diff-new">
flow
is
used
during
security
bootstrapping,
the
"302
(Found)"
or
"303
(See
Other)"
response
code
must
be
used
for
redirection
to
the
authentication
server,
with
access
credentials
eventually
being
represented
with
bearer
tokens.
Note
that
the
other
OAuth2
flow
supported
in
WoT
Thing
Description
1.1,
</ins><code><ins class="diff-new">
client
</ins></code>,<ins class="diff-new">
expects
the
initial
access
to
be
to
the
authentication
server,
not
the
final
endpoint,
and
so
cannot
be
used
via
security
bootstrapping.
These
requirements
also
apply
only
to
endpoints
of
exploration
services
that
might
need
to
support
security
bootstrapping,
that
is
those
that
serve
TDs,
not
to
other
endpoints
that
might
be
provided
by
the
same
exploration
service.
In
particular,
these
requirements
apply
only
to
URLs
that
can
be
referenced
by
introduction
mechanisms,
not
to
(for
example)
event
subscription
endpoints.
</ins></li></ul><p><ins class="diff-new">
There
are
relevant
Security
and
Privacy
Considerations
in
[
</ins><cite><a class="bibref" data-link-type="biblio" href= "#bib-wot-architecture11" title= "Web of Things (WoT) Architecture 1.1"><ins class="diff-new">
wot-architecture11
</ins></a></cite><ins class="diff-new">
]
and
[
</ins><cite><a class="bibref" data-link-type="biblio" href= "#bib-wot-thing-description11" title= "Web of Things (WoT) Thing Description 1.1"><ins class="diff-new">
wot-thing-description11
</ins></a></cite><ins class="diff-new">
]
regarding
when
authentication
is
required
for
access
to
TDs
and
the
use
of
secure
transport.
See
also
</ins><a href="#privacy-considerations" data-matched-text="[[[#privacy-considerations]]]" class= "sec-ref"><bdi class="secno"><ins class="diff-new">
9.
</ins></bdi><ins class="diff-new">
Privacy
Considerations
</ins></a>.<ins class="diff-new">
In
summary,
secure
transport
(e.g.
TLS)
is
required
for
public
services
and
strongly
recommended
even
on
private
networks
(even
if
there
is
no
authentication
requirement,
to
protect
the
confidentiality
of
queries),
and
serving
requests
without
authentication
and
authorization
should
only
be
considered
in
limited
circumstances
when
no
Personally
Identifiable
Information
is
present
or
can
be
inferred.
</ins></p></section></section><section id="exploration-server" class="normative"><div class="header-wrapper"><h3 id="x7-2-thing-description-server"><bdi class="secno"><ins class="diff-new">
7.2
</ins></bdi><ins class="diff-new">
Thing
Description
Server
</ins></h3><a class="self-link" href="#exploration-server" aria-label= "Permalink for Section 7.2"></a></div><p><ins class="diff-new">
Any
web
service
that
can
be
referenced
by
a
URL
and
return
a
TD
with
appropriate
authentication
and
access
controls
can
be
used
as
an
exploration
mechanism.
We
will
refer
to
this
as
a
Thing
Description
Server
or
TD
Server.
A
TD
Server
does
not
need
to
be
a
Thing.
In
particular,
a
TD
can
be
hosted
on
an
ordinary
web
server
and
referenced
by
its
URL.
</ins></p><p><ins class="diff-new">
A
TD
Server
can
be
used
to
support
self-description.
For
self-description,
a
</ins><a href="#dfn-thing" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-thing-5"><ins class="diff-new">
Thing
</ins></a><ins class="diff-new">
hosts
its
own
</ins><a href="#dfn-td" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-td-9"><ins class="diff-new">
TD
</ins></a><ins class="diff-new">
and
makes
it
available
via
a
web
resource
identified
with
a
URL.
Such
a
web
resource
however
is
not
included
as
an
affordance
in
the
TD
itself.
This
web
resource
may
or
may
not
be
the
same
as
the
well-known
URL
used
as
an
Introduction
mechanism
defined
in
</ins><a href="#introduction-well-known" class= "sec-ref"><bdi class="secno"><ins class="diff-new">
6.2
</ins></bdi><ins class="diff-new">
Well-Known
URIs
</ins></a>.</p><p><ins class="diff-new">
Use
of
secure
transport
is
subject
to
assertions
given
in
the
Security
Considerations
and
Privacy
Considerations
sections
of
the
[
</ins><cite><a class="bibref" data-link-type="biblio" href= "#bib-wot-architecture11" title= "Web of Things (WoT) Architecture 1.1"><ins class="diff-new">
wot-architecture11
</ins></a></cite><ins class="diff-new">
]
and
[
</ins><cite><a class="bibref" data-link-type="biblio" href= "#bib-wot-thing-description11" title= "Web of Things (WoT) Thing Description 1.1"><ins class="diff-new">
wot-thing-description11
</ins></a></cite><ins class="diff-new">
]
specifications,
which
define
scenarios
where
secure
transport
is
recommended
or
mandatory
and
mutual
authentication
is
recommended.
</ins></p><p><ins class="diff-new">
A
TD
Server
distributing
a
TD
using
the
following
protocols
is
subject
to
the
following
constraints:
</ins></p><dl><dt><ins class="diff-new">
HTTP
</ins></dt><dd><p><span class="rfc2119-assertion" id= "exploration-server-http-method"><ins class="diff-new">
An
HTTP-based
TD
Server
providing
a
</ins><a href="#dfn-td" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-td-10"><ins class="diff-new">
TD
</ins></a><em class="rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
serve
that
resource
with
a
</ins><code><ins class="diff-new">
GET
</ins></code><ins class="diff-new">
method.
</ins></span><span class= "rfc2119-assertion" id="exploration-server-http-resp"><ins class="diff-new">
A
successful
response
from
an
HTTP-based
TD
Server
providing
a
</ins><a href="#dfn-td" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-td-11"><ins class="diff-new">
TD
</ins></a><em class="rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
have
200
(OK)
status
and
the
</ins><a href="#dfn-td" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-td-12"><ins class="diff-new">
TD
</ins></a><ins class="diff-new">
in
the
body.
</ins></span><span class="rfc2119-assertion" id= "exploration-server-http-resp-content-type"><ins class="diff-new">
A
successful
response
with
JSON
serialization
</ins><em class="rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
contain
either
</ins><code><ins class="diff-new">
application/json
</ins></code><ins class="diff-new">
or
</ins><code><ins class="diff-new">
application/td+json
</ins></code><ins class="diff-new">
in
the
Content-Type
header.
</ins></span><ins class="diff-new">
Here
</ins><code><ins class="diff-new">
application/td+json
</ins></code><ins class="diff-new">
is
preferred
as
it
is
more
specific
and
implies
</ins><code><ins class="diff-new">
application/json
</ins></code>.<span class= "rfc2119-assertion" id="exploration-server-http-resp-json"><ins class="diff-new">
The
default
serialization
format
for
successful
response
bodies
</ins><em class="rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
be
JSON,
with
JSON-LD
1.1
[
</ins><cite><a class="bibref" data-link-type="biblio" href= "#bib-json-ld11" title="JSON-LD 1.1"><ins class="diff-new">
JSON-LD11
</ins></a></cite><ins class="diff-new">
]
syntax.
</ins></span><ins class="diff-new">
The
JSON-LD
syntax
allows
semantic
extensions
and
processing.
</ins><span class="rfc2119-assertion" id= "exploration-server-http-alternate-content"><ins class="diff-new">
An
HTTP-based
TD
Server
providing
a
</ins><a href="#dfn-td" class="internalDFN" data-link-type= "dfn" id="ref-for-dfn-td-13"><ins class="diff-new">
TD
</ins></a><em class="rfc2119"><ins class="diff-new">
MAY
</ins></em><ins class="diff-new">
provide
alternative
representations
through
server-driven
content
negotiation,
that
is
by
honoring
the
request's
Accept
and
Accept-Encoding
headers
and
responding
with
the
supported
TD
serialization
and
equivalent
Content-Type
and
Content-Encoding
headers.
</ins></span><ins class="diff-new">
In
addition,
following
the
process
normatively
defined
in
the
WoT
Thing
Description
1.1
specification
[
</ins><cite><a class="bibref" data-link-type="biblio" href= "#bib-wot-thing-description11" title= "Web of Things (WoT) Thing Description 1.1"><ins class="diff-new">
wot-thing-description11
</ins></a></cite><ins class="diff-new">
],
an
HTTP-based
TD
Server
providing
a
</ins><a href="#dfn-td" class= "internalDFN" data-link-type="dfn" id="ref-for-dfn-td-14"><ins class="diff-new">
TD
</ins></a><ins class="diff-new">
may
provide
modified
TDs
or
error
responses
using
a
different
default
language
after
server-driven
content
negotiation,
that
is
by
honoring
the
request's
Accept-Language
header.
</ins></p><p><span class="rfc2119-assertion" id= "exploration-server-http-head"><ins class="diff-new">
An
HTTP-based
TD
Server
providing
a
</ins><a href="#dfn-td" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-td-15"><ins class="diff-new">
TD
</ins></a><em class="rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
respond
to
</ins><code><ins class="diff-new">
HEAD
</ins></code><ins class="diff-new">
requests
by
returning
only
the
headers
equivalent
to
those
returned
by
a
</ins><code><ins class="diff-new">
GET
</ins></code><ins class="diff-new">
request
to
the
same
endpoint.
</ins></span><ins class="diff-new">
This
enables
clients
to
retrieve
HTTP
headers
such
as
the
Content-Length
in
advance
to
know
the
size
of
the
</ins><a href= "#dfn-td" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-td-16"><ins class="diff-new">
TD
</ins></a><ins class="diff-new">
(in
bytes)
and
decide
on
an
efficient
query
strategy.
</ins></p><p><ins class="diff-new">
In
constrained
environments,
a
single
</ins><a href="#dfn-td" class= "internalDFN" data-link-type="dfn" id="ref-for-dfn-td-17"><ins class="diff-new">
TD
</ins></a><ins class="diff-new">
may
be
too
large
to
process
for
the
server
or
clients.
See
</ins><a href= "#perf-incremental-transfer" data-matched-text= "[[[#perf-incremental-transfer]]]" class="sec-ref"><bdi class= "secno"><ins class="diff-new">
10.1
</ins></bdi><ins class="diff-new">
Incremental
Transfer
</ins></a><ins class="diff-new">
for
protocol-specific
recommendations
on
incremental
transfer
of
the
requested
payload.
</ins></p><p><ins class="diff-new">
Error
responses:
</ins></p><ul><li><ins class="diff-new">
401
(Unauthorized):
No
authentication.
</ins></li><li><ins class="diff-new">
403
(Forbidden):
Insufficient
rights
to
the
resource.
</ins></li></ul></dd></dl><dl><dt><ins class="diff-new">
CoAP
</ins></dt><dd><p><span class="rfc2119-assertion" id= "exploration-server-coap-method"><ins class="diff-new">
A
CoAP-based
TD
Server
providing
a
</ins><a href="#dfn-td" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-td-18"><ins class="diff-new">
TD
</ins></a><em class="rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
serve
that
resource
with
a
</ins><code><ins class="diff-new">
GET
</ins></code><ins class="diff-new">
method.
</ins></span><span class= "rfc2119-assertion" id="exploration-server-coap-resp"><ins class="diff-new">
A
successful
response
from
a
CoAP-based
TD
Server
providing
a
</ins><a href="#dfn-td" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-td-19"><ins class="diff-new">
TD
</ins></a><em class="rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
have
a
2.05
(Content)
status,
contain
a
Content-Format
option
with
value
50
(
</ins><code><ins class="diff-new">
application/json
</ins></code><ins class="diff-new">
)
or
432
(
</ins><code><ins class="diff-new">
application/td+json
</ins></code><ins class="diff-new">
),
and
the
</ins><a href="#dfn-td" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-td-20"><ins class="diff-new">
TD
</ins></a><ins class="diff-new">
in
the
payload.
</ins></span><ins class="diff-new">
Content-Format
432
is
preferred
as
it
is
more
specific
and
implies
Content-Format
50.
Note
that
the
payload
might
be
split
over
multiple
message
exchanges
using
block-wise
transfer
[
</ins><cite><a class="bibref" data-link-type="biblio" href="#bib-rfc7959" title= "Block-Wise Transfers in the Constrained Application Protocol (CoAP)"><ins class="diff-new">
RFC7959
</ins></a></cite><ins class="diff-new">
].
</ins><span class="rfc2119-assertion" id= "exploration-server-coap-alternate-content"><ins class="diff-new">
A
CoAP-based
TD
Server
providing
a
</ins><a href="#dfn-td" class="internalDFN" data-link-type= "dfn" id="ref-for-dfn-td-21"><ins class="diff-new">
TD
</ins></a><em class="rfc2119"><ins class="diff-new">
MAY
</ins></em><ins class="diff-new">
provide
alternative
representations
through
server-driven
content
negotiation,
that
is
by
honouring
the
request's
Accept
option
and
responding
with
the
supported
</ins><a href="#dfn-td" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-td-22"><ins class="diff-new">
TD
</ins></a><ins class="diff-new">
serialization
and
equivalent
Content-Format
option.
</ins></span></p><p><span class="rfc2119-assertion" id= "exploration-server-coap-size2"><ins class="diff-new">
A
CoAP-based
</ins><a href="#dfn-td" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-td-23"><ins class="diff-new">
TD
</ins></a><ins class="diff-new">
Server
providing
a
</ins><a href="#dfn-td" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-td-24"><ins class="diff-new">
TD
</ins></a><em class="rfc2119"><ins class="diff-new">
SHOULD
</ins></em><ins class="diff-new">
respond
to
requests
containing
a
Size2
option
by
including
the
size
estimate
of
the
</ins><a href="#dfn-td" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-td-25"><ins class="diff-new">
TD
</ins></a><ins class="diff-new">
in
its
next
response.
</ins></span><ins class="diff-new">
This
is
relevant
when
obtaining
a
</ins><a href= "#dfn-td" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-td-26"><ins class="diff-new">
TD
</ins></a><ins class="diff-new">
using
block-wise
transfer
and
enables
clients
to
abort
the
retrieval
if
the
total
payload
size
should
be
too
large
for
them
to
process.
</ins></p><p><ins class="diff-new">
In
constrained
environments,
a
single
</ins><a href="#dfn-td" class= "internalDFN" data-link-type="dfn" id="ref-for-dfn-td-27"><ins class="diff-new">
TD
</ins></a><ins class="diff-new">
may
be
too
large
to
process
for
the
server
or
clients.
See
</ins><a href= "#perf-incremental-transfer" data-matched-text= "[[[#perf-incremental-transfer]]]" class="sec-ref"><bdi class= "secno"><ins class="diff-new">
10.1
</ins></bdi><ins class="diff-new">
Incremental
Transfer
</ins></a><ins class="diff-new">
for
protocol-specific
recommendations
on
incremental
transfer
of
the
requested
payload.
</ins></p><p><ins class="diff-new">
Error
responses:
</ins></p><ul><li><ins class="diff-new">
4.01
(Unauthorized):
No
authentication.
</ins></li><li><ins class="diff-new">
4.03
(Forbidden):
Insufficient
rights
to
the
resource.
</ins></li></ul></dd></dl></section><section id="exploration-directory" class="normative"><div class="header-wrapper"><h3 id="x7-3-thing-description-directory"><bdi class= "secno"><ins class="diff-new">
7.3
</ins></bdi><ins class="diff-new">
Thing
Description
Directory
</ins></h3><a class="self-link" href="#exploration-directory" aria-label= "Permalink for Section 7.3"></a></div><p><ins class="diff-new">
A
</ins><a href="#dfn-wot-thing-description-directory" class= "internalDFN" data-link-type="dfn" id= "ref-for-dfn-wot-thing-description-directory-20"><ins class="diff-new">
Thing
Description
Directory
</ins></a><ins class="diff-new">
(TDD
or
Directory
for
short)
is
a
</ins><a href= "#dfn-thing" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-thing-6"><ins class="diff-new">
Thing
</ins></a><ins class="diff-new">
that
provides
a
service
to
manage
a
set
of
TDs
describing
other
Things.
</ins></p><section id="exploration-directory-info" class="normative"><div class="header-wrapper"><h4 id="x7-3-1-information-model"><bdi class="secno"><ins class="diff-new">
7.3.1
</ins></bdi><ins class="diff-new">
Information
Model
</ins></h4><a class="self-link" href="#exploration-directory-info" aria-label= "Permalink for Section 7.3.1"></a></div><p><ins class="diff-new">
As
shown
in
</ins><a href="#exploration-class-diagram" data-matched-text="[[[#exploration-class-diagram]]]" class= "fig-ref" title= "The high-level class diagram of the exploration mechanisms, depicting how Thing Description Servers and Thing Description Directories provide TDs. A Self-describing Thing is a special case of a Thing Description Server that is also a Thing. A Thing Description Directory acts as a Thing Description Server for each Thing Description it contains."><ins class="diff-new">
Figure
</ins><bdi class=""><ins class="diff-new">
4
</ins></bdi></a>,<ins class="diff-new">
the
</ins><a href= "#dfn-wot-thing-description-directory" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-wot-thing-description-directory-21"><ins class="diff-new">
Thing
Description
Directory
</ins></a><ins class="diff-new">
can
contain
zero
or
more
</ins><a href="#dfn-td" class= "internalDFN" data-link-type="dfn" id="ref-for-dfn-td-28"><ins class="diff-new">
TDs
</ins></a>.<ins class="diff-new">
For
every
TD,
the
directory
maintains
additional
metadata
for
bookkeeping
and
search
purposes.
These
are
described
in
</ins><a href= "#exploration-directory-registration-info" data-matched-text= "[[[#exploration-directory-registration-info]]]" class= "sec-ref"><bdi class="secno"><ins class="diff-new">
7.3.1.1
</ins></bdi><ins class="diff-new">
Registration
Information
</ins></a><ins class="diff-new">
and
</ins><a href="#exploration-directory-anonymous-td" data-matched-text="[[[#exploration-directory-anonymous-td]]]" class="sec-ref"><bdi class="secno"><ins class="diff-new">
7.3.1.3
</ins></bdi><ins class="diff-new">
Anonymous
TD
Identifiers
</ins></a>.<ins class="diff-new">
A
</ins><a href="#dfn-td" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-td-29"><ins class="diff-new">
TD
</ins></a><ins class="diff-new">
that
embeds
such
additional
metadata
as
part
of
the
interaction
with
the
directory
is
called
an
</ins><a href="#dfn-wot-enriched-thing-description" class= "internalDFN" data-link-type="dfn" id= "ref-for-dfn-wot-enriched-thing-description-1"><ins class="diff-new">
Enriched
TD
</ins></a>.</p><section id="exploration-directory-registration-info" class= "normative"><div class="header-wrapper"><h5 id="x7-3-1-1-registration-information"><bdi class= "secno"><ins class="diff-new">
7.3.1.1
</ins></bdi><ins class="diff-new">
Registration
Information
</ins></h5><a class="self-link" href= "#exploration-directory-registration-info" aria-label= "Permalink for Section 7.3.1.1"></a></div><p><ins class="diff-new">
The
ontology
of
a
</ins><a href="#dfn-td" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-td-30"><ins class="diff-new">
TD
</ins></a><ins class="diff-new">
in
the
Discovery
context
was
introduced
in
</ins><a href= "#discovery-class-diagram-ontology" data-matched-text= "[[[#discovery-class-diagram-ontology]]]" class="fig-ref" title= "The ontology of Thing Descriptions in the Discovery context."><ins class="diff-new">
Figure
</ins><bdi class=""><ins class="diff-new">
5
</ins></bdi></a>.<ins class="diff-new">
The
</ins><code><ins class="diff-new">
RegistrationInformation
</ins></code><ins class="diff-new">
class
is
associated
with
</ins><a href="#dfn-td" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-td-31"><ins class="diff-new">
TDs
</ins></a><ins class="diff-new">
that
are
stored
in
a
directory.
The
following
table
lists
the
registration
information
attributes
for
use
within
</ins><a href="#dfn-td" class= "internalDFN" data-link-type="dfn" id="ref-for-dfn-td-32"><ins class="diff-new">
TDs
</ins></a><ins class="diff-new">
that
embed
or
reference
the
Discovery
context.
Note
that
only
an
</ins><a href="#dfn-wot-enriched-thing-description" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-wot-enriched-thing-description-2"><ins class="diff-new">
Enriched
TD
</ins></a><ins class="diff-new">
embeds
the
registration
information.
</ins><span class= "rfc2119-assertion" id="tdd-context-injection"><ins class="diff-new">
An
</ins><a href= "#dfn-wot-enriched-thing-description" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-wot-enriched-thing-description-3"><ins class="diff-new">
Enriched
TD
</ins></a><em class="rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
contain
in
its
@context
the
URI
</ins><code><ins class="diff-new">
https://www.w3.org/2022/wot/discovery
</ins></code>.</span><ins class="diff-new">
In
this
table,
client
refers
to
the
producer
or
consumer
of
a
</ins><a href= "#dfn-td" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-td-33"><ins class="diff-new">
TD
</ins></a><ins class="diff-new">
and
server
refers
to
the
</ins><a href= "#dfn-wot-thing-description-directory" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-wot-thing-description-directory-22"><ins class="diff-new">
Thing
Description
Directory
</ins></a>.</p><p><span class="rfc2119-assertion" id="tdd-absolute-time"><ins class="diff-new">
Whenever
an
absolute
time
is
expressed
using
</ins><a href= "https://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#dateTime"><ins class="diff-new">
dateTime
</ins></a><ins class="diff-new">
it
</ins><em class="rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
be
interpreted
as
date-time
as
specified
in
[
</ins><cite><a class="bibref" data-link-type="biblio" href= "#bib-rfc3339" title= "Date and Time on the Internet: Timestamps"><ins class="diff-new">
RFC3339
</ins></a></cite><ins class="diff-new">
].
</ins></span><ins class="diff-new">
Specifically,
the
timezone
offset
is
not
optional.
</ins></p><table class="def"><thead><tr><th><ins class="diff-new">
Vocabulary
term
</ins></th><th><ins class="diff-new">
Description
</ins></th><th><ins class="diff-new">
Client
Assignment
</ins></th><th><ins class="diff-new">
Server
Assignment
</ins></th><th><ins class="diff-new">
Type
</ins></th></tr></thead><tbody><tr class="rfc2119-table-assertion" id= "tdd-registrationinfo-vocab-created"><td><code><ins class="diff-new">
created
</ins></code></td><td><ins class="diff-new">
Provides
the
absolute
time
when
the
TD
instance
was
created
inside
the
directory.
</ins><p><ins class="diff-new">
This
</ins><em class="rfc2119"><ins class="diff-new">
MAY
</ins></em><ins class="diff-new">
be
set
by
the
directory
and
returned
to
consumers.
</ins></p></td><td><ins class="diff-new">
read-only
</ins></td><td><ins class="diff-new">
optional
</ins></td><td><a href= "https://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#dateTime"><code><ins class="diff-new">
dateTime
</ins></code></a></td></tr><tr class="rfc2119-table-assertion" id= "tdd-registrationinfo-vocab-modified"><td><code><ins class="diff-new">
modified
</ins></code></td><td><ins class="diff-new">
Provides
the
absolute
time
when
the
TD
instance
was
last
modified
inside
the
directory.
</ins><p><ins class="diff-new">
This
</ins><em class="rfc2119"><ins class="diff-new">
MAY
</ins></em><ins class="diff-new">
be
set
by
the
directory
and
returned
to
consumers.
</ins></p></td><td><ins class="diff-new">
read-only
</ins></td><td><ins class="diff-new">
optional
</ins></td><td><a href= "https://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#dateTime"><code><ins class="diff-new">
dateTime
</ins></code></a></td></tr><tr class="rfc2119-table-assertion" id= "tdd-registrationinfo-vocab-expires"><td><code><ins class="diff-new">
expires
</ins></code></td><td><ins class="diff-new">
Provides
the
absolute
time
when
the
TD
instance
registration
expires.
</ins><p><ins class="diff-new">
The
producer
</ins><em class="rfc2119"><ins class="diff-new">
MAY
</ins></em><ins class="diff-new">
set
this
to
indicate
the
absolute
expiry
time
during
the
registration.
</ins></p><p><ins class="diff-new">
For
servers
that
support
expirable
TDs:
If
</ins><code><ins class="diff-new">
ttl
</ins></code><ins class="diff-new">
(relative
expiry)
is
present,
the
server
</ins><em class= "rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
ignore
client
assignments
to
</ins><code><ins class="diff-new">
expires
</ins></code><ins class="diff-new">
and
instead
compute
and
set
it
internally.
</ins></p></td><td><ins class="diff-new">
optional
</ins></td><td><ins class="diff-new">
optional
</ins></td><td><a href= "https://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#dateTime"><code><ins class="diff-new">
dateTime
</ins></code></a></td></tr><tr class="rfc2119-table-assertion" id= "tdd-registrationinfo-vocab-ttl"><td><code><ins class="diff-new">
ttl
</ins></code></td><td><ins class="diff-new">
Time-to-live:
relative
amount
of
time
in
seconds
from
the
registration
time
until
when
the
TD
instance
registration
expires.
</ins><p><ins class="diff-new">
The
producer
</ins><em class="rfc2119"><ins class="diff-new">
MAY
</ins></em><ins class="diff-new">
set
this
to
indicate
the
relative
expiry
time
during
the
registration.
</ins></p><p><ins class="diff-new">
For
servers
that
support
expirable
TDs:
The
server
</ins><em class= "rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
use
</ins><code><ins class="diff-new">
ttl
</ins></code><ins class="diff-new">
to
calculate
the
</ins><code><ins class="diff-new">
expires
</ins></code><ins class="diff-new">
(absolute
expiry)
value.
</ins></p></td><td><ins class="diff-new">
optional
</ins></td><td><ins class="diff-new">
read-only
</ins></td><td><code><ins class="diff-new">
number
</ins></code></td></tr><tr class="rfc2119-table-assertion" id= "tdd-registrationinfo-vocab-retrieved"><td><code><ins class="diff-new">
retrieved
</ins></code></td><td><ins class="diff-new">
The
absolute
time
at
which
the
TD
was
retrieved
from
the
server.
</ins><p><ins class="diff-new">
This
is
useful
for
clients
that
intend
to
process
other
absolute
timestamps
but
do
not
have
an
internal
clock
or
other
means
of
acquiring
the
current
time.
</ins></p></td><td><ins class="diff-new">
read-only
</ins></td><td><ins class="diff-new">
optional
</ins></td><td><a href= "https://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/#dateTime"><code><ins class="diff-new">
dateTime
</ins></code></a></td></tr></tbody></table></section><section id="exploration-directory-registration-expiry" class= "normative"><div class="header-wrapper"><h5 id="x7-3-1-2-registration-expiry"><bdi class= "secno"><ins class="diff-new">
7.3.1.2
</ins></bdi><ins class="diff-new">
Registration
Expiry
</ins></h5><a class="self-link" href= "#exploration-directory-registration-expiry" aria-label= "Permalink for Section 7.3.1.2"></a></div><ins class="diff-new">
Section
</ins><a href="#exploration-directory-registration-info" data-matched-text="[[[#exploration-directory-registration-info]]]" class="sec-ref"><bdi class="secno"><ins class="diff-new">
7.3.1.1
</ins></bdi><ins class="diff-new">
Registration
Information
</ins></a><ins class="diff-new">
introduces
some
attributes
to
specify
and
discover
the
expiry
time
of
registered
</ins><a href="#dfn-td" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-td-34"><ins class="diff-new">
TDs
</ins></a>.<p><ins class="diff-new">
Producers
can
set
the
expiry
time
to
inform
the
directory
and
other
consumers
about
the
validity
of
the
TD
registrations.
The
expiry
is
also
a
useful
indicator
to
inform
the
consumers
about
expiry
of
dynamic
</ins><a href="#dfn-td" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-td-35"><ins class="diff-new">
TDs
</ins></a>,<ins class="diff-new">
e.g.
when
changes
to
metadata
such
as
geolocation
or
properties
are
expected
to
be
valid
for
a
limited
period.
Consumers
may
rely
on
the
expiry
time
to
know
how
long
a
retrieved
</ins><a href="#dfn-td" class= "internalDFN" data-link-type="dfn" id="ref-for-dfn-td-36"><ins class="diff-new">
TD
</ins></a><ins class="diff-new">
will
be
valid
and
when
they
need
to
request
a
more
recent
one.
Consumers
who
retrieve
an
expired
TD
may
consider
it
as
metadata
of
an
inactive
client.
</ins></p><p><ins class="diff-new">
For
the
servers,
the
expiry
time
is
useful
for
implementing
automatic
removal
of
obsolete
or
accidental
registrations.
</ins><span class="rfc2119-assertion" id= "tdd-registrationinfo-expiry-purge"><ins class="diff-new">
Servers
</ins><em class= "rfc2119"><ins class="diff-new">
SHOULD
</ins></em><ins class="diff-new">
periodically
purge
TDs
that
are
past
their
expiry
times.
</ins></span><ins class="diff-new">
Prescribing
a
global
mandate
or
upper
limit
for
the
expiry
time
is
application-specific
and
beyond
the
scope
of
this
specification.
Servers
may
mandate
or
set
a
configurable
upper
limit
to
expiry
times
and
refuse
incompliant
requests.
The
purging
by
servers
is
particularly
beneficial
when
interacting
with
clients
(e.g.
IoT
devices)
that
are
unable
to
explicitly
deregister
their
</ins><a href="#dfn-td" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-td-37"><ins class="diff-new">
TDs
</ins></a>.<ins class="diff-new">
This
could
be
due
to
protocol-specific
limitations,
failure,
destruction,
or
ungraceful
decommissioning.
Such
clients
should
set
a
reasonably
short
expiry
time
and
periodically
extend
it
during
the
normal
operation.
The
expiry
can
be
extended
by
updating
the
registration
either
fully
or
partially,
including
an
update
that
makes
no
changes
to
the
TD;
see
</ins><a href= "#exploration-directory-api-things-update" data-matched-text= "[[[#exploration-directory-api-things-update]]]" class= "sec-ref"><bdi class="secno"><ins class="diff-new">
7.3.2.1.3
</ins></bdi><ins class="diff-new">
Update
</ins></a>.<ins class="diff-new">
If
a
client
ceases
to
operate,
a
directory
with
purging
capability
will
automatically
remove
its
registration.
</ins></p></section><section id="exploration-directory-anonymous-td" class="normative"><div class="header-wrapper"><h5 id="x7-3-1-3-anonymous-td-identifiers"><bdi class= "secno"><ins class="diff-new">
7.3.1.3
</ins></bdi><ins class="diff-new">
Anonymous
TD
Identifiers
</ins></h5><a class="self-link" href="#exploration-directory-anonymous-td" aria-label="Permalink for Section 7.3.1.3"></a></div><ins class="diff-new">
The
directory
assigns
local
identifiers
to
</ins><a href= "#dfn-wot-anonymous-thing-description" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-wot-anonymous-thing-description-1"><ins class="diff-new">
Anonymous
TDs
</ins></a><ins class="diff-new">
to
enable
management
and
retrieval
of
such
TDs
from
the
directory.
</ins><span class="rfc2119-assertion" id="tdd-anonymous-td-identifier"><ins class="diff-new">
In
situations
where
the
server
exposes
an
Anonymous
TD
(e.g.
retrieval,
listing,
search),
it
</ins><em class="rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
add
the
local
identifier
as
</ins><code><ins class="diff-new">
id
</ins></code><ins class="diff-new">
of
the
TD
to
allow
local
referencing.
</ins></span><span class="rfc2119-assertion" id= "tdd-anonymous-td-local-uuid"><ins class="diff-new">
The
local
identifier
</ins><em class= "rfc2119"><ins class="diff-new">
SHOULD
</ins></em><ins class="diff-new">
be
a
UUID
Version
4,
presented
as
a
URN
[
</ins><cite><a class="bibref" data-link-type="biblio" href= "#bib-rfc4122" title= "A Universally Unique IDentifier (UUID) URN Namespace"><ins class="diff-new">
RFC4122
</ins></a></cite><ins class="diff-new">
].
</ins></span><ins class="diff-new">
UUID
Version
4
is
a
random
or
pseudo-random
number
which
does
not
carry
unintended
information
about
the
host
or
the
resource.
</ins></section></section><section id="exploration-directory-api" class="normative"><div class="header-wrapper"><h4 id="x7-3-2-directory-service-api"><bdi class= "secno"><ins class="diff-new">
7.3.2
</ins></bdi><ins class="diff-new">
Directory
Service
API
</ins></h4><a class="self-link" href="#exploration-directory-api" aria-label= "Permalink for Section 7.3.2"></a></div><p><ins class="diff-new">
Directory
services
provide
access
to
</ins><a href= "https://www.w3.org/TR/wot-security/#dfn-system-user-data"><ins class="diff-new">
System
User
Data
</ins></a><ins class="diff-new">
and
need
to
provide
appropriate
security
and
privacy
protections.
The
use
of
secure
transport
protocols
and
access
controls
for
authenticity
and
confidentiality
in
implementations
of
the
WoT
Directory
Service
API
are
governed
by
the
Security
Considerations
and
Privacy
Considerations
given
in
[
</ins><cite><a class= "bibref" data-link-type="biblio" href="#bib-wot-architecture11" title= "Web of Things (WoT) Architecture 1.1"><ins class="diff-new">
wot-architecture11
</ins></a></cite><ins class="diff-new">
].
</ins></p><p><ins class="diff-new">
The
HTTP
API
responses
must
use
appropriate
status
codes
described
in
this
section
for
success
and
error
responses.
</ins><span class="rfc2119-assertion" id="tdd-http-error-response"><ins class="diff-new">
The
HTTP
API
</ins><em class="rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
use
the
Problem
Details
[
</ins><cite><a class="bibref" data-link-type="biblio" href= "#bib-rfc7807" title= "Problem Details for HTTP APIs"><ins class="diff-new">
RFC7807
</ins></a></cite><ins class="diff-new">
]
format
to
carry
error
details
in
HTTP
client
error
(4xx)
and
server
error
(5xx)
responses.
</ins></span><ins class="diff-new">
This
enables
both
machines
and
humans
to
know
the
high-level
error
class
and
fine-grained
details.
</ins><span class= "rfc2119-assertion" id="tdd-http-error-response-utf-8"><ins class="diff-new">
All
HTTP
API
error
responses
described
using
Problem
Details
</ins><em class= "rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
be
encoded
using
UTF-8.
</ins></span><span class= "rfc2119-assertion" id="tdd-http-error-response-lang"><ins class="diff-new">
HTTP
API
error
responses
</ins><em class="rfc2119"><ins class="diff-new">
MAY
</ins></em><ins class="diff-new">
report
details
in
different
languages
using
proactive
negotiation,
if
the
</ins><code><ins class="diff-new">
Accept-Language
</ins></code><ins class="diff-new">
header
field
has
been
set
in
the
HTTP
request
[
</ins><cite><a class="bibref" data-link-type="biblio" href= "#bib-rfc7231" title= "Hypertext Transfer Protocol (HTTP/1.1): Semantics and Content"><ins class="diff-new">
RFC7231
</ins></a></cite><ins class="diff-new">
].
</ins></span></p><p><ins class="diff-new">
The
APIs
set
the
HTTP
status
codes
as
defined
in
Section
6
of
[
</ins><cite><a class="bibref" data-link-type="biblio" href= "#bib-rfc7231" title= "Hypertext Transfer Protocol (HTTP/1.1): Semantics and Content"><ins class="diff-new">
RFC7231
</ins></a></cite><ins class="diff-new">
].
The
list
of
used
error
codes
include
(but
are
not
limited
to)
the
following:
</ins></p><ul><li><ins class="diff-new">
400
(Bad
Request):
Invalid
client
input
in
body,
query,
or
headers.
This
is
accompanied
by
an
appropriate
response
message.
</ins></li><li><ins class="diff-new">
401
(Unauthorized):
The
request
lacks
valid
authentication
credentials.
As
noted
in
</ins><a href="#exploration-secboot" data-matched-text="[[[#exploration-secboot]]]" class= "sec-ref"><bdi class="secno"><ins class="diff-new">
7.1.2
</ins></bdi><ins class="diff-new">
Security
Bootstrapping
</ins></a>,<ins class="diff-new">
this
is
the
first
step
in
authentication
negotiation,
needed
to
bootstrap
secure
access
to
TDs.
Information
on
what
credentials
are
required
will
be
included
in
a
</ins><code><ins class="diff-new">
WWW-Authenticate
</ins></code><ins class="diff-new">
header.
</ins></li><li><ins class="diff-new">
403
(Forbidden):
Insufficient
rights
to
access
the
resource.
</ins></li><li><ins class="diff-new">
404
(Not
Found):
TD
or
endpoint
does
not
exist.
This
is
accompanied
by
an
appropriate
response
message.
</ins></li></ul><p><span class="rfc2119-assertion" id="tdd-http-head"><ins class="diff-new">
For
each
HTTP
endpoint
that
responds
to
the
</ins><code><ins class="diff-new">
GET
</ins></code><ins class="diff-new">
method,
the
server
</ins><em class="rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
accept
</ins><code><ins class="diff-new">
HEAD
</ins></code><ins class="diff-new">
requests
and
return
only
the
headers.
</ins></span><ins class="diff-new">
This
allows
clients
to
retrieve
headers
such
as
the
Content-Length
without
receiving
the
body
and
decide
on
a
suitable
strategy
to
query
the
information.
For
example,
a
constrained
client
can
request
only
the
necessary
parts
of
an
object
(using
an
appropriate
search
query)
or
retrieve
a
list
of
items
in
small
subsets.
</ins></p><p><ins class="diff-new">
In
constrained
environments,
a
single
TD
may
be
too
large
to
process
for
the
server
or
clients.
This
affects
both
read
(i.e.
retrieving
one
or
more
TDs
or
TD
fragments)
and
write
(i.e.
submitting
a
TD
or
Partial
TD)
operations.
See
</ins><a href= "#perf-incremental-transfer" data-matched-text= "[[[#perf-incremental-transfer]]]" class="sec-ref"><bdi class= "secno"><ins class="diff-new">
10.1
</ins></bdi><ins class="diff-new">
Incremental
Transfer
</ins></a><ins class="diff-new">
for
protocol-specific
recommendations
on
incremental
transfer
of
the
payloads.
</ins></p><p><ins class="diff-new">
To
ensure
the
safe
transmission
of
data
over
the
URL,
it
is
expected
that
both
client
and
server
percent
encode/decode
characters
that
conflict
with
delimiters
in
the
rest
of
the
URL.
These
characters
are
defined
as
</ins><i><ins class="diff-new">
unsafe
</ins></i><ins class="diff-new">
in
Section
2.2
of
[
</ins><cite><a class="bibref" data-link-type="biblio" href= "#bib-rfc1738" title= "Uniform Resource Locators (URL)"><ins class="diff-new">
RFC1738
</ins></a></cite><ins class="diff-new">
].
Unsafe
characters
can
result
in
unexpected
behavior
if
they
appear
in
the
URL,
for
example,
when
the
resource
ID
included
in
the
path
is
a
URL
by
itself,
or
in
the
search
query
string.
</ins></p><p><ins class="diff-new">
The
directory
APIs
include
mandatory,
recommended,
and
optional
features.
</ins><span class="rfc2119-assertion" id= "tdd-http-unsupported-feature"><ins class="diff-new">
When
a
directory
is
unable
to
answer
a
request
because
of
unsupported
recommended
or
optional
features,
it
</ins><em class="rfc2119"><ins class="diff-new">
SHOULD
</ins></em><ins class="diff-new">
inform
the
client
about
the
absence
of
those
features
by
returning
appropriate
HTTP
errors.
</ins></span><ins class="diff-new">
The
following
examples
can
be
used
as
guideline
for
implementations:
</ins></p><ul><li><ins class="diff-new">
If
the
missing
feature
is
to
customize
functionality
of
an
existing
API
use
400
(Bad
Request)
or
501
(Not
Implemented).
</ins></li><li><ins class="diff-new">
If
an
API
endpoint
is
not
provided
(e.g.
</ins><code><ins class="diff-new">
/search/sparql
</ins></code><ins class="diff-new">
endpoint),
use
404
(Not
Found).
</ins></li><li><ins class="diff-new">
If
a
method
is
not
supported
on
an
existing
API
endpoint
(e.g.
</ins><code><ins class="diff-new">
PATCH
</ins></code><ins class="diff-new">
for
</ins><code><ins class="diff-new">
/things
</ins></code><ins class="diff-new">
endpoint),
use
405
(Method
Not
Allowed).
</ins></li></ul><p><ins class="diff-new">
The
process
of
modifying
the
default
language
of
a
TD
using
translations
already
provided
in
a
TD
is
normatively
described
in
the
WoT
Thing
Description
1.1
specification
[
</ins><cite><a class= "bibref" data-link-type="biblio" href= "#bib-wot-thing-description11" title= "Web of Things (WoT) Thing Description 1.1"><ins class="diff-new">
wot-thing-description11
</ins></a></cite><ins class="diff-new">
].
Using
this
process,
a
Directory
server
may
provide
modified
TDs,
or
its
own
TD,
using
a
different
default
language
after
server-driven
content
negotiation,
that
is
by
honouring
the
request's
Accept-Language
header.
</ins></p><section id="exploration-directory-api-things" class="normative"><div class="header-wrapper"><h5 id="x7-3-2-1-things-api"><bdi class="secno"><ins class="diff-new">
7.3.2.1
</ins></bdi><ins class="diff-new">
Things
API
</ins></h5><a class="self-link" href="#exploration-directory-api-things" aria-label="Permalink for Section 7.3.2.1"></a></div><p><ins class="diff-new">
The
Things
API
is
a
RESTful
HTTP
API
served
at
the
</ins><code><ins class="diff-new">
/things
</ins></code><ins class="diff-new">
endpoint
providing
interfaces
to
create,
retrieve,
update,
delete,
and
list
(CRUDL)
</ins><a href="#dfn-td" class= "internalDFN" data-link-type="dfn" id="ref-for-dfn-td-38"><ins class="diff-new">
TDs
</ins></a>.<ins class="diff-new">
The
design
of
this
API
is
in
accordance
with
[
</ins><cite><a class= "bibref" data-link-type="biblio" href="#bib-rfc7231" title= "Hypertext Transfer Protocol (HTTP/1.1): Semantics and Content"><ins class="diff-new">
RFC7231
</ins></a></cite><ins class="diff-new">
]
and
[
</ins><cite><a class="bibref" data-link-type="biblio" href= "#bib-rest-iot" title= "RESTful Design for Internet of Things Systems"><ins class="diff-new">
REST-IOT
</ins></a></cite><ins class="diff-new">
].
</ins></p><p><ins class="diff-new">
The
HTTP
API
follows
these
general
rules:
</ins></p><ul><li><span class="rfc2119-assertion" id="tdd-things-list-only"><ins class="diff-new">
The
API
</ins><em class="rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
provide
the
interface
to
list
TDs.
</ins></span><ins class="diff-new">
The
Search
API
allows
filtering
and
selection
from
this
list;
see
</ins><a href="#exploration-directory-api-search" data-matched-text="[[[#exploration-directory-api-search]]]" class= "sec-ref"><bdi class="secno"><ins class="diff-new">
7.3.2.3
</ins></bdi><ins class="diff-new">
Search
API
</ins></a>.</li><li><span class="rfc2119-assertion" id="tdd-things-crud"><ins class="diff-new">
The
API
</ins><em class="rfc2119"><ins class="diff-new">
MAY
</ins></em><ins class="diff-new">
provide
the
interfaces
to
create,
read,
update,
and
delete
(CRUD)
individual
TDs.
</ins></span></li><li><ins class="diff-new">
A
directory
that
provides
both
read
and
write
over
HTTP
is
considered
a
full
HTTP
directory.
</ins><span class="rfc2119-assertion" id="tdd-things-crudl"><ins class="diff-new">
Full
HTTP
directories
</ins><em class= "rfc2119"><ins class="diff-new">
SHOULD
</ins></em><ins class="diff-new">
implement
all
of
CRUDL
(create,
read,
update,
delete,
and
list)
interfaces.
</ins></span><ins class="diff-new">
It
is
practical
to
implement
only
the
interfaces
to
read
and
list
if
the
directory
serves
a
static
collection
of
</ins><a href="#dfn-td" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-td-39"><ins class="diff-new">
TDs
</ins></a>.<ins class="diff-new">
This
is
also
useful
for
directories
that
intend
to
expose
only
retrieval
operations
over
HTTP,
and
perform
other
operations
via
out-of-band
mechanisms.
</ins><span class="rfc2119-assertion" id= "tdd-things-read-only-auth"><ins class="diff-new">
To
expose
read-only
access,
the
directory
</ins><em class="rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
enforce
access
control
on
create,
update,
and
delete
interfaces.
</ins></span></li><li><span class="rfc2119-assertion" id= "tdd-things-default-representation"><ins class="diff-new">
The
default
serialization
format
for
all
request
and
success
response
bodies
</ins><em class= "rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
be
JSON,
with
JSON-LD
1.1
[
</ins><cite><a class= "bibref" data-link-type="biblio" href="#bib-json-ld11" title= "JSON-LD 1.1"><ins class="diff-new">
JSON-LD11
</ins></a></cite><ins class="diff-new">
]
syntax
to
support
extensions
and
semantic
processing.
</ins></span></li><li><span class="rfc2119-assertion" id= "tdd-things-representation-alternate-input"><ins class="diff-new">
Directories
</ins><em class= "rfc2119"><ins class="diff-new">
MAY
</ins></em><ins class="diff-new">
accept
alternative
representations
based
on
request's
indicated
Content-Type
or
Content-Encoding
headers.
</ins></span><ins class="diff-new">
This
is
useful
for
applications
that
need
to
provide
representations
other
than
raw
JSON
as
input
to
a
directory.
</ins></li><li><span class="rfc2119-assertion" id= "tdd-http-representation-alternate-output"><ins class="diff-new">
Directories
</ins><em class= "rfc2119"><ins class="diff-new">
MAY
</ins></em><ins class="diff-new">
provide
alternative
representations
through
server-driven
content
negotiation,
that
is
by
honouring
the
request's
Accept
and
Accept-Encoding
headers
and
responding
with
the
supported
TD
representation
and
equivalent
Content-Type
and
Content-Encoding
headers.
</ins></span><ins class="diff-new">
This
is
useful
for
applications
that
need
to
retrieve
representations
other
than
raw
JSON
from
a
directory,
such
as
Gzip-compressed
JSON.
</ins></li></ul><p><ins class="diff-new">
The
CRUDL
operations
are
described
in
the
following
sections:
</ins></p><section id="exploration-directory-api-things-creation" class= "normative"><div class="header-wrapper"><h6 id="x7-3-2-1-1-creation"><bdi class="secno"><ins class="diff-new">
7.3.2.1.1
</ins></bdi><ins class="diff-new">
Creation
</ins></h6><a class="self-link" href= "#exploration-directory-api-things-creation" aria-label= "Permalink for Section 7.3.2.1.1"></a></div><p><ins class="diff-new">
Creation
refers
to
the
registration
of
a
new
</ins><a href="#dfn-td" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-td-40"><ins class="diff-new">
TD
</ins></a><ins class="diff-new">
inside
the
directory.
</ins></p><p><ins class="diff-new">
The
TD
object
is
validated
in
accordance
with
</ins><a href= "#exploration-directory-api-things-validation" data-matched-text= "[[[#exploration-directory-api-things-validation]]]" class= "sec-ref"><bdi class="secno"><ins class="diff-new">
7.3.2.1.6
</ins></bdi><ins class="diff-new">
Validation
</ins></a>.<ins class="diff-new">
Note
that
a
TD
may
or
may
not
be
generated
by
the
</ins><a href="#dfn-thing" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-thing-7"><ins class="diff-new">
Thing
</ins></a><ins class="diff-new">
it
describes.
For
brownfield
devices
in
particular
a
separate
</ins><a href="#dfn-wot-discoverer" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-wot-discoverer-2"><ins class="diff-new">
Discoverer
</ins></a><ins class="diff-new">
process
or
service
may
be
required
that
generates
and
registers
a
TD
for
a
</ins><a href= "#dfn-thing" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-thing-8"><ins class="diff-new">
Thing
</ins></a><ins class="diff-new">
on
its
behalf.
</ins></p><p><span class="rfc2119-assertion" id= "tdd-things-create-known-vs-anonymous"><ins class="diff-new">
A
TD
which
is
identified
with
an
</ins><code><ins class="diff-new">
id
</ins></code><ins class="diff-new">
attribute
</ins><em class="rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
be
handled
differently
with
one
that
has
no
identifier
(
</ins><a href= "#dfn-wot-anonymous-thing-description" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-wot-anonymous-thing-description-2"><ins class="diff-new">
Anonymous
TD
</ins></a><ins class="diff-new">
).
</ins></span><ins class="diff-new">
The
create
operations
are
elaborated
below:
</ins></p><ul><li><span class="rfc2119-assertion" id= "tdd-things-create-known-td"><ins class="diff-new">
A
TD
that
has
an
</ins><code><ins class="diff-new">
id
</ins></code><em class="rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
be
submitted
to
the
directory
in
the
body
of
an
HTTP
</ins><code><ins class="diff-new">
PUT
</ins></code><ins class="diff-new">
request
at
</ins><code><ins class="diff-new">
/things/{id}
</ins></code><ins class="diff-new">
endpoint,
where
</ins><code><ins class="diff-new">
id
</ins></code><ins class="diff-new">
is
the
unique
TD
identifier,
present
inside
the
TD
object.
</ins></span><ins class="diff-new">
An
</ins><a href="#dfn-wot-anonymous-thing-description" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-wot-anonymous-thing-description-3"><ins class="diff-new">
Anonymous
TD
</ins></a><ins class="diff-new">
is
handled
differently;
see
below.
</ins><span class="rfc2119-assertion" id= "tdd-things-create-known-contenttype"><ins class="diff-new">
The
request
</ins><em class= "rfc2119"><ins class="diff-new">
SHOULD
</ins></em><ins class="diff-new">
contain
</ins><code><ins class="diff-new">
application/td+json
</ins></code><ins class="diff-new">
Content-Type
header
for
JSON
serialization
of
TD.
</ins></span><ins class="diff-new">
The
TD
object
is
validated
in
accordance
with
</ins><a href= "#exploration-directory-api-things-validation" data-matched-text= "[[[#exploration-directory-api-things-validation]]]" class= "sec-ref"><bdi class="secno"><ins class="diff-new">
7.3.2.1.6
</ins></bdi><ins class="diff-new">
Validation
</ins></a>.<span class="rfc2119-assertion" id= "tdd-things-create-known-td-resp"><ins class="diff-new">
Upon
successful
processing,
the
server
</ins><em class="rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
respond
with
201
(Created)
status.
</ins></span><p><ins class="diff-new">
Note:
If
the
target
location
corresponds
to
an
existing
TD,
the
request
shall
instead
proceed
as
an
Update
operation
and
respond
the
appropriate
status
code
(see
Update
section).
</ins></p><p><ins class="diff-new">
The
create
operation
for
</ins><a href="#dfn-td" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-td-41"><ins class="diff-new">
TDs
</ins></a><ins class="diff-new">
that
have
identifiers
is
specified
as
</ins><code><ins class="diff-new">
createThing
</ins></code><ins class="diff-new">
action
in
</ins><a href="#directory-api-spec" data-matched-text= "[[[#directory-api-spec]]]" class="sec-ref"><bdi class= "secno"><ins class="diff-new">
7.3.2.4
</ins></bdi><ins class="diff-new">
API
Specification
(Thing
Model)
</ins></a>.</p></li><li><span class="rfc2119-assertion" id= "tdd-things-create-anonymous-td"><ins class="diff-new">
An
</ins><a href= "#dfn-wot-anonymous-thing-description" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-wot-anonymous-thing-description-4"><ins class="diff-new">
Anonymous
TD
</ins></a><em class="rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
be
submitted
to
the
directory
in
the
body
of
an
HTTP
</ins><code><ins class="diff-new">
POST
</ins></code><ins class="diff-new">
request
at
</ins><code><ins class="diff-new">
/things
</ins></code><ins class="diff-new">
endpoint.
</ins></span><span class="rfc2119-assertion" id= "tdd-things-create-anonymous-contenttype"><ins class="diff-new">
The
request
</ins><em class= "rfc2119"><ins class="diff-new">
SHOULD
</ins></em><ins class="diff-new">
contain
</ins><code><ins class="diff-new">
application/td+json
</ins></code><ins class="diff-new">
Content-Type
header
for
JSON
serialization
of
TD.
</ins></span><ins class="diff-new">
The
TD
object
is
validated
in
accordance
with
</ins><a href= "#exploration-directory-api-things-validation" data-matched-text= "[[[#exploration-directory-api-things-validation]]]" class= "sec-ref"><bdi class="secno"><ins class="diff-new">
7.3.2.1.6
</ins></bdi><ins class="diff-new">
Validation
</ins></a>.<span class="rfc2119-assertion" id= "tdd-things-create-anonymous-id"><ins class="diff-new">
The
directory
</ins><em class= "rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
assign
a
local
identifier
to
any
</ins><a href= "#dfn-wot-anonymous-thing-description" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-wot-anonymous-thing-description-5"><ins class="diff-new">
Anonymous
TD
</ins></a><ins class="diff-new">
to
enable
local
management
and
retrieval
from
the
directory.
</ins></span><ins class="diff-new">
The
scheme
of
the
system-generated
ID
is
described
in
</ins><a href= "#exploration-directory-anonymous-td" data-matched-text= "[[[#exploration-directory-anonymous-td]]]" class= "sec-ref"><bdi class="secno"><ins class="diff-new">
7.3.1.3
</ins></bdi><ins class="diff-new">
Anonymous
TD
Identifiers
</ins></a>.<span class="rfc2119-assertion" id= "tdd-things-create-anonymous-td-resp"><ins class="diff-new">
Upon
successful
processing,
the
server
</ins><em class="rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
respond
with
201
(Created)
status
and
a
Location
header
containing
the
system-generated
URI
of
created
TD
resource.
</ins></span><ins class="diff-new">
The
system-generated
URI
includes
the
system-generated
identifier
of
the
TD
and
can
be
used
subsequently
to
query
the
TD
from
the
directory.
</ins><p><ins class="diff-new">
The
create
operation
for
</ins><a href= "#dfn-wot-anonymous-thing-description" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-wot-anonymous-thing-description-6"><ins class="diff-new">
Anonymous
TDs
</ins></a><ins class="diff-new">
is
specified
as
</ins><code><ins class="diff-new">
createAnonymousThing
</ins></code><ins class="diff-new">
action
in
</ins><a href="#directory-api-spec" data-matched-text= "[[[#directory-api-spec]]]" class="sec-ref"><bdi class= "secno"><ins class="diff-new">
7.3.2.4
</ins></bdi><ins class="diff-new">
API
Specification
(Thing
Model)
</ins></a>.</p></li></ul><p><ins class="diff-new">
A
server
that
supports
expirable
TDs
will
realize
such
functionality
as
described
in
</ins><a href= "#exploration-directory-registration-expiry" data-matched-text= "[[[#exploration-directory-registration-expiry]]]" class= "sec-ref"><bdi class="secno"><ins class="diff-new">
7.3.1.2
</ins></bdi><ins class="diff-new">
Registration
Expiry
</ins></a>.<ins class="diff-new">
In
particular,
if
</ins><code><ins class="diff-new">
ttl
</ins></code><ins class="diff-new">
(relative
expiry)
is
given
during
the
creation,
such
servers
will
calculate
and
store
the
</ins><code><ins class="diff-new">
expires
</ins></code><ins class="diff-new">
value.
</ins></p></section><section id="exploration-directory-api-things-retrieval" class= "normative"><div class="header-wrapper"><h6 id="x7-3-2-1-2-retrieval"><bdi class="secno"><ins class="diff-new">
7.3.2.1.2
</ins></bdi><ins class="diff-new">
Retrieval
</ins></h6><a class="self-link" href= "#exploration-directory-api-things-retrieval" aria-label= "Permalink for Section 7.3.2.1.2"></a></div><p><span class="rfc2119-assertion" id="tdd-things-retrieve"><ins class="diff-new">
The
retrieval
of
an
existing
TD
</ins><em class="rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
be
done
using
an
HTTP
</ins><code><ins class="diff-new">
GET
</ins></code><ins class="diff-new">
request
at
</ins><code><ins class="diff-new">
/things/{id}
</ins></code><ins class="diff-new">
endpoint,
where
</ins><code><ins class="diff-new">
id
</ins></code><ins class="diff-new">
is
the
unique
TD
identifier.
</ins></span><span class="rfc2119-assertion" id="tdd-things-retrieve-resp"><ins class="diff-new">
A
successful
response
</ins><em class="rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
have
200
(OK)
status
and
the
requested
TD
in
the
body.
</ins></span><span class= "rfc2119-assertion" id="tdd-things-retrieve-resp-content-type"><ins class="diff-new">
A
successful
response
with
JSON
serialization
</ins><em class= "rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
contain
either
</ins><code><ins class="diff-new">
application/json
</ins></code><ins class="diff-new">
or
</ins><code><ins class="diff-new">
application/td+json
</ins></code><ins class="diff-new">
in
the
Content-Type
header.
</ins></span><ins class="diff-new">
Here
</ins><code><ins class="diff-new">
application/td+json
</ins></code><ins class="diff-new">
is
preferred
as
it
is
more
specific
and
implies
</ins><code><ins class="diff-new">
application/json
</ins></code>.<ins class="diff-new">
Note
that
the
default
serialization
is
JSON
with
JSON-LD
syntax,
and
alternative
serializations
can
be
negotiated;
see
</ins><a href= "#exploration-directory-api-things" data-matched-text= "[[[#exploration-directory-api-things]]]" class= "sec-ref"><bdi class="secno"><ins class="diff-new">
7.3.2.1
</ins></bdi><ins class="diff-new">
Things
API
</ins></a>.</p><p><ins class="diff-new">
The
retrieve
operation
is
specified
as
</ins><code><ins class="diff-new">
retrieveThing
</ins></code><ins class="diff-new">
action
in
</ins><a href="#directory-api-spec" data-matched-text="[[[#directory-api-spec]]]" class= "sec-ref"><bdi class="secno"><ins class="diff-new">
7.3.2.4
</ins></bdi><ins class="diff-new">
API
Specification
(Thing
Model)
</ins></a>.</p><p><ins class="diff-new">
The
following
is
an
example
of
a
retrieved
TD:
</ins></p><aside class="example" id="example-enriched-td"><div class="marker"><a class="self-link" href= "#example-enriched-td"><ins class="diff-new">
Example
</ins><bdi><ins class="diff-new">
4
</ins></bdi></a><span class= "example-title">:<ins class="diff-new">
Example
Enriched
TD
</ins></span></div><pre aria-busy="false"><code class="hljs json">{    <span class="hljs-attr">"@context"</span>: [        <span class=<ins class="diff-new">
"hljs-string">"https://www.w3.org/2022/wot/td/v1.1"</span>,
</ins>        <span class=<ins class="diff-new">
"hljs-string">"https://www.w3.org/2022/wot/discovery"</span>
    ],
</ins>    <span class="hljs-attr">"id"</span>: <span class=<ins class="diff-new">
"hljs-string">"urn:example:simple-td"</span>,
</ins>    <span class="hljs-attr">"security"</span>: <span class=<ins class="diff-new">
"hljs-string">"basic_sc"</span>,
</ins>    <span class="hljs-attr">"securityDefinitions"</span>: {        <span class="hljs-attr">"basic_sc"</span>: {            <span class="hljs-attr">"scheme"</span>: <span class=<ins class="diff-new">
"hljs-string">"basic"</span>
        }
    },
</ins>    <span class="hljs-attr">"registration"</span>: {        <span class="hljs-attr">"created"</span>: <span class=<ins class="diff-new">
"hljs-string">"2021-01-19T17:02:00Z"</span>,
</ins>        <span class="hljs-attr">"modified"</span>: <span class=<ins class="diff-new">
"hljs-string">"2021-01-19T17:02:00Z"</span>
    },
</ins>    <span class="hljs-attr">"title"</span>: <span class=<ins class="diff-new">
"hljs-string">"Simple TD"</span>
}
</ins></code></pre></aside><p><ins class="diff-new">
This
is
an
</ins><a href="#dfn-wot-enriched-thing-description" class= "internalDFN" data-link-type="dfn" id= "ref-for-dfn-wot-enriched-thing-description-4"><ins class="diff-new">
Enriched
TD
</ins></a><ins class="diff-new">
which
includes
the
registration
information
such
as
the
creation
and
modification
time
of
the
TD
within
the
directory.
</ins></p><p><ins class="diff-new">
The
example
below
shows
a
retrieved
</ins><a href= "#dfn-wot-anonymous-thing-description" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-wot-anonymous-thing-description-7"><ins class="diff-new">
Anonymous
TD
</ins></a><ins class="diff-new">
that
is
in
</ins><a href="#dfn-wot-enriched-thing-description" class= "internalDFN" data-link-type="dfn" id= "ref-for-dfn-wot-enriched-thing-description-5"><ins class="diff-new">
Enriched
TD
</ins></a><ins class="diff-new">
form
and
has
local
identifier
</ins><code><ins class="diff-new">
urn:uuid:48951ff3-4019-4e67-b217-dbbf011873dc
</ins></code>.</p><aside class="example" id="example-anonymous-enriched-td"><div class="marker"><a class="self-link" href= "#example-anonymous-enriched-td"><ins class="diff-new">
Example
</ins><bdi><ins class="diff-new">
5
</ins></bdi></a><span class="example-title">:<ins class="diff-new">
Example
Enriched
Anonymous
TD
</ins></span></div><pre aria-busy="false"><code class="hljs json">{    <span class="hljs-attr">"@context"</span>: [        <span class=<ins class="diff-new">
"hljs-string">"https://www.w3.org/2022/wot/td/v1.1"</span>,
</ins>        <span class=<ins class="diff-new">
"hljs-string">"https://www.w3.org/2022/wot/discovery"</span>
    ],
</ins>    <span class="hljs-attr">"id"</span>: <span class=<ins class="diff-new">
"hljs-string">"urn:uuid:48951ff3-4019-4e67-b217-dbbf011873dc"</span>,
</ins>    <span class="hljs-attr">"security"</span>: <span class=<ins class="diff-new">
"hljs-string">"basic_sc"</span>,
</ins>    <span class="hljs-attr">"securityDefinitions"</span>: {        <span class="hljs-attr">"basic_sc"</span>: {            <span class="hljs-attr">"scheme"</span>: <span class=<ins class="diff-new">
"hljs-string">"basic"</span>
        }
    },
</ins>    <span class="hljs-attr">"registration"</span>: {        <span class="hljs-attr">"created"</span>: <span class=<ins class="diff-new">
"hljs-string">"2021-01-19T17:02:00Z"</span>,
</ins>        <span class="hljs-attr">"modified"</span>: <span class=<ins class="diff-new">
"hljs-string">"2021-01-19T17:02:00Z"</span>
    },
</ins>    <span class="hljs-attr">"title"</span>: <span class=<ins class="diff-new">
"hljs-string">"Anonymous TD"</span>
}
</ins></code></pre></aside><p><ins class="diff-new">
The
following
is
an
example
of
a
retrieved
TD
that
was
registered
with
a
relative
expiry
time
of
3600
seconds
(one
hour).
The
server
has
calculated
the
absolute
expiry
time
as
one
hour
after
the
modification
time.
</ins></p><aside class="example" id="example-expirable-enriched-td"><div class="marker"><a class="self-link" href= "#example-expirable-enriched-td"><ins class="diff-new">
Example
</ins><bdi><ins class="diff-new">
6
</ins></bdi></a><span class="example-title">:<ins class="diff-new">
Example
Expirable
Enriched
TD
</ins></span></div><pre aria-busy="false"><code class="hljs json">{    <span class="hljs-attr">"@context"</span>: [        <span class=<ins class="diff-new">
"hljs-string">"https://www.w3.org/2022/wot/td/v1.1"</span>,
</ins>        <span class=<ins class="diff-new">
"hljs-string">"https://www.w3.org/2022/wot/discovery"</span>
    ],
</ins>    <span class="hljs-attr">"id"</span>: <span class=<ins class="diff-new">
"hljs-string">"urn:example:expirable-td"</span>,
</ins>    <span class="hljs-attr">"security"</span>: <span class=<ins class="diff-new">
"hljs-string">"basic_sc"</span>,
</ins>    <span class="hljs-attr">"securityDefinitions"</span>: {        <span class="hljs-attr">"basic_sc"</span>: {            <span class="hljs-attr">"scheme"</span>: <span class=<ins class="diff-new">
"hljs-string">"basic"</span>
        }
    },
</ins>    <span class="hljs-attr">"registration"</span>: {        <span class="hljs-attr">"created"</span>: <span class=<ins class="diff-new">
"hljs-string">"2021-05-10T16:00:00Z"</span>,
</ins>        <span class="hljs-attr">"modified"</span>: <span class=<ins class="diff-new">
"hljs-string">"2021-05-10T17:00:00Z"</span>,
</ins>        <span class="hljs-attr">"expires"</span>: <span class=<ins class="diff-new">
"hljs-string">"2021-05-10T18:00:00Z"</span>,
</ins>        <span class="hljs-attr">"ttl"</span>: <span class=<ins class="diff-new">
"hljs-number">3600</span>,
</ins>        <span class="hljs-attr">"retrieved"</span>: <span class=<ins class="diff-new">
"hljs-string">"2021-05-10T17:35:00Z"</span>
    },
</ins>    <span class="hljs-attr">"title"</span>: <span class=<ins class="diff-new">
"hljs-string">"Expirable TD"</span>
}
</ins></code></pre></aside><p><ins class="diff-new">
For
the
sake
of
readability,
the
time
values
in
this
example
are
set
to
exact
numbers.
In
realistic
settings,
time
values
may
include
fractions.
</ins></p></section><section id="exploration-directory-api-things-update" class= "normative"><div class="header-wrapper"><h6 id="x7-3-2-1-3-update"><bdi class="secno"><ins class="diff-new">
7.3.2.1.3
</ins></bdi><ins class="diff-new">
Update
</ins></h6><a class="self-link" href= "#exploration-directory-api-things-update" aria-label= "Permalink for Section 7.3.2.1.3"></a></div><p><ins class="diff-new">
The
update
operations
are
to
replace
or
partially
modify
an
existing
TD.
</ins></p><p><ins class="diff-new">
The
update
operations
are
described
below:
</ins></p><ul><li><span class="rfc2119-assertion" id="tdd-things-update"><ins class="diff-new">
A
modified
TD
</ins><em class="rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
replace
an
existing
one
when
submitted
using
an
HTTP
</ins><code><ins class="diff-new">
PUT
</ins></code><ins class="diff-new">
request
at
</ins><code><ins class="diff-new">
/things/{id}
</ins></code><ins class="diff-new">
endpoint,
where
</ins><code><ins class="diff-new">
id
</ins></code><ins class="diff-new">
is
the
identifier
of
the
existing
TD.
</ins></span><span class= "rfc2119-assertion" id="tdd-things-update-contenttype"><ins class="diff-new">
The
request
</ins><em class="rfc2119"><ins class="diff-new">
SHOULD
</ins></em><ins class="diff-new">
contain
</ins><code><ins class="diff-new">
application/td+json
</ins></code><ins class="diff-new">
Content-Type
header
for
JSON
serialization
of
TD.
</ins></span><ins class="diff-new">
The
TD
object
is
validated
in
accordance
with
</ins><a href= "#exploration-directory-api-things-validation" data-matched-text= "[[[#exploration-directory-api-things-validation]]]" class= "sec-ref"><bdi class="secno"><ins class="diff-new">
7.3.2.1.6
</ins></bdi><ins class="diff-new">
Validation
</ins></a>.<span class="rfc2119-assertion" id="tdd-things-update-resp"><ins class="diff-new">
Upon
success,
the
server
</ins><em class="rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
respond
with
204
(No
Content)
status.
</ins></span><p><ins class="diff-new">
This
operation
is
specified
as
</ins><code><ins class="diff-new">
updateThing
</ins></code><ins class="diff-new">
property
in
</ins><a href="#directory-api-spec" data-matched-text= "[[[#directory-api-spec]]]" class="sec-ref"><bdi class= "secno"><ins class="diff-new">
7.3.2.4
</ins></bdi><ins class="diff-new">
API
Specification
(Thing
Model)
</ins></a>.</p><p><ins class="diff-new">
A
server
that
supports
expirable
TDs
will
realize
such
functionality
as
described
in
</ins><a href= "#exploration-directory-registration-expiry" data-matched-text= "[[[#exploration-directory-registration-expiry]]]" class= "sec-ref"><bdi class="secno"><ins class="diff-new">
7.3.1.2
</ins></bdi><ins class="diff-new">
Registration
Expiry
</ins></a>.<ins class="diff-new">
If
</ins><code><ins class="diff-new">
ttl
</ins></code><ins class="diff-new">
(relative
expiry)
is
set
during
the
update
operation,
the
server
will
calculate
and
set
the
</ins><code><ins class="diff-new">
expires
</ins></code><ins class="diff-new">
(absolute
expiry)
value.
</ins></p><p><ins class="diff-new">
Note:
If
the
target
location
does
not
correspond
to
an
existing
TD,
the
request
shall
instead
proceed
as
a
Create
operation
and
respond
the
appropriate
status
code
(see
Create
section).
In
other
words,
an
HTTP
</ins><code><ins class="diff-new">
PUT
</ins></code><ins class="diff-new">
request
acts
as
a
create
or
update
operation.
</ins></p></li><li><span class="rfc2119-assertion" id= "tdd-things-update-partial"><ins class="diff-new">
An
existing
TD
</ins><em class= "rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
be
partially
modified
when
the
modified
parts
are
submitted
using
an
HTTP
</ins><code><ins class="diff-new">
PATCH
</ins></code><ins class="diff-new">
request
at
</ins><code><ins class="diff-new">
/things/{id}
</ins></code><ins class="diff-new">
endpoint,
where
</ins><code><ins class="diff-new">
id
</ins></code><ins class="diff-new">
is
the
identifier
of
the
existing
TD.
</ins></span><span class= "rfc2119-assertion" id="tdd-things-update-partial-mergepatch"><ins class="diff-new">
The
partial
update
</ins><em class="rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
be
processed
using
the
JSON
merge
patch
format
described
in
[
</ins><cite><a class="bibref" data-link-type="biblio" href="#bib-rfc7396" title= "JSON Merge Patch"><ins class="diff-new">
RFC7396
</ins></a></cite><ins class="diff-new">
].
</ins></span><span class= "rfc2119-assertion" id="tdd-things-update-partial-contenttype"><ins class="diff-new">
The
request
</ins><em class="rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
contain
</ins><code><ins class="diff-new">
application/merge-patch+json
</ins></code><ins class="diff-new">
Content-Type
header
for
JSON
serialization
of
the
merge
patch
document.
</ins></span><span class= "rfc2119-assertion" id="tdd-things-update-partial-partialtd"><ins class="diff-new">
The
input
</ins><em class="rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
be
in
</ins><a href= "#dfn-wot-partial-thing-description" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-wot-partial-thing-description-1"><ins class="diff-new">
Partial
TD
</ins></a><ins class="diff-new">
form
and
conform
to
the
original
TD
structure.
</ins></span><ins class="diff-new">
If
the
input
contains
members
that
appear
in
the
original
TD,
their
values
are
replaced.
If
a
member
does
not
appear
in
the
original
TD,
that
member
is
added.
If
the
member
is
set
to
</ins><code><ins class="diff-new">
null
</ins></code><ins class="diff-new">
but
appear
in
the
original
TD,
that
member
is
removed.
Members
with
object
values
are
processed
recursively.
After
applying
the
modifications,
the
TD
object
is
validated
in
accordance
with
</ins><a href="#exploration-directory-api-things-validation" data-matched-text= "[[[#exploration-directory-api-things-validation]]]" class= "sec-ref"><bdi class="secno"><ins class="diff-new">
7.3.2.1.6
</ins></bdi><ins class="diff-new">
Validation
</ins></a>.<span class="rfc2119-assertion" id= "tdd-things-update-partial-resp"><ins class="diff-new">
Upon
success,
the
server
</ins><em class="rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
respond
with
a
204
(No
Content)
status.
</ins></span><p><ins class="diff-new">
This
operation
is
specified
as
</ins><code><ins class="diff-new">
partiallyUpdateThing
</ins></code><ins class="diff-new">
property
in
</ins><a href="#directory-api-spec" data-matched-text= "[[[#directory-api-spec]]]" class="sec-ref"><bdi class= "secno"><ins class="diff-new">
7.3.2.4
</ins></bdi><ins class="diff-new">
API
Specification
(Thing
Model)
</ins></a>.</p><p><ins class="diff-new">
A
server
that
supports
expirable
TDs
will
realize
such
functionality
as
described
in
</ins><a href= "#exploration-directory-registration-expiry" data-matched-text= "[[[#exploration-directory-registration-expiry]]]" class= "sec-ref"><bdi class="secno"><ins class="diff-new">
7.3.1.2
</ins></bdi><ins class="diff-new">
Registration
Expiry
</ins></a>.<ins class="diff-new">
During
the
partial
update
operation,
if
the
resulting
</ins><a href= "#dfn-td" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-td-42"><ins class="diff-new">
TD
</ins></a><ins class="diff-new">
has
</ins><code><ins class="diff-new">
ttl
</ins></code><ins class="diff-new">
(relative
expiry),
the
server
will
calculate
and
set
a
new
</ins><code><ins class="diff-new">
expires
</ins></code><ins class="diff-new">
(absolute
expiry)
value.
</ins></p><p><ins class="diff-new">
A
patch
operation
is
particularly
useful
to
efficiently
extend
the
expiry
of
a
registration
that
uses
a
</ins><code><ins class="diff-new">
ttl
</ins></code><ins class="diff-new">
(relative
expiry)
value.
This
is
typically
done
by
submitting
an
empty
merge
patch
document,
i.e.
an
empty
JSON
object.
This
effectively
translates
to
performing
a
partial
update
operation
that
updates
nothing,
but
triggers
the
recalculation
of
</ins><code><ins class="diff-new">
expires
</ins></code><ins class="diff-new">
(absolute
expiry)
value.
This
expiry
functionality
only
works
if
the
server
supports
it
as
defined
in
</ins><a href= "#exploration-directory-registration-expiry" data-matched-text= "[[[#exploration-directory-registration-expiry]]]" class= "sec-ref"><bdi class="secno"><ins class="diff-new">
7.3.1.2
</ins></bdi><ins class="diff-new">
Registration
Expiry
</ins></a>.</p><p><ins class="diff-new">
The
following
example
is
a
merge
patch
document
to
update
only
the
</ins><code><ins class="diff-new">
base
</ins></code><ins class="diff-new">
and
registration
</ins><code><ins class="diff-new">
expires
</ins></code><ins class="diff-new">
fields
of
a
TD:
</ins></p><aside class="example" id="example-patch-enriched-td"><div class="marker"><a class="self-link" href= "#example-patch-enriched-td"><ins class="diff-new">
Example
</ins><bdi><ins class="diff-new">
7
</ins></bdi></a><span class= "example-title">:<ins class="diff-new">
Example
merge
patch
document
</ins></span></div><pre aria-busy="false"><code class="hljs json">{    <span class="hljs-attr">"base"</span>: <span class=<ins class="diff-new">
"hljs-string">"http://192.168.0.2/"</span>,
</ins>    <span class="hljs-attr">"registration"</span>: {        <span class="hljs-attr">"expires"</span>: <span class=<ins class="diff-new">
"hljs-string">"2021-01-20T17:02:00Z"</span>
    }
}
</ins></code></pre><ins class="diff-new">
This
is
a
valid
way
of
extending
the
absolute
expiry
only
if
the
stored
TD
has
no
</ins><code><ins class="diff-new">
ttl
</ins></code><ins class="diff-new">
(relative
expiry).
For
more
details,
refer
to
</ins><a href= "#exploration-directory-registration-expiry" data-matched-text= "[[[#exploration-directory-registration-expiry]]]" class= "sec-ref"><bdi class="secno"><ins class="diff-new">
7.3.1.2
</ins></bdi><ins class="diff-new">
Registration
Expiry
</ins></a>.</aside></li></ul></section><section id="exploration-directory-api-things-deletion" class= "normative"><div class="header-wrapper"><h6 id="x7-3-2-1-4-deletion"><bdi class="secno"><ins class="diff-new">
7.3.2.1.4
</ins></bdi><ins class="diff-new">
Deletion
</ins></h6><a class="self-link" href= "#exploration-directory-api-things-deletion" aria-label= "Permalink for Section 7.3.2.1.4"></a></div><p><span class="rfc2119-assertion" id="tdd-things-delete"><ins class="diff-new">
A
delete
operation
</ins><em class="rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
be
done
using
an
HTTP
</ins><code><ins class="diff-new">
DELETE
</ins></code><ins class="diff-new">
request
at
</ins><code><ins class="diff-new">
/things/{id}
</ins></code>,<ins class="diff-new">
where
</ins><code><ins class="diff-new">
id
</ins></code><ins class="diff-new">
is
the
identifier
of
the
existing
TD.
</ins></span><span class="rfc2119-assertion" id="tdd-things-delete-resp"><ins class="diff-new">
A
successful
response
</ins><em class="rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
have
204
(No
Content)
status.
</ins></span><ins class="diff-new">
The
retrieve
operation
is
specified
as
</ins><code><ins class="diff-new">
deleteThing
</ins></code><ins class="diff-new">
property
in
</ins><a href="#directory-api-spec" data-matched-text="[[[#directory-api-spec]]]" class= "sec-ref"><bdi class="secno"><ins class="diff-new">
7.3.2.4
</ins></bdi><ins class="diff-new">
API
Specification
(Thing
Model)
</ins></a>.</p></section><section id="exploration-directory-api-things-listing" class= "normative"><div class="header-wrapper"><h6 id="x7-3-2-1-5-listing"><bdi class="secno"><ins class="diff-new">
7.3.2.1.5
</ins></bdi><ins class="diff-new">
Listing
</ins></h6><a class="self-link" href= "#exploration-directory-api-things-listing" aria-label= "Permalink for Section 7.3.2.1.5"></a></div><p><ins class="diff-new">
The
listing
endpoint
provides
different
ways
to
query
the
collection
of
full
TD
objects
from
the
directory.
</ins></p><p><ins class="diff-new">
In
many
scenarios,
retrieving
parts
instead
of
full
TD
objects
is
preferred
because
only
a
subset
of
elements
are
needed
(e.g.
</ins><code><ins class="diff-new">
id
</ins></code><ins class="diff-new">
and
</ins><code><ins class="diff-new">
href
</ins></code><ins class="diff-new">
of
a
property
for
all
TDs)
and
to
save
networking
resources.
The
Search
API
allows
querying
parts
of
TD
objects;
see
</ins><a href= "#exploration-directory-api-search" data-matched-text= "[[[#exploration-directory-api-search]]]" class= "sec-ref"><bdi class="secno"><ins class="diff-new">
7.3.2.3
</ins></bdi><ins class="diff-new">
Search
API
</ins></a>.</p><p><span class="rfc2119-assertion" id="tdd-things-list-method"><ins class="diff-new">
The
directory
</ins><em class="rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
allow
retrieval
of
existing
TDs
using
HTTP
</ins><code><ins class="diff-new">
GET
</ins></code><ins class="diff-new">
requests
at
the
</ins><code><ins class="diff-new">
/things
</ins></code><ins class="diff-new">
endpoint.
</ins></span><span class= "rfc2119-assertion" id="tdd-things-list-resp"><ins class="diff-new">
A
successful
response
</ins><em class="rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
have
200
(OK)
status
and
an
array
of
TDs
in
the
body.
</ins></span><span class="rfc2119-assertion" id= "tdd-things-list-resp-content-type"><ins class="diff-new">
A
successful
response
with
JSON
serialization
</ins><em class="rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
contain
either
</ins><code><ins class="diff-new">
application/json
</ins></code><ins class="diff-new">
or
</ins><code><ins class="diff-new">
application/ld+json
</ins></code><ins class="diff-new">
in
the
Content-Type
header.
</ins></span><ins class="diff-new">
Here
</ins><code><ins class="diff-new">
application/ld+json
</ins></code><ins class="diff-new">
is
preferred
as
it
is
more
specific
and
implies
</ins><code><ins class="diff-new">
application/json
</ins></code>.<ins class="diff-new">
Note
that
the
default
serialization
is
JSON
with
JSON-LD
syntax,
and
alternative
serializations
can
be
negotiated;
see
</ins><a href= "#exploration-directory-api-things" data-matched-text= "[[[#exploration-directory-api-things]]]" class= "sec-ref"><bdi class="secno"><ins class="diff-new">
7.3.2.1
</ins></bdi><ins class="diff-new">
Things
API
</ins></a>.</p><p><ins class="diff-new">
There
may
be
scenarios
in
which
clients
need
to
retrieve
the
collection
in
small
subsets
of
TDs.
While
the
Search
API
(
</ins><a href= "#exploration-directory-api-search" data-matched-text= "[[[#exploration-directory-api-search]]]" class= "sec-ref"><bdi class="secno"><ins class="diff-new">
7.3.2.3
</ins></bdi><ins class="diff-new">
Search
API
</ins></a><ins class="diff-new">
)
does
offer
the
ability
to
query
a
specific
range,
it
may
not
be
optimal,
nor
developer-friendly.
</ins><span class="rfc2119-assertion" id= "tdd-things-list-pagination"><ins class="diff-new">
The
server
</ins><em class= "rfc2119"><ins class="diff-new">
MAY
</ins></em><ins class="diff-new">
support
pagination
to
return
the
collection
in
small
subsets.
</ins></span><ins class="diff-new">
The
pagination
must
be
based
on
the
following
rules:
</ins></p><ul><li><span class="rfc2119-assertion" id= "tdd-things-list-pagination-limit"><ins class="diff-new">
When
the
</ins><code><ins class="diff-new">
limit
</ins></code><ins class="diff-new">
query
parameter
is
set
to
a
positive
integer,
the
server
</ins><em class= "rfc2119"><ins class="diff-new">
MAY
</ins></em><ins class="diff-new">
respond
with
a
subset
of
TDs
totalling
to
less
than
or
equal
to
the
requested
number.
</ins></span></li><li><span class="rfc2119-assertion" id= "tdd-things-list-pagination-header-nextlink"><ins class="diff-new">
When
there
are
more
TDs
after
a
returned
subset
of
the
collection,
the
response
</ins><em class="rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
contain
a
</ins><code><ins class="diff-new">
next
</ins></code><ins class="diff-new">
Link
header
[
</ins><cite><a class="bibref" data-link-type="biblio" href= "#bib-rfc8288" title="Web Linking"><ins class="diff-new">
RFC8288
</ins></a></cite><ins class="diff-new">
]
with
the
URL
of
the
next
subset.
</ins></span><span class="rfc2119-assertion" id= "tdd-things-list-pagination-header-nextlink-attr"><ins class="diff-new">
The
</ins><code><ins class="diff-new">
next
</ins></code><ins class="diff-new">
link
</ins><em class="rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
include
all
arguments
needed
to
produce
the
same
set
of
data
and
its
ordering,
in
particular
the
same
</ins><code><ins class="diff-new">
limit
</ins></code><ins class="diff-new">
argument
given
on
the
initial
request
as
well
as
a
zero-based
</ins><code><ins class="diff-new">
offset
</ins></code><ins class="diff-new">
argument
anchored
at
the
beginning
of
the
next
subset.
</ins></span><span class="rfc2119-assertion" id= "tdd-things-list-pagination-header-nextlink-base"><ins class="diff-new">
The
link
</ins><em class="rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
be
absolute
or
relative
to
directory
API's
base
URL.
</ins></span><ins class="diff-new">
Moreover,
it
may
include
additional
arguments
that
are
necessary
for
ordering
or
session
management.
</ins></li><li><span class="rfc2119-assertion" id= "tdd-things-list-pagination-header-canonicallink"><ins class="diff-new">
All
paged
responses
</ins><em class="rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
contain
a
</ins><code><ins class="diff-new">
canonical
</ins></code><ins class="diff-new">
Link
header
[
</ins><cite><a class="bibref" data-link-type="biblio" href="#bib-rfc8288" title= "Web Linking"><ins class="diff-new">
RFC8288
</ins></a></cite><ins class="diff-new">
]
pointing
to
the
collection
and
include
an
</ins><code><ins class="diff-new">
etag
</ins></code><ins class="diff-new">
parameter
to
represent
the
current
state
of
the
collection.
</ins></span><ins class="diff-new">
The
link
may
be
absolute
or
relative
to
directory
API's
base
URL.
The
</ins><code><ins class="diff-new">
etag
</ins></code><ins class="diff-new">
value
could
be
a
revision
number,
timestamp,
or
UUID
Version
4,
set
whenever
the
TD
collection
changes
in
a
way
that
affects
the
ordering
of
the
TDs.
The
clients
may
rely
on
the
</ins><code><ins class="diff-new">
etag
</ins></code><ins class="diff-new">
value
to
know
whether
the
collection
remains
consistent
across
paginated
retrieval
of
the
collection.
For
example,
creation
or
deletion
of
TDs
or
update
of
TD
fields
used
for
ordering
may
shift
the
calculated
paging
window.
</ins></li><li><span class="rfc2119-assertion" id= "tdd-things-list-pagination-order-default"><ins class="diff-new">
The
collection
</ins><em class="rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
be
sorted
in
ascending
order
using
Unicode
code
point
order
by
the
unique
identifier
of
TDs.
</ins></span></li></ul><p><ins class="diff-new">
This
above
specification
follows
a
subset
of
Linked
Data
Paging
[
</ins><cite><a class="bibref" data-link-type="biblio" href= "#bib-ldp-paging" title= "Linked Data Platform Paging 1.0"><ins class="diff-new">
LDP-Paging
</ins></a></cite><ins class="diff-new">
]
to
allow
optional
pagination
of
the
JSON-LD
array.
Additional
parts
of
Linked
Data
Paging
may
be
implemented
for
examples
to
honour
client's
query
preference
or
to
add
other
link
relations
for
semantic
annotation
and
alternative
navigation
links.
</ins></p><p><ins class="diff-new">
The
following
example
provides
a
walk-through
of
the
paginated
retrieval
of
TDs:
</ins></p><aside class="example" id="example-pagination"><div class="marker"><a class="self-link" href= "#example-pagination"><ins class="diff-new">
Example
</ins><bdi><ins class="diff-new">
8
</ins></bdi></a><span class= "example-title">:<ins class="diff-new">
Query
all
TDs
with
page
size
10.
</ins></span></div><ins class="diff-new">
The
client
requests
the
list
with
a
</ins><code><ins class="diff-new">
limit
</ins></code><ins class="diff-new">
of
10:
</ins><pre aria-busy="false"><code class=<ins class="diff-new">
"hljs">GET /things?limit=10 HTTP/1.1   
Host:
tdd.example.com
</ins></code></pre><ins class="diff-new">
Response:
</ins><pre aria-busy="false"><code class="hljs http"><span class=<ins class="diff-new">
"hljs-meta">HTTP/1.1</span> <span class="hljs-number">200</span> OK
</ins><span class="hljs-attribute">Content-Type</span><span class=<ins class="diff-new">
"hljs-punctuation">: </span>application/ld+json
</ins><span class="hljs-attribute">Link</span><span class=<ins class="diff-new">
"hljs-punctuation">: </span>&lt;/things?offset=10&amp;limit=10&gt;; rel="next"
</ins><span class="hljs-attribute">Link</span><span class=<ins class="diff-new">
"hljs-punctuation">: </span>&lt;/things&gt;; rel="canonical"; etag="v1"
</ins><span class="css"><span class=<ins class="diff-new">
"hljs-selector-attr">
[{
TD
},
...9
other
TDs...
]
</ins></span></span></code></pre><ins class="diff-new">
The
response
includes
two
Link
headers
with
relative
URLs:
</ins><code><ins class="diff-new">
next
</ins></code><ins class="diff-new">
link
to
query
the
remaining
TDs,
</ins><code><ins class="diff-new">
canonical
</ins></code><ins class="diff-new">
link
referencing
the
full
collection
with
</ins><code><ins class="diff-new">
etag
</ins></code><ins class="diff-new">
value
indicating
the
state
of
that
collection.
</ins><br /><ins class="diff-new">
The
response
body
is
an
array
of
10
TDs.
</ins><br /><br /><ins class="diff-new">
The
presence
of
the
</ins><code><ins class="diff-new">
next
</ins></code><ins class="diff-new">
link
implies
that
subsequent
pages
should
be
queried
for
the
remaining
TDs.
The
client
requests
the
next
page
via
the
</ins><code><ins class="diff-new">
next
</ins></code><ins class="diff-new">
link:
</ins><pre aria-busy="false"><code class=<ins class="diff-new">
"hljs">GET /things?offset=10&amp;limit=10 HTTP/1.1   
Host:
tdd.example.com
</ins></code></pre><ins class="diff-new">
Response:
</ins><pre aria-busy="false"><code class="hljs http"><span class=<ins class="diff-new">
"hljs-meta">HTTP/1.1</span> <span class="hljs-number">200</span> OK
</ins><span class="hljs-attribute">Content-Type</span><span class=<ins class="diff-new">
"hljs-punctuation">: </span>application/ld+json
</ins><span class="hljs-attribute">Link</span><span class=<ins class="diff-new">
"hljs-punctuation">: </span>&lt;/things&gt;; rel="canonical"; etag="v1"
</ins><span class="css"><span class=<ins class="diff-new">
"hljs-selector-attr">
[{
TD
},
{
TD
}]
</ins></span></span></code></pre><ins class="diff-new">
The
server
response
has
the
remaining
two
TDs.
There
is
no
</ins><code><ins class="diff-new">
next
</ins></code><ins class="diff-new">
link,
because
this
is
the
last
page.
The
</ins><code><ins class="diff-new">
etag
</ins></code><ins class="diff-new">
value
has
not
changed
implying
that
the
collection
has
remained
consistent
between
the
two
requests.
</ins><br /><br /><ins class="diff-new">
The
client
has
retrieved
the
whole
collection,
containing
12
TDs.
</ins></aside><p><span class="rfc2119-assertion" id= "tdd-things-list-pagination-collection"><ins class="diff-new">
As
an
alternative
to
an
array
of
TDs
as
the
body
of
the
response,
the
server
</ins><em class= "rfc2119"><ins class="diff-new">
MAY
</ins></em><ins class="diff-new">
send
a
more
verbose
payload
allowing
server-side
information,
such
as
pagination
information,
to
be
included
in
addition
to
the
actual
data.
</ins></span></p><p><ins class="diff-new">
The
alternative
pagination
format
is
inspired
by
</ins><a href= "https://www.hydra-cg.com/spec/latest/core/#advanced-concepts"><ins class="diff-new">
Hydra
Advanced
Concepts
</ins></a>,<ins class="diff-new">
more
concretely
the
</ins><a href= "https://www.hydra-cg.com/spec/latest/core/#example-20-a-hydra-partialcollectionview-splits-a-collection-into-multiple-views"><ins class="diff-new">
Partial
Collection
View
</ins></a>.<ins class="diff-new">
Adapted
to
our
purposes
and
using
the
</ins><i><ins class="diff-new">
members
</ins></i><ins class="diff-new">
field
to
accomodate
the
array
of
TDs,
it
looks
as
follows
for
the
listing
endpoint:
</ins></p><aside class="example" id="example-alternative-payload"><div class="marker"><a class="self-link" href= "#example-alternative-payload"><ins class="diff-new">
Example
</ins><bdi><ins class="diff-new">
9
</ins></bdi></a><span class= "example-title">:<ins class="diff-new">
Alternative
payload
format
including
pagination
information
</ins></span></div><pre aria-busy="false"><code class="hljs javascript">{        <span class="hljs-string">"@context"</span>: <span class=<ins class="diff-new">
"hljs-string">"https://www.w3.org/2022/wot/discovery"</span>,
</ins>        <span class="hljs-string">"@type"</span>: <span class=<ins class="diff-new">
"hljs-string">"ThingCollection"</span>,
</ins>        <span class="hljs-string">"total"</span>: <span class=<ins class="diff-new">
"hljs-number">12</span>,
</ins>        <span class="hljs-string">"members"</span>: [<ins class="diff-new">
                { TD },
</ins>                <span class="hljs-number">9</span> other TDs...<ins class="diff-new">
        ],
</ins>        <span class="hljs-string">"@id"</span>: <span class=<ins class="diff-new">
"hljs-string">"/things?offset=0&amp;limit=10&amp;format=collection"</span>,
</ins>        <span class="hljs-string">"next"</span>: <span class=<ins class="diff-new">
"hljs-string">"/things?offset=10&amp;limit=10&amp;format=collection"</span>
}
</ins></code></pre></aside><p><ins class="diff-new">
To
tell
the
server
which
format
to
send,
the
additional
query
parameter
</ins><code><ins class="diff-new">
?format=array|collection
</ins></code><ins class="diff-new">
can
be
added
to
the
request.
</ins><code><ins class="diff-new">
?format=array
</ins></code><ins class="diff-new">
is
the
default
parameter,
does
not
have
to
be
provided
explicitly,
and
yields
to
a
server
response
of
the
pure
array
of
TDs.
</ins><code><ins class="diff-new">
?format=collection
</ins></code><ins class="diff-new">
should
yield
to
a
server
response
with
the
format
as
described
in
</ins><a href= "#example-alternative-payload" data-matched-text= "[[[#example-alternative-payload]]]" class="box-ref"><ins class="diff-new">
Example
</ins><bdi><ins class="diff-new">
9
</ins></bdi></a>.</p><p><ins class="diff-new">
The
listing
operation
is
specified
as
</ins><code><ins class="diff-new">
things
</ins></code><ins class="diff-new">
property
in
</ins><a href="#directory-api-spec" data-matched-text= "[[[#directory-api-spec]]]" class="sec-ref"><bdi class= "secno"><ins class="diff-new">
7.3.2.4
</ins></bdi><ins class="diff-new">
API
Specification
(Thing
Model)
</ins></a>.</p></section><section id="exploration-directory-api-things-validation" class= "normative"><div class="header-wrapper"><h6 id="x7-3-2-1-6-validation"><bdi class="secno"><ins class="diff-new">
7.3.2.1.6
</ins></bdi><ins class="diff-new">
Validation
</ins></h6><a class="self-link" href= "#exploration-directory-api-things-validation" aria-label= "Permalink for Section 7.3.2.1.6"></a></div><p><span class="rfc2119-assertion" id= "tdd-validation-syntactic"><ins class="diff-new">
The
syntactic
validation
of
TD
objects
before
storage
is
</ins><em class="rfc2119"><ins class="diff-new">
RECOMMENDED
</ins></em><ins class="diff-new">
to
prevent
common
erroneous
submissions.
</ins></span><span class= "rfc2119-assertion" id="tdd-validation-jsonschema"><ins class="diff-new">
The
server
</ins><em class="rfc2119"><ins class="diff-new">
SHOULD
</ins></em><ins class="diff-new">
use
at
least
</ins><a href= "https://www.w3.org/TR/wot-thing-description11/#minimal-validation-serialization-json"><ins class="diff-new">
Minimal
Validation
</ins></a><ins class="diff-new">
as
defined
in
[
</ins><cite><a class="bibref" data-link-type="biblio" href="#bib-wot-thing-description11" title= "Web of Things (WoT) Thing Description 1.1"><ins class="diff-new">
wot-thing-description11
</ins></a></cite><ins class="diff-new">
]
to
validate
TDs,
including
use
of
the
</ins><a href= "https://www.w3.org/TR/wot-thing-description/#json-schema-for-validation"><ins class="diff-new">
WoT
Thing
Description
(1.0)
JSON
Schema
</ins></a><ins class="diff-new">
or
</ins><a href= "https://www.w3.org/TR/wot-thing-description11/#json-schema-for-validation"><ins class="diff-new">
WoT
Thing
Description
1.1
JSON
Schema
</ins></a>,<ins class="diff-new">
and
the
JSON
schema
defined
in
</ins><a href="#tdd-extensions-jsonschema" data-matched-text= "[[[#tdd-extensions-jsonschema]]]" class="sec-ref"><bdi class= "secno"><ins class="diff-new">
A.
</ins></bdi><ins class="diff-new">
JSON
Schema
for
WoT
Discovery
TD-extensions
</ins></a><ins class="diff-new">
for
</ins><a href="#dfn-wot-enriched-thing-description" class= "internalDFN" data-link-type="dfn" id= "ref-for-dfn-wot-enriched-thing-description-6"><ins class="diff-new">
Enriched
TDs
</ins></a>,<ins class="diff-new">
as
appropriate
based
on
the
value
of
the
</ins><code><ins class="diff-new">
@context
</ins></code>.</span></p><p><ins class="diff-new">
Additional
forms
of
validation
can
be
added
to
support
various
use
cases.
For
example,
a
use
case
may
require
stateful
validation
of
the
input
TDs
to
ensure
that
the
</ins><code><ins class="diff-new">
version
</ins></code><ins class="diff-new">
value
is
initialized
and
updated
according
to
pre-defined
rules.
</ins></p><p><span class="rfc2119-assertion" id="tdd-validation-result"><ins class="diff-new">
If
the
server
fails
to
validate
the
TD
object,
it
</ins><em class= "rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
inform
the
client
with
necessary
details
to
identify
and
resolve
the
errors.
</ins></span><span class= "rfc2119-assertion" id="tdd-validation-response"><ins class="diff-new">
The
validation
error
</ins><em class="rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
be
described
as
Problem
Details
[
</ins><cite><a class="bibref" data-link-type="biblio" href= "#bib-rfc7807" title= "Problem Details for HTTP APIs"><ins class="diff-new">
RFC7807
</ins></a></cite><ins class="diff-new">
]
with
an
extension
field
called
</ins><code><ins class="diff-new">
validationErrors
</ins></code>,<ins class="diff-new">
set
to
an
array
of
objects
with
</ins><code><ins class="diff-new">
field
</ins></code><ins class="diff-new">
and
</ins><code><ins class="diff-new">
description
</ins></code><ins class="diff-new">
fields.
</ins></span><ins class="diff-new">
This
is
necessary
to
represent
the
error
in
a
machine-readable
way.
</ins><span class= "rfc2119-assertion" id="tdd-validation-response-utf-8"><ins class="diff-new">
All
validation
error
responses
described
using
Problem
Details
</ins><em class="rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
be
encoded
using
UTF-8.
</ins></span><ins class="diff-new">
As
already
stated
in
general
for
error
reporting,
validation
error
responses
may
report
details
in
different
languages
using
proactive
negotiation,
if
the
</ins><code><ins class="diff-new">
Accept-Language
</ins></code><ins class="diff-new">
header
field
has
been
set
in
the
HTTP
request
[
</ins><cite><a class="bibref" data-link-type="biblio" href="#bib-rfc7231" title= "Hypertext Transfer Protocol (HTTP/1.1): Semantics and Content"><ins class="diff-new">
RFC7231
</ins></a></cite><ins class="diff-new">
].
</ins></p><p><a href="#example-validation-error" data-matched-text= "[[[#example-validation-error]]]" class="box-ref"><ins class="diff-new">
Example
</ins><bdi><ins class="diff-new">
10
</ins></bdi></a><ins class="diff-new">
is
an
example
error
response
with
two
validation
errors.
</ins></p><aside class="example" id="example-validation-error"><div class="marker"><a class="self-link" href= "#example-validation-error"><ins class="diff-new">
Example
</ins><bdi><ins class="diff-new">
10
</ins></bdi></a><span class= "example-title">:<ins class="diff-new">
Example
validation
error
response
</ins></span></div><pre aria-busy="false"><code class="hljs json">{    <span class="hljs-attr">"title"</span>: <span class=<ins class="diff-new">
"hljs-string">"Bad Request"</span>,
</ins>    <span class="hljs-attr">"status"</span>: <span class=<ins class="diff-new">
"hljs-number">400</span>,
</ins>    <span class="hljs-attr">"detail"</span>: <span class=<ins class="diff-new">
"hljs-string">"The input did not pass the JSON Schema validation"</span>,
</ins>    <span class="hljs-attr">"instance"</span>: <span class=<ins class="diff-new">
"hljs-string">"/errors/30585584-cce2-4d04-8079-67b33ffdafbc"</span>,
</ins>    <span class="hljs-attr">"validationErrors"</span>: [<ins class="diff-new">
        {
</ins>            <span class="hljs-attr">"field"</span>: <span class=<ins class="diff-new">
"hljs-string">"(root)"</span>,
</ins>            <span class=<ins class="diff-new">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"security is required"</span>
        },
        {
</ins>            <span class="hljs-attr">"field"</span>: <span class=<ins class="diff-new">
"hljs-string">"properties.status.forms.0.href"</span>,
</ins>            <span class=<ins class="diff-new">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"Invalid type. Expected: string, given: integer"</span>
        }
    ]
}
</ins></code></pre></aside></section></section><section id="exploration-directory-api-notification" class= "normative"><div class="header-wrapper"><h5 id="x7-3-2-2-events-api"><bdi class="secno"><ins class="diff-new">
7.3.2.2
</ins></bdi><ins class="diff-new">
Events
API
</ins></h5><a class="self-link" href="#exploration-directory-api-notification" aria-label="Permalink for Section 7.3.2.2"></a></div><p><ins class="diff-new">
The
Notification
API
is
to
notify
clients
about
the
changes
to
</ins><a href="#dfn-td" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-td-43"><ins class="diff-new">
TDs
</ins></a><ins class="diff-new">
maintained
within
the
directory.
</ins><span class="rfc2119-assertion" id="tdd-notification"><ins class="diff-new">
Directories
</ins><em class="rfc2119"><ins class="diff-new">
MAY
</ins></em><ins class="diff-new">
implement
the
Notification
API.
</ins></span></p><p><span class="rfc2119-assertion" id="tdd-notification-sse"><ins class="diff-new">
The
Notification
API
</ins><em class="rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
follow
the
Server-Sent
Events
(SSE)
[
</ins><cite><a class="bibref" data-link-type= "biblio" href="#bib-html" title="HTML Standard"><ins class="diff-new">
HTML
</ins></a></cite><ins class="diff-new">
]
specifications
to
serve
events
to
clients
at
</ins><code><ins class="diff-new">
/events
</ins></code><ins class="diff-new">
endpoint.
</ins></span><ins class="diff-new">
In
particular,
the
server
responds
to
successful
requests
with
200
(OK)
status
and
</ins><code><ins class="diff-new">
text/event-stream
</ins></code><ins class="diff-new">
Content
Type.
Re-connecting
clients
may
continue
from
the
last
event
by
providing
the
last
event
ID
as
</ins><code><ins class="diff-new">
Last-Event-ID
</ins></code><ins class="diff-new">
header
value.
</ins><span class="rfc2119-assertion" id= "tdd-notification-event-id"><ins class="diff-new">
The
server
</ins><em class= "rfc2119"><ins class="diff-new">
SHOULD
</ins></em><ins class="diff-new">
provide
an
event
ID
as
the
</ins><code><ins class="diff-new">
id
</ins></code><ins class="diff-new">
field
in
each
event
and
respond
to
re-connecting
clients
by
delivering
all
missed
events.
</ins></span></p><p><ins class="diff-new">
The
rest
of
this
section
describes
the
implementation
details
on
top
of
the
SSE
protocol.
Realizing
the
notification
functionality
using
other
protocols
such
as
MQTT
are
possible
and
may
be
formalized
in
future
versions
of
this
specification.
</ins></p><dl><dt><ins class="diff-new">
Event
Types
</ins></dt><dd><span class="rfc2119-assertion" id= "tdd-notification-event-types"><ins class="diff-new">
The
server
</ins><em class= "rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
produce
events
attributed
to
the
lifecycle
of
the
Thing
Descriptions
within
the
directory
using
</ins><code><ins class="diff-new">
thing_created
</ins></code>,<code><ins class="diff-new">
thing_updated
</ins></code>,<ins class="diff-new">
and
</ins><code><ins class="diff-new">
thing_deleted
</ins></code><ins class="diff-new">
event
types.
</ins></span></dd><dt><ins class="diff-new">
Event
Filtering
</ins></dt><dd><ins class="diff-new">
The
API
enables
server-side
filtering
of
events
to
reduce
resource
consumption
by
delivering
only
the
events
required
by
clients.
Client
libraries
may
offer
additional
filtering
capabilities
on
the
client-side.
</ins><p><span class="rfc2119-assertion" id= "tdd-notification-filter-type"><ins class="diff-new">
The
server
</ins><em class= "rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
support
event
filtering
based
on
the
event
type
given
by
the
client
upon
subscription.
</ins></span></p><p><ins class="diff-new">
For
example,
given
the
URI
Template
</ins><code><ins class="diff-new">
/events{/type}
</ins></code>:</p><ul><li><code><ins class="diff-new">
/events/thing_created
</ins></code><ins class="diff-new">
instructs
the
server
to
only
deliver
events
of
type
</ins><code><ins class="diff-new">
thing_created
</ins></code></li><li><code><ins class="diff-new">
/events
</ins></code><ins class="diff-new">
instructs
the
server
to
deliver
all
events
</ins></li></ul><p><ins class="diff-new">
The
clients
need
to
subscribe
separately
to
receive
a
subset
of
the
events
(e.g.
only
</ins><code><ins class="diff-new">
thing_created
</ins></code><ins class="diff-new">
and
</ins><code><ins class="diff-new">
thing_deleted
</ins></code><ins class="diff-new">
)
from
the
server.
When
using
HTTP/2,
multiple
subscriptions
on
the
same
domain
(HTTP
streams)
get
multiplexed
on
a
single
connection.
</ins></p></dd><dt><ins class="diff-new">
Event
Data
</ins></dt><dd><p><span class="rfc2119-assertion" id="tdd-notification-data"><ins class="diff-new">
The
event
data
</ins><em class="rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
contain
the
JSON
serialization
of
the
event
object.
</ins></span><ins class="diff-new">
The
event
data
object
is
a
</ins><a href="#dfn-wot-partial-thing-description" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-wot-partial-thing-description-2"><ins class="diff-new">
Partial
TD
</ins></a><ins class="diff-new">
or
the
whole
</ins><a href="#dfn-td" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-td-44"><ins class="diff-new">
TD
</ins></a><ins class="diff-new">
object
depending
on
the
request:
</ins></p><ul><li><span class="rfc2119-assertion" id= "tdd-notification-data-td-id"><ins class="diff-new">
The
event
data
object
</ins><em class= "rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
at
least
include
the
identifier
of
the
TD
created,
updated,
or
deleted
at
that
event
in
</ins><a href= "#dfn-wot-partial-thing-description" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-wot-partial-thing-description-3"><ins class="diff-new">
Partial
TD
</ins></a><ins class="diff-new">
form.
</ins></span><aside class="example" id= "example-creation-and-deletion-sse-events-for-a-td"><div class="marker"><a class="self-link" href= "#example-creation-and-deletion-sse-events-for-a-td"><ins class="diff-new">
Example
</ins><bdi><ins class="diff-new">
11
</ins></bdi></a><span class="example-title">:<ins class="diff-new">
Creation
and
deletion
SSE
events
for
a
TD
</ins></span></div><pre aria-busy="false"><code class="hljs css">event: thing_created<ins class="diff-new">
data: {<span class="hljs-string">"id"</span>: <span class=
"hljs-string">"urn:example:simple-td"</span>}
id: event_1
event: thing_deleted
data: {<span class="hljs-string">"id"</span>: <span class=
"hljs-string">"urn:example:simple-td"</span>}
id:
event_2
</ins></code></pre></aside></li><li><span class="rfc2119-assertion" id= "tdd-notification-data-create-full"><ins class="diff-new">
When
</ins><code><ins class="diff-new">
diff
</ins></code><ins class="diff-new">
query
parameter
is
set
to
</ins><code><ins class="diff-new">
true
</ins></code><ins class="diff-new">
and
the
event
has
</ins><code><ins class="diff-new">
thing_created
</ins></code><ins class="diff-new">
type,
the
server
</ins><em class= "rfc2119"><ins class="diff-new">
MAY
</ins></em><ins class="diff-new">
return
the
whole
TD
object
as
event
data.
</ins></span><aside class="example" id="example-create-event-full"><div class="marker"><a class="self-link" href= "#example-create-event-full"><ins class="diff-new">
Example
</ins><bdi><ins class="diff-new">
12
</ins></bdi></a><span class= "example-title">:<ins class="diff-new">
Full
creation
SSE
event
for
a
TD
</ins></span></div><pre aria-busy="false"><code class="hljs css">event: thing_created<ins class="diff-new">
data: {
data:     <span class="hljs-string">"@context"</span>: [
data:         <span class=
"hljs-string">"https://www.w3.org/2022/wot/td/v1.1"</span>,
data:         <span class=
"hljs-string">"https://www.w3.org/2022/wot/discovery"</span>
data:     ],
data:     <span class=
"hljs-string">"description"</span>: <span class=
"hljs-string">"This is a new TD"</span>,
data:     <span class="hljs-string">"id"</span>: <span class=
"hljs-string">"urn:example:simple-td"</span>,
data:     <span class="hljs-string">"security"</span>: <span class=
"hljs-string">"basic_sc"</span>,
data:     <span class="hljs-string">"securityDefinitions"</span>: {
data:         <span class="hljs-string">"basic_sc"</span>: {
data:             <span class=
"hljs-string">"scheme"</span>: <span class=
"hljs-string">"basic"</span>
data:         }
data:     },
data:     <span class="hljs-string">"registration"</span>: {
data:         <span class=
"hljs-string">"created"</span>: <span class=
"hljs-string">"2021-01-19T17:02:00Z"</span>,
data:         <span class=
"hljs-string">"modified"</span>: <span class=
"hljs-string">"2021-01-19T17:02:00Z"</span>
data:     },
data:     <span class="hljs-string">"title"</span>: <span class=
"hljs-string">"Simple TD"</span>
data: }
id:
event_1
</ins></code></pre></aside></li><li><span class="rfc2119-assertion" id= "tdd-notification-data-update-diff"><ins class="diff-new">
When
</ins><code><ins class="diff-new">
diff
</ins></code><ins class="diff-new">
query
parameter
is
set
to
</ins><code><ins class="diff-new">
true
</ins></code><ins class="diff-new">
and
the
event
has
</ins><code><ins class="diff-new">
thing_updated
</ins></code><ins class="diff-new">
type,
the
server
</ins><em class= "rfc2119"><ins class="diff-new">
MAY
</ins></em><ins class="diff-new">
inform
the
client
about
the
updated
parts
following
the
JSON
Merge
Patch
[
</ins><cite><a class="bibref" data-link-type="biblio" href="#bib-rfc7396" title= "JSON Merge Patch"><ins class="diff-new">
RFC7396
</ins></a></cite><ins class="diff-new">
]
format.
</ins></span><span class= "rfc2119-assertion" id="tdd-notification-data-update-id"><ins class="diff-new">
A
</ins><code><ins class="diff-new">
thing_updated
</ins></code><ins class="diff-new">
event
data
that
is
based
on
JSON
Merge
Patch
[
</ins><cite><a class="bibref" data-link-type="biblio" href= "#bib-rfc7396" title="JSON Merge Patch"><ins class="diff-new">
RFC7396
</ins></a></cite><ins class="diff-new">
]
</ins><em class="rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
always
include
the
identifier
of
the
TD
regardless
of
whether
it
is
changed.
</ins></span><p><ins class="diff-new">
The
following
example
shows
the
event
triggered
on
update
of
the
TD
from
</ins><a href="#example-create-event-full" data-matched-text= "[[[#example-create-event-full]]]" class="box-ref"><ins class="diff-new">
Example
</ins><bdi><ins class="diff-new">
12
</ins></bdi></a>:</p><aside class="example" id="example-update-event-full"><div class="marker"><a class="self-link" href= "#example-update-event-full"><ins class="diff-new">
Example
</ins><bdi><ins class="diff-new">
13
</ins></bdi></a><span class= "example-title">:<ins class="diff-new">
Full
update
SSE
event
for
a
TD
with
removed
description
and
changed
title
</ins></span></div><pre aria-busy="false"><code class="hljs css">event: thing_updated<ins class="diff-new">
data: {
data:     <span class="hljs-string">"description"</span>: null,
data:     <span class="hljs-string">"id"</span>: <span class=
"hljs-string">"urn:example:simple-td"</span>,
data:     <span class="hljs-string">"title"</span>: <span class=
"hljs-string">"Updated TD"</span>
data: }
id:
event_3
</ins></code></pre></aside></li><li><span class="rfc2119-assertion" id= "tdd-notification-data-delete-diff"><ins class="diff-new">
The
</ins><code><ins class="diff-new">
diff
</ins></code><ins class="diff-new">
query
parameter
</ins><em class="rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
be
ignored
for
</ins><code><ins class="diff-new">
thing_deleted
</ins></code><ins class="diff-new">
events.
</ins></span><ins class="diff-new">
In
other
words,
the
server
shall
not
include
additional
properties
in
the
payload
of
</ins><code><ins class="diff-new">
thing_deleted
</ins></code><ins class="diff-new">
events
when
</ins><code><ins class="diff-new">
diff
</ins></code><ins class="diff-new">
is
set
to
</ins><code><ins class="diff-new">
true
</ins></code>.</li><li><ins class="diff-new">
When
a
server
which
does
not
support
the
</ins><code><ins class="diff-new">
diff
</ins></code><ins class="diff-new">
query
parameter
is
requested
with
such
query
parameter,
it
should
reject
the
request.
This
is
to
inform
clients
about
the
lack
of
such
functionality
at
connection
time
and
avoid
runtime
exceptions
caused
by
missing
event
data
attributes.
</ins></li></ul></dd></dl><p><ins class="diff-new">
The
Notification
API
is
specified
as
three
event
affordances
in
</ins><a href="#directory-api-spec" data-matched-text= "[[[#directory-api-spec]]]" class="sec-ref"><bdi class= "secno"><ins class="diff-new">
7.3.2.4
</ins></bdi><ins class="diff-new">
API
Specification
(Thing
Model)
</ins></a>,<ins class="diff-new">
namely:
</ins><code><ins class="diff-new">
thingCreated
</ins></code>,<code><ins class="diff-new">
thingUpdated
</ins></code>,<ins class="diff-new">
and
</ins><code><ins class="diff-new">
thingDeleted
</ins></code>.</p><div class="note" role="note" id="issue-container-generatedID"><div role="heading" class="note-title marker" id="h-note" aria-level="6"><span><ins class="diff-new">
Note
</ins></span><span class="issue-label">:<ins class="diff-new">
SSE
Authorization
Header
</ins></span></div><p class=""><ins class="diff-new">
Some
early
SSE
implementations
(including
HTML5
EventSource)
do
not
allow
setting
custom
headers
in
the
initial
HTTP
request.
Authorization
header
is
required
in
few
OAuth2
flows
and
passing
it
as
a
query
parameter
is
</ins><a href= "https://datatracker.ietf.org/doc/html/rfc6750#section-2.3"><ins class="diff-new">
not
advised
</ins></a>.<ins class="diff-new">
There
are
polyfills
for
browsers
and
modern
libraries
which
allow
setting
Authorization
header.
</ins></p></div></section><section id="exploration-directory-api-search" class="normative"><div class="header-wrapper"><h5 id="x7-3-2-3-search-api"><bdi class="secno"><ins class="diff-new">
7.3.2.3
</ins></bdi><ins class="diff-new">
Search
API
</ins></h5><a class="self-link" href="#exploration-directory-api-search" aria-label="Permalink for Section 7.3.2.3"></a></div><ins class="diff-new">
This
specification
describes
three
search
APIs:
syntactic
search
with
JSONPath
[
</ins><cite><a class="bibref" data-link-type="biblio" href="#bib-jsonpath" title= "JSONPath: Query expressions for JSON"><ins class="diff-new">
JSONPATH
</ins></a></cite><ins class="diff-new">
],
syntactic
search
with
XPath
[
</ins><cite><a class="bibref" data-link-type="biblio" href="#bib-xpath-31" title= "XML Path Language (XPath) 3.1"><ins class="diff-new">
xpath-31
</ins></a></cite><ins class="diff-new">
],
and
semantic
search
with
SPARQL
[
</ins><cite><a class="bibref" data-link-type="biblio" href="#bib-sparql11-overview" title= "SPARQL 1.1 Overview"><ins class="diff-new">
sparql11-overview
</ins></a></cite><ins class="diff-new">
].
</ins><span class= "rfc2119-assertion" id="tdd-search-sparql"><ins class="diff-new">
The
Directory
</ins><em class= "rfc2119"><ins class="diff-new">
MAY
</ins></em><ins class="diff-new">
implement
semantic
search
with
SPARQL.
</ins></span><ins class="diff-new">
JSONPath
and
XPath
are
informative
and
subject
to
change.
</ins><p><span class="rfc2119-assertion" id="tdd-search-large-tdds"><ins class="diff-new">
It
is
</ins><em class="rfc2119"><ins class="diff-new">
RECOMMENDED
</ins></em><ins class="diff-new">
that
directories
implement
a
search
API
to
efficiently
serve
</ins><a href="#dfn-td" class= "internalDFN" data-link-type="dfn" id="ref-for-dfn-td-45"><ins class="diff-new">
TDs
</ins></a><ins class="diff-new">
based
on
client-specific
queries.
</ins></span></p><section id="jsonpath-semantic" class="informative"><div class="header-wrapper"><h6 id="x7-3-2-3-1-syntactic-search-jsonpath"><bdi class= "secno"><ins class="diff-new">
7.3.2.3.1
</ins></bdi><ins class="diff-new">
Syntactic
search:
JSONPath
</ins></h6><a class="self-link" href="#jsonpath-semantic" aria-label= "Permalink for Section 7.3.2.3.1"></a></div><p><em><ins class="diff-new">
This
section
is
non-normative.
</ins></em></p><ins class="diff-new">
Support
for
JSONPath
Search
API
is
optional.
If
implemented,
the
JSONPath
API
must
allow
searching
TDs
using
an
HTTP
</ins><code><ins class="diff-new">
GET
</ins></code><ins class="diff-new">
request
at
</ins><code><ins class="diff-new">
/search/jsonpath?query={query}
</ins></code><ins class="diff-new">
endpoint,
where
</ins><code><ins class="diff-new">
query
</ins></code><ins class="diff-new">
is
the
JSONPath
expression.
The
request
must
contain
a
valid
JSONPath
[
</ins><cite><a class="bibref" data-link-type= "biblio" href="#bib-jsonpath" title= "JSONPath: Query expressions for JSON"><ins class="diff-new">
JSONPATH
</ins></a></cite><ins class="diff-new">
]
as
searching
parameter.
A
successful
response
must
have
200
(OK)
status,
contain
</ins><code><ins class="diff-new">
application/json
</ins></code><ins class="diff-new">
in
the
Content-Type
header,
and
a
set
of
complete
TDs
or
a
set
of
TD
fragments
in
the
body.
The
syntactic
search
with
JSONPath
is
specified
as
</ins><code><ins class="diff-new">
searchJSONPath
</ins></code><ins class="diff-new">
action
in
</ins><a href="#directory-api-spec" data-matched-text="[[[#directory-api-spec]]]" class= "sec-ref"><bdi class="secno"><ins class="diff-new">
7.3.2.4
</ins></bdi><ins class="diff-new">
API
Specification
(Thing
Model)
</ins></a>.</section><section id="xpath-semantic" class="informative"><div class="header-wrapper"><h6 id="x7-3-2-3-2-syntactic-search-xpath"><bdi class= "secno"><ins class="diff-new">
7.3.2.3.2
</ins></bdi><ins class="diff-new">
Syntactic
search:
XPath
</ins></h6><a class="self-link" href="#xpath-semantic" aria-label= "Permalink for Section 7.3.2.3.2"></a></div><p><em><ins class="diff-new">
This
section
is
non-normative.
</ins></em></p><ins class="diff-new">
Support
for
XPath
Search
API
is
optional.
If
implemented,
the
XPath
query
API
must
allow
searching
TDs
using
an
HTTP
</ins><code><ins class="diff-new">
GET
</ins></code><ins class="diff-new">
request
at
</ins><code><ins class="diff-new">
/search/xpath?query={query}
</ins></code><ins class="diff-new">
endpoint,
where
</ins><code><ins class="diff-new">
query
</ins></code><ins class="diff-new">
is
the
XPath
expression.
The
request
must
contain
a
valid
XPath
3.1
[
</ins><cite><a class="bibref" data-link-type= "biblio" href="#bib-xpath-31" title= "XML Path Language (XPath) 3.1"><ins class="diff-new">
xpath-31
</ins></a></cite><ins class="diff-new">
]
as
search
parameter.
A
successful
response
must
have
200
(OK)
status,
contain
</ins><code><ins class="diff-new">
application/json
</ins></code><ins class="diff-new">
in
the
Content-Type
header,
and
the
query
response
in
JSON
serialization
in
the
body.
The
data
schema
for
the
response
is
defined
implicitly
by
the
query
and
the
XPath
specification.
The
syntactic
search
with
XPath
is
specified
as
</ins><code><ins class="diff-new">
searchXPath
</ins></code><ins class="diff-new">
action
in
</ins><a href="#directory-api-spec" data-matched-text="[[[#directory-api-spec]]]" class= "sec-ref"><bdi class="secno"><ins class="diff-new">
7.3.2.4
</ins></bdi><ins class="diff-new">
API
Specification
(Thing
Model)
</ins></a>.</section><section id="search-semantic" class="normative"><div class="header-wrapper"><h6 id="x7-3-2-3-3-semantic-search-sparql"><bdi class= "secno"><ins class="diff-new">
7.3.2.3.3
</ins></bdi><ins class="diff-new">
Semantic
search:
SPARQL
</ins></h6><a class="self-link" href="#search-semantic" aria-label= "Permalink for Section 7.3.2.3.3"></a></div><ins class="diff-new">
Support
for
SPARQL
Search
API
is
optional.
</ins><span class= "rfc2119-assertion" id="tdd-search-sparql-version"><ins class="diff-new">
If
implemented,
the
SPARQL
search
API
</ins><em class="rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
allow
searching
TDs
using
the
SPARQL
1.1
protocol
[
</ins><cite><a class="bibref" data-link-type="biblio" href="#bib-sparql11-overview" title= "SPARQL 1.1 Overview"><ins class="diff-new">
sparql11-overview
</ins></a></cite><ins class="diff-new">
].
</ins></span><span class="rfc2119-assertion" id= "tdd-search-sparql-method-get"><ins class="diff-new">
The
SPARQL
API
</ins><em class= "rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
accept
queries
using
HTTP
</ins><code><ins class="diff-new">
GET
</ins></code><ins class="diff-new">
requests
at
</ins><code><ins class="diff-new">
/search/sparql?query={query}
</ins></code><ins class="diff-new">
endpoint,
where
</ins><code><ins class="diff-new">
query
</ins></code><ins class="diff-new">
is
the
SPARQL
expression.
</ins></span><span class="rfc2119-assertion" id= "tdd-search-sparql-method-post"><ins class="diff-new">
The
support
for
SPARQL
search
using
HTTP
</ins><code><ins class="diff-new">
POST
</ins></code><ins class="diff-new">
method
at
</ins><code><ins class="diff-new">
/search/sparql
</ins></code><ins class="diff-new">
endpoint
is
</ins><em class="rfc2119"><ins class="diff-new">
OPTIONAL
</ins></em>.</span><span class= "rfc2119-assertion" id="tdd-search-sparql-resp-select-ask"><ins class="diff-new">
A
successful
request
with
a
query
</ins><code><ins class="diff-new">
SELECT
</ins></code><ins class="diff-new">
or
</ins><code><ins class="diff-new">
ASK
</ins></code><em class="rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
return
a
response
200
(OK)
status,
and
contain
</ins><code><ins class="diff-new">
application/json
</ins></code><ins class="diff-new">
by
default
in
the
Content-Type
header.
</ins></span><span class= "rfc2119-assertion" id= "tdd-search-sparql-resp-describe-construct"><ins class="diff-new">
A
successful
request
with
a
query
</ins><code><ins class="diff-new">
CONSTRUCT
</ins></code><ins class="diff-new">
and
</ins><code><ins class="diff-new">
DESCRIBE
</ins></code><em class="rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
return
a
response
200
(OK)
status,
and
contain
</ins><code><ins class="diff-new">
application/ld+json
</ins></code><ins class="diff-new">
by
default
in
the
Content-Type
header.
</ins></span><span class="rfc2119-assertion" id= "tdd-search-sparql-error"><ins class="diff-new">
A
request
with
any
query
different
from
</ins><code><ins class="diff-new">
SELECT
</ins></code>,<code><ins class="diff-new">
ASK
</ins></code>,<code><ins class="diff-new">
CONSTRUCT
</ins></code><ins class="diff-new">
or
</ins><code><ins class="diff-new">
DESCRIBE
</ins></code><em class="rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
return
a
response
400
(Bad
Request).
</ins></span><ins class="diff-new">
The
semantic
search
with
SPARQL
is
specified
as
</ins><code><ins class="diff-new">
searchSPARQL
</ins></code><ins class="diff-new">
action
in
</ins><a href= "#directory-api-spec" data-matched-text="[[[#directory-api-spec]]]" class="sec-ref"><bdi class="secno"><ins class="diff-new">
7.3.2.4
</ins></bdi><ins class="diff-new">
API
Specification
(Thing
Model)
</ins></a>.<span class="rfc2119-assertion" id= "tdd-search-sparql-federation"><ins class="diff-new">
A
WoT
Thing
Description
Directory
</ins><em class="rfc2119"><ins class="diff-new">
MAY
</ins></em><ins class="diff-new">
implement
federation
in
its
SPARQL
query
API.
</ins></span><span class="rfc2119-assertion" id= "tdd-search-sparql-federation-version"><ins class="diff-new">
If
implemented,
the
SPARQL
API
</ins><em class="rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
implement
the
SPARQL
1.1
Federated
Query
standard
[
</ins><cite><a class="bibref" data-link-type= "biblio" href="#bib-sparql11-overview" title= "SPARQL 1.1 Overview"><ins class="diff-new">
sparql11-overview
</ins></a></cite><ins class="diff-new">
].
</ins></span></section></section><section id="directory-api-spec"><div class="header-wrapper"><h5 id="x7-3-2-4-api-specification-thing-model"><bdi class= "secno"><ins class="diff-new">
7.3.2.4
</ins></bdi><ins class="diff-new">
API
Specification
(Thing
Model)
</ins></h5><a class="self-link" href="#directory-api-spec" aria-label= "Permalink for Section 7.3.2.4"></a></div><p><ins class="diff-new">
A
template
for
the
API
of
Thing
Description
Directories
is
given
here
as
a
</ins><a href="#dfn-thing-model" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-thing-model-1"><ins class="diff-new">
Thing
Model
</ins></a>.<ins class="diff-new">
The
Thing
Model
is
normative
(except
where
noted)
but
should
not
be
considered
as
the
sole
reference
to
implement
or
interact
with
a
Thing
Description
Directory.
Please
refer
also
to
the
specifications
given
in
</ins><a href="#exploration-directory-api" data-matched-text="[[[#exploration-directory-api]]]" class= "sec-ref"><bdi class="secno"><ins class="diff-new">
7.3.2
</ins></bdi><ins class="diff-new">
Directory
Service
API
</ins></a>.</p><p><ins class="diff-new">
The
</ins><code><ins class="diff-new">
searchJSONPath
</ins></code><ins class="diff-new">
and
</ins><code><ins class="diff-new">
searchXPath
</ins></code><ins class="diff-new">
affordances
given
in
this
Thing
Model
are
not
normative
and
are
provided
for
information
only.
</ins></p><p><ins class="diff-new">
Note
that
a
</ins><code><ins class="diff-new">
contentType
</ins></code><ins class="diff-new">
is
required
by
the
WoT
TD
1.1
specification
[
</ins><cite><a class="bibref" data-link-type="biblio" href="#bib-wot-thing-description11" title= "Web of Things (WoT) Thing Description 1.1"><ins class="diff-new">
wot-thing-description11
</ins></a></cite><ins class="diff-new">
]
for
instances
of
the
</ins><code><ins class="diff-new">
ExpectedResponse
</ins></code><ins class="diff-new">
class
(i.e.,
the
JSON
object
corresponding
to
the
key
</ins><code><ins class="diff-new">
response
</ins></code><ins class="diff-new">
in
a
form),
even
when
the
body
of
the
HTTP
response
is
supposed
to
be
empty.
In
this
case,
</ins><code><ins class="diff-new">
application/x-empty
</ins></code><ins class="diff-new">
can
be
used
to
ensure
that
the
TD
generated
from
the
TM
below
is
valid.
</ins></p><pre class="advisement" aria-busy="false"><code class="hljs json">{    <span class="hljs-attr">"@context"</span>: [        <span class=<ins class="diff-new">
"hljs-string">"https://www.w3.org/2022/wot/td/v1.1"</span>,
</ins>        <span class=<ins class="diff-new">
"hljs-string">"https://www.w3.org/2022/wot/discovery"</span>
    ],
</ins>    <span class="hljs-attr">"@type"</span>: [        <span class="hljs-string">"tm:ThingModel"</span>,        <span class="hljs-string">"ThingDirectory"</span><ins class="diff-new">
    ],
</ins>    <span class="hljs-attr">"title"</span>: <span class=<ins class="diff-new">
"hljs-string">"Thing Description Directory (TDD) Thing Model"</span>,
</ins>    <span class="hljs-attr">"version"</span>: {        <span class="hljs-attr">"model"</span>: <span class=<ins class="diff-new">
"hljs-string">"1.0.0"</span>
    },
</ins>    <span class="hljs-attr">"base"</span>: <span class=<ins class="diff-new">
"hljs-string">"{{DIRECTORY_BASE_URL}}"</span>,
</ins>    <span class="hljs-attr">"tm:optional"</span>: [        <span class="hljs-string">"/actions/createThing"</span>,        <span class=<ins class="diff-new">
"hljs-string">"/actions/createAnonymousThing"</span>,
</ins>        <span class="hljs-string">"/actions/retrieveThing"</span>,        <span class="hljs-string">"/actions/updateThing"</span>,        <span class=<ins class="diff-new">
"hljs-string">"/actions/partiallyUpdateThing"</span>,
</ins>        <span class="hljs-string">"/actions/deleteThing"</span>,        <span class="hljs-string">"/actions/searchJSONPath"</span>,        <span class="hljs-string">"/actions/searchXPath"</span>,        <span class="hljs-string">"/actions/searchSPARQL"</span>,        <span class="hljs-string">"/events/thingCreated"</span>,        <span class="hljs-string">"/events/thingUpdated"</span>,        <span class="hljs-string">"/events/thingDeleted"</span><ins class="diff-new">
    ],
</ins>    <span class="hljs-attr">"properties"</span>: {        <span class="hljs-attr">"things"</span>: {            <span class=<ins class="diff-new">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"Retrieve all Thing Descriptions"</span>,
</ins>            <span class="hljs-attr">"uriVariables"</span>: {                <span class="hljs-attr">"offset"</span>: {                    <span class=<ins class="diff-new">
"hljs-attr">"title"</span>: <span class=
"hljs-string">"Number of TDs to skip before the page"</span>,
</ins>                    <span class=<ins class="diff-new">
"hljs-attr">"type"</span>: <span class=
"hljs-string">"number"</span>,
</ins>                    <span class=<ins class="diff-new">
"hljs-attr">"default"</span>: <span class="hljs-number">0</span>
                },
</ins>                <span class="hljs-attr">"limit"</span>: {                    <span class=<ins class="diff-new">
"hljs-attr">"title"</span>: <span class=
"hljs-string">"Number of TDs in a page"</span>,
</ins>                    <span class=<ins class="diff-new">
"hljs-attr">"type"</span>: <span class=
"hljs-string">"number"</span>
                },
</ins>                <span class="hljs-attr">"format"</span>: {                    <span class=<ins class="diff-new">
"hljs-attr">"title"</span>: <span class=
"hljs-string">"Payload format"</span>,
</ins>                    <span class=<ins class="diff-new">
"hljs-attr">"type"</span>: <span class=
"hljs-string">"string"</span>,
</ins>                    <span class="hljs-attr">"enum"</span>: [                        <span class="hljs-string">"array"</span>,                        <span class=<ins class="diff-new">
"hljs-string">"collection"</span>
                    ],
</ins>                    <span class=<ins class="diff-new">
"hljs-attr">"default"</span>: <span class=
"hljs-string">"array"</span>
                }
            },
</ins>            <span class="hljs-attr">"forms"</span>: [<ins class="diff-new">
                {
</ins>                    <span class=<ins class="diff-new">
"hljs-attr">"href"</span>: <span class=
"hljs-string">"/things{?offset,limit,format}"</span>,
</ins>                    <span class=<ins class="diff-new">
"hljs-attr">"htv:methodName"</span>: <span class=
"hljs-string">"GET"</span>,
</ins>                    <span class="hljs-attr">"response"</span>: {                        <span class=<ins class="diff-new">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"Success response"</span>,
</ins>                        <span class=<ins class="diff-new">
"hljs-attr">"htv:statusCodeValue"</span>: <span class=
"hljs-number">200</span>,
</ins>                        <span class=<ins class="diff-new">
"hljs-attr">"contentType"</span>: <span class=
"hljs-string">"application/ld+json"</span>,
</ins>                        <span class=<ins class="diff-new">
"hljs-attr">"htv:headers"</span>: [
                            {
</ins>                                <span class=<ins class="diff-new">
"hljs-attr">"htv:fieldName"</span>: <span class=
"hljs-string">"Link"</span>
                            }
                        ]
                    },
</ins>                    <span class=<ins class="diff-new">
"hljs-attr">"additionalResponses"</span>: [
                        {
</ins>                            <span class=<ins class="diff-new">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"Invalid query arguments"</span>,
</ins>                            <span class=<ins class="diff-new">
"hljs-attr">"contentType"</span>: <span class=
"hljs-string">"application/problem+json"</span>,
</ins>                            <span class=<ins class="diff-new">
"hljs-attr">"htv:statusCodeValue"</span>: <span class=
"hljs-number">400</span>
                        }
                    ]
                }
            ]
        }
    },
</ins>    <span class="hljs-attr">"actions"</span>: {        <span class="hljs-attr">"createThing"</span>: {            <span class=<ins class="diff-new">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"Create a Thing Description"</span>,
</ins>            <span class="hljs-attr">"uriVariables"</span>: {                <span class="hljs-attr">"id"</span>: {                    <span class=<ins class="diff-new">
"hljs-attr">"@type"</span>: <span class=
"hljs-string">"ThingID"</span>,
</ins>                    <span class=<ins class="diff-new">
"hljs-attr">"title"</span>: <span class=
"hljs-string">"Thing Description ID"</span>,
</ins>                    <span class=<ins class="diff-new">
"hljs-attr">"type"</span>: <span class=
"hljs-string">"string"</span>,
</ins>                    <span class=<ins class="diff-new">
"hljs-attr">"format"</span>: <span class=
"hljs-string">"iri-reference"</span>
                }
            },
</ins>            <span class="hljs-attr">"input"</span>: {                <span class=<ins class="diff-new">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"The schema is implied by the content type"</span>,
</ins>                <span class="hljs-attr">"type"</span>: <span class=<ins class="diff-new">
"hljs-string">"object"</span>
            },
</ins>            <span class="hljs-attr">"forms"</span>: [<ins class="diff-new">
                {
</ins>                    <span class=<ins class="diff-new">
"hljs-attr">"href"</span>: <span class=
"hljs-string">"/things/{id}"</span>,
</ins>                    <span class=<ins class="diff-new">
"hljs-attr">"htv:methodName"</span>: <span class=
"hljs-string">"PUT"</span>,
</ins>                    <span class=<ins class="diff-new">
"hljs-attr">"contentType"</span>: <span class=
"hljs-string">"application/td+json"</span>,
</ins>                    <span class="hljs-attr">"response"</span>: {                        <span class=<ins class="diff-new">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"Success response"</span>,
</ins>                        <span class=<ins class="diff-new">
"hljs-attr">"htv:statusCodeValue"</span>: <span class=
"hljs-number">201</span>
                    },
</ins>                    <span class=<ins class="diff-new">
"hljs-attr">"additionalResponses"</span>: [
                        {
</ins>                            <span class=<ins class="diff-new">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"Invalid serialization or TD"</span>,
</ins>                            <span class=<ins class="diff-new">
"hljs-attr">"contentType"</span>: <span class=
"hljs-string">"application/problem+json"</span>,
</ins>                            <span class=<ins class="diff-new">
"hljs-attr">"htv:statusCodeValue"</span>: <span class=
"hljs-number">400</span>
                        }
                    ]
                }
            ]
        },
</ins>        <span class="hljs-attr">"createAnonymousThing"</span>: {            <span class=<ins class="diff-new">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"Create an anonymous Thing Description"</span>,
</ins>            <span class="hljs-attr">"input"</span>: {                <span class=<ins class="diff-new">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"The schema is implied by the content type"</span>,
</ins>                <span class="hljs-attr">"type"</span>: <span class=<ins class="diff-new">
"hljs-string">"object"</span>
            },
</ins>            <span class="hljs-attr">"forms"</span>: [<ins class="diff-new">
                {
</ins>                    <span class=<ins class="diff-new">
"hljs-attr">"href"</span>: <span class=
"hljs-string">"/things"</span>,
</ins>                    <span class=<ins class="diff-new">
"hljs-attr">"htv:methodName"</span>: <span class=
"hljs-string">"POST"</span>,
</ins>                    <span class=<ins class="diff-new">
"hljs-attr">"contentType"</span>: <span class=
"hljs-string">"application/td+json"</span>,
</ins>                    <span class="hljs-attr">"response"</span>: {                        <span class=<ins class="diff-new">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"Success response including the system-generated URI"</span>,
</ins>                        <span class=<ins class="diff-new">
"hljs-attr">"htv:headers"</span>: [
                            {
</ins>                                <span class=<ins class="diff-new">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"System-generated URI"</span>,
</ins>                                <span class=<ins class="diff-new">
"hljs-attr">"htv:fieldName"</span>: <span class=
"hljs-string">"Location"</span>
                            }
                        ],
</ins>                        <span class=<ins class="diff-new">
"hljs-attr">"htv:statusCodeValue"</span>: <span class=
"hljs-number">201</span>
                    },
</ins>                    <span class=<ins class="diff-new">
"hljs-attr">"additionalResponses"</span>: [
                        {
</ins>                            <span class=<ins class="diff-new">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"Invalid serialization or TD"</span>,
</ins>                            <span class=<ins class="diff-new">
"hljs-attr">"contentType"</span>: <span class=
"hljs-string">"application/problem+json"</span>,
</ins>                            <span class=<ins class="diff-new">
"hljs-attr">"htv:statusCodeValue"</span>: <span class=
"hljs-number">400</span>
                        }
                    ]
                }
            ]
        },
</ins>        <span class="hljs-attr">"retrieveThing"</span>: {            <span class=<ins class="diff-new">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"Retrieve a Thing Description"</span>,
</ins>            <span class="hljs-attr">"uriVariables"</span>: {                <span class="hljs-attr">"id"</span>: {                    <span class=<ins class="diff-new">
"hljs-attr">"@type"</span>: <span class=
"hljs-string">"ThingID"</span>,
</ins>                    <span class=<ins class="diff-new">
"hljs-attr">"title"</span>: <span class=
"hljs-string">"Thing Description ID"</span>,
</ins>                    <span class=<ins class="diff-new">
"hljs-attr">"type"</span>: <span class=
"hljs-string">"string"</span>,
</ins>                    <span class=<ins class="diff-new">
"hljs-attr">"format"</span>: <span class=
"hljs-string">"iri-reference"</span>
                }
            },
</ins>            <span class="hljs-attr">"output"</span>: {                <span class=<ins class="diff-new">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"The schema is implied by the content type"</span>,
</ins>                <span class="hljs-attr">"type"</span>: <span class=<ins class="diff-new">
"hljs-string">"object"</span>
            },
</ins>            <span class="hljs-attr">"safe"</span>: <span class=<ins class="diff-new">
"hljs-literal">true</span>,
</ins>            <span class=<ins class="diff-new">
"hljs-attr">"idempotent"</span>: <span class=
"hljs-literal">true</span>,
</ins>            <span class="hljs-attr">"forms"</span>: [<ins class="diff-new">
                {
</ins>                    <span class=<ins class="diff-new">
"hljs-attr">"href"</span>: <span class=
"hljs-string">"/things/{id}"</span>,
</ins>                    <span class=<ins class="diff-new">
"hljs-attr">"htv:methodName"</span>: <span class=
"hljs-string">"GET"</span>,
</ins>                    <span class="hljs-attr">"response"</span>: {                        <span class=<ins class="diff-new">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"Success response"</span>,
</ins>                        <span class=<ins class="diff-new">
"hljs-attr">"htv:statusCodeValue"</span>: <span class=
"hljs-number">200</span>,
</ins>                        <span class=<ins class="diff-new">
"hljs-attr">"contentType"</span>: <span class=
"hljs-string">"application/td+json"</span>
                    },
</ins>                    <span class=<ins class="diff-new">
"hljs-attr">"additionalResponses"</span>: [
                        {
</ins>                            <span class=<ins class="diff-new">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"TD with the given id not found"</span>,
</ins>                            <span class=<ins class="diff-new">
"hljs-attr">"contentType"</span>: <span class=
"hljs-string">"application/problem+json"</span>,
</ins>                            <span class=<ins class="diff-new">
"hljs-attr">"htv:statusCodeValue"</span>: <span class=
"hljs-number">404</span>
                        }
                    ]
                }
            ]
        },
</ins>        <span class="hljs-attr">"updateThing"</span>: {            <span class=<ins class="diff-new">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"Update a Thing Description"</span>,
</ins>            <span class="hljs-attr">"uriVariables"</span>: {                <span class="hljs-attr">"id"</span>: {                    <span class=<ins class="diff-new">
"hljs-attr">"@type"</span>: <span class=
"hljs-string">"ThingID"</span>,
</ins>                    <span class=<ins class="diff-new">
"hljs-attr">"title"</span>: <span class=
"hljs-string">"Thing Description ID"</span>,
</ins>                    <span class=<ins class="diff-new">
"hljs-attr">"type"</span>: <span class=
"hljs-string">"string"</span>,
</ins>                    <span class=<ins class="diff-new">
"hljs-attr">"format"</span>: <span class=
"hljs-string">"iri-reference"</span>
                }
            },
</ins>            <span class="hljs-attr">"input"</span>: {                <span class=<ins class="diff-new">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"The schema is implied by the content type"</span>,
</ins>                <span class="hljs-attr">"type"</span>: <span class=<ins class="diff-new">
"hljs-string">"object"</span>
            },
</ins>            <span class="hljs-attr">"forms"</span>: [<ins class="diff-new">
                {
</ins>                    <span class=<ins class="diff-new">
"hljs-attr">"href"</span>: <span class=
"hljs-string">"/things/{id}"</span>,
</ins>                    <span class=<ins class="diff-new">
"hljs-attr">"htv:methodName"</span>: <span class=
"hljs-string">"PUT"</span>,
</ins>                    <span class=<ins class="diff-new">
"hljs-attr">"contentType"</span>: <span class=
"hljs-string">"application/td+json"</span>,
</ins>                    <span class="hljs-attr">"response"</span>: {                        <span class=<ins class="diff-new">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"Success response"</span>,
</ins>                        <span class=<ins class="diff-new">
"hljs-attr">"htv:statusCodeValue"</span>: <span class=
"hljs-number">204</span>
                    },
</ins>                    <span class=<ins class="diff-new">
"hljs-attr">"additionalResponses"</span>: [
                        {
</ins>                            <span class=<ins class="diff-new">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"Invalid serialization or TD"</span>,
</ins>                            <span class=<ins class="diff-new">
"hljs-attr">"contentType"</span>: <span class=
"hljs-string">"application/problem+json"</span>,
</ins>                            <span class=<ins class="diff-new">
"hljs-attr">"htv:statusCodeValue"</span>: <span class=
"hljs-number">400</span>
                        }
                    ]
                }
            ]
        },
</ins>        <span class="hljs-attr">"partiallyUpdateThing"</span>: {            <span class=<ins class="diff-new">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"Partially update a Thing Description"</span>,
</ins>            <span class="hljs-attr">"uriVariables"</span>: {                <span class="hljs-attr">"id"</span>: {                    <span class=<ins class="diff-new">
"hljs-attr">"@type"</span>: <span class=
"hljs-string">"ThingID"</span>,
</ins>                    <span class=<ins class="diff-new">
"hljs-attr">"title"</span>: <span class=
"hljs-string">"Thing Description ID"</span>,
</ins>                    <span class=<ins class="diff-new">
"hljs-attr">"type"</span>: <span class=
"hljs-string">"string"</span>,
</ins>                    <span class=<ins class="diff-new">
"hljs-attr">"format"</span>: <span class=
"hljs-string">"iri-reference"</span>
                }
            },
</ins>            <span class="hljs-attr">"input"</span>: {                <span class=<ins class="diff-new">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"The schema is implied by the content type"</span>,
</ins>                <span class="hljs-attr">"type"</span>: <span class=<ins class="diff-new">
"hljs-string">"object"</span>
            },
</ins>            <span class="hljs-attr">"forms"</span>: [<ins class="diff-new">
                {
</ins>                    <span class=<ins class="diff-new">
"hljs-attr">"href"</span>: <span class=
"hljs-string">"/things/{id}"</span>,
</ins>                    <span class=<ins class="diff-new">
"hljs-attr">"htv:methodName"</span>: <span class=
"hljs-string">"PATCH"</span>,
</ins>                    <span class=<ins class="diff-new">
"hljs-attr">"contentType"</span>: <span class=
"hljs-string">"application/merge-patch+json"</span>,
</ins>                    <span class="hljs-attr">"response"</span>: {                        <span class=<ins class="diff-new">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"Success response"</span>,
</ins>                        <span class=<ins class="diff-new">
"hljs-attr">"htv:statusCodeValue"</span>: <span class=
"hljs-number">204</span>
                    },
</ins>                    <span class=<ins class="diff-new">
"hljs-attr">"additionalResponses"</span>: [
                        {
</ins>                            <span class=<ins class="diff-new">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"Invalid serialization or TD"</span>,
</ins>                            <span class=<ins class="diff-new">
"hljs-attr">"contentType"</span>: <span class=
"hljs-string">"application/problem+json"</span>,
</ins>                            <span class=<ins class="diff-new">
"hljs-attr">"htv:statusCodeValue"</span>: <span class=
"hljs-number">400</span>
                        },
                        {
</ins>                            <span class=<ins class="diff-new">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"TD with the given id not found"</span>,
</ins>                            <span class=<ins class="diff-new">
"hljs-attr">"contentType"</span>: <span class=
"hljs-string">"application/problem+json"</span>,
</ins>                            <span class=<ins class="diff-new">
"hljs-attr">"htv:statusCodeValue"</span>: <span class=
"hljs-number">404</span>
                        }
                    ]
                }
            ]
        },
</ins>        <span class="hljs-attr">"deleteThing"</span>: {            <span class=<ins class="diff-new">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"Delete a Thing Description"</span>,
</ins>            <span class="hljs-attr">"uriVariables"</span>: {                <span class="hljs-attr">"id"</span>: {                    <span class=<ins class="diff-new">
"hljs-attr">"@type"</span>: <span class=
"hljs-string">"ThingID"</span>,
</ins>                    <span class=<ins class="diff-new">
"hljs-attr">"title"</span>: <span class=
"hljs-string">"Thing Description ID"</span>,
</ins>                    <span class=<ins class="diff-new">
"hljs-attr">"type"</span>: <span class=
"hljs-string">"string"</span>,
</ins>                    <span class=<ins class="diff-new">
"hljs-attr">"format"</span>: <span class=
"hljs-string">"iri-reference"</span>
                }
            },
</ins>            <span class="hljs-attr">"forms"</span>: [<ins class="diff-new">
                {
</ins>                    <span class=<ins class="diff-new">
"hljs-attr">"href"</span>: <span class=
"hljs-string">"/things/{id}"</span>,
</ins>                    <span class=<ins class="diff-new">
"hljs-attr">"htv:methodName"</span>: <span class=
"hljs-string">"DELETE"</span>,
</ins>                    <span class="hljs-attr">"response"</span>: {                        <span class=<ins class="diff-new">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"Success response"</span>,
</ins>                        <span class=<ins class="diff-new">
"hljs-attr">"htv:statusCodeValue"</span>: <span class=
"hljs-number">204</span>
                    },
</ins>                    <span class=<ins class="diff-new">
"hljs-attr">"additionalResponses"</span>: [
                        {
</ins>                            <span class=<ins class="diff-new">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"TD with the given id not found"</span>,
</ins>                            <span class=<ins class="diff-new">
"hljs-attr">"contentType"</span>: <span class=
"hljs-string">"application/problem+json"</span>,
</ins>                            <span class=<ins class="diff-new">
"hljs-attr">"htv:statusCodeValue"</span>: <span class=
"hljs-number">404</span>
                        }
                    ]
                }
            ]
        },
</ins>        <span class="hljs-attr">"searchJSONPath"</span>: {            <span class=<ins class="diff-new">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"JSONPath syntactic search.  This affordance is not normative and is provided for information only."</span>,
</ins>            <span class="hljs-attr">"uriVariables"</span>: {                <span class="hljs-attr">"query"</span>: {                    <span class=<ins class="diff-new">
"hljs-attr">"title"</span>: <span class=
"hljs-string">"A valid JSONPath expression"</span>,
</ins>                    <span class=<ins class="diff-new">
"hljs-attr">"type"</span>: <span class=
"hljs-string">"string"</span>
                }
            },
</ins>            <span class="hljs-attr">"output"</span>: {                <span class=<ins class="diff-new">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"The schema depends on the given query"</span>,
</ins>                <span class="hljs-attr">"type"</span>: <span class=<ins class="diff-new">
"hljs-string">"object"</span>
            },
</ins>            <span class="hljs-attr">"safe"</span>: <span class=<ins class="diff-new">
"hljs-literal">true</span>,
</ins>            <span class=<ins class="diff-new">
"hljs-attr">"idempotent"</span>: <span class=
"hljs-literal">true</span>,
</ins>            <span class="hljs-attr">"forms"</span>: [<ins class="diff-new">
                {
</ins>                    <span class=<ins class="diff-new">
"hljs-attr">"href"</span>: <span class=
"hljs-string">"/search/jsonpath?query={query}"</span>,
</ins>                    <span class=<ins class="diff-new">
"hljs-attr">"htv:methodName"</span>: <span class=
"hljs-string">"GET"</span>,
</ins>                    <span class="hljs-attr">"response"</span>: {                        <span class=<ins class="diff-new">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"Success response"</span>,
</ins>                        <span class=<ins class="diff-new">
"hljs-attr">"contentType"</span>: <span class=
"hljs-string">"application/json"</span>,
</ins>                        <span class=<ins class="diff-new">
"hljs-attr">"htv:statusCodeValue"</span>: <span class=
"hljs-number">200</span>
                    },
</ins>                    <span class=<ins class="diff-new">
"hljs-attr">"additionalResponses"</span>: [
                        {
</ins>                            <span class=<ins class="diff-new">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"JSONPath expression not provided or contains syntax errors"</span>,
</ins>                            <span class=<ins class="diff-new">
"hljs-attr">"contentType"</span>: <span class=
"hljs-string">"application/problem+json"</span>,
</ins>                            <span class=<ins class="diff-new">
"hljs-attr">"htv:statusCodeValue"</span>: <span class=
"hljs-number">400</span>
                        }
                    ]
                }
            ]
        },
</ins>        <span class="hljs-attr">"searchXPath"</span>: {            <span class=<ins class="diff-new">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"XPath syntactic search.  This affordance is not normative and is provided for information only."</span>,
</ins>            <span class="hljs-attr">"uriVariables"</span>: {                <span class="hljs-attr">"query"</span>: {                    <span class=<ins class="diff-new">
"hljs-attr">"title"</span>: <span class=
"hljs-string">"A valid XPath expression"</span>,
</ins>                    <span class=<ins class="diff-new">
"hljs-attr">"type"</span>: <span class=
"hljs-string">"string"</span>
                }
            },
</ins>            <span class="hljs-attr">"output"</span>: {                <span class=<ins class="diff-new">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"The schema depends on the given query"</span>,
</ins>                <span class="hljs-attr">"type"</span>: <span class=<ins class="diff-new">
"hljs-string">"object"</span>
            },
</ins>            <span class="hljs-attr">"safe"</span>: <span class=<ins class="diff-new">
"hljs-literal">true</span>,
</ins>            <span class=<ins class="diff-new">
"hljs-attr">"idempotent"</span>: <span class=
"hljs-literal">true</span>,
</ins>            <span class="hljs-attr">"forms"</span>: [<ins class="diff-new">
                {
</ins>                    <span class=<ins class="diff-new">
"hljs-attr">"href"</span>: <span class=
"hljs-string">"/search/xpath?query={query}"</span>,
</ins>                    <span class=<ins class="diff-new">
"hljs-attr">"htv:methodName"</span>: <span class=
"hljs-string">"GET"</span>,
</ins>                    <span class="hljs-attr">"response"</span>: {                        <span class=<ins class="diff-new">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"Success response"</span>,
</ins>                        <span class=<ins class="diff-new">
"hljs-attr">"contentType"</span>: <span class=
"hljs-string">"application/json"</span>,
</ins>                        <span class=<ins class="diff-new">
"hljs-attr">"htv:statusCodeValue"</span>: <span class=
"hljs-number">200</span>
                    },
</ins>                    <span class=<ins class="diff-new">
"hljs-attr">"additionalResponses"</span>: [
                        {
</ins>                            <span class=<ins class="diff-new">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"XPath expression not provided or contains syntax errors"</span>,
</ins>                            <span class=<ins class="diff-new">
"hljs-attr">"contentType"</span>: <span class=
"hljs-string">"application/problem+json"</span>,
</ins>                            <span class=<ins class="diff-new">
"hljs-attr">"htv:statusCodeValue"</span>: <span class=
"hljs-number">400</span>
                        }
                    ]
                }
            ]
        },
</ins>        <span class="hljs-attr">"searchSPARQL"</span>: {            <span class=<ins class="diff-new">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"SPARQL semantic search"</span>,
</ins>            <span class="hljs-attr">"uriVariables"</span>: {                <span class="hljs-attr">"query"</span>: {                    <span class=<ins class="diff-new">
"hljs-attr">"title"</span>: <span class=
"hljs-string">"A valid SPARQL 1.1. query"</span>,
</ins>                    <span class=<ins class="diff-new">
"hljs-attr">"type"</span>: <span class=
"hljs-string">"string"</span>
                }
            },
</ins>            <span class="hljs-attr">"output"</span>: {                <span class=<ins class="diff-new">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"The schema depends on the given query"</span>,
</ins>                <span class="hljs-attr">"type"</span>: <span class=<ins class="diff-new">
"hljs-string">"object"</span>
            },
</ins>            <span class="hljs-attr">"safe"</span>: <span class=<ins class="diff-new">
"hljs-literal">true</span>,
</ins>            <span class=<ins class="diff-new">
"hljs-attr">"idempotent"</span>: <span class=
"hljs-literal">true</span>,
</ins>            <span class="hljs-attr">"forms"</span>: [<ins class="diff-new">
                {
</ins>                    <span class=<ins class="diff-new">
"hljs-attr">"href"</span>: <span class=
"hljs-string">"/search/sparql?query={query}"</span>,
</ins>                    <span class=<ins class="diff-new">
"hljs-attr">"htv:methodName"</span>: <span class=
"hljs-string">"GET"</span>,
</ins>                    <span class="hljs-attr">"response"</span>: {                        <span class=<ins class="diff-new">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"Success response"</span>,
</ins>                        <span class=<ins class="diff-new">
"hljs-attr">"contentType"</span>: <span class=
"hljs-string">"application/json"</span>,
</ins>                        <span class=<ins class="diff-new">
"hljs-attr">"htv:statusCodeValue"</span>: <span class=
"hljs-number">200</span>
                    },
</ins>                    <span class=<ins class="diff-new">
"hljs-attr">"additionalResponses"</span>: [
                        {
</ins>                            <span class=<ins class="diff-new">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"SPARQL query not provided or contains syntax errors"</span>,
</ins>                            <span class=<ins class="diff-new">
"hljs-attr">"contentType"</span>: <span class=
"hljs-string">"application/problem+json"</span>,
</ins>                            <span class=<ins class="diff-new">
"hljs-attr">"htv:statusCodeValue"</span>: <span class=
"hljs-number">400</span>
                        }
                    ]
                },
                {
</ins>                    <span class=<ins class="diff-new">
"hljs-attr">"href"</span>: <span class=
"hljs-string">"/search/sparql"</span>,
</ins>                    <span class=<ins class="diff-new">
"hljs-attr">"htv:methodName"</span>: <span class=
"hljs-string">"POST"</span>,
</ins>                    <span class="hljs-attr">"response"</span>: {                        <span class=<ins class="diff-new">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"Success response"</span>,
</ins>                        <span class=<ins class="diff-new">
"hljs-attr">"contentType"</span>: <span class=
"hljs-string">"application/json"</span>,
</ins>                        <span class=<ins class="diff-new">
"hljs-attr">"htv:statusCodeValue"</span>: <span class=
"hljs-number">200</span>
                    },
</ins>                    <span class=<ins class="diff-new">
"hljs-attr">"additionalResponses"</span>: [
                        {
</ins>                            <span class=<ins class="diff-new">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"SPARQL query not provided or contains syntax errors"</span>,
</ins>                            <span class=<ins class="diff-new">
"hljs-attr">"contentType"</span>: <span class=
"hljs-string">"application/problem+json"</span>,
</ins>                            <span class=<ins class="diff-new">
"hljs-attr">"htv:statusCodeValue"</span>: <span class=
"hljs-number">400</span>
                        }
                    ]
                }
            ]
        }
    },
</ins>    <span class="hljs-attr">"events"</span>: {        <span class="hljs-attr">"thingCreated"</span>: {            <span class=<ins class="diff-new">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"Registration of Thing Descriptions inside the directory"</span>,
</ins>            <span class="hljs-attr">"uriVariables"</span>: {                <span class="hljs-attr">"diff"</span>: {                    <span class=<ins class="diff-new">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"Receive the full created TD as event data"</span>,
</ins>                    <span class=<ins class="diff-new">
"hljs-attr">"type"</span>: <span class=
"hljs-string">"boolean"</span>
                }
            },
</ins>            <span class="hljs-attr">"data"</span>: {                <span class=<ins class="diff-new">
"hljs-attr">"title"</span>: <span class="hljs-string">"Partial/Full TD"</span>,
</ins>                <span class="hljs-attr">"type"</span>: <span class=<ins class="diff-new">
"hljs-string">"object"</span>
            },
</ins>            <span class="hljs-attr">"forms"</span>: [<ins class="diff-new">
                {
</ins>                    <span class=<ins class="diff-new">
"hljs-attr">"op"</span>: <span class=
"hljs-string">"subscribeevent"</span>,
</ins>                    <span class=<ins class="diff-new">
"hljs-attr">"href"</span>: <span class=
"hljs-string">"/events/thing_created{?diff}"</span>,
</ins>                    <span class=<ins class="diff-new">
"hljs-attr">"subprotocol"</span>: <span class=
"hljs-string">"sse"</span>,
</ins>                    <span class="hljs-attr">"htv:headers"</span>: [<ins class="diff-new">
                        {
</ins>                            <span class=<ins class="diff-new">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"ID of the last event for reconnection"</span>,
</ins>                            <span class=<ins class="diff-new">
"hljs-attr">"htv:fieldName"</span>: <span class=
"hljs-string">"Last-Event-ID"</span>
                        }
                    ],
</ins>                    <span class="hljs-attr">"response"</span>: {                        <span class=<ins class="diff-new">
"hljs-attr">"contentType"</span>: <span class=
"hljs-string">"text/event-stream"</span>
                    }
                }
            ]
        },
</ins>        <span class="hljs-attr">"thingUpdated"</span>: {            <span class=<ins class="diff-new">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"Updates to Thing Descriptions within the directory"</span>,
</ins>            <span class="hljs-attr">"uriVariables"</span>: {                <span class="hljs-attr">"diff"</span>: {                    <span class=<ins class="diff-new">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"Include TD changes inside event data"</span>,
</ins>                    <span class=<ins class="diff-new">
"hljs-attr">"type"</span>: <span class=
"hljs-string">"boolean"</span>
                }
            },
</ins>            <span class="hljs-attr">"data"</span>: {                <span class=<ins class="diff-new">
"hljs-attr">"title"</span>: <span class="hljs-string">"Partial TD"</span>,
</ins>                <span class="hljs-attr">"type"</span>: <span class=<ins class="diff-new">
"hljs-string">"object"</span>,
</ins>                <span class=<ins class="diff-new">
"hljs-attr">"contentMediaType"</span>: <span class=
"hljs-string">"application/merge-patch+json"</span>
            },
</ins>            <span class="hljs-attr">"forms"</span>: [<ins class="diff-new">
                {
</ins>                    <span class=<ins class="diff-new">
"hljs-attr">"op"</span>: <span class=
"hljs-string">"subscribeevent"</span>,
</ins>                    <span class=<ins class="diff-new">
"hljs-attr">"href"</span>: <span class=
"hljs-string">"/events/thing_updated{?diff}"</span>,
</ins>                    <span class=<ins class="diff-new">
"hljs-attr">"subprotocol"</span>: <span class=
"hljs-string">"sse"</span>,
</ins>                    <span class="hljs-attr">"htv:headers"</span>: [<ins class="diff-new">
                        {
</ins>                            <span class=<ins class="diff-new">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"ID of the last event for reconnection"</span>,
</ins>                            <span class=<ins class="diff-new">
"hljs-attr">"htv:fieldName"</span>: <span class=
"hljs-string">"Last-Event-ID"</span>
                        }
                    ],
</ins>                    <span class="hljs-attr">"response"</span>: {                        <span class=<ins class="diff-new">
"hljs-attr">"contentType"</span>: <span class=
"hljs-string">"text/event-stream"</span>
                    }
                }
            ]
        },
</ins>        <span class="hljs-attr">"thingDeleted"</span>: {            <span class=<ins class="diff-new">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"Deletion of Thing Descriptions from the directory"</span>,
</ins>            <span class="hljs-attr">"data"</span>: {                <span class=<ins class="diff-new">
"hljs-attr">"title"</span>: <span class="hljs-string">"Partial TD"</span>,
</ins>                <span class="hljs-attr">"type"</span>: <span class=<ins class="diff-new">
"hljs-string">"object"</span>
            },
</ins>            <span class="hljs-attr">"forms"</span>: [<ins class="diff-new">
                {
</ins>                    <span class=<ins class="diff-new">
"hljs-attr">"op"</span>: <span class=
"hljs-string">"subscribeevent"</span>,
</ins>                    <span class=<ins class="diff-new">
"hljs-attr">"href"</span>: <span class=
"hljs-string">"/events/thing_deleted"</span>,
</ins>                    <span class=<ins class="diff-new">
"hljs-attr">"subprotocol"</span>: <span class=
"hljs-string">"sse"</span>,
</ins>                    <span class="hljs-attr">"htv:headers"</span>: [<ins class="diff-new">
                        {
</ins>                            <span class=<ins class="diff-new">
"hljs-attr">"description"</span>: <span class=
"hljs-string">"ID of the last event for reconnection"</span>,
</ins>                            <span class=<ins class="diff-new">
"hljs-attr">"htv:fieldName"</span>: <span class=
"hljs-string">"Last-Event-ID"</span>
                        }
                    ],
</ins>                    <span class="hljs-attr">"response"</span>: {                        <span class=<ins class="diff-new">
"hljs-attr">"contentType"</span>: <span class=
"hljs-string">"text/event-stream"</span>
                    }
                }
            ]
        }
    }
}
</ins></code></pre></section></section></section></section><section id="security-considerations"><div class="header-wrapper"><h2 id="x8-security-considerations"><bdi class="secno"><ins class="diff-new">
8.
</ins></bdi><ins class="diff-new">
Security
Considerations
</ins></h2><a class="self-link" href="#security-considerations" aria-label= "Permalink for Section 8."></a></div><p><ins class="diff-new">
Security
is
a
cross-cutting
issue
that
needs
to
be
considered
in
all
WoT
building
blocks
and
WoT
implementations.
This
chapter
summarizes
some
general
issues
and
guidelines
to
help
preserve
the
security
of
concrete
WoT
discovery
implementations.
For
a
more
detailed
and
complete
analysis
of
both
security
and
privacy
issues,
see
the
</ins><em><ins class="diff-new">
WoT
Security
and
Privacy
Guidelines
</ins></em><ins class="diff-new">
specification
[
</ins><cite><a class="bibref" data-link-type="biblio" href= "#bib-wot-security" title= "Web of Things (WoT) Security and Privacy Guidelines"><ins class="diff-new">
WOT-SECURITY
</ins></a></cite><ins class="diff-new">
].
WoT
Thing
and
WoT
TDDs
are
also
web
services
and
should
be
implemented
using
best
practices
for
web
services.
In
addition
to
the
specific
security
considerations
below,
the
security
risks
and
mitigations
discussed
in
guides
such
as
the
OWASP
Top
10
[
</ins><cite><a class="bibref" data-link-type="biblio" href= "#bib-owasp-top-10" title="OWASP Top Ten"><ins class="diff-new">
OWASP-Top-10
</ins></a></cite><ins class="diff-new">
]
should
be
evaluated,
and
if
applicable,
addressed.
</ins></p><section id="security-consideration-dos"><div class="header-wrapper"><h3 id="x8-1-denial-of-service"><bdi class="secno"><ins class="diff-new">
8.1
</ins></bdi><ins class="diff-new">
Denial
of
Service
</ins></h3><a class="self-link" href="#security-consideration-dos" aria-label= "Permalink for Section 8.1"></a></div><p><ins class="diff-new">
Certain
functions
of
the
directory
service,
in
particular
search
queries,
may
require
significant
resources
to
execute
and
this
fact
can
be
used
to
launch
denial
of
service
(DoS)
attacks
against
WoT
Thing
Description
Directory
services.
In
such
an
attack
a
WoT
Directory
would
be
overloaded
by
requests
from
the
attacker
and
unable
to
service
other
requests.
</ins></p><dl><dt><ins class="diff-new">
Mitigations:
</ins></dt><dd><ul><li><ins class="diff-new">
A
WoT
Thing
Description
Directory
implementation
should
limit
the
number
of
queries
per
unit
time
from
the
same
requestor.
</ins></li><li><ins class="diff-new">
A
WoT
Thing
Description
Directory
implementation
should
limit
the
complexity
of
queries
(for
example,
the
total
length
of
the
query
expression
or
its
depth).
</ins></li><li><ins class="diff-new">
A
WoT
Thing
Description
Directory
implementation
should
use
a
watchdog
timer
to
abort
queries
that
take
more
than
a
certain
maximum
(implementation-configurable)
amount
of
time.
</ins></li></ul></dd></dl></section><section id="security-consideration-amp-ddos"><div class="header-wrapper"><h3 id="x8-2-amplification-and-distributed-denial-of-service"><bdi class="secno"><ins class="diff-new">
8.2
</ins></bdi><ins class="diff-new">
Amplification
and
Distributed
Denial
of
Service
</ins></h3><a class="self-link" href="#security-consideration-amp-ddos" aria-label="Permalink for Section 8.2"></a></div><p><ins class="diff-new">
It
may
also
be
possible
to
use
elements
of
WoT
Discovery
mechanisms
to
launch
distributed
denial
of
service
(DDoS)
attacks
against
other
targets.
In
such
an
attack
the
WoT
Discovery
service
itself
is
not
the
target.
Instead,
an
aspect
of
the
WoT
Discovery
service
would
be
exploited
to
generate
amplified
network
traffic
that
overloads
a
third
party,
the
actual
target.
Such
an
attack
has
two
requirements:
first,
the
ability
to
redirect
traffic
to
a
third
party,
and
second,
an
intermediary
service
that
can
be
exploited
to
amplify
network
traffic
from
the
attacker.
Redirection
of
network
traffic
is
possible
in
some
protocols,
such
as
unsecured
CoAP,
by
modifying
source
information
in
headers.
Amplification
is
possible
by
taking
advantage
of
three
multiplicative
factors:
the
ratio
of
request
to
response
payload
sizes,
use
of
"observe"
in
protocols
like
CoAP
(which
can
give
multiple
results
for
one
request),
and
use
of
multicast
(which
can
allow
multiple
servers
to
respond
to
one
request).
Services
which
do
not
support
authentication
are
ideal
intermediaries
for
such
an
indirect
attack.
Unfortunately,
the
Introduction
mechanisms
for
WoT
Discovery
are
meant
to
provide
open
access
mechanisms
to
initiate
discovery
and
might
be
exploited
for
this
purpose.
</ins></p><dl><dt><ins class="diff-new">
Mitigations:
</ins></dt><dd><ul><li><span class="rfc2119-assertion" id= "sec-tdd-intro-no-observe"><ins class="diff-new">
Open
implementations
of
Introduction
mechanisms
</ins><em class="rfc2119"><ins class="diff-new">
SHOULD
NOT
</ins></em><ins class="diff-new">
support
observe
or
similar
extended
result
subprotocols.
</ins></span></li><li><ins class="diff-new">
Open
implementations
of
Introduction
mechanisms
should
not
respond
to
multicast
requests
unless
this
is
absolutely
required
by
the
protocol.
If
support
for
multicast
is
required,
in
the
case
of
CoAP,
the
observations
made
in
[
</ins><cite><a class="bibref" data-link-type="biblio" href="#bib-amplification-attacks" title= "Amplification Attacks Using the Constrained Application Protocol (CoAP)"><ins class="diff-new">
AMPLIFICATION-ATTACKS
</ins></a></cite><ins class="diff-new">
]
are
relevant,
since
the
number
of
servers
that
might
respond
to
a
multicast
request
during
discovery
will
generally
not
be
known
in
advance.
</ins></li><li><ins class="diff-new">
Limit
the
size
of
responses
to
the
minimum.
The
total
size
of
responses
to
an
Introduction
on
the
public
internet
(outside
of
a
protected
local
network)
should
be
less
than
3x
the
size
of
the
total
size
of
request,
and
this
should
include
any
error
responses.
This
is
consistent
with
DDOS
mitigations
in
[
</ins><cite><a class= "bibref" data-link-type="biblio" href="#bib-rfc9000" title= "QUIC: A UDP-Based Multiplexed and Secure Transport"><ins class="diff-new">
RFC9000
</ins></a></cite><ins class="diff-new">
]
(QUIC)
and
HTTP/3.
Here
"total
size"
includes
any
headers
required
by
the
protocol
itself,
as
well
as
padding
in
the
request
to
allow
for
a
larger
response.
</ins></li><li><ins class="diff-new">
Introductions
should
rate-limit
responses
to
any
particular
request
source.
</ins></li><li><span class="rfc2119-assertion" id= "sec-tdd-intro-no-ext"><ins class="diff-new">
Introduction
mechanisms
on
a
segmented
network
behind
a
firewall
(e.g.
a
LAN)
</ins><em class="rfc2119"><ins class="diff-new">
SHOULD
NOT
</ins></em><ins class="diff-new">
respond
to
requests
that
are
(apparently)
from
outside
that
LAN.
</ins></span></li></ul><ins class="diff-new">
Of
particular
concern
are
Introduction
mechanisms
that
can
return
multiple
results,
such
as
CoRE-RD
and
DID.
It
may
be
necessary
to
use
authentication/authorization
on
such
Introduction
mechanisms
as
well
if
the
other
mitigations
above
are
not
sufficient.
A
recommended
alternative
is
to
move
multiple
results
from
such
Introductions
into
a
WoT
TDD,
which
can
then
be
protected
by
appropriate
authentication
and
authorization
measures.
Then
the
open
Introduction
mechanism
only
has
to
return
one
result,
the
URL
of
the
TDD.
Introduction
mechanisms
that
are
visible
on
the
open
internet
should
be
especially
careful
to
implement
the
above
mitigations,
and
perhaps
avoid
Introduction
mechanisms
that
can
return
multiple
URLs
completely.
</ins></dd></dl></section><section id="security-consideration-lan-self-discovery"><div class="header-wrapper"><h3 id="x8-3-self-discovery-on-lans"><bdi class="secno"><ins class="diff-new">
8.3
</ins></bdi><ins class="diff-new">
Self-Discovery
on
LANs
</ins></h3><a class="self-link" href= "#security-consideration-lan-self-discovery" aria-label= "Permalink for Section 8.3"></a></div><p><ins class="diff-new">
On
a
LAN,
certificates
and
browsers
may
not
be
able
to
property
set
up
TLS
for
HTTPS
because
browsers
expect
certificates
pointing
to
a
publicly-visible
URL.
Using
HTTP
is
common
practice
inside
LANs
but
in
combination
with
self-description
it
means
that
WoT
Things
would
be
essentially
be
making
TDs
visible
to
everyone
with
access
to
the
private
LAN.
Even
if
security
mechanisms
such
as
HTTP
passwords
were
used,
these
are
not
effective
(they
can
be
easily
discovered
by
a
traffic
analyser)
without
transport
security.
</ins></p><dl><dt><ins class="diff-new">
Mitigations:
</ins></dt><dd><p><span class="rfc2119-assertion" id="sec-self-psk"><ins class="diff-new">
PSK
(pre-shared
keys)
</ins><em class="rfc2119"><ins class="diff-new">
SHOULD
</ins></em><ins class="diff-new">
be
used
if
possible
on
LANs,
meaning
one
of
the
ciphersuites
in
[
</ins><cite><a class="bibref" data-link-type="biblio" href= "#bib-rfc4279" title= "Pre-Shared Key Ciphersuites for Transport Layer Security (TLS)"><ins class="diff-new">
RFC4279
</ins></a></cite><ins class="diff-new">
].
</ins></span><ins class="diff-new">
This
does
require
that
Things
are
assigned
PSKs
in
a
common
security
domain,
which
is
typically
done
by
following
an
onboarding
process.
Unfortunately,
specific
onboarding
processes
are
currently
out
of
scope
of
the
WoT
specifications.
</ins></p><p><ins class="diff-new">
An
alternative
is
to
depend
on
local
network
security
(i.e.
WEP).
This
is
not
the
best
solution
from
a
security
or
privacy
point
of
view
but
may
be
acceptable
in
some
contexts.
Note
however
that
all
users
with
access
to
the
network
would
in
turn
have
access
to
all
TDs
via
self-description.
</ins><span class="rfc2119-assertion" id="sec-self-segment"><ins class="diff-new">
If
Things
cannot
be
individually
secured
with
transport
security
and
authentication
and
authorization,
a
separate
network
</ins><em class="rfc2119"><ins class="diff-new">
SHOULD
</ins></em><ins class="diff-new">
be
set
up,
i.e.
with
an
alternative
SSID,
and
used
only
for
IoT
devices.
</ins></span><ins class="diff-new">
Using
a
segmented
network
reduces
the
need
for
distributing
the
password
to
this
network
to
those
who
need
access
to
the
set
of
IoT
devices
connected
to
it.
</ins></p><p><ins class="diff-new">
Another
alternative
is
to
use
a
reverse
proxy
service
based
in
the
cloud.
Secure
setup
can
be
accomplished
if
the
IoT
device
has
access
to
the
cloud,
since
the
proxy
server
can
have
a
public
URL
and
the
initial
connection
can
use
HTTPS,
then
open
a
secure
tunnel
over
a
websocket.
The
proxy
can
in
turn
re-expose
a
secure
endpoint,
and
possible
add
authentication.
The
disadvantages
of
this
approach
including
depending
on
an
external
cloud
service
and
the
need
to
expose
an
external
access
point
(which
is
itself
a
security
risk).
The
first
disadvantage
can
be
addressed
by
hosting
the
proxy
service
locally
and
exposing
a
public
URL
using
e.g.
dynamic
DNS
if
the
local
server
is
connected
through
an
ISP.
If
Things
cannot
be
individually
secured
with
transport
security
and
authentication
and
authorization,
then
they
may
be
made
available
for
general
access
via
a
proxy
that
can
provide
suitable
access
controls.
</ins></p></dd></dl></section></section><section id="privacy-considerations"><div class="header-wrapper"><h2 id="x9-privacy-considerations"><bdi class="secno"><ins class="diff-new">
9.
</ins></bdi><ins class="diff-new">
Privacy
Considerations
</ins></h2><a class="self-link" href="#privacy-considerations" aria-label= "Permalink for Section 9."></a></div><p><ins class="diff-new">
Privacy
is
a
cross-cutting
issue
that
needs
to
be
considered
in
all
WoT
building
blocks
and
WoT
implementations.
This
chapter
summarizes
some
general
issues
and
guidelines
to
help
preserve
the
privacy
of
concrete
WoT
discovery
implementations.
For
a
more
detailed
and
complete
analysis
of
both
security
and
privacy
issues,
see
the
</ins><em><ins class="diff-new">
WoT
Security
and
Privacy
Guidelines
</ins></em><ins class="diff-new">
specification
[
</ins><cite><a class="bibref" data-link-type="biblio" href= "#bib-wot-security" title= "Web of Things (WoT) Security and Privacy Guidelines"><ins class="diff-new">
WOT-SECURITY
</ins></a></cite><ins class="diff-new">
].
</ins></p><p><ins class="diff-new">
The
WoT
discovery
architecture
is
designed
to
avoid
a
dependence
on
the
privacy
of
existing
discovery
schemes
by
using
a
two-phase
approach
and
allowing
for
the
enforcement
of
authorization
before
metadata
release.
However
several
privacy
risks
still
exist.
These
are
listed
below
along
with
possible
mitigations.
The
level
of
risk
to
privacy
in
particular
depends
on
the
use
case
and
whether
there
is
a
risk
that
information
related
to
a
person
might
be
distributed
in
a
fashion
inconsistent
with
the
privacy
desires
of
that
person.
For
privacy
we
distinguish
the
following
broad
classes
of
use
case
scenarios:
</ins></p><dl><dt><ins class="diff-new">
Institutional
</ins></dt><dd><ins class="diff-new">
Both
the
Things
producing
metadata
and
the
Consumers
of
that
metadata
are
owned
and
controlled
by
an
institution
or
representatives
of
an
institution.
Example:
Automation
in
a
factory
where
a
control
system
is
accessing
the
state
of
an
assembly
line
in
order
to
evaluate
quality.
</ins></dd><dt><ins class="diff-new">
Service
</ins></dt><dd><ins class="diff-new">
The
Things
producing
metadata
are
owned
and
controlled
by
an
institution
or
representatives
of
an
institution
while
the
consumers
are
individuals.
Example:
driver
of
an
electric
vehicle
accessing
the
TD
for
a
charge
station
in
order
to
check
status
of
a
charge.
</ins></dd><dt><ins class="diff-new">
Personal
</ins></dt><dd><ins class="diff-new">
Both
the
Things
producing
metadata
and
the
Consumers
of
that
metadata
are
owned
and
controlled
by
the
same
individual.
Example:
A
smart
home
control
system
for
charging
an
electric
car
from
home-attached
solar
panels,
both
home
and
car
owned
by
the
same
person.
</ins></dd><dt><ins class="diff-new">
Personal
Peer-to-Peer
</ins></dt><dd><ins class="diff-new">
The
Things
producing
metadata
and
the
Consumers
of
that
metadata
are
owned
and
controlled
by
different
individuals.
Example:
A
smart
home
control
system
for
charging
a
guest's
electric
car
from
home-attached
solar
panels.
</ins></dd><dt><ins class="diff-new">
Institutional
Peer-to-Peer
</ins></dt><dd><ins class="diff-new">
The
Things
producing
metadata
and
the
Consumers
of
that
metadata
are
owned
and
controlled
by
different
institutions.
Example:
A
utility
provides
and
manages
power
delivered
to
a
factory,
and
the
factory
provides
an
interface
for
the
utility
to
negotiate
on-demand
power
usage
reductions.
</ins></dd><dt><ins class="diff-new">
Client
</ins></dt><dd><ins class="diff-new">
The
Things
producing
metadata
are
owned
and
controlled
by
an
individual
while
the
consumers
are
an
institution
or
representatives
of
an
institution.
Example:
A
personal
electric
vehicle
exposes
an
interface
to
a
public
charging
station
so
that
the
charging
station
can
evaluate
the
charge
status
of
the
vehicle.
</ins></dd></dl><p><ins class="diff-new">
All
of
these
in
fact
carry
privacy
risks.
Even
in
the
case
of
factory
automation,
there
is
the
chance
that
data
about
employee
performance
would
be
captured
and
would
have
to
be
managed
appropriately.
</ins></p><p><ins class="diff-new">
In
the
following
we
make
frequent
reference
to
"tracking".
This
term
covers
multiple
privacy
risks,
including
location
tracking
and
behavioral
profiling.
In
general,
the
definition
of
"profiling"
given
in
Article
4
of
the
GDPR
[
</ins><cite><a class="bibref" data-link-type="biblio" href="#bib-gdpr-defs" title= "General Data Protection Regulation (GDPR) Article 4 - Definitions"><ins class="diff-new">
GDPR-Defs
</ins></a></cite><ins class="diff-new">
]
is
to
be
considered
equivalent
to
"tracking"
as
used
in
this
document.
</ins></p><p><ins class="diff-new">
With
these
definitions
and
categories
established,
we
will
now
discuss
some
specific
privacy
risks
and
potential
mitigations.
</ins></p><section id="privacy-consideration-location-tracking"><div class="header-wrapper"><h3 id="x9-1-location-tracking-and-profiling"><bdi class= "secno"><ins class="diff-new">
9.1
</ins></bdi><ins class="diff-new">
Location
Tracking
and
Profiling
</ins></h3><a class="self-link" href= "#privacy-consideration-location-tracking" aria-label= "Permalink for Section 9.1"></a></div><p><ins class="diff-new">
A
discovery
service
may
potentially
allow
the
approximate
location
of
a
person
to
be
determined
without
their
consent.
This
risk
occurs
in
some
specific
circumstances
which
can
be
avoided
or
mitigated.
It
is
also
similar
to
the
risk
posed
by
other
network
services
such
as
DHCP
and
DNS.
</ins></p><p><ins class="diff-new">
For
this
risk
to
occur,
there
first
has
to
be
an
IoT
device
that
can
be
reliably
associated
with
a
person's
location,
such
as
a
necessary
medical
device
or
a
vehicle.
Note
that
the
risk
only
applies
to
personal
use
cases,
not
institutional
ones.
Secondly,
the
device
has
to
be
configured
to
register
automatically
with
the
nearest
directory
service.
In
this
case,
the
location
of
the
device
can
be
inferred
from
the
network
range
of
the
directory
service
and
the
location
of
the
person
inferred
from
the
location
of
the
device.
</ins></p><p><ins class="diff-new">
There
are
a
few
variants
of
this:
</ins></p><ul><li><ins class="diff-new">
The
TD
or
Thing
could
report
actual
location
information
so
no
inferencing
by
network
range
is
needed;
</ins></li><li><ins class="diff-new">
A
directory
could
support
actual
search
by
location;
</ins></li><li><ins class="diff-new">
Absence
of
a
TD
in
a
directory
could
reveal
negative
location
information.
For
example,
if
a
TD
times
out
and
is
removed
from
a
directory,
that
means
the
device
has
not
been
present
for
a
while,
which
could
be
used
to
infer
that
a
person
is
NOT
in
a
particular
location,
e.g.
not
at
home.
</ins></li></ul><p><ins class="diff-new">
Location
tracking
is
not
the
only
profiling
risk.
In
general,
"profiling"
includes
any
mechanism
used
to
evaluate
information
about
a
person,
including
economic
status,
health,
preferences,
interests,
reliability,
and
behavior.
Some
of
the
metadata
in
a
TD
can
be
used
to
infer
information
of
this
kind
if
the
described
Thing
can
be
associated
with
a
person.
Some
of
the
mitigations
below
are
also
applicable
to
this
more
general
definition
of
profiling.
</ins></p><p><ins class="diff-new">
Some
of
these
risks
are
shared
by
similar
services.
For
example,
DCHP
automatically
responds
to
requests
for
IP
addresses
on
a
local
network,
and
devices
typically
provide
an
identifier
(a
MAC
address)
as
part
of
this
process,
and
the
DHCP
server
maintains
a
registry.
In
theory,
someone
with
access
to
the
DHCP
server
in,
say,
a
cafe,
could
use
this
information
to
track
someone's
phone
and
infer
their
location.
</ins></p><dl><dt><ins class="diff-new">
Mitigations:
</ins></dt><dd><ins class="diff-new">
There
are
a
few
options
to
mitigate
these
risks:
</ins><ul><li><ins class="diff-new">
To
avoid
location
tracking
and
other
forms
of
profiling,
a
WoT
Thing
associated
with
a
person
may
disable
registration
with
public
directories.
Registration
would
still
be
possible
with
personal
directories,
for
example,
a
home
gateway,
but
a
user
could
disable
registration
at
other
locations.
This
has
the
disadvantage
that
functionality
is
lost:
personal
devices
cannot
be
discovered
in
public
locations.
This
could
be
addressed
by
having
internet-accessible
private
discovery
services.
For
example,
the
user's
home
gateway
could
provide
an
internet-accessible
service,
but
with
access
control
limiting
use
to
authorized
users.
</ins></li><li><ins class="diff-new">
To
avoid
location
tracking
and
other
forms
of
profiling,
a
WoT
Thing
associated
with
a
person
should
use
anonymous
TDs
when
registering
with
a
public
directories.
In
some
cases,
it
may
be
possible
to
use
anonymous
TDs
and
omit
explicit
IDs
from
TDs
submitted
to
a
TDD.
In
this
case
the
TDD
will
generate
a
local
ID
valid
only
in
that
TDD.
This
does,
however,
complicate
update
since
the
client
needs
to
remember
the
local
ID
assigned
by
the
TDD.
Anonymous
TDs
also
do
not
prevent
tracking
by
other
means,
such
as
fingerprinting.
</ins></li><li><ins class="diff-new">
To
avoid
location
tracking
and
other
forms
of
profiling,
a
WoT
Thing
associated
with
a
person
may
periodically
generate
new
IDs.
Using
fixed
IDs
makes
it
exceptionally
easy
to
track
devices.
This
problem
also
occurs
in
DHCP
with
MAC
address
and
there
is
a
similar
partial
mitigation:
generate
new
random
IDs
periodically.
There
are
however,
a
few
issues.
First
of
all,
other
identification
information
in
the
TD
needs
to
be
hidden.
For
example,
client
IDs
issued
by
CSPs
for
API
security
should
be
omitted
from
TDs
if
they
cannot
be
easily
changed.
Second,
if
the
device
generates
a
new
ID,
the
user
may
still
need
to
know
the
current
ID
to
find
the
device
via
discovery.
This
can
be
accomplished
however
by
generating
new
IDs
using
a
deterministic
cryptographic
generator
that
is
a
function
of
the
current
time.
However,
note
that
regenerating
IDs
alone
does
not
make
tracking
impossible
since
a
TD
might
be
fingerprinted.
Also,
updating
an
ID
might
be
observable
to
the
owner
of
the
directory
service,
who
could
track
and
record
the
updated
ID.
Even
if
the
TD
is
deleted
and
reinserted
the
association
could
be
inferred.
This
is
however
exactly
parallel
to
the
situation
with
DHCP
and
rotation
of
MAC
addresses.
In
general,
however,
generating
new
IDs
at
least
for
each
service
or
person
to
which
a
TD
is
supplied
makes
it
harder
to
connect
registration
events
at
different
locations
and
times.
It
is
also
prudent
to
generate
new
identifiers
upon
major
changes
in
configuration,
such
as
unregistering
from
a
local
network
or
hub
and
registering
with
a
new
one
(which
typically
indicates
a
change
in
ownership).
There
is
a
related
issue
with
long-lived
IP
addresses
which
might
need
to
be
updated
periodically
to
mitigate
tracking.
In
the
context
of
ipv6
[
</ins><cite><a class="bibref" data-link-type="biblio" href= "#bib-rfc8981" title= "Temporary Address Extensions for Stateless Address Autoconfiguration in IPv6"><ins class="diff-new">
RFC8981
</ins></a></cite><ins class="diff-new">
]
discusses
this.
Finally,
there
is
a
problem
with
devices
that
require
immutable
identifiers,
e.g.
medical
devices
in
such
jurisdictions.
This
is
discussed
in
[
</ins><cite><a class="bibref" data-link-type="biblio" href="#bib-wot-thing-description11" title= "Web of Things (WoT) Thing Description 1.1"><ins class="diff-new">
wot-thing-description11
</ins></a></cite><ins class="diff-new">
],
but
in
summary
the
problem
can
be
avoided
if
such
immutable
identifiers
are
made
available
only
as
protected
properties,
e.g.
via
affordances
requiring
authentication,
not
in
the
TD,
and
the
TD
identifier
itself
(if
used)
is
independent
of
the
immutable
identifier,
and
so
can
be
made
mutable.
</ins></li><li><span class="rfc2119-assertion" id= "priv-loc-priv-dir-access"><ins class="diff-new">
To
reduce
the
risk
of
negative
location
inferencing,
access
to
private
directories
</ins><em class= "rfc2119"><ins class="diff-new">
SHOULD
</ins></em><ins class="diff-new">
be
limited
by
using
access
controls.
</ins></span><ins class="diff-new">
If
an
attacker
cannot
access
the
service,
they
cannot
retrieve
information
to
infer
location.
Access
rights
provided
to
guests
(e.g.
for
Peer-to-Peer
Personal
scenarios)
should
be
appropriately
time-limited.
Use
of
long
time-to-live
values
may
be
appropriate
in
other
cases.
In
addition,
TDs
should
be
updated
in
a
directory
only
when
they
change.
For
example,
the
TD
for
a
car
may
only
be
updated
when
new
car
firmware
is
available
providing
new
services,
and
the
time-to-live
might
be
set
at
one
month
(covering
most
absences).
</ins></li><li><span class="rfc2119-assertion" id= "priv-loc-explicit-care"><ins class="diff-new">
When
explicit
location
information
is
available,
whether
stored
in
a
TD
or
available
in
a
property,
additional
care
</ins><em class="rfc2119"><ins class="diff-new">
SHOULD
</ins></em><ins class="diff-new">
be
taken
to
only
share
the
TD
and/or
access
to
the
device
with
trusted
partners,
including
directories.
</ins></span><ins class="diff-new">
If
the
TD
must
be
shared
with
a
public
directory,
the
location
information
may
be
stripped.
</ins></li></ul></dd></dl></section><section id="privacy-consideration-query-tracking"><div class="header-wrapper"><h3 id="x9-2-query-tracking"><bdi class="secno"><ins class="diff-new">
9.2
</ins></bdi><ins class="diff-new">
Query
Tracking
</ins></h3><a class="self-link" href="#privacy-consideration-query-tracking" aria-label="Permalink for Section 9.2"></a></div><p><ins class="diff-new">
A
directory
service
could
potentially
record
and
track
queries
by
an
individual,
identifying
that
individual
by
their
authenticated
identity
provided.
Then
the
set
of
queries
associated
with
an
individual
could
be
used
to
profile
that
individual,
and
specific
queries
may
also
reveal
personal
information
about
an
individual.
</ins></p><dl><dt><ins class="diff-new">
Mitigations:
</ins></dt><dd><p><ins class="diff-new">
When
accessing
a
public
directory,
like
any
other
public
web
service,
users
and
implementations
should
use
an
anonymous
identity
provider.
In
particular,
OAuth2
can
provide
tokens
which
don't
identify
specific
individuals,
they
just
assert
access
rights
proven
elsewhere.
</ins></p></dd></dl></section></section><section id="performance-considerations" class="informative"><div class="header-wrapper"><h2 id="x10-performance-considerations"><bdi class= "secno"><ins class="diff-new">
10.
</ins></bdi><ins class="diff-new">
Performance
Considerations
</ins></h2><a class="self-link" href="#performance-considerations" aria-label= "Permalink for Section 10."></a></div><p><em><ins class="diff-new">
This
section
is
non-normative.
</ins></em></p><section id="perf-incremental-transfer"><div class="header-wrapper"><h3 id="x10-1-incremental-transfer"><bdi class="secno"><ins class="diff-new">
10.1
</ins></bdi><ins class="diff-new">
Incremental
Transfer
</ins></h3><a class="self-link" href="#perf-incremental-transfer" aria-label= "Permalink for Section 10.1"></a></div><p><a href="#dfn-td" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-td-46"><ins class="diff-new">
TD
</ins></a><ins class="diff-new">
objects
are
not
constrained
in
size.
They
may
become
expensive
to
process
and
transfer
individually
or
collectively.
A
single
TD
or
a
list
of
TDs
could
be
too
large
for
a
constrained
device,
serving
its
own
TD
to
consumers,
submitting
it
to
a
directory,
or
consuming
other
TDs.
To
meet
such
requirements,
servers
should
support
incremental
transfer
of
payloads
using
protocol-specific
mechanisms:
</ins></p><ul><li><ins class="diff-new">
HTTP/1.1
servers
should
support
</ins><code><ins class="diff-new">
chunked
</ins></code><a href= "https://datatracker.ietf.org/doc/html/rfc7230#section-3.3.1"><ins class="diff-new">
Transfer-Encoding
</ins></a><ins class="diff-new">
[
</ins><cite><a class="bibref" data-link-type="biblio" href= "#bib-rfc7230" title= "Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing"><ins class="diff-new">
RFC7230
</ins></a></cite><ins class="diff-new">
]
to
receive
and
server
data
incrementally.
</ins></li><li><ins class="diff-new">
HTTP/2
servers
should
handle
the
data
incrementally
using
</ins><a href= "https://datatracker.ietf.org/doc/html/rfc7540#section-4"><ins class="diff-new">
HTTP
Frames
</ins></a><ins class="diff-new">
[
</ins><cite><a class="bibref" data-link-type="biblio" href= "#bib-rfc7540" title= "Hypertext Transfer Protocol Version 2 (HTTP/2)"><ins class="diff-new">
RFC7540
</ins></a></cite><ins class="diff-new">
].
The
HTTP/1.1
chunked
transfer
encoding
is
not
supported
in
HTTP/2.
</ins></li><li><ins class="diff-new">
CoAP
servers
must
suppoert
block-wise
transfer
[
</ins><cite><a class= "bibref" data-link-type="biblio" href="#bib-rfc7959" title= "Block-Wise Transfers in the Constrained Application Protocol (CoAP)"><ins class="diff-new">
RFC7959
</ins></a></cite><ins class="diff-new">
]
when
relying
on
an
unreliable
transport
protocol
like
UDP
and
should
support
it
when
using
a
reliable
transport
protocol
like
TCP
or
WebSockets
[
</ins><cite><a class="bibref" data-link-type="biblio" href="#bib-rfc8323" title= "CoAP (Constrained Application Protocol) over TCP, TLS, and WebSockets"><ins class="diff-new">
RFC8323
</ins></a></cite><ins class="diff-new">
].
</ins></li></ul><p><ins class="diff-new">
Most
HTTP
servers
and
clients
automatically
process
the
data
that
is
transferred
in
chunks.
Memory-constrained
clients
should
consider
consuming
the
received
data
incrementally,
instead
of
trying
to
load
a
whole
object
in
memory
for
de-serialization.
</ins></p></section></section><section id="iana-considerations" class="normative"><div class="header-wrapper"><h2 id="x11-iana-considerations"><bdi class="secno"><ins class="diff-new">
11.
</ins></bdi><ins class="diff-new">
IANA
Considerations
</ins></h2><a class="self-link" href="#iana-considerations" aria-label= "Permalink for Section 11."></a></div><section id="well-known-uri-suffix"><div class="header-wrapper"><h3 id="x11-1-well-known-uri-registration"><bdi class= "secno"><ins class="diff-new">
11.1
</ins></bdi><ins class="diff-new">
Well-Known
URI
Registration
</ins></h3><a class="self-link" href="#well-known-uri-suffix" aria-label= "Permalink for Section 11.1"></a></div><p><ins class="diff-new">
IANA
will
be
asked
to
allocate
the
following
value
into
the
Well-Known
URI
defined
in
[
</ins><cite><a class="bibref" data-link-type= "biblio" href="#bib-rfc8615" title= "Well-Known Uniform Resource Identifiers (URIs)"><ins class="diff-new">
RFC8615
</ins></a></cite><ins class="diff-new">
].
</ins></p><ul><li><ins class="diff-new">
URI
suffix:
</ins><code><ins class="diff-new">
wot
</ins></code></li></ul></section><section id="service-name"><div class="header-wrapper"><h3 id="x11-2-service-name-registration"><bdi class= "secno"><ins class="diff-new">
11.2
</ins></bdi><ins class="diff-new">
Service
Name
Registration
</ins></h3><a class="self-link" href="#service-name" aria-label= "Permalink for Section 11.2"></a></div><p><ins class="diff-new">
IANA
will
be
asked
to
allocate
the
following
value
into
Service
Name
and
Transport
Protocol
Port
Number
Registry
defined
in
[
</ins><cite><a class="bibref" data-link-type="biblio" href= "#bib-rfc6335" title= "Internet Assigned Numbers Authority (IANA) Procedures for the Management of the Service Name and Transport Protocol Port Number Registry"><ins class="diff-new">
RFC6335
</ins></a></cite><ins class="diff-new">
].
</ins></p><ul><li><ins class="diff-new">
Service
Name:
</ins><code><ins class="diff-new">
wot
</ins></code></li><li><ins class="diff-new">
Transport
Protocol:
TCP,
UDP
</ins></li><li><ins class="diff-new">
Description:
Service
name
to
search
for
the
Thing
Description
of
a
Thing
or
a
Thing
Description
Directory
in
the
</ins><abbr title= "World Wide Web Consortium"><ins class="diff-new">
W3C
</ins></abbr><ins class="diff-new">
Web
of
Things
</ins></li><li><ins class="diff-new">
Port
Number:
N/A
</ins></li><li><ins class="diff-new">
Assignment
notes:
We
use
</ins><code><ins class="diff-new">
_directory
</ins></code><ins class="diff-new">
subtype
for
a
Thing
Description
Directory.
</ins></li></ul></section><section id="core-resource-type"><div class="header-wrapper"><h3 id="x11-3-core-resource-types-registration"><bdi class= "secno"><ins class="diff-new">
11.3
</ins></bdi><ins class="diff-new">
CoRE
Resource
Types
Registration
</ins></h3><a class="self-link" href="#core-resource-type" aria-label= "Permalink for Section 11.3"></a></div><p><ins class="diff-new">
IANA
will
be
asked
to
allocate
the
following
values
into
the
Resource
Type
(
</ins><code><ins class="diff-new">
rt=
</ins></code><ins class="diff-new">
)
Link
Target
Attribute
Values
sub-registry
of
the
Constrained
Restful
Environments
(CoRE)
Parameters
registry
defined
in
[
</ins><cite><a class="bibref" data-link-type="biblio" href="#bib-rfc6690" title= "Constrained RESTful Environments (CoRE) Link Format"><ins class="diff-new">
RFC6690
</ins></a></cite><ins class="diff-new">
].
</ins></p><table class="def"><thead><tr><th><ins class="diff-new">
Value
</ins></th><th><ins class="diff-new">
Description
</ins></th><th><ins class="diff-new">
Reference
</ins></th></tr></thead><tbody><tr><td><code><ins class="diff-new">
wot.thing
</ins></code></td><td><ins class="diff-new">
Thing
Description
of
a
Thing
</ins></td><td><a href="#introduction-core-rd-sec" data-matched-text= "[[[#introduction-core-rd-sec]]]" class="sec-ref"><bdi class= "secno"><ins class="diff-new">
6.4
</ins></bdi><ins class="diff-new">
CoRE
Link
Format
and
CoRE
Resource
Directory
</ins></a></td></tr><tr><td><code><ins class="diff-new">
wot.directory
</ins></code></td><td><ins class="diff-new">
Thing
Description
of
a
</ins><a href= "#dfn-wot-thing-description-directory" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-wot-thing-description-directory-23"><ins class="diff-new">
Thing
Description
Directory
</ins></a></td><td><a href="#introduction-core-rd-sec" data-matched-text= "[[[#introduction-core-rd-sec]]]" class="sec-ref"><bdi class= "secno"><ins class="diff-new">
6.4
</ins></bdi><ins class="diff-new">
CoRE
Link
Format
and
CoRE
Resource
Directory
</ins></a></td></tr></tbody></table></section></section><section id="other-name-considerations" class="normative"><div class="header-wrapper"><h2 id="x12-other-name-registration-considerations"><bdi class= "secno"><ins class="diff-new">
12.
</ins></bdi><ins class="diff-new">
Other
Name
Registration
Considerations
</ins></h2><a class="self-link" href="#other-name-considerations" aria-label= "Permalink for Section 12."></a></div><section id="did-service-name"><div class="header-wrapper"><h3 id="x12-1-did-service-name-registration"><bdi class= "secno"><ins class="diff-new">
12.1
</ins></bdi><ins class="diff-new">
DID
Service
Name
Registration
</ins></h3><a class="self-link" href="#did-service-name" aria-label= "Permalink for Section 12.1"></a></div><p><ins class="diff-new">
The
following
values
will
be
allocated
for
the
Service
Type
used
in
DID
Documents.
</ins></p><table class="def"><thead><tr><th><ins class="diff-new">
Value
</ins></th><th><ins class="diff-new">
Description
</ins></th><th><ins class="diff-new">
Reference
</ins></th></tr></thead><tbody><tr><td><code><ins class="diff-new">
WotThing
</ins></code></td><td><ins class="diff-new">
Thing
Description
of
a
Thing
</ins></td><td><a href="#introduction-did-sec" data-matched-text= "[[[#introduction-did-sec]]]" class="sec-ref"><bdi class= "secno"><ins class="diff-new">
6.5
</ins></bdi><ins class="diff-new">
DID
Documents
</ins></a></td></tr><tr><td><code><ins class="diff-new">
WotDirectory
</ins></code></td><td><ins class="diff-new">
Thing
Description
of
a
</ins><a href= "#dfn-wot-thing-description-directory" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-wot-thing-description-directory-24"><ins class="diff-new">
Thing
Description
Directory
</ins></a></td><td><a href="#introduction-did-sec" data-matched-text= "[[[#introduction-did-sec]]]" class="sec-ref"><bdi class= "secno"><ins class="diff-new">
6.5
</ins></bdi><ins class="diff-new">
DID
Documents
</ins></a></td></tr></tbody></table></section></section><section id="tdd-extensions-jsonschema" class="appendix"><div class="header-wrapper"><h2 id="a-json-schema-for-wot-discovery-td-extensions"><bdi class= "secno"><ins class="diff-new">
A.
</ins></bdi><ins class="diff-new">
JSON
Schema
for
WoT
Discovery
TD-extensions
</ins></h2><a class="self-link" href="#tdd-extensions-jsonschema" aria-label= "Permalink for Appendix A."></a></div><ins class="diff-new">
The
following
JSON
Schema
specifies
the
extensions
used
in
</ins><a href= "#dfn-wot-enriched-thing-description" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-wot-enriched-thing-description-7"><ins class="diff-new">
Enriched
TDs
</ins></a>.<ins class="diff-new">
It
can
be
used
for
validating
</ins><a href="#dfn-td" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-td-47"><ins class="diff-new">
TDs
</ins></a><ins class="diff-new">
by
a
</ins><a href= "#dfn-wot-tdd" class="internalDFN" data-link-type="dfn" id= "ref-for-dfn-wot-tdd-1"><ins class="diff-new">
TDD
</ins></a><ins class="diff-new">
as
prescribed
in
</ins><a href= "#exploration-directory-api-things-validation" data-matched-text= "[[[#exploration-directory-api-things-validation]]]" class= "sec-ref"><bdi class="secno"><ins class="diff-new">
7.3.2.1.6
</ins></bdi><ins class="diff-new">
Validation
</ins></a>.<pre class="advisement" aria-busy="false"><code class="hljs json">{  <span class="hljs-attr">"title"</span>: <span class=<ins class="diff-new">
"hljs-string">"WoT Discovery TD-extensions Schema - 21 May 2021"</span>,
</ins>  <span class="hljs-attr">"description"</span>: <span class=<ins class="diff-new">
"hljs-string">"JSON Schema for validating TD instances with WoT Discovery extensions"</span>,
</ins>  <span class="hljs-attr">"$schema "</span>: <span class=<ins class="diff-new">
"hljs-string">"https://json-schema.org/draft/2019-09/schema#"</span>,
</ins>  <span class="hljs-attr">"type"</span>: <span class=<ins class="diff-new">
"hljs-string">"object"</span>,
</ins>  <span class="hljs-attr">"properties"</span>: {    <span class="hljs-attr">"registration"</span>: {      <span class="hljs-attr">"type"</span>: <span class=<ins class="diff-new">
"hljs-string">"object"</span>,
</ins>      <span class="hljs-attr">"properties"</span>: {        <span class="hljs-attr">"created"</span>: {          <span class="hljs-attr">"type"</span>: <span class=<ins class="diff-new">
"hljs-string">"string"</span>,
</ins>          <span class="hljs-attr">"format"</span>: <span class=<ins class="diff-new">
"hljs-string">"date-time"</span>
        },
</ins>        <span class="hljs-attr">"expires"</span>: {          <span class="hljs-attr">"type"</span>: <span class=<ins class="diff-new">
"hljs-string">"string"</span>,
</ins>          <span class="hljs-attr">"format"</span>: <span class=<ins class="diff-new">
"hljs-string">"date-time"</span>
        },
</ins>        <span class="hljs-attr">"retrieved"</span>: {          <span class="hljs-attr">"type"</span>: <span class=<ins class="diff-new">
"hljs-string">"string"</span>,
</ins>          <span class="hljs-attr">"format"</span>: <span class=<ins class="diff-new">
"hljs-string">"date-time"</span>
        },
</ins>        <span class="hljs-attr">"modified"</span>: {          <span class="hljs-attr">"type"</span>: <span class=<ins class="diff-new">
"hljs-string">"string"</span>,
</ins>          <span class="hljs-attr">"format"</span>: <span class=<ins class="diff-new">
"hljs-string">"date-time"</span>
        },
</ins>        <span class="hljs-attr">"ttl"</span>: {          <span class="hljs-attr">"type"</span>: <span class=<ins class="diff-new">
"hljs-string">"number"</span>
        }
      }
    }
  }
}
</ins></code></pre></section><section id="changes" class="appendix"><div class="header-wrapper"><h2 id="b-recent-specification-changes"><bdi class="secno"><ins class="diff-new">
B.
</ins></bdi><ins class="diff-new">
Recent
Specification
Changes
</ins></h2><a class="self-link" href="#changes" aria-label= "Permalink for Appendix B."></a></div><section id= "changes-from-19-january-2023-candidate-recommendation"><div class="header-wrapper"><h3 id="changes-from-cr"><bdi class="secno"><ins class="diff-new">
B.1
</ins></bdi><ins class="diff-new">
Changes
from
19
January
2023
Candidate
Recommendation
</ins></h3><a class="self-link" href="#changes-from-cr" aria-label= "Permalink for Appendix B.1"></a></div><ul><li><ins class="diff-new">
No
normative
changes
from
Candidate
Recommendation.
</ins></li><li><ins class="diff-new">
Add
reference
to
IoT'16
paper
by
Arne
Broering,
Soumya
Kanti
Datta,
and
Christian
Bonnet.
</ins></li><li><ins class="diff-new">
At-risk
assertions
that
did
not
receive
sufficient
implementations
were
removed
or
converted
to
informative
statements.
</ins></li><li><a href="diff.html"><ins class="diff-new">
HTML
Diff
</ins></a></li></ul></section><section id="changes-from-10-august-2022-working-draft"><div class="header-wrapper"><h3 id="changes-from-third-draft"><bdi class="secno"><ins class="diff-new">
B.2
</ins></bdi><ins class="diff-new">
Changes
from
10
August
2022
Working
Draft
</ins></h3><a class="self-link" href="#changes-from-third-draft" aria-label= "Permalink for Appendix B.2"></a></div><ul><li><ins class="diff-new">
Define
sorting
order
to
be
based
on
Unicode
code
points.
</ins></li><li><ins class="diff-new">
Clarify
3x
rule
for
DDoS
migitation
to
allow
padding
in
request,
and
require
it
only
outside
of
protected
local
networks.
</ins></li><li><ins class="diff-new">
Define
content
types
to
be
used
for
CoAP
servers,
paralleling
TD
servers.
</ins></li><li><ins class="diff-new">
Update
DID
service
names
and
refine
DID
assertions
and
add
examples
to
clarify
use
for
Introductions.
</ins></li><li><ins class="diff-new">
Update
DNS-SD
section
to
include
explicit
scheme
in
TXT
field.
</ins></li><li><ins class="diff-new">
Replace
reference
to
draft
CoRE-RD
with
final
specification
published
as
RFC9176.
</ins></li></ul></section><section id="changes-from-2-june-2021-working-draft"><div class="header-wrapper"><h3 id="changes-from-second-draft"><bdi class="secno"><ins class="diff-new">
B.3
</ins></bdi><ins class="diff-new">
Changes
from
2
June
2021
Working
Draft
</ins></h3><a class="self-link" href="#changes-from-second-draft" aria-label= "Permalink for Appendix B.3"></a></div><ul><li><ins class="diff-new">
Use
</ins><code><ins class="diff-new">
wot
</ins></code><ins class="diff-new">
for
well-known
URI
service
name.
</ins></li><li><ins class="diff-new">
Refer
to
TD
and
Architecture
specs
for
general
constraints
on
secure
transport.
</ins></li><li><ins class="diff-new">
Define
requirements
for
CoAP-based
TD
Servers.
</ins></li><li><ins class="diff-new">
Introduction
of
TD
Server
exploration,
with
self-description
as
a
special
case.
</ins></li><li><ins class="diff-new">
Elaboration
of
class
diagram
to
clarify
that
not
all
Directories
need
to
be
self-describing.
</ins></li><li><ins class="diff-new">
Clarify
and
consolidate
error
codes
and
ontology.
</ins></li><li><ins class="diff-new">
Add
assertions
for
UTF-8
supporting
internationalization.
</ins></li><li><ins class="diff-new">
Update
overview
figure
showing
introduction
and
exploration
mechanisms.
</ins></li><li><ins class="diff-new">
Add
Discoverer
section
defining
requirements
for
discovery
clients.
</ins></li><li><ins class="diff-new">
Use
Thing
Model
instead
of
a
Thing
Description
example
for
Directory
API.
</ins></li><li><ins class="diff-new">
Refactor
Directory
Service
API
(td-&gt;thing,
split
anonymous
create
action,
retrieve
one
and
search
as
actions,
listing
as
things
property,
split
events)
</ins></li><li><ins class="diff-new">
Add
amplification
DDOS
security
consideration.
</ins></li><li><ins class="diff-new">
Split
Security
and
Privacy
Considerations
into
separate
sections.
</ins></li><li><ins class="diff-new">
Define
status
of
search
mechanisms:
JSON
Path,
XPath,
and
SPARQL.
</ins></li><li><ins class="diff-new">
Pagination
as
array
and
pagination
as
collection.
</ins></li><li><ins class="diff-new">
Updates
to
events
API.
</ins></li><li><ins class="diff-new">
TD
expiry
management.
</ins></li><li><ins class="diff-new">
HEAD
method
support.
</ins></li></ul></section><section id= "changes-from-24-november-2020-first-public-working-draft"><div class="header-wrapper"><h3 id="changes-from-first-draft"><bdi class="secno"><ins class="diff-new">
B.4
</ins></bdi><ins class="diff-new">
Changes
from
24
November
2020
First
Public
Working
Draft
</ins></h3><a class="self-link" href="#changes-from-first-draft" aria-label= "Permalink for Appendix B.4"></a></div><ul><li><ins class="diff-new">
Update
name
of
directory
service
to
"Thing
Description
Directory"
with
acronym
TDD,
to
avoid
confusion
with
the
acronym
TD
used
for
Thing
Descriptions.
</ins></li><li><ins class="diff-new">
Elaboration
of
complete
API
for
registration
of
a
Thing
Description
with
a
Thing
Description
Directory,
including
support
for
creation,
update,
retrieval,
deletion,
and
listing.
</ins></li><li><ins class="diff-new">
Add
recommendation
that
TDs
be
validated
before
storage
in
a
directory.
Note:
this
corresponds
to
work
under
way
in
the
TD
spec
to
precisely
define
appropriate
levels
of
automatic
validation
for
different
contexts,
including
directory
registration.
</ins></li><li><ins class="diff-new">
Addition
of
Security
and
Privacy
Considerations
regarding
Denial
of
Service
and
Location
Tracking.
</ins></li><li><ins class="diff-new">
Addition
of
IANA
Considerations
regarding
CoRE
Resource
Types.
</ins></li><li><ins class="diff-new">
Definition
of
Enriched
TD
to
support
embedded
metadata
in
TDs
returned
by
a
TDD.
</ins></li><li><ins class="diff-new">
Updates
to
description
of
exploration
to
avoid
unnecessary
dependence
on
HTTP
(in
the
future,
other
protocols
may
be
supported).
</ins></li><li><ins class="diff-new">
Use
of
"resource
type"
instead
of
"endpoint
type"
when
describing
entry
in
CoRE
RD.
</ins></li><li><ins class="diff-new">
Addition
of
ontology
for
TDDs
that
include
the
type
</ins><code><ins class="diff-new">
DirectoryDescription
</ins></code><ins class="diff-new">
identifying
TDs
of
directories
and
a
type
</ins><code><ins class="diff-new">
LinkDescription
</ins></code><ins class="diff-new">
to
identify
a
TD
that
is
just
a
link
to
another
TD
(useful
for
referring
to
remote
directories
in
order
to
support
federation).
</ins></li><li><ins class="diff-new">
Add
section
for
self-description
exploration
mechanism.
This
supports
the
use
case
where
a
Thing
hosts
its
own
TD
and
peer-to-peer
Thing
communication.
</ins></li><li><ins class="diff-new">
Addition
of
diagram
showing
the
directory
information
model.
</ins></li><li><ins class="diff-new">
Removal
of
reference
to
Issue
16,
citing
CRUD
interface
requirements.
Replaced
with
CRUDL
(CRUD
+
Listing)
interface
requirement.
</ins></li><li><em class="rfc2119"><ins class="diff-new">
MAY
</ins></em><ins class="diff-new">
assertion
added
to
explicitly
permit
implementation
of
SPARQL
federation,
and
a
requirement
that
if
implemented,
it
needs
to
follow
the
SPARQL
1.1
specification.
</ins></li><li><ins class="diff-new">
Updates
to
references:
more
recent
versions
of
CoRE
RD,
DID
Core,
Eventsource,
JSON-LD,
and
JSON
Path
specifications.
Use
of
datatracker
service
(and
URLs)
to
reference
IETF
RFCs.
Addition
of
normative
references
to
RFC7396
and
RFC7540.
</ins></li></ul></section></section><section id="acknowledgements" class="appendix normative"><div class="header-wrapper"><h2 id="c-acknowledgments"><bdi class="secno"><ins class="diff-new">
C.
</ins></bdi><ins class="diff-new">
Acknowledgments
</ins></h2><a class="self-link" href="#acknowledgements" aria-label= "Permalink for Appendix C."></a></div><p><ins class="diff-new">
Special
thanks
to
Arne
Broering,
Soumya
Kanti
Datta,
and
Christian
Bonnet
for
their
survey
work
on
existing
discovery
mechannisms
in
IoT.
Special
thanks
to
Philipp
Blum,
Victor
Charpeney,
Ben
Francis,
Christian
Glomb,
Daniel
Peintner,
Christine
Perey,
Jan
Romann,
and
Elodie
Thieblin
for
their
contributions
to
this
document.
</ins></p><p><ins class="diff-new">
Many
thanks
to
the
</ins><abbr title= "World Wide Web Consortium"><ins class="diff-new">
W3C
</ins></abbr><ins class="diff-new">
staff,
especially
Kazuyuki
Ashimura
and
Dominique
Hazael-Massieux,
and
all
other
active
Participants
of
the
</ins><abbr title= "World Wide Web Consortium"><ins class="diff-new">
W3C
</ins></abbr><ins class="diff-new">
Web
of
Things
Interest
Group
(WoT
IG)
and
Working
Group
(WoT
WG)
for
their
support,
technical
input
and
suggestions
that
led
to
improvements
to
this
document.
</ins></p></section><section id="references" class="appendix"><div class="header-wrapper"><h2 id="d-references"><bdi class="secno"><ins class="diff-new">
D.
</ins></bdi><ins class="diff-new">
References
</ins></h2><a class="self-link" href="#references" aria-label= "Permalink for Appendix D."></a></div><section id="normative-references"><div class="header-wrapper"><h3 id="d-1-normative-references"><bdi class="secno"><ins class="diff-new">
D.1
</ins></bdi><ins class="diff-new">
Normative
references
</ins></h3><a class="self-link" href="#normative-references" aria-label= "Permalink for Appendix D.1"></a></div><dl class="bibliography"><dt id="bib-amplification-attacks"><ins class="diff-new">
[AMPLIFICATION-ATTACKS]
</ins></dt><dd><a href= "https://datatracker.ietf.org/doc/html/draft-irtf-t2trg-amplification-attacks"><cite><ins class="diff-new">
Amplification
Attacks
Using
the
Constrained
Application
Protocol
(CoAP)
</ins></cite></a>.<ins class="diff-new">
John
Preuß
Mattsson;
Göran
Selander;
Christian
Amsüss.
IETF.
DRAFT.
URL:
</ins><a href= "https://datatracker.ietf.org/doc/html/draft-irtf-t2trg-amplification-attacks"><ins class="diff-new">
https://datatracker.ietf.org/doc/html/draft-irtf-t2trg-amplification-attacks
</ins></a></dd><dt id="bib-did-core"><ins class="diff-new">
[DID-CORE]
</ins></dt><dd><a href="https://www.w3.org/TR/did-core/"><cite><ins class="diff-new">
Decentralized
Identifiers
(DIDs)
v1.0
</ins></cite></a>.<ins class="diff-new">
Manu
Sporny;
Amy
Guy;
Markus
Sabadello;
Drummond
Reed.
W3C.
19
July
2022.
W3C
Recommendation.
URL:
</ins><a href= "https://www.w3.org/TR/did-core/"><ins class="diff-new">
https://www.w3.org/TR/did-core/
</ins></a></dd><dt id="bib-did-spec-registries"><ins class="diff-new">
[did-spec-registries]
</ins></dt><dd><a href="https://www.w3.org/TR/did-spec-registries/"><cite><ins class="diff-new">
DID
Specification
Registries
</ins></cite></a>.<ins class="diff-new">
Orie
Steele;
Manu
Sporny;
Michael
Prorock.
W3C.
14
May
2023.
W3C
Working
Group
Note.
URL:
</ins><a href= "https://www.w3.org/TR/did-spec-registries/"><ins class="diff-new">
https://www.w3.org/TR/did-spec-registries/
</ins></a></dd><dt id="bib-discovery-categorization-iot"><ins class="diff-new">
[Discovery-Categorization-IoT]
</ins></dt><dd><a href= "https://dl.acm.org/doi/10.1145/2991561.2991570"><cite><ins class="diff-new">
A
Categorization
of
Discovery
Technologies
for
the
Internet
of
Things
</ins></cite></a>.<ins class="diff-new">
Arne
Broering;
Soumya
Kanti
Datta;
Christian
Bonnet.
Association
of
Computing
Machinery
(ACM):
IoT'16
Proceedings.
7-9
November
2016.
URL:
</ins><a href= "https://dl.acm.org/doi/10.1145/2991561.2991570"><ins class="diff-new">
https://dl.acm.org/doi/10.1145/2991561.2991570
</ins></a></dd><dt id="bib-gdpr-defs"><ins class="diff-new">
[GDPR-Defs]
</ins></dt><dd><a href="https://gdpr-info.eu/art-4-gdpr/"><cite><ins class="diff-new">
General
Data
Protection
Regulation
(GDPR)
Article
4
-
Definitions
</ins></cite></a>.<ins class="diff-new">
European
Union
(EU)
and
the
European
Economic
Area
(EEA).
URL:
</ins><a href= "https://gdpr-info.eu/art-4-gdpr/"><ins class="diff-new">
https://gdpr-info.eu/art-4-gdpr/
</ins></a></dd><dt id="bib-html"><ins class="diff-new">
[HTML]
</ins></dt><dd><a href="https://html.spec.whatwg.org/multipage/"><cite><ins class="diff-new">
HTML
Standard
</ins></cite></a>.<ins class="diff-new">
Anne
van
Kesteren;
Domenic
Denicola;
Ian
Hickson;
Philip
Jägenstedt;
Simon
Pieters.
WHATWG.
Living
Standard.
URL:
</ins><a href= "https://html.spec.whatwg.org/multipage/"><ins class="diff-new">
https://html.spec.whatwg.org/multipage/
</ins></a></dd><dt id="bib-json-ld11"><ins class="diff-new">
[JSON-LD11]
</ins></dt><dd><a href="https://www.w3.org/TR/json-ld11/"><cite><ins class="diff-new">
JSON-LD
1.1
</ins></cite></a>.<ins class="diff-new">
Gregg
Kellogg;
Pierre-Antoine
Champin;
Dave
Longley.
W3C.
16
July
2020.
W3C
Recommendation.
URL:
</ins><a href= "https://www.w3.org/TR/json-ld11/"><ins class="diff-new">
https://www.w3.org/TR/json-ld11/
</ins></a></dd><dt id="bib-owasp-top-10"><ins class="diff-new">
[OWASP-Top-10]
</ins></dt><dd><a href="https://owasp.org/www-project-top-ten/"><cite><ins class="diff-new">
OWASP
Top
Ten
</ins></cite></a>.<ins class="diff-new">
OWASP.
URL:
</ins><a href= "https://owasp.org/www-project-top-ten/"><ins class="diff-new">
https://owasp.org/www-project-top-ten/
</ins></a></dd><dt id="bib-rfc1738"><ins class="diff-new">
[RFC1738]
</ins></dt><dd><a href="https://www.rfc-editor.org/rfc/rfc1738"><cite><ins class="diff-new">
Uniform
Resource
Locators
(URL)
</ins></cite></a>.<ins class="diff-new">
T.
Berners-Lee;
L.
Masinter;
M.
McCahill.
IETF.
December
1994.
Proposed
Standard.
URL:
</ins><a href= "https://www.rfc-editor.org/rfc/rfc1738"><ins class="diff-new">
https://www.rfc-editor.org/rfc/rfc1738
</ins></a></dd><dt id="bib-rfc2119"><ins class="diff-new">
[RFC2119]
</ins></dt><dd><a href="https://www.rfc-editor.org/rfc/rfc2119"><cite><ins class="diff-new">
Key
words
for
use
in
RFCs
to
Indicate
Requirement
Levels
</ins></cite></a>.<ins class="diff-new">
S.
Bradner.
IETF.
March
1997.
Best
Current
Practice.
URL:
</ins><a href= "https://www.rfc-editor.org/rfc/rfc2119"><ins class="diff-new">
https://www.rfc-editor.org/rfc/rfc2119
</ins></a></dd><dt id="bib-rfc3339"><ins class="diff-new">
[RFC3339]
</ins></dt><dd><a href="https://www.rfc-editor.org/rfc/rfc3339"><cite><ins class="diff-new">
Date
and
Time
on
the
Internet:
Timestamps
</ins></cite></a>.<ins class="diff-new">
G.
Klyne;
C.
Newman.
IETF.
July
2002.
Proposed
Standard.
URL:
</ins><a href= "https://www.rfc-editor.org/rfc/rfc3339"><ins class="diff-new">
https://www.rfc-editor.org/rfc/rfc3339
</ins></a></dd><dt id="bib-rfc4122"><ins class="diff-new">
[RFC4122]
</ins></dt><dd><a href="https://www.rfc-editor.org/rfc/rfc4122"><cite><ins class="diff-new">
A
Universally
Unique
IDentifier
(UUID)
URN
Namespace
</ins></cite></a>.<ins class="diff-new">
P.
Leach;
M.
Mealling;
R.
Salz.
IETF.
July
2005.
Proposed
Standard.
URL:
</ins><a href= "https://www.rfc-editor.org/rfc/rfc4122"><ins class="diff-new">
https://www.rfc-editor.org/rfc/rfc4122
</ins></a></dd><dt id="bib-rfc4279"><ins class="diff-new">
[RFC4279]
</ins></dt><dd><a href= "https://www.rfc-editor.org/rfc/rfc4279"><cite><ins class="diff-new">
Pre-Shared
Key
Ciphersuites
for
Transport
Layer
Security
(TLS)
</ins></cite></a>.<ins class="diff-new">
P.
Eronen,
Ed.;
H.
Tschofenig,
Ed..
IETF.
December
2005.
Proposed
Standard.
URL:
</ins><a href= "https://www.rfc-editor.org/rfc/rfc4279"><ins class="diff-new">
https://www.rfc-editor.org/rfc/rfc4279
</ins></a></dd><dt id="bib-rfc6335"><ins class="diff-new">
[RFC6335]
</ins></dt><dd><a href="https://www.rfc-editor.org/rfc/rfc6335"><cite><ins class="diff-new">
Internet
Assigned
Numbers
Authority
(IANA)
Procedures
for
the
Management
of
the
Service
Name
and
Transport
Protocol
Port
Number
Registry
</ins></cite></a>.<ins class="diff-new">
M.
Cotton;
L.
Eggert;
J.
Touch;
M.
Westerlund;
S.
Cheshire.
IETF.
August
2011.
Best
Current
Practice.
URL:
</ins><a href="https://www.rfc-editor.org/rfc/rfc6335"><ins class="diff-new">
https://www.rfc-editor.org/rfc/rfc6335
</ins></a></dd><dt id="bib-rfc6690"><ins class="diff-new">
[RFC6690]
</ins></dt><dd><a href= "https://www.rfc-editor.org/rfc/rfc6690"><cite><ins class="diff-new">
Constrained
RESTful
Environments
(CoRE)
Link
Format
</ins></cite></a>.<ins class="diff-new">
Z.
Shelby.
IETF.
August
2012.
Proposed
Standard.
URL:
</ins><a href= "https://www.rfc-editor.org/rfc/rfc6690"><ins class="diff-new">
https://www.rfc-editor.org/rfc/rfc6690
</ins></a></dd><dt id="bib-rfc6762"><ins class="diff-new">
[RFC6762]
</ins></dt><dd><a href= "https://www.rfc-editor.org/rfc/rfc6762"><cite><ins class="diff-new">
Multicast
DNS
</ins></cite></a>.<ins class="diff-new">
S.
Cheshire;
M.
Krochmal.
IETF.
February
2013.
Proposed
Standard.
URL:
</ins><a href= "https://www.rfc-editor.org/rfc/rfc6762"><ins class="diff-new">
https://www.rfc-editor.org/rfc/rfc6762
</ins></a></dd><dt id="bib-rfc6763"><ins class="diff-new">
[RFC6763]
</ins></dt><dd><a href= "https://www.rfc-editor.org/rfc/rfc6763"><cite><ins class="diff-new">
DNS-Based
Service
Discovery
</ins></cite></a>.<ins class="diff-new">
S.
Cheshire;
M.
Krochmal.
IETF.
February
2013.
Proposed
Standard.
URL:
</ins><a href= "https://www.rfc-editor.org/rfc/rfc6763"><ins class="diff-new">
https://www.rfc-editor.org/rfc/rfc6763
</ins></a></dd><dt id="bib-rfc7231"><ins class="diff-new">
[RFC7231]
</ins></dt><dd><a href="https://httpwg.org/specs/rfc7231.html"><cite><ins class="diff-new">
Hypertext
Transfer
Protocol
(HTTP/1.1):
Semantics
and
Content
</ins></cite></a>.<ins class="diff-new">
R.
Fielding,
Ed.;
J.
Reschke,
Ed..
IETF.
June
2014.
Proposed
Standard.
URL:
</ins><a href= "https://httpwg.org/specs/rfc7231.html"><ins class="diff-new">
https://httpwg.org/specs/rfc7231.html
</ins></a></dd><dt id="bib-rfc7396"><ins class="diff-new">
[RFC7396]
</ins></dt><dd><a href="https://www.rfc-editor.org/rfc/rfc7396"><cite><ins class="diff-new">
JSON
Merge
Patch
</ins></cite></a>.<ins class="diff-new">
P.
Hoffman;
J.
Snell.
IETF.
October
2014.
Proposed
Standard.
URL:
</ins><a href= "https://www.rfc-editor.org/rfc/rfc7396"><ins class="diff-new">
https://www.rfc-editor.org/rfc/rfc7396
</ins></a></dd><dt id="bib-rfc7595"><ins class="diff-new">
[RFC7595]
</ins></dt><dd><a href= "https://www.rfc-editor.org/rfc/rfc7595"><cite><ins class="diff-new">
Guidelines
and
Registration
Procedures
for
URI
Schemes
</ins></cite></a>.<ins class="diff-new">
D.
Thaler,
Ed.;
T.
Hansen;
T.
Hardie.
IETF.
June
2015.
Best
Current
Practice.
URL:
</ins><a href= "https://www.rfc-editor.org/rfc/rfc7595"><ins class="diff-new">
https://www.rfc-editor.org/rfc/rfc7595
</ins></a></dd><dt id="bib-rfc7807"><ins class="diff-new">
[RFC7807]
</ins></dt><dd><a href="https://www.rfc-editor.org/rfc/rfc7807"><cite><ins class="diff-new">
Problem
Details
for
HTTP
APIs
</ins></cite></a>.<ins class="diff-new">
M.
Nottingham;
E.
Wilde.
IETF.
March
2016.
Proposed
Standard.
URL:
</ins><a href= "https://www.rfc-editor.org/rfc/rfc7807"><ins class="diff-new">
https://www.rfc-editor.org/rfc/rfc7807
</ins></a></dd><dt id="bib-rfc7959"><ins class="diff-new">
[RFC7959]
</ins></dt><dd><a href= "https://www.rfc-editor.org/rfc/rfc7959"><cite><ins class="diff-new">
Block-Wise
Transfers
in
the
Constrained
Application
Protocol
(CoAP)
</ins></cite></a>.<ins class="diff-new">
C.
Bormann;
Z.
Shelby,
Ed..
IETF.
August
2016.
Proposed
Standard.
URL:
</ins><a href= "https://www.rfc-editor.org/rfc/rfc7959"><ins class="diff-new">
https://www.rfc-editor.org/rfc/rfc7959
</ins></a></dd><dt id="bib-rfc8174"><ins class="diff-new">
[RFC8174]
</ins></dt><dd><a href= "https://www.rfc-editor.org/rfc/rfc8174"><cite><ins class="diff-new">
Ambiguity
of
Uppercase
vs
Lowercase
in
RFC
2119
Key
Words
</ins></cite></a>.<ins class="diff-new">
B.
Leiba.
IETF.
May
2017.
Best
Current
Practice.
URL:
</ins><a href= "https://www.rfc-editor.org/rfc/rfc8174"><ins class="diff-new">
https://www.rfc-editor.org/rfc/rfc8174
</ins></a></dd><dt id="bib-rfc8288"><ins class="diff-new">
[RFC8288]
</ins></dt><dd><a href="https://httpwg.org/specs/rfc8288.html"><cite><ins class="diff-new">
Web
Linking
</ins></cite></a>.<ins class="diff-new">
M.
Nottingham.
IETF.
October
2017.
Proposed
Standard.
URL:
</ins><a href= "https://httpwg.org/specs/rfc8288.html"><ins class="diff-new">
https://httpwg.org/specs/rfc8288.html
</ins></a></dd><dt id="bib-rfc8615"><ins class="diff-new">
[RFC8615]
</ins></dt><dd><a href= "https://www.rfc-editor.org/rfc/rfc8615"><cite><ins class="diff-new">
Well-Known
Uniform
Resource
Identifiers
(URIs)
</ins></cite></a>.<ins class="diff-new">
M.
Nottingham.
IETF.
May
2019.
Proposed
Standard.
URL:
</ins><a href= "https://www.rfc-editor.org/rfc/rfc8615"><ins class="diff-new">
https://www.rfc-editor.org/rfc/rfc8615
</ins></a></dd><dt id="bib-rfc8981"><ins class="diff-new">
[RFC8981]
</ins></dt><dd><a href= "https://www.rfc-editor.org/rfc/rfc8981"><cite><ins class="diff-new">
Temporary
Address
Extensions
for
Stateless
Address
Autoconfiguration
in
IPv6
</ins></cite></a>.<ins class="diff-new">
F.
Gont;
S.
Krishnan;
T.
Narten;
R.
Draves.
IETF.
February
2021.
Proposed
Standard.
URL:
</ins><a href= "https://www.rfc-editor.org/rfc/rfc8981"><ins class="diff-new">
https://www.rfc-editor.org/rfc/rfc8981
</ins></a></dd><dt id="bib-rfc9000"><ins class="diff-new">
[RFC9000]
</ins></dt><dd><a href="https://www.rfc-editor.org/rfc/rfc9000"><cite><ins class="diff-new">
QUIC:
A
UDP-Based
Multiplexed
and
Secure
Transport
</ins></cite></a>.<ins class="diff-new">
J.
Iyengar,
Ed.;
M.
Thomson,
Ed..
IETF.
May
2021.
Proposed
Standard.
URL:
</ins><a href= "https://www.rfc-editor.org/rfc/rfc9000"><ins class="diff-new">
https://www.rfc-editor.org/rfc/rfc9000
</ins></a></dd><dt id="bib-rfc9176"><ins class="diff-new">
[RFC9176]
</ins></dt><dd><a href= "https://www.rfc-editor.org/rfc/rfc9176"><cite><ins class="diff-new">
Constrained
RESTful
Environments
(CoRE)
Resource
Directory
</ins></cite></a>.<ins class="diff-new">
C.
Amsüss,
Ed.;
Z.
Shelby;
M.
Koster;
C.
Bormann;
P.
van
der
Stok.
IETF.
April
2022.
Proposed
Standard.
URL:
</ins><a href= "https://www.rfc-editor.org/rfc/rfc9176"><ins class="diff-new">
https://www.rfc-editor.org/rfc/rfc9176
</ins></a></dd><dt id="bib-sparql11-overview"><ins class="diff-new">
[SPARQL11-OVERVIEW]
</ins></dt><dd><a href="https://www.w3.org/TR/sparql11-overview/"><cite><ins class="diff-new">
SPARQL
1.1
Overview
</ins></cite></a>.<ins class="diff-new">
The
W3C
SPARQL
Working
Group.
W3C.
21
March
2013.
W3C
Recommendation.
URL:
</ins><a href= "https://www.w3.org/TR/sparql11-overview/"><ins class="diff-new">
https://www.w3.org/TR/sparql11-overview/
</ins></a></dd><dt id="bib-wot-architecture11"><ins class="diff-new">
[wot-architecture11]
</ins></dt><dd><a href="https://www.w3.org/TR/wot-architecture11/"><cite><ins class="diff-new">
Web
of
Things
(WoT)
Architecture
1.1
</ins></cite></a>.<ins class="diff-new">
Michael
Lagally;
Ryuichi
Matsukura;
Michael
McCool;
Kunihiko
Toumura.
W3C.
19
January
2023.
W3C
Candidate
Recommendation.
URL:
</ins><a href= "https://www.w3.org/TR/wot-architecture11/"><ins class="diff-new">
https://www.w3.org/TR/wot-architecture11/
</ins></a></dd><dt id="bib-wot-thing-description11"><ins class="diff-new">
[wot-thing-description11]
</ins></dt><dd><a href= "https://www.w3.org/TR/wot-thing-description11/"><cite><ins class="diff-new">
Web
of
Things
(WoT)
Thing
Description
1.1
</ins></cite></a>.<ins class="diff-new">
Sebastian
Käbisch;
Michael
McCool;
Ege
Korkan.
W3C.
19
January
2023.
W3C
Candidate
Recommendation.
URL:
</ins><a href= "https://www.w3.org/TR/wot-thing-description11/"><ins class="diff-new">
https://www.w3.org/TR/wot-thing-description11/
</ins></a></dd><dt id="bib-wot-usecases"><ins class="diff-new">
[wot-usecases]
</ins></dt><dd><a href="https://w3c.github.io/wot-usecases/"><cite><ins class="diff-new">
Web
of
Things
(WoT):
Use
Cases
</ins></cite></a>.<ins class="diff-new">
Michael
Lagally;
Michael
McCool;
Ryuichi
Matsukura;
Tomoaki
Mizushima.
W3C.
15
October
2020.
Editor's
Draft.
URL:
</ins><a href= "https://w3c.github.io/wot-usecases/"><ins class="diff-new">
https://w3c.github.io/wot-usecases/
</ins></a></dd><dt id="bib-xpath-31"><ins class="diff-new">
[xpath-31]
</ins></dt><dd><a href="https://www.w3.org/TR/xpath-31/"><cite><ins class="diff-new">
XML
Path
Language
(XPath)
3.1
</ins></cite></a>.<ins class="diff-new">
Jonathan
Robie;
Michael
Dyck;
Josh
Spiegel.
W3C.
21
March
2017.
W3C
Recommendation.
URL:
</ins><a href= "https://www.w3.org/TR/xpath-31/"><ins class="diff-new">
https://www.w3.org/TR/xpath-31/
</ins></a></dd></dl></section><section id="informative-references"><div class="header-wrapper"><h3 id="d-2-informative-references"><bdi class="secno"><ins class="diff-new">
D.2
</ins></bdi><ins class="diff-new">
Informative
references
</ins></h3><a class="self-link" href="#informative-references" aria-label= "Permalink for Appendix D.2"></a></div><dl class="bibliography"><dt id="bib-jsonpath"><ins class="diff-new">
[JSONPATH]
</ins></dt><dd><a href= "https://datatracker.ietf.org/doc/html/draft-ietf-jsonpath-base"><cite><ins class="diff-new">
JSONPath:
Query
expressions
for
JSON
</ins></cite></a>.<ins class="diff-new">
Stefan
Gössner;
Glyn
Normington;
Carsten
Bormann.
IETF.
DRAFT.
URL:
</ins><a href= "https://datatracker.ietf.org/doc/html/draft-ietf-jsonpath-base"><ins class="diff-new">
https://datatracker.ietf.org/doc/html/draft-ietf-jsonpath-base
</ins></a></dd><dt id="bib-ldp-paging"><ins class="diff-new">
[LDP-Paging]
</ins></dt><dd><a href="https://www.w3.org/TR/ldp-paging/"><cite><ins class="diff-new">
Linked
Data
Platform
Paging
1.0
</ins></cite></a>.<ins class="diff-new">
Steve
Speicher;
John
Arwe;
Ashok
Malhotra.
W3C.
30
June
2015.
W3C
Working
Group
Note.
URL:
</ins><a href= "https://www.w3.org/TR/ldp-paging/"><ins class="diff-new">
https://www.w3.org/TR/ldp-paging/
</ins></a></dd><dt id="bib-rest-iot"><ins class="diff-new">
[REST-IOT]
</ins></dt><dd><a href= "https://datatracker.ietf.org/doc/html/draft-irtf-t2trg-rest-iot-06"><cite><ins class="diff-new">
RESTful
Design
for
Internet
of
Things
Systems
</ins></cite></a>.<ins class="diff-new">
Ari
Keranen;
Matthias
Kovatsch;
Klaus
Hartke.
IETF.
11
May
2020.
URL:
</ins><a href= "https://datatracker.ietf.org/doc/html/draft-irtf-t2trg-rest-iot-06"><ins class="diff-new">
https://datatracker.ietf.org/doc/html/draft-irtf-t2trg-rest-iot-06
</ins></a></dd><dt id="bib-rfc7230"><ins class="diff-new">
[RFC7230]
</ins></dt><dd><a href="https://httpwg.org/specs/rfc7230.html"><cite><ins class="diff-new">
Hypertext
Transfer
Protocol
(HTTP/1.1):
Message
Syntax
and
Routing
</ins></cite></a>.<ins class="diff-new">
R.
Fielding,
Ed.;
J.
Reschke,
Ed..
IETF.
June
2014.
Proposed
Standard.
URL:
</ins><a href= "https://httpwg.org/specs/rfc7230.html"><ins class="diff-new">
https://httpwg.org/specs/rfc7230.html
</ins></a></dd><dt id="bib-rfc7540"><ins class="diff-new">
[RFC7540]
</ins></dt><dd><a href="https://httpwg.org/specs/rfc7540.html"><cite><ins class="diff-new">
Hypertext
Transfer
Protocol
Version
2
(HTTP/2)
</ins></cite></a>.<ins class="diff-new">
M.
Belshe;
R.
Peon;
M.
Thomson,
Ed..
IETF.
May
2015.
Proposed
Standard.
URL:
</ins><a href= "https://httpwg.org/specs/rfc7540.html"><ins class="diff-new">
https://httpwg.org/specs/rfc7540.html
</ins></a></dd><dt id="bib-rfc8323"><ins class="diff-new">
[RFC8323]
</ins></dt><dd><a href="https://www.rfc-editor.org/rfc/rfc8323"><cite><ins class="diff-new">
CoAP
(Constrained
Application
Protocol)
over
TCP,
TLS,
and
WebSockets
</ins></cite></a>.<ins class="diff-new">
C.
Bormann;
S.
Lemay;
H.
Tschofenig;
K.
Hartke;
B.
Silverajan;
B.
Raymor,
Ed..
IETF.
February
2018.
Proposed
Standard.
URL:
</ins><a href= "https://www.rfc-editor.org/rfc/rfc8323"><ins class="diff-new">
https://www.rfc-editor.org/rfc/rfc8323
</ins></a></dd><dt id="bib-wot-security"><ins class="diff-new">
[WOT-SECURITY]
</ins></dt><dd><a href="https://www.w3.org/TR/wot-security/"><cite><ins class="diff-new">
Web
of
Things
(WoT)
Security
and
Privacy
Guidelines
</ins></cite></a>.<ins class="diff-new">
Elena
Reshetova;
Michael
McCool.
W3C.
6
November
2019.
W3C
Working
Group
Note.
URL:
</ins><a href= "https://www.w3.org/TR/wot-security/"><ins class="diff-new">
https://www.w3.org/TR/wot-security/
</ins></a></dd></dl></section></section><p role="navigation" id="back-to-top"><a href="#title"><abbr title= "Back to Top"><ins class="diff-new">
↑
</ins></abbr></a></p><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-thing" aria-label= "Links in this document to definition: Thing"><div><a class="self-link" href="#dfn-thing" aria-label= "Permalink for definition: Thing. Activate to close this dialog."><ins class="diff-new">
Permalink
</ins></a></div><p><b><ins class="diff-new">
Referenced
in:
</ins></b></p><ul><li><a href="#ref-for-dfn-thing-1" title= "§ 6.4 CoRE Link Format and CoRE Resource Directory"><ins class="diff-new">
§
6.4
CoRE
Link
Format
and
CoRE
Resource
Directory
</ins></a></li><li><a href="#ref-for-dfn-thing-2" title="§ 6.5 DID Documents"><ins class="diff-new">
§
6.5
DID
Documents
</ins></a><a href="#ref-for-dfn-thing-3" title= "Reference 2"><ins class="diff-new">
(2)
</ins></a><a href="#ref-for-dfn-thing-4" title= "Reference 3"><ins class="diff-new">
(3)
</ins></a></li><li><a href="#ref-for-dfn-thing-5" title= "§ 7.2 Thing Description Server"><ins class="diff-new">
§
7.2
Thing
Description
Server
</ins></a></li><li><a href="#ref-for-dfn-thing-6" title= "§ 7.3 Thing Description Directory"><ins class="diff-new">
§
7.3
Thing
Description
Directory
</ins></a></li><li><a href="#ref-for-dfn-thing-7" title="§ 7.3.2.1.1 Creation"><ins class="diff-new">
§
7.3.2.1.1
Creation
</ins></a><a href="#ref-for-dfn-thing-8" title= "Reference 2"><ins class="diff-new">
(2)
</ins></a></li></ul></div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-thing-description" aria-label= "Links in this document to definition: Thing Description"><div><a class="self-link" href="#dfn-thing-description" aria-label= "Permalink for definition: Thing Description. Activate to close this dialog."><ins class="diff-new">
Permalink
</ins></a></div><p><b><ins class="diff-new">
Referenced
in:
</ins></b></p><ul><li><a href="#ref-for-dfn-thing-description-1" title= "§ 4. Architecture"><ins class="diff-new">
§
4.
Architecture
</ins></a></li></ul></div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-td" aria-label= "Links in this document to definition: TD"><div><a class="self-link" href="#dfn-td" aria-label= "Permalink for definition: TD. Activate to close this dialog."><ins class="diff-new">
Permalink
</ins></a></div><p><b><ins class="diff-new">
Referenced
in:
</ins></b></p><ul><li><a href="#ref-for-dfn-td-1" title="§ 6.5 DID Documents"><ins class="diff-new">
§
6.5
DID
Documents
</ins></a><a href="#ref-for-dfn-td-2" title= "Reference 2"><ins class="diff-new">
(2)
</ins></a><a href="#ref-for-dfn-td-3" title= "Reference 3"><ins class="diff-new">
(3)
</ins></a></li><li><a href="#ref-for-dfn-td-4" title="§ 7.1 Overview"><ins class="diff-new">
§
7.1
Overview
</ins></a><a href="#ref-for-dfn-td-5" title= "Reference 2"><ins class="diff-new">
(2)
</ins></a></li><li><a href="#ref-for-dfn-td-6" title="§ 7.1.1.2 ThingLink"><ins class="diff-new">
§
7.1.1.2
ThingLink
</ins></a><a href="#ref-for-dfn-td-7" title= "Reference 2"><ins class="diff-new">
(2)
</ins></a><a href="#ref-for-dfn-td-8" title= "Reference 3"><ins class="diff-new">
(3)
</ins></a></li><li><a href="#ref-for-dfn-td-9" title= "§ 7.2 Thing Description Server"><ins class="diff-new">
§
7.2
Thing
Description
Server
</ins></a><a href="#ref-for-dfn-td-10" title="Reference 2"><ins class="diff-new">
(2)
</ins></a><a href= "#ref-for-dfn-td-11" title="Reference 3"><ins class="diff-new">
(3)
</ins></a><a href= "#ref-for-dfn-td-12" title="Reference 4"><ins class="diff-new">
(4)
</ins></a><a href= "#ref-for-dfn-td-13" title="Reference 5"><ins class="diff-new">
(5)
</ins></a><a href= "#ref-for-dfn-td-14" title="Reference 6"><ins class="diff-new">
(6)
</ins></a><a href= "#ref-for-dfn-td-15" title="Reference 7"><ins class="diff-new">
(7)
</ins></a><a href= "#ref-for-dfn-td-16" title="Reference 8"><ins class="diff-new">
(8)
</ins></a><a href= "#ref-for-dfn-td-17" title="Reference 9"><ins class="diff-new">
(9)
</ins></a><a href= "#ref-for-dfn-td-18" title="Reference 10"><ins class="diff-new">
(10)
</ins></a><a href= "#ref-for-dfn-td-19" title="Reference 11"><ins class="diff-new">
(11)
</ins></a><a href= "#ref-for-dfn-td-20" title="Reference 12"><ins class="diff-new">
(12)
</ins></a><a href= "#ref-for-dfn-td-21" title="Reference 13"><ins class="diff-new">
(13)
</ins></a><a href= "#ref-for-dfn-td-22" title="Reference 14"><ins class="diff-new">
(14)
</ins></a><a href= "#ref-for-dfn-td-23" title="Reference 15"><ins class="diff-new">
(15)
</ins></a><a href= "#ref-for-dfn-td-24" title="Reference 16"><ins class="diff-new">
(16)
</ins></a><a href= "#ref-for-dfn-td-25" title="Reference 17"><ins class="diff-new">
(17)
</ins></a><a href= "#ref-for-dfn-td-26" title="Reference 18"><ins class="diff-new">
(18)
</ins></a><a href= "#ref-for-dfn-td-27" title="Reference 19"><ins class="diff-new">
(19)
</ins></a></li><li><a href="#ref-for-dfn-td-28" title= "§ 7.3.1 Information Model"><ins class="diff-new">
§
7.3.1
Information
Model
</ins></a><a href= "#ref-for-dfn-td-29" title="Reference 2"><ins class="diff-new">
(2)
</ins></a></li><li><a href="#ref-for-dfn-td-30" title= "§ 7.3.1.1 Registration Information"><ins class="diff-new">
§
7.3.1.1
Registration
Information
</ins></a><a href="#ref-for-dfn-td-31" title= "Reference 2"><ins class="diff-new">
(2)
</ins></a><a href="#ref-for-dfn-td-32" title= "Reference 3"><ins class="diff-new">
(3)
</ins></a><a href="#ref-for-dfn-td-33" title= "Reference 4"><ins class="diff-new">
(4)
</ins></a></li><li><a href="#ref-for-dfn-td-34" title= "§ 7.3.1.2 Registration Expiry"><ins class="diff-new">
§
7.3.1.2
Registration
Expiry
</ins></a><a href="#ref-for-dfn-td-35" title="Reference 2"><ins class="diff-new">
(2)
</ins></a><a href= "#ref-for-dfn-td-36" title="Reference 3"><ins class="diff-new">
(3)
</ins></a><a href= "#ref-for-dfn-td-37" title="Reference 4"><ins class="diff-new">
(4)
</ins></a></li><li><a href="#ref-for-dfn-td-38" title="§ 7.3.2.1 Things API"><ins class="diff-new">
§
7.3.2.1
Things
API
</ins></a><a href="#ref-for-dfn-td-39" title= "Reference 2"><ins class="diff-new">
(2)
</ins></a></li><li><a href="#ref-for-dfn-td-40" title="§ 7.3.2.1.1 Creation"><ins class="diff-new">
§
7.3.2.1.1
Creation
</ins></a><a href="#ref-for-dfn-td-41" title= "Reference 2"><ins class="diff-new">
(2)
</ins></a></li><li><a href="#ref-for-dfn-td-42" title="§ 7.3.2.1.3 Update"><ins class="diff-new">
§
7.3.2.1.3
Update
</ins></a></li><li><a href="#ref-for-dfn-td-43" title="§ 7.3.2.2 Events API"><ins class="diff-new">
§
7.3.2.2
Events
API
</ins></a><a href="#ref-for-dfn-td-44" title= "Reference 2"><ins class="diff-new">
(2)
</ins></a></li><li><a href="#ref-for-dfn-td-45" title="§ 7.3.2.3 Search API"><ins class="diff-new">
§
7.3.2.3
Search
API
</ins></a></li><li><a href="#ref-for-dfn-td-46" title= "§ 10.1 Incremental Transfer"><ins class="diff-new">
§
10.1
Incremental
Transfer
</ins></a></li><li><a href="#ref-for-dfn-td-47" title= "§ A. JSON Schema for WoT Discovery TD-extensions"><ins class="diff-new">
§
A.
JSON
Schema
for
WoT
Discovery
TD-extensions
</ins></a></li></ul></div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-thing-model" aria-label= "Links in this document to definition: Thing Model"><div><a class="self-link" href="#dfn-thing-model" aria-label= "Permalink for definition: Thing Model. Activate to close this dialog."><ins class="diff-new">
Permalink
</ins></a></div><p><b><ins class="diff-new">
Referenced
in:
</ins></b></p><ul><li><a href="#ref-for-dfn-thing-model-1" title= "§ 7.3.2.4 API Specification (Thing Model)"><ins class="diff-new">
§
7.3.2.4
API
Specification
(Thing
Model)
</ins></a></li></ul></div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-tm" aria-label= "Links in this document to definition: TM"><div><a class="self-link" href="#dfn-tm" aria-label= "Permalink for definition: TM. Activate to close this dialog."><ins class="diff-new">
Permalink
</ins></a></div><p><b><ins class="diff-new">
Referenced
in:
</ins></b></p><ul><li><ins class="diff-new">
Not
referenced
in
this
document.
</ins></li></ul></div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-property" aria-label= "Links in this document to definition: Property"><div><a class="self-link" href="#dfn-property" aria-label= "Permalink for definition: Property. Activate to close this dialog."><ins class="diff-new">
Permalink
</ins></a></div><p><b><ins class="diff-new">
Referenced
in:
</ins></b></p><ul><li><ins class="diff-new">
Not
referenced
in
this
document.
</ins></li></ul></div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-action" aria-label= "Links in this document to definition: Action"><div><a class="self-link" href="#dfn-action" aria-label= "Permalink for definition: Action. Activate to close this dialog."><ins class="diff-new">
Permalink
</ins></a></div><p><b><ins class="diff-new">
Referenced
in:
</ins></b></p><ul><li><ins class="diff-new">
Not
referenced
in
this
document.
</ins></li></ul></div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-event" aria-label= "Links in this document to definition: Event"><div><a class="self-link" href="#dfn-event" aria-label= "Permalink for definition: Event. Activate to close this dialog."><ins class="diff-new">
Permalink
</ins></a></div><p><b><ins class="diff-new">
Referenced
in:
</ins></b></p><ul><li><ins class="diff-new">
Not
referenced
in
this
document.
</ins></li></ul></div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-wot-anonymous-thing-description" aria-label= "Links in this document to definition: Anonymous TD"><div><a class="self-link" href= "#dfn-wot-anonymous-thing-description" aria-label= "Permalink for definition: Anonymous TD. Activate to close this dialog."><ins class="diff-new">
Permalink
</ins></a></div><p><b><ins class="diff-new">
Referenced
in:
</ins></b></p><ul><li><a href="#ref-for-dfn-wot-anonymous-thing-description-1" title= "§ 7.3.1.3 Anonymous TD Identifiers"><ins class="diff-new">
§
7.3.1.3
Anonymous
TD
Identifiers
</ins></a></li><li><a href="#ref-for-dfn-wot-anonymous-thing-description-2" title= "§ 7.3.2.1.1 Creation"><ins class="diff-new">
§
7.3.2.1.1
Creation
</ins></a><a href= "#ref-for-dfn-wot-anonymous-thing-description-3" title= "Reference 2"><ins class="diff-new">
(2)
</ins></a><a href= "#ref-for-dfn-wot-anonymous-thing-description-4" title= "Reference 3"><ins class="diff-new">
(3)
</ins></a><a href= "#ref-for-dfn-wot-anonymous-thing-description-5" title= "Reference 4"><ins class="diff-new">
(4)
</ins></a><a href= "#ref-for-dfn-wot-anonymous-thing-description-6" title= "Reference 5"><ins class="diff-new">
(5)
</ins></a></li><li><a href="#ref-for-dfn-wot-anonymous-thing-description-7" title= "§ 7.3.2.1.2 Retrieval"><ins class="diff-new">
§
7.3.2.1.2
Retrieval
</ins></a></li></ul></div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-wot-discoverer" aria-label= "Links in this document to definition: Discoverer"><div><a class="self-link" href="#dfn-wot-discoverer" aria-label= "Permalink for definition: Discoverer. Activate to close this dialog."><ins class="diff-new">
Permalink
</ins></a></div><p><b><ins class="diff-new">
Referenced
in:
</ins></b></p><ul><li><a href="#ref-for-dfn-wot-discoverer-1" title= "§ 5. Discoverer Process"><ins class="diff-new">
§
5.
Discoverer
Process
</ins></a></li><li><a href="#ref-for-dfn-wot-discoverer-2" title= "§ 7.3.2.1.1 Creation"><ins class="diff-new">
§
7.3.2.1.1
Creation
</ins></a></li></ul></div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-wot-discovery" aria-label= "Links in this document to definition: Discovery"><div><a class="self-link" href="#dfn-wot-discovery" aria-label= "Permalink for definition: Discovery. Activate to close this dialog."><ins class="diff-new">
Permalink
</ins></a></div><p><b><ins class="diff-new">
Referenced
in:
</ins></b></p><ul><li><ins class="diff-new">
Not
referenced
in
this
document.
</ins></li></ul></div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-wot-exploration" aria-label= "Links in this document to definition: Exploration"><div><a class="self-link" href="#dfn-wot-exploration" aria-label= "Permalink for definition: Exploration. Activate to close this dialog."><ins class="diff-new">
Permalink
</ins></a></div><p><b><ins class="diff-new">
Referenced
in:
</ins></b></p><ul><li><ins class="diff-new">
Not
referenced
in
this
document.
</ins></li></ul></div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-wot-introduction" aria-label= "Links in this document to definition: Introduction"><div><a class="self-link" href="#dfn-wot-introduction" aria-label= "Permalink for definition: Introduction. Activate to close this dialog."><ins class="diff-new">
Permalink
</ins></a></div><p><b><ins class="diff-new">
Referenced
in:
</ins></b></p><ul><li><ins class="diff-new">
Not
referenced
in
this
document.
</ins></li></ul></div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-wot-thing-description-server" aria-label= "Links in this document to definition: Thing Description Server"><div><a class="self-link" href="#dfn-wot-thing-description-server" aria-label= "Permalink for definition: Thing Description Server. Activate to close this dialog."><ins class="diff-new">
Permalink
</ins></a></div><p><b><ins class="diff-new">
Referenced
in:
</ins></b></p><ul><li><ins class="diff-new">
Not
referenced
in
this
document.
</ins></li></ul></div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-wot-td-server" aria-label= "Links in this document to definition: TD Server"><div><a class="self-link" href="#dfn-wot-td-server" aria-label= "Permalink for definition: TD Server. Activate to close this dialog."><ins class="diff-new">
Permalink
</ins></a></div><p><b><ins class="diff-new">
Referenced
in:
</ins></b></p><ul><li><a href="#ref-for-dfn-wot-td-server-1" title="§ 7.1 Overview"><ins class="diff-new">
§
7.1
Overview
</ins></a></li></ul></div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-wot-thing-description-directory" aria-label= "Links in this document to definition: Thing Description Directory"><div><a class="self-link" href= "#dfn-wot-thing-description-directory" aria-label= "Permalink for definition: Thing Description Directory. Activate to close this dialog."><ins class="diff-new">
Permalink
</ins></a></div><p><b><ins class="diff-new">
Referenced
in:
</ins></b></p><ul><li><a href="#ref-for-dfn-wot-thing-description-directory-1" title= "§ 6. Introduction Mechanisms"><ins class="diff-new">
§
6.
Introduction
Mechanisms
</ins></a><a href="#ref-for-dfn-wot-thing-description-directory-2" title= "Reference 2"><ins class="diff-new">
(2)
</ins></a></li><li><a href="#ref-for-dfn-wot-thing-description-directory-3" title= "§ 6.1 Direct"><ins class="diff-new">
§
6.1
Direct
</ins></a><a href= "#ref-for-dfn-wot-thing-description-directory-4" title= "Reference 2"><ins class="diff-new">
(2)
</ins></a></li><li><a href="#ref-for-dfn-wot-thing-description-directory-5" title= "§ 6.2 Well-Known URIs"><ins class="diff-new">
§
6.2
Well-Known
URIs
</ins></a><a href= "#ref-for-dfn-wot-thing-description-directory-6" title= "Reference 2"><ins class="diff-new">
(2)
</ins></a></li><li><a href="#ref-for-dfn-wot-thing-description-directory-7" title= "§ 6.3 DNS-Based Service Discovery"><ins class="diff-new">
§
6.3
DNS-Based
Service
Discovery
</ins></a><a href= "#ref-for-dfn-wot-thing-description-directory-8" title= "Reference 2"><ins class="diff-new">
(2)
</ins></a><a href= "#ref-for-dfn-wot-thing-description-directory-9" title= "Reference 3"><ins class="diff-new">
(3)
</ins></a><a href= "#ref-for-dfn-wot-thing-description-directory-10" title= "Reference 4"><ins class="diff-new">
(4)
</ins></a></li><li><a href="#ref-for-dfn-wot-thing-description-directory-11" title="§ 6.4 CoRE Link Format and CoRE Resource Directory"><ins class="diff-new">
§
6.4
CoRE
Link
Format
and
CoRE
Resource
Directory
</ins></a><a href= "#ref-for-dfn-wot-thing-description-directory-12" title= "Reference 2"><ins class="diff-new">
(2)
</ins></a><a href= "#ref-for-dfn-wot-thing-description-directory-13" title= "Reference 3"><ins class="diff-new">
(3)
</ins></a></li><li><a href="#ref-for-dfn-wot-thing-description-directory-14" title="§ 6.5 DID Documents"><ins class="diff-new">
§
6.5
DID
Documents
</ins></a><a href= "#ref-for-dfn-wot-thing-description-directory-15" title= "Reference 2"><ins class="diff-new">
(2)
</ins></a><a href= "#ref-for-dfn-wot-thing-description-directory-16" title= "Reference 3"><ins class="diff-new">
(3)
</ins></a><a href= "#ref-for-dfn-wot-thing-description-directory-17" title= "Reference 4"><ins class="diff-new">
(4)
</ins></a></li><li><a href="#ref-for-dfn-wot-thing-description-directory-18" title="§ 7.1 Overview"><ins class="diff-new">
§
7.1
Overview
</ins></a><a href= "#ref-for-dfn-wot-thing-description-directory-19" title= "Reference 2"><ins class="diff-new">
(2)
</ins></a></li><li><a href="#ref-for-dfn-wot-thing-description-directory-20" title="§ 7.3 Thing Description Directory"><ins class="diff-new">
§
7.3
Thing
Description
Directory
</ins></a></li><li><a href="#ref-for-dfn-wot-thing-description-directory-21" title="§ 7.3.1 Information Model"><ins class="diff-new">
§
7.3.1
Information
Model
</ins></a></li><li><a href="#ref-for-dfn-wot-thing-description-directory-22" title="§ 7.3.1.1 Registration Information"><ins class="diff-new">
§
7.3.1.1
Registration
Information
</ins></a></li><li><a href="#ref-for-dfn-wot-thing-description-directory-23" title="§ 11.3 CoRE Resource Types Registration"><ins class="diff-new">
§
11.3
CoRE
Resource
Types
Registration
</ins></a></li><li><a href="#ref-for-dfn-wot-thing-description-directory-24" title="§ 12.1 DID Service Name Registration"><ins class="diff-new">
§
12.1
DID
Service
Name
Registration
</ins></a></li></ul></div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-wot-tdd" aria-label= "Links in this document to definition: TDD"><div><a class="self-link" href="#dfn-wot-tdd" aria-label= "Permalink for definition: TDD. Activate to close this dialog."><ins class="diff-new">
Permalink
</ins></a></div><p><b><ins class="diff-new">
Referenced
in:
</ins></b></p><ul><li><a href="#ref-for-dfn-wot-tdd-1" title= "§ A. JSON Schema for WoT Discovery TD-extensions"><ins class="diff-new">
§
A.
JSON
Schema
for
WoT
Discovery
TD-extensions
</ins></a></li></ul></div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-wot-partial-thing-description" aria-label= "Links in this document to definition: Partial TD"><div><a class="self-link" href="#dfn-wot-partial-thing-description" aria-label= "Permalink for definition: Partial TD. Activate to close this dialog."><ins class="diff-new">
Permalink
</ins></a></div><p><b><ins class="diff-new">
Referenced
in:
</ins></b></p><ul><li><a href="#ref-for-dfn-wot-partial-thing-description-1" title= "§ 7.3.2.1.3 Update"><ins class="diff-new">
§
7.3.2.1.3
Update
</ins></a></li><li><a href="#ref-for-dfn-wot-partial-thing-description-2" title= "§ 7.3.2.2 Events API"><ins class="diff-new">
§
7.3.2.2
Events
API
</ins></a><a href= "#ref-for-dfn-wot-partial-thing-description-3" title= "Reference 2"><ins class="diff-new">
(2)
</ins></a></li></ul></div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-wot-enriched-thing-description" aria-label= "Links in this document to definition: Enriched TD"><div><a class="self-link" href= "#dfn-wot-enriched-thing-description" aria-label= "Permalink for definition: Enriched TD. Activate to close this dialog."><ins class="diff-new">
Permalink
</ins></a></div><p><b><ins class="diff-new">
Referenced
in:
</ins></b></p><ul><li><a href="#ref-for-dfn-wot-enriched-thing-description-1" title= "§ 7.3.1 Information Model"><ins class="diff-new">
§
7.3.1
Information
Model
</ins></a></li><li><a href="#ref-for-dfn-wot-enriched-thing-description-2" title= "§ 7.3.1.1 Registration Information"><ins class="diff-new">
§
7.3.1.1
Registration
Information
</ins></a><a href= "#ref-for-dfn-wot-enriched-thing-description-3" title= "Reference 2"><ins class="diff-new">
(2)
</ins></a></li><li><a href="#ref-for-dfn-wot-enriched-thing-description-4" title= "§ 7.3.2.1.2 Retrieval"><ins class="diff-new">
§
7.3.2.1.2
Retrieval
</ins></a><a href= "#ref-for-dfn-wot-enriched-thing-description-5" title= "Reference 2"><ins class="diff-new">
(2)
</ins></a></li><li><a href="#ref-for-dfn-wot-enriched-thing-description-6" title= "§ 7.3.2.1.6 Validation"><ins class="diff-new">
§
7.3.2.1.6
Validation
</ins></a></li><li><a href="#ref-for-dfn-wot-enriched-thing-description-7" title= "§ A. JSON Schema for WoT Discovery TD-extensions"><ins class="diff-new">
§
A.
JSON
Schema
for
WoT
Discovery
TD-extensions
</ins></a></li></ul></div><script id="respec-dfn-panel"><![CDATA[ (() =><ins class="diff-new">
{
//
@ts-check
if
(document.respec)
{
document.respec.ready.then(setupPanel);
}
else
{
setupPanel();
}
function
setupPanel()
{
const
listener
=
panelListener();
document.body.addEventListener("keydown",
listener);
document.body.addEventListener("click",
listener);
}
function
panelListener()
{
/**
@type
{HTMLElement}
*/
let
panel
=
null;
return
event
=>
{
const
{
target,
type
}
=
event;
if
(!(target
instanceof
HTMLElement))
return;
//
For
keys,
we
only
care
about
Enter
key
to
activate
the
panel
//
otherwise
it's
activated
via
a
click.
if
(type
===
"keydown"
&&
event.key
!==
"Enter")
return;
const
action
=
deriveAction(event);
switch
(action)
{
case
"show":
{
hidePanel(panel);
/**
@type
{HTMLElement}
*/
const
dfn
=
target.closest("dfn,
.index-term");
panel
=
document.getElementById(`dfn-panel-for-${dfn.id}`);
const
coords
=
deriveCoordinates(event);
displayPanel(dfn,
panel,
coords);
break;
}
case
"dock":
{
panel.style.left
=
null;
panel.style.top
=
null;
panel.classList.add("docked");
break;
}
case
"hide":
{
hidePanel(panel);
panel
=
null;
break;
}
}
};
}
/**
*
@param
{MouseEvent|KeyboardEvent}
event
*/
function
deriveCoordinates(event)
{
const
target
=
/**
@type
HTMLElement
*/
(event.target);
//
We
prevent
synthetic
AT
clicks
from
putting
//
the
dialog
in
a
weird
place.
The
AT
events
sometimes
//
lack
coordinates,
so
they
have
clientX/Y
=
0
const
rect
=
target.getBoundingClientRect();
if
(
event
instanceof
MouseEvent
&&
event.clientX
>
=
rect.left
&&
event.clientY
>
=
rect.top
)
{
//
The
event
probably
happened
inside
the
bounding
rect...
return
{
x:
event.clientX,
y:
event.clientY
};
}
//
Offset
to
the
middle
of
the
element
const
x
=
rect.x
+
rect.width
/
2;
//
Placed
at
the
bottom
of
the
element
const
y
=
rect.y
+
rect.height;
return
{
x,
y
};
}
/**
*
@param
{Event}
event
*/
function
deriveAction(event)
{
const
target
=
/**
@type
{HTMLElement}
*/
(event.target);
const
hitALink
=
!!target.closest("a");
if
(target.closest("dfn:not([data-cite]),
.index-term"))
{
return
hitALink
?
"none"
:
"show";
}
if
(target.closest(".dfn-panel"))
{
if
(hitALink)
{
return
target.classList.contains("self-link")
?
"hide"
:
"dock";
}
const
panel
=
target.closest(".dfn-panel");
return
panel.classList.contains("docked")
?
"hide"
:
"none";
}
if
(document.querySelector(".dfn-panel:not([hidden])"))
{
return
"hide";
}
return
"none";
}
/**
*
@param
{HTMLElement}
dfn
*
@param
{HTMLElement}
panel
*
@param
{{
x:
number,
y:
number
}}
clickPosition
*/
function
displayPanel(dfn,
panel,
{
x,
y
})
{
panel.hidden
=
false;
//
distance
(px)
between
edge
of
panel
and
the
pointing
triangle
(caret)
const
MARGIN
=
20;
const
dfnRects
=
dfn.getClientRects();
//
Find
the
`top`
offset
when
the
`dfn`
can
be
spread
across
multiple
lines
let
closestTop
=
0;
let
minDiff
=
Infinity;
for
(const
rect
of
dfnRects)
{
const
{
top,
bottom
}
=
rect;
const
diffFromClickY
=
Math.abs((top
+
bottom)
/
2
-
y);
if
(diffFromClickY
</ins>< minDiff) { minDiff = diffFromClickY; closestTop = top; } } const top = window.scrollY + closestTop + dfnRects[0].height; const left = x - MARGIN; panel.style.left = `${left}px`; panel.style.top = `${top}px`; // Find if the panel is flowing out of the window const panelRect = panel.getBoundingClientRect(); const SCREEN_WIDTH = Math.min(window.innerWidth, window.screen.width); if (panelRect.right ><ins class="diff-new">
SCREEN_WIDTH)
{
const
newLeft
=
Math.max(MARGIN,
x
+
MARGIN
-
panelRect.width);
const
newCaretOffset
=
left
-
newLeft;
panel.style.left
=
`${newLeft}px`;
/**
@type
{HTMLElement}
*/
const
caret
=
panel.querySelector(".caret");
caret.style.left
=
`${newCaretOffset}px`;
}
//
As
it's
a
dialog,
we
trap
focus.
//
TODO:
when
</ins><dialog><ins class="diff-new">
becomes
a
implemented,
we
should
really
//
use
that.
trapFocus(panel,
dfn);
}
/**
*
@param
{HTMLElement}
panel
*
@param
{HTMLElement}
dfn
*
@returns
*/
function
trapFocus(panel,
dfn)
{
/**
@type
NodeListOf
</ins><HTMLAnchorElement><ins class="diff-new">
elements
*/
const
anchors
=
panel.querySelectorAll("a[href]");
//
No
need
to
trap
focus
if
(!anchors.length)
return;
//
Move
focus
to
first
anchor
element
const
first
=
anchors.item(0);
first.focus();
const
trapListener
=
createTrapListener(anchors,
panel,
dfn);
panel.addEventListener("keydown",
trapListener);
//
Hiding
the
panel
releases
the
trap
const
mo
=
new
MutationObserver(records
=>
{
const
[record]
=
records;
const
target
=
/**
@type
HTMLElement
*/
(record.target);
if
(target.hidden)
{
panel.removeEventListener("keydown",
trapListener);
mo.disconnect();
}
});
mo.observe(panel,
{
attributes:
true,
attributeFilter:
["hidden"]
});
}
/**
*
*
@param
{NodeListOf
</ins><HTMLAnchorElement><ins class="diff-new">
}
anchors
*
@param
{HTMLElement}
panel
*
@param
{HTMLElement}
dfn
*
@returns
*/
function
createTrapListener(anchors,
panel,
dfn)
{
const
lastIndex
=
anchors.length
-
1;
let
currentIndex
=
0;
return
event
=>
{
switch
(event.key)
{
//
Hitting
"Tab"
traps
us
in
a
nice
loop
around
elements.
case
"Tab":
{
event.preventDefault();
currentIndex
+=
event.shiftKey
?
-1
:
+1;
if
(currentIndex
</ins>< 0) { currentIndex = lastIndex; } else if (currentIndex ><ins class="diff-new">
lastIndex)
{
currentIndex
=
0;
}
anchors.item(currentIndex).focus();
break;
}
//
Hitting
"Enter"
on
an
anchor
releases
the
trap.
case
"Enter":
hidePanel(panel);
break;
//
Hitting
"Escape"
returns
focus
to
dfn.
case
"Escape":
hidePanel(panel);
dfn.focus();
return;
}
};
}
/**
@param
{HTMLElement}
panel
*/
function
hidePanel(panel)
{
if
(!panel)
return;
panel.hidden
=
true;
panel.classList.remove("docked");
}
})()
]]>
</ins></script><script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script></body></html>
